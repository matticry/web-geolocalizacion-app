import{$ as Fr,A as Br,B as Dr,G as Rr,H as Zr,U as Gr,X as Ur,Z as Vr,ba as Hr,da as jr,ea as Wr,ha as $r,ja as qr,ka as Qr,la as Kr,ma as Xr,na as Yr,oa as Jr,qa as es,s as Tr,u as Ir,x as zr,y as Or,z as Ar}from"./chunk-XOGAT6YL.js";import{a as $t,b as wi}from"./chunk-MSZ233RX.js";import{$a as _r,A as yi,C as et,Ja as Ln,Ka as kt,La as fr,Pa as bi,Sa as mr,Ta as Ci,Tb as ki,Ua as Li,Ub as Mr,Va as wn,Zb as Sr,_ as Wt,ac as Pr,bc as Er,db as gr,dc as Nr,gb as vr,i as vi,ib as yr,k as cr,kb as xr,nb as br,o as ur,q as hr,rb as Cr,sb as Lr,t as wt,ta as pr,tb as wr,xb as kr,z as Je}from"./chunk-MPAEZOI7.js";import{Ab as at,Bb as lt,Cb as q,Cc as ct,D as jo,Db as v,Eb as y,Fb as E,Gb as J,Hb as Q,I as _n,Lb as _i,Mb as de,P as gn,Qb as ee,Rb as I,Sa as Xo,Sb as tr,T as Wo,Tb as ir,Tc as ze,Ub as Re,Uc as lr,V as $o,Vb as vn,W as qo,Wb as be,X as je,Xa as M,Xb as Ce,Zc as dr,_c as yn,a as Vt,aa as Ke,ab as We,ad as xi,b as Vo,ba as Qo,bc as nr,cc as Xe,cd as xn,d as Fo,dc as k,dd as bn,e as pn,ea as st,ec as Ye,f as yt,fa as bt,fc as fe,fd as Cn,gb as Ct,gc as Ft,hb as Yo,hc as or,i as fn,ic as Te,jc as Se,ka as U,kb as Jo,kc as Pe,l as fi,la as V,m as xt,mb as te,nc as rr,ob as mi,oc as gi,pb as er,pc as sr,q as mn,rc as ar,v as Ho,xb as j,ya as Ko,yb as W,yc as Ht,zb as Lt,zc as jt}from"./chunk-6U6YA3Y5.js";var as=Fo((Ti,ss)=>{"use strict";(function(h,a){typeof Ti=="object"&&typeof ss<"u"?a(Ti):typeof define=="function"&&define.amd?define(["exports"],a):(h=typeof globalThis<"u"?globalThis:h||self,a(h.leaflet={}))})(Ti,function(h){"use strict";var a="1.9.4";function r(e){var t,i,o,s;for(i=1,o=arguments.length;i<o;i++){s=arguments[i];for(t in s)e[t]=s[t]}return e}var n=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}();function l(e,t){var i=Array.prototype.slice;if(e.bind)return e.bind.apply(e,i.call(arguments,1));var o=i.call(arguments,2);return function(){return e.apply(t,o.length?o.concat(i.call(arguments)):arguments)}}var u=0;function d(e){return"_leaflet_id"in e||(e._leaflet_id=++u),e._leaflet_id}function m(e,t,i){var o,s,c,p;return p=function(){o=!1,s&&(c.apply(i,s),s=!1)},c=function(){o?s=arguments:(e.apply(i,arguments),setTimeout(p,t),o=!0)},c}function x(e,t,i){var o=t[1],s=t[0],c=o-s;return e===o&&i?e:((e-s)%c+c)%c+s}function _(){return!1}function C(e,t){if(t===!1)return e;var i=Math.pow(10,t===void 0?6:t);return Math.round(e*i)/i}function b(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function P(e){return b(e).split(/\s+/)}function T(e,t){Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?n(e.options):{});for(var i in t)e.options[i]=t[i];return e.options}function X(e,t,i){var o=[];for(var s in e)o.push(encodeURIComponent(i?s.toUpperCase():s)+"="+encodeURIComponent(e[s]));return(!t||t.indexOf("?")===-1?"?":"&")+o.join("&")}var Z=/\{ *([\w_ -]+) *\}/g;function ie(e,t){return e.replace(Z,function(i,o){var s=t[o];if(s===void 0)throw new Error("No value provided for variable "+i);return typeof s=="function"&&(s=s(t)),s})}var ne=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function Ze(e,t){for(var i=0;i<e.length;i++)if(e[i]===t)return i;return-1}var ye="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Mt(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var Tn=0;function Sn(e){var t=+new Date,i=Math.max(0,16-(t-Tn));return Tn=t+i,window.setTimeout(e,i)}var Ii=window.requestAnimationFrame||Mt("RequestAnimationFrame")||Sn,Pn=window.cancelAnimationFrame||Mt("CancelAnimationFrame")||Mt("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function me(e,t,i){if(i&&Ii===Sn)e.call(t);else return Ii.call(window,l(e,t))}function Le(e){e&&Pn.call(window,e)}var hs={__proto__:null,extend:r,create:n,bind:l,get lastId(){return u},stamp:d,throttle:m,wrapNum:x,falseFn:_,formatNum:C,trim:b,splitWords:P,setOptions:T,getParamString:X,template:ie,isArray:ne,indexOf:Ze,emptyImageUrl:ye,requestFn:Ii,cancelFn:Pn,requestAnimFrame:me,cancelAnimFrame:Le};function Ge(){}Ge.extend=function(e){var t=function(){T(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=t.__super__=this.prototype,o=n(i);o.constructor=t,t.prototype=o;for(var s in this)Object.prototype.hasOwnProperty.call(this,s)&&s!=="prototype"&&s!=="__super__"&&(t[s]=this[s]);return e.statics&&r(t,e.statics),e.includes&&(ds(e.includes),r.apply(null,[o].concat(e.includes))),r(o,e),delete o.statics,delete o.includes,o.options&&(o.options=i.options?n(i.options):{},r(o.options,e.options)),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var c=0,p=o._initHooks.length;c<p;c++)o._initHooks[c].call(this)}},t},Ge.include=function(e){var t=this.prototype.options;return r(this.prototype,e),e.options&&(this.prototype.options=t,this.mergeOptions(e.options)),this},Ge.mergeOptions=function(e){return r(this.prototype.options,e),this},Ge.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),i=typeof e=="function"?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};function ds(e){if(!(typeof L>"u"||!L||!L.Mixin)){e=ne(e)?e:[e];for(var t=0;t<e.length;t++)e[t]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var xe={on:function(e,t,i){if(typeof e=="object")for(var o in e)this._on(o,e[o],t);else{e=P(e);for(var s=0,c=e.length;s<c;s++)this._on(e[s],t,i)}return this},off:function(e,t,i){if(!arguments.length)delete this._events;else if(typeof e=="object")for(var o in e)this._off(o,e[o],t);else{e=P(e);for(var s=arguments.length===1,c=0,p=e.length;c<p;c++)s?this._off(e[c]):this._off(e[c],t,i)}return this},_on:function(e,t,i,o){if(typeof t!="function"){console.warn("wrong listener type: "+typeof t);return}if(this._listens(e,t,i)===!1){i===this&&(i=void 0);var s={fn:t,ctx:i};o&&(s.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(s)}},_off:function(e,t,i){var o,s,c;if(this._events&&(o=this._events[e],!!o)){if(arguments.length===1){if(this._firingCount)for(s=0,c=o.length;s<c;s++)o[s].fn=_;delete this._events[e];return}if(typeof t!="function"){console.warn("wrong listener type: "+typeof t);return}var p=this._listens(e,t,i);if(p!==!1){var f=o[p];this._firingCount&&(f.fn=_,this._events[e]=o=o.slice()),o.splice(p,1)}}},fire:function(e,t,i){if(!this.listens(e,i))return this;var o=r({},t,{type:e,target:this,sourceTarget:t&&t.sourceTarget||this});if(this._events){var s=this._events[e];if(s){this._firingCount=this._firingCount+1||1;for(var c=0,p=s.length;c<p;c++){var f=s[c],g=f.fn;f.once&&this.off(e,g,f.ctx),g.call(f.ctx||this,o)}this._firingCount--}}return i&&this._propagateEvent(o),this},listens:function(e,t,i,o){typeof e!="string"&&console.warn('"string" type argument expected');var s=t;typeof t!="function"&&(o=!!t,s=void 0,i=void 0);var c=this._events&&this._events[e];if(c&&c.length&&this._listens(e,s,i)!==!1)return!0;if(o){for(var p in this._eventParents)if(this._eventParents[p].listens(e,t,i,o))return!0}return!1},_listens:function(e,t,i){if(!this._events)return!1;var o=this._events[e]||[];if(!t)return!!o.length;i===this&&(i=void 0);for(var s=0,c=o.length;s<c;s++)if(o[s].fn===t&&o[s].ctx===i)return s;return!1},once:function(e,t,i){if(typeof e=="object")for(var o in e)this._on(o,e[o],t,!0);else{e=P(e);for(var s=0,c=e.length;s<c;s++)this._on(e[s],t,i,!0)}return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[d(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[d(e)],this},_propagateEvent:function(e){for(var t in this._eventParents)this._eventParents[t].fire(e.type,r({layer:e.target,propagatedFrom:e.target},e),!0)}};xe.addEventListener=xe.on,xe.removeEventListener=xe.clearAllEventListeners=xe.off,xe.addOneTimeEventListener=xe.once,xe.fireEvent=xe.fire,xe.hasEventListeners=xe.listens;var Tt=Ge.extend(xe);function D(e,t,i){this.x=i?Math.round(e):e,this.y=i?Math.round(t):t}var En=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};D.prototype={clone:function(){return new D(this.x,this.y)},add:function(e){return this.clone()._add(B(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(B(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new D(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new D(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=En(this.x),this.y=En(this.y),this},distanceTo:function(e){e=B(e);var t=e.x-this.x,i=e.y-this.y;return Math.sqrt(t*t+i*i)},equals:function(e){return e=B(e),e.x===this.x&&e.y===this.y},contains:function(e){return e=B(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+C(this.x)+", "+C(this.y)+")"}};function B(e,t,i){return e instanceof D?e:ne(e)?new D(e[0],e[1]):e==null?e:typeof e=="object"&&"x"in e&&"y"in e?new D(e.x,e.y):new D(e,t,i)}function oe(e,t){if(e)for(var i=t?[e,t]:e,o=0,s=i.length;o<s;o++)this.extend(i[o])}oe.prototype={extend:function(e){var t,i;if(!e)return this;if(e instanceof D||typeof e[0]=="number"||"x"in e)t=i=B(e);else if(e=_e(e),t=e.min,i=e.max,!t||!i)return this;return!this.min&&!this.max?(this.min=t.clone(),this.max=i.clone()):(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(i.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(i.y,this.max.y)),this},getCenter:function(e){return B((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return B(this.min.x,this.max.y)},getTopRight:function(){return B(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,i;return typeof e[0]=="number"||e instanceof D?e=B(e):e=_e(e),e instanceof oe?(t=e.min,i=e.max):t=i=e,t.x>=this.min.x&&i.x<=this.max.x&&t.y>=this.min.y&&i.y<=this.max.y},intersects:function(e){e=_e(e);var t=this.min,i=this.max,o=e.min,s=e.max,c=s.x>=t.x&&o.x<=i.x,p=s.y>=t.y&&o.y<=i.y;return c&&p},overlaps:function(e){e=_e(e);var t=this.min,i=this.max,o=e.min,s=e.max,c=s.x>t.x&&o.x<i.x,p=s.y>t.y&&o.y<i.y;return c&&p},isValid:function(){return!!(this.min&&this.max)},pad:function(e){var t=this.min,i=this.max,o=Math.abs(t.x-i.x)*e,s=Math.abs(t.y-i.y)*e;return _e(B(t.x-o,t.y-s),B(i.x+o,i.y+s))},equals:function(e){return e?(e=_e(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight())):!1}};function _e(e,t){return!e||e instanceof oe?e:new oe(e,t)}function ge(e,t){if(e)for(var i=t?[e,t]:e,o=0,s=i.length;o<s;o++)this.extend(i[o])}ge.prototype={extend:function(e){var t=this._southWest,i=this._northEast,o,s;if(e instanceof K)o=e,s=e;else if(e instanceof ge){if(o=e._southWest,s=e._northEast,!o||!s)return this}else return e?this.extend(F(e)||ae(e)):this;return!t&&!i?(this._southWest=new K(o.lat,o.lng),this._northEast=new K(s.lat,s.lng)):(t.lat=Math.min(o.lat,t.lat),t.lng=Math.min(o.lng,t.lng),i.lat=Math.max(s.lat,i.lat),i.lng=Math.max(s.lng,i.lng)),this},pad:function(e){var t=this._southWest,i=this._northEast,o=Math.abs(t.lat-i.lat)*e,s=Math.abs(t.lng-i.lng)*e;return new ge(new K(t.lat-o,t.lng-s),new K(i.lat+o,i.lng+s))},getCenter:function(){return new K((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new K(this.getNorth(),this.getWest())},getSouthEast:function(){return new K(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){typeof e[0]=="number"||e instanceof K||"lat"in e?e=F(e):e=ae(e);var t=this._southWest,i=this._northEast,o,s;return e instanceof ge?(o=e.getSouthWest(),s=e.getNorthEast()):o=s=e,o.lat>=t.lat&&s.lat<=i.lat&&o.lng>=t.lng&&s.lng<=i.lng},intersects:function(e){e=ae(e);var t=this._southWest,i=this._northEast,o=e.getSouthWest(),s=e.getNorthEast(),c=s.lat>=t.lat&&o.lat<=i.lat,p=s.lng>=t.lng&&o.lng<=i.lng;return c&&p},overlaps:function(e){e=ae(e);var t=this._southWest,i=this._northEast,o=e.getSouthWest(),s=e.getNorthEast(),c=s.lat>t.lat&&o.lat<i.lat,p=s.lng>t.lng&&o.lng<i.lng;return c&&p},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,t){return e?(e=ae(e),this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ae(e,t){return e instanceof ge?e:new ge(e,t)}function K(e,t,i){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,i!==void 0&&(this.alt=+i)}K.prototype={equals:function(e,t){if(!e)return!1;e=F(e);var i=Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng));return i<=(t===void 0?1e-9:t)},toString:function(e){return"LatLng("+C(this.lat,e)+", "+C(this.lng,e)+")"},distanceTo:function(e){return $e.distance(this,F(e))},wrap:function(){return $e.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,i=t/Math.cos(Math.PI/180*this.lat);return ae([this.lat-t,this.lng-i],[this.lat+t,this.lng+i])},clone:function(){return new K(this.lat,this.lng,this.alt)}};function F(e,t,i){return e instanceof K?e:ne(e)&&typeof e[0]!="object"?e.length===3?new K(e[0],e[1],e[2]):e.length===2?new K(e[0],e[1]):null:e==null?e:typeof e=="object"&&"lat"in e?new K(e.lat,"lng"in e?e.lng:e.lon,e.alt):t===void 0?null:new K(e,t,i)}var Ne={latLngToPoint:function(e,t){var i=this.projection.project(e),o=this.scale(t);return this.transformation._transform(i,o)},pointToLatLng:function(e,t){var i=this.scale(t),o=this.transformation.untransform(e,i);return this.projection.unproject(o)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,i=this.scale(e),o=this.transformation.transform(t.min,i),s=this.transformation.transform(t.max,i);return new oe(o,s)},infinite:!1,wrapLatLng:function(e){var t=this.wrapLng?x(e.lng,this.wrapLng,!0):e.lng,i=this.wrapLat?x(e.lat,this.wrapLat,!0):e.lat,o=e.alt;return new K(i,t,o)},wrapLatLngBounds:function(e){var t=e.getCenter(),i=this.wrapLatLng(t),o=t.lat-i.lat,s=t.lng-i.lng;if(o===0&&s===0)return e;var c=e.getSouthWest(),p=e.getNorthEast(),f=new K(c.lat-o,c.lng-s),g=new K(p.lat-o,p.lng-s);return new ge(f,g)}},$e=r({},Ne,{wrapLng:[-180,180],R:6371e3,distance:function(e,t){var i=Math.PI/180,o=e.lat*i,s=t.lat*i,c=Math.sin((t.lat-e.lat)*i/2),p=Math.sin((t.lng-e.lng)*i/2),f=c*c+Math.cos(o)*Math.cos(s)*p*p,g=2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f));return this.R*g}}),In=6378137,zi={R:In,MAX_LATITUDE:85.0511287798,project:function(e){var t=Math.PI/180,i=this.MAX_LATITUDE,o=Math.max(Math.min(i,e.lat),-i),s=Math.sin(o*t);return new D(this.R*e.lng*t,this.R*Math.log((1+s)/(1-s))/2)},unproject:function(e){var t=180/Math.PI;return new K((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:function(){var e=In*Math.PI;return new oe([-e,-e],[e,e])}()};function Oi(e,t,i,o){if(ne(e)){this._a=e[0],this._b=e[1],this._c=e[2],this._d=e[3];return}this._a=e,this._b=t,this._c=i,this._d=o}Oi.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new D((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}};function St(e,t,i,o){return new Oi(e,t,i,o)}var Ai=r({},$e,{code:"EPSG:3857",projection:zi,transformation:function(){var e=.5/(Math.PI*zi.R);return St(e,.5,-e,.5)}()}),ps=r({},Ai,{code:"EPSG:900913"});function zn(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function On(e,t){var i="",o,s,c,p,f,g;for(o=0,c=e.length;o<c;o++){for(f=e[o],s=0,p=f.length;s<p;s++)g=f[s],i+=(s?"L":"M")+g.x+" "+g.y;i+=t?z.svg?"z":"x":""}return i||"M0 0"}var Bi=document.documentElement.style,Qt="ActiveXObject"in window,fs=Qt&&!document.addEventListener,An="msLaunchUri"in navigator&&!("documentMode"in document),Di=Oe("webkit"),Bn=Oe("android"),Dn=Oe("android 2")||Oe("android 3"),ms=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),_s=Bn&&Oe("Google")&&ms<537&&!("AudioNode"in window),Ri=!!window.opera,Rn=!An&&Oe("chrome"),Zn=Oe("gecko")&&!Di&&!Ri&&!Qt,gs=!Rn&&Oe("safari"),Gn=Oe("phantom"),Nn="OTransition"in Bi,vs=navigator.platform.indexOf("Win")===0,Un=Qt&&"transition"in Bi,Zi="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Dn,Vn="MozPerspective"in Bi,ys=!window.L_DISABLE_3D&&(Un||Zi||Vn)&&!Nn&&!Gn,Pt=typeof orientation<"u"||Oe("mobile"),xs=Pt&&Di,bs=Pt&&Zi,Fn=!window.PointerEvent&&window.MSPointerEvent,Hn=!!(window.PointerEvent||Fn),jn="ontouchstart"in window||!!window.TouchEvent,Cs=!window.L_NO_TOUCH&&(jn||Hn),Ls=Pt&&Ri,ws=Pt&&Zn,ks=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ms=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",_,t),window.removeEventListener("testPassiveEventSupport",_,t)}catch{}return e}(),Ts=function(){return!!document.createElement("canvas").getContext}(),Gi=!!(document.createElementNS&&zn("svg").createSVGRect),Ss=!!Gi&&function(){var e=document.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ps=!Gi&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&typeof t.adj=="object"}catch{return!1}}(),Es=navigator.platform.indexOf("Mac")===0,Is=navigator.platform.indexOf("Linux")===0;function Oe(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var z={ie:Qt,ielt9:fs,edge:An,webkit:Di,android:Bn,android23:Dn,androidStock:_s,opera:Ri,chrome:Rn,gecko:Zn,safari:gs,phantom:Gn,opera12:Nn,win:vs,ie3d:Un,webkit3d:Zi,gecko3d:Vn,any3d:ys,mobile:Pt,mobileWebkit:xs,mobileWebkit3d:bs,msPointer:Fn,pointer:Hn,touch:Cs,touchNative:jn,mobileOpera:Ls,mobileGecko:ws,retina:ks,passiveEvents:Ms,canvas:Ts,svg:Gi,vml:Ps,inlineSvg:Ss,mac:Es,linux:Is},Wn=z.msPointer?"MSPointerDown":"pointerdown",$n=z.msPointer?"MSPointerMove":"pointermove",qn=z.msPointer?"MSPointerUp":"pointerup",Qn=z.msPointer?"MSPointerCancel":"pointercancel",Ni={touchstart:Wn,touchmove:$n,touchend:qn,touchcancel:Qn},Kn={touchstart:Rs,touchmove:Kt,touchend:Kt,touchcancel:Kt},ut={},Xn=!1;function zs(e,t,i){return t==="touchstart"&&Ds(),Kn[t]?(i=Kn[t].bind(this,i),e.addEventListener(Ni[t],i,!1),i):(console.warn("wrong event specified:",t),_)}function Os(e,t,i){if(!Ni[t]){console.warn("wrong event specified:",t);return}e.removeEventListener(Ni[t],i,!1)}function As(e){ut[e.pointerId]=e}function Bs(e){ut[e.pointerId]&&(ut[e.pointerId]=e)}function Yn(e){delete ut[e.pointerId]}function Ds(){Xn||(document.addEventListener(Wn,As,!0),document.addEventListener($n,Bs,!0),document.addEventListener(qn,Yn,!0),document.addEventListener(Qn,Yn,!0),Xn=!0)}function Kt(e,t){if(t.pointerType!==(t.MSPOINTER_TYPE_MOUSE||"mouse")){t.touches=[];for(var i in ut)t.touches.push(ut[i]);t.changedTouches=[t],e(t)}}function Rs(e,t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&he(t),Kt(e,t)}function Zs(e){var t={},i,o;for(o in e)i=e[o],t[o]=i&&i.bind?i.bind(e):i;return e=t,t.type="dblclick",t.detail=2,t.isTrusted=!1,t._simulated=!0,t}var Gs=200;function Ns(e,t){e.addEventListener("dblclick",t);var i=0,o;function s(c){if(c.detail!==1){o=c.detail;return}if(!(c.pointerType==="mouse"||c.sourceCapabilities&&!c.sourceCapabilities.firesTouchEvents)){var p=no(c);if(!(p.some(function(g){return g instanceof HTMLLabelElement&&g.attributes.for})&&!p.some(function(g){return g instanceof HTMLInputElement||g instanceof HTMLSelectElement}))){var f=Date.now();f-i<=Gs?(o++,o===2&&t(Zs(c))):o=1,i=f}}}return e.addEventListener("click",s),{dblclick:t,simDblclick:s}}function Us(e,t){e.removeEventListener("dblclick",t.dblclick),e.removeEventListener("click",t.simDblclick)}var Ui=Jt(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Et=Jt(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Jn=Et==="webkitTransition"||Et==="OTransition"?Et+"End":"transitionend";function eo(e){return typeof e=="string"?document.getElementById(e):e}function It(e,t){var i=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!i||i==="auto")&&document.defaultView){var o=document.defaultView.getComputedStyle(e,null);i=o?o[t]:null}return i==="auto"?null:i}function $(e,t,i){var o=document.createElement(e);return o.className=t||"",i&&i.appendChild(o),o}function re(e){var t=e.parentNode;t&&t.removeChild(e)}function Xt(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function ht(e){var t=e.parentNode;t&&t.lastChild!==e&&t.appendChild(e)}function dt(e){var t=e.parentNode;t&&t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function Vi(e,t){if(e.classList!==void 0)return e.classList.contains(t);var i=Yt(e);return i.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(i)}function G(e,t){if(e.classList!==void 0)for(var i=P(t),o=0,s=i.length;o<s;o++)e.classList.add(i[o]);else if(!Vi(e,t)){var c=Yt(e);Fi(e,(c?c+" ":"")+t)}}function se(e,t){e.classList!==void 0?e.classList.remove(t):Fi(e,b((" "+Yt(e)+" ").replace(" "+t+" "," ")))}function Fi(e,t){e.className.baseVal===void 0?e.className=t:e.className.baseVal=t}function Yt(e){return e.correspondingElement&&(e=e.correspondingElement),e.className.baseVal===void 0?e.className:e.className.baseVal}function we(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&Vs(e,t)}function Vs(e,t){var i=!1,o="DXImageTransform.Microsoft.Alpha";try{i=e.filters.item(o)}catch{if(t===1)return}t=Math.round(t*100),i?(i.Enabled=t!==100,i.Opacity=t):e.style.filter+=" progid:"+o+"(opacity="+t+")"}function Jt(e){for(var t=document.documentElement.style,i=0;i<e.length;i++)if(e[i]in t)return e[i];return!1}function tt(e,t,i){var o=t||new D(0,0);e.style[Ui]=(z.ie3d?"translate("+o.x+"px,"+o.y+"px)":"translate3d("+o.x+"px,"+o.y+"px,0)")+(i?" scale("+i+")":"")}function le(e,t){e._leaflet_pos=t,z.any3d?tt(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function it(e){return e._leaflet_pos||new D(0,0)}var zt,Ot,Hi;if("onselectstart"in document)zt=function(){R(window,"selectstart",he)},Ot=function(){Y(window,"selectstart",he)};else{var At=Jt(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);zt=function(){if(At){var e=document.documentElement.style;Hi=e[At],e[At]="none"}},Ot=function(){At&&(document.documentElement.style[At]=Hi,Hi=void 0)}}function ji(){R(window,"dragstart",he)}function Wi(){Y(window,"dragstart",he)}var ei,$i;function qi(e){for(;e.tabIndex===-1;)e=e.parentNode;e.style&&(ti(),ei=e,$i=e.style.outlineStyle,e.style.outlineStyle="none",R(window,"keydown",ti))}function ti(){ei&&(ei.style.outlineStyle=$i,ei=void 0,$i=void 0,Y(window,"keydown",ti))}function to(e){do e=e.parentNode;while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function Qi(e){var t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}var Fs={__proto__:null,TRANSFORM:Ui,TRANSITION:Et,TRANSITION_END:Jn,get:eo,getStyle:It,create:$,remove:re,empty:Xt,toFront:ht,toBack:dt,hasClass:Vi,addClass:G,removeClass:se,setClass:Fi,getClass:Yt,setOpacity:we,testProp:Jt,setTransform:tt,setPosition:le,getPosition:it,get disableTextSelection(){return zt},get enableTextSelection(){return Ot},disableImageDrag:ji,enableImageDrag:Wi,preventOutline:qi,restoreOutline:ti,getSizedParentNode:to,getScale:Qi};function R(e,t,i,o){if(t&&typeof t=="object")for(var s in t)Xi(e,s,t[s],i);else{t=P(t);for(var c=0,p=t.length;c<p;c++)Xi(e,t[c],i,o)}return this}var Ae="_leaflet_events";function Y(e,t,i,o){if(arguments.length===1)io(e),delete e[Ae];else if(t&&typeof t=="object")for(var s in t)Yi(e,s,t[s],i);else if(t=P(t),arguments.length===2)io(e,function(f){return Ze(t,f)!==-1});else for(var c=0,p=t.length;c<p;c++)Yi(e,t[c],i,o);return this}function io(e,t){for(var i in e[Ae]){var o=i.split(/\d/)[0];(!t||t(o))&&Yi(e,o,null,null,i)}}var Ki={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Xi(e,t,i,o){var s=t+d(i)+(o?"_"+d(o):"");if(e[Ae]&&e[Ae][s])return this;var c=function(f){return i.call(o||e,f||window.event)},p=c;!z.touchNative&&z.pointer&&t.indexOf("touch")===0?c=zs(e,t,c):z.touch&&t==="dblclick"?c=Ns(e,c):"addEventListener"in e?t==="touchstart"||t==="touchmove"||t==="wheel"||t==="mousewheel"?e.addEventListener(Ki[t]||t,c,z.passiveEvents?{passive:!1}:!1):t==="mouseenter"||t==="mouseleave"?(c=function(f){f=f||window.event,en(e,f)&&p(f)},e.addEventListener(Ki[t],c,!1)):e.addEventListener(t,p,!1):e.attachEvent("on"+t,c),e[Ae]=e[Ae]||{},e[Ae][s]=c}function Yi(e,t,i,o,s){s=s||t+d(i)+(o?"_"+d(o):"");var c=e[Ae]&&e[Ae][s];if(!c)return this;!z.touchNative&&z.pointer&&t.indexOf("touch")===0?Os(e,t,c):z.touch&&t==="dblclick"?Us(e,c):"removeEventListener"in e?e.removeEventListener(Ki[t]||t,c,!1):e.detachEvent("on"+t,c),e[Ae][s]=null}function nt(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function Ji(e){return Xi(e,"wheel",nt),this}function Bt(e){return R(e,"mousedown touchstart dblclick contextmenu",nt),e._leaflet_disable_click=!0,this}function he(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function ot(e){return he(e),nt(e),this}function no(e){if(e.composedPath)return e.composedPath();for(var t=[],i=e.target;i;)t.push(i),i=i.parentNode;return t}function oo(e,t){if(!t)return new D(e.clientX,e.clientY);var i=Qi(t),o=i.boundingClientRect;return new D((e.clientX-o.left)/i.x-t.clientLeft,(e.clientY-o.top)/i.y-t.clientTop)}var Hs=z.linux&&z.chrome?window.devicePixelRatio:z.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ro(e){return z.edge?e.wheelDeltaY/2:e.deltaY&&e.deltaMode===0?-e.deltaY/Hs:e.deltaY&&e.deltaMode===1?-e.deltaY*20:e.deltaY&&e.deltaMode===2?-e.deltaY*60:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?-e.detail*20:e.detail?e.detail/-32765*60:0}function en(e,t){var i=t.relatedTarget;if(!i)return!0;try{for(;i&&i!==e;)i=i.parentNode}catch{return!1}return i!==e}var js={__proto__:null,on:R,off:Y,stopPropagation:nt,disableScrollPropagation:Ji,disableClickPropagation:Bt,preventDefault:he,stop:ot,getPropagationPath:no,getMousePosition:oo,getWheelDelta:ro,isExternalTarget:en,addListener:R,removeListener:Y},so=Tt.extend({run:function(e,t,i,o){this.stop(),this._el=e,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(o||.5,.2),this._startPos=it(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=me(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,i=this._duration*1e3;t<i?this._runFrame(this._easeOut(t/i),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var i=this._startPos.add(this._offset.multiplyBy(e));t&&i._round(),le(this._el,i),this.fire("step")},_complete:function(){Le(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),H=Tt.extend({options:{crs:Ai,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=T(this,t),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),t.zoom!==void 0&&(this._zoom=this._limitZoom(t.zoom)),t.center&&t.zoom!==void 0&&this.setView(F(t.center),t.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Et&&z.any3d&&!z.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),R(this._proxy,Jn,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,t,i){if(t=t===void 0?this._zoom:this._limitZoom(t),e=this._limitCenter(F(e),t,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&i!==!0){i.animate!==void 0&&(i.zoom=r({animate:i.animate},i.zoom),i.pan=r({animate:i.animate,duration:i.duration},i.pan));var o=this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,i.zoom):this._tryAnimatedPan(e,i.pan);if(o)return clearTimeout(this._sizeTimer),this}return this._resetView(e,t,i.pan&&i.pan.noMoveStart),this},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e=e||(z.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e=e||(z.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,i){var o=this.getZoomScale(t),s=this.getSize().divideBy(2),c=e instanceof D?e:this.latLngToContainerPoint(e),p=c.subtract(s).multiplyBy(1-1/o),f=this.containerPointToLatLng(s.add(p));return this.setView(f,t,{zoom:i})},_getBoundsCenterZoom:function(e,t){t=t||{},e=e.getBounds?e.getBounds():ae(e);var i=B(t.paddingTopLeft||t.padding||[0,0]),o=B(t.paddingBottomRight||t.padding||[0,0]),s=this.getBoundsZoom(e,!1,i.add(o));if(s=typeof t.maxZoom=="number"?Math.min(t.maxZoom,s):s,s===1/0)return{center:e.getCenter(),zoom:s};var c=o.subtract(i).divideBy(2),p=this.project(e.getSouthWest(),s),f=this.project(e.getNorthEast(),s),g=this.unproject(p.add(f).divideBy(2).add(c),s);return{center:g,zoom:s}},fitBounds:function(e,t){if(e=ae(e),!e.isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(e,t);return this.setView(i.center,i.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){if(e=B(e).round(),t=t||{},!e.x&&!e.y)return this.fire("moveend");if(t.animate!==!0&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new so,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),t.animate!==!1){G(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,i,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,t,i){if(i=i||{},i.animate===!1||!z.any3d)return this.setView(e,t,i);this._stop();var o=this.project(this.getCenter()),s=this.project(e),c=this.getSize(),p=this._zoom;e=F(e),t=t===void 0?p:t;var f=Math.max(c.x,c.y),g=f*this.getZoomScale(p,t),w=s.distanceTo(o)||1,S=1.42,A=S*S;function N(ce){var pi=ce?-1:1,Oa=ce?g:f,Aa=g*g-f*f+pi*A*A*w*w,Ba=2*Oa*A*w,dn=Aa/Ba,Uo=Math.sqrt(dn*dn+1)-dn,Da=Uo<1e-9?-18:Math.log(Uo);return Da}function pe(ce){return(Math.exp(ce)-Math.exp(-ce))/2}function ue(ce){return(Math.exp(ce)+Math.exp(-ce))/2}function Me(ce){return pe(ce)/ue(ce)}var ve=N(0);function vt(ce){return f*(ue(ve)/ue(ve+S*ce))}function Pa(ce){return f*(ue(ve)*Me(ve+S*ce)-pe(ve))/A}function Ea(ce){return 1-Math.pow(1-ce,1.5)}var Ia=Date.now(),Go=(N(1)-ve)/S,za=i.duration?1e3*i.duration:1e3*Go*.8;function No(){var ce=(Date.now()-Ia)/za,pi=Ea(ce)*Go;ce<=1?(this._flyToFrame=me(No,this),this._move(this.unproject(o.add(s.subtract(o).multiplyBy(Pa(pi)/w)),p),this.getScaleZoom(f/vt(pi),p),{flyTo:!0})):this._move(e,t)._moveEnd(!0)}return this._moveStart(!0,i.noMoveStart),No.call(this),this},flyToBounds:function(e,t){var i=this._getBoundsCenterZoom(e,t);return this.flyTo(i.center,i.zoom,t)},setMaxBounds:function(e){return e=ae(e),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var t=this.options.minZoom;return this.options.minZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var t=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var i=this.getCenter(),o=this._limitCenter(i,this._zoom,ae(e));return i.equals(o)||this.panTo(o,t),this._enforcingBounds=!1,this},panInside:function(e,t){t=t||{};var i=B(t.paddingTopLeft||t.padding||[0,0]),o=B(t.paddingBottomRight||t.padding||[0,0]),s=this.project(this.getCenter()),c=this.project(e),p=this.getPixelBounds(),f=_e([p.min.add(i),p.max.subtract(o)]),g=f.getSize();if(!f.contains(c)){this._enforcingBounds=!0;var w=c.subtract(f.getCenter()),S=f.extend(c).getSize().subtract(g);s.x+=w.x<0?-S.x:S.x,s.y+=w.y<0?-S.y:S.y,this.panTo(this.unproject(s),t),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=r({animate:!1,pan:!0},e===!0?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),o=t.divideBy(2).round(),s=i.divideBy(2).round(),c=o.subtract(s);return!c.x&&!c.y?this:(e.animate&&e.pan?this.panBy(c):(e.pan&&this._rawPanBy(c),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:i}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=r({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=l(this._handleGeolocationResponse,this),i=l(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,i,e):navigator.geolocation.getCurrentPosition(t,i,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(this._container._leaflet_id){var t=e.code,i=e.message||(t===1?"permission denied":t===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+i+"."})}},_handleGeolocationResponse:function(e){if(this._container._leaflet_id){var t=e.coords.latitude,i=e.coords.longitude,o=new K(t,i),s=o.toBounds(e.coords.accuracy*2),c=this._locateOptions;if(c.setView){var p=this.getBoundsZoom(s);this.setView(o,c.maxZoom?Math.min(p,c.maxZoom):p)}var f={latlng:o,bounds:s,timestamp:e.timestamp};for(var g in e.coords)typeof e.coords[g]=="number"&&(f[g]=e.coords[g]);this.fire("locationfound",f)}},addHandler:function(e,t){if(!t)return this;var i=this[e]=new t(this);return this._handlers.push(i),this.options[e]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),re(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Le(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var e;for(e in this._layers)this._layers[e].remove();for(e in this._panes)re(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,t){var i="leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),o=$("div",i,t||this._mapPane);return e&&(this._panes[e]=o),o},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),t=this.unproject(e.getBottomLeft()),i=this.unproject(e.getTopRight());return new ge(t,i)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,i){e=ae(e),i=B(i||[0,0]);var o=this.getZoom()||0,s=this.getMinZoom(),c=this.getMaxZoom(),p=e.getNorthWest(),f=e.getSouthEast(),g=this.getSize().subtract(i),w=_e(this.project(f,o),this.project(p,o)).getSize(),S=z.any3d?this.options.zoomSnap:1,A=g.x/w.x,N=g.y/w.y,pe=t?Math.max(A,N):Math.min(A,N);return o=this.getScaleZoom(pe,o),S&&(o=Math.round(o/(S/100))*(S/100),o=t?Math.ceil(o/S)*S:Math.floor(o/S)*S),Math.max(s,Math.min(c,o))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new D(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var i=this._getTopLeftPoint(e,t);return new oe(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(e===void 0?this.getZoom():e)},getPane:function(e){return typeof e=="string"?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var i=this.options.crs;return t=t===void 0?this._zoom:t,i.scale(e)/i.scale(t)},getScaleZoom:function(e,t){var i=this.options.crs;t=t===void 0?this._zoom:t;var o=i.zoom(e*i.scale(t));return isNaN(o)?1/0:o},project:function(e,t){return t=t===void 0?this._zoom:t,this.options.crs.latLngToPoint(F(e),t)},unproject:function(e,t){return t=t===void 0?this._zoom:t,this.options.crs.pointToLatLng(B(e),t)},layerPointToLatLng:function(e){var t=B(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){var t=this.project(F(e))._round();return t._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(F(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(ae(e))},distance:function(e,t){return this.options.crs.distance(F(e),F(t))},containerPointToLayerPoint:function(e){return B(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return B(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(B(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(F(e)))},mouseEventToContainerPoint:function(e){return oo(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=eo(e);if(t){if(t._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");R(t,"scroll",this._onScroll,this),this._containerId=d(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&z.any3d,G(e,"leaflet-container"+(z.touch?" leaflet-touch":"")+(z.retina?" leaflet-retina":"")+(z.ielt9?" leaflet-oldie":"")+(z.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=It(e,"position");t!=="absolute"&&t!=="relative"&&t!=="fixed"&&t!=="sticky"&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),le(this._mapPane,new D(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(G(e.markerPane,"leaflet-zoom-hide"),G(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t,i){le(this._mapPane,new D(0,0));var o=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset");var s=this._zoom!==t;this._moveStart(s,i)._move(e,t)._moveEnd(s),this.fire("viewreset"),o&&this.fire("load")},_moveStart:function(e,t){return e&&this.fire("zoomstart"),t||this.fire("movestart"),this},_move:function(e,t,i,o){t===void 0&&(t=this._zoom);var s=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),o?i&&i.pinch&&this.fire("zoom",i):((s||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)),this},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Le(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){le(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[d(this._container)]=this;var t=e?Y:R;t(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&t(window,"resize",this._onResize,this),z.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Le(this._resizeRequest),this._resizeRequest=me(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,t){for(var i=[],o,s=t==="mouseout"||t==="mouseover",c=e.target||e.srcElement,p=!1;c;){if(o=this._targets[d(c)],o&&(t==="click"||t==="preclick")&&this._draggableMoved(o)){p=!0;break}if(o&&o.listens(t,!0)&&(s&&!en(c,e)||(i.push(o),s))||c===this._container)break;c=c.parentNode}return!i.length&&!p&&!s&&this.listens(t,!0)&&(i=[this]),i},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var t=e.target||e.srcElement;if(!(!this._loaded||t._leaflet_disable_events||e.type==="click"&&this._isClickDisabled(t))){var i=e.type;i==="mousedown"&&qi(t),this._fireDOMEvent(e,i)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,t,i){if(e.type==="click"){var o=r({},e);o.type="preclick",this._fireDOMEvent(o,o.type,i)}var s=this._findEventTargets(e,t);if(i){for(var c=[],p=0;p<i.length;p++)i[p].listens(t,!0)&&c.push(i[p]);s=c.concat(s)}if(s.length){t==="contextmenu"&&he(e);var f=s[0],g={originalEvent:e};if(e.type!=="keypress"&&e.type!=="keydown"&&e.type!=="keyup"){var w=f.getLatLng&&(!f._radius||f._radius<=10);g.containerPoint=w?this.latLngToContainerPoint(f.getLatLng()):this.mouseEventToContainerPoint(e),g.layerPoint=this.containerPointToLayerPoint(g.containerPoint),g.latlng=w?f.getLatLng():this.layerPointToLatLng(g.layerPoint)}for(p=0;p<s.length;p++)if(s[p].fire(t,g,!0),g.originalEvent._stopped||s[p].options.bubblingMouseEvents===!1&&Ze(this._mouseEvents,t)!==-1)return}},_draggableMoved:function(e){return e=e.dragging&&e.dragging.enabled()?e:this,e.dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return it(this._mapPane)||new D(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){var i=e&&t!==void 0?this._getNewPixelOrigin(e,t):this.getPixelOrigin();return i.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var i=this.getSize()._divideBy(2);return this.project(e,t)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,i){var o=this._getNewPixelOrigin(i,t);return this.project(e,t)._subtract(o)},_latLngBoundsToNewLayerBounds:function(e,t,i){var o=this._getNewPixelOrigin(i,t);return _e([this.project(e.getSouthWest(),t)._subtract(o),this.project(e.getNorthWest(),t)._subtract(o),this.project(e.getSouthEast(),t)._subtract(o),this.project(e.getNorthEast(),t)._subtract(o)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,i){if(!i)return e;var o=this.project(e,t),s=this.getSize().divideBy(2),c=new oe(o.subtract(s),o.add(s)),p=this._getBoundsOffset(c,i,t);return Math.abs(p.x)<=1&&Math.abs(p.y)<=1?e:this.unproject(o.add(p),t)},_limitOffset:function(e,t){if(!t)return e;var i=this.getPixelBounds(),o=new oe(i.min.add(e),i.max.add(e));return e.add(this._getBoundsOffset(o,t))},_getBoundsOffset:function(e,t,i){var o=_e(this.project(t.getNorthEast(),i),this.project(t.getSouthWest(),i)),s=o.min.subtract(e.min),c=o.max.subtract(e.max),p=this._rebound(s.x,-c.x),f=this._rebound(s.y,-c.y);return new D(p,f)},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),i=this.getMaxZoom(),o=z.any3d?this.options.zoomSnap:1;return o&&(e=Math.round(e/o)*o),Math.max(t,Math.min(i,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){se(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var i=this._getCenterOffset(e)._trunc();return(t&&t.animate)!==!0&&!this.getSize().contains(i)?!1:(this.panBy(i,t),!0)},_createAnimProxy:function(){var e=this._proxy=$("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(t){var i=Ui,o=this._proxy.style[i];tt(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),o===this._proxy.style[i]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){re(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),t=this.getZoom();tt(this._proxy,this.project(e,t),this.getZoomScale(t,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||i.animate===!1||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var o=this.getZoomScale(t),s=this._getCenterOffset(e)._divideBy(1-1/o);return i.animate!==!0&&!this.getSize().contains(s)?!1:(me(function(){this._moveStart(!0,i.noMoveStart||!1)._animateZoom(e,t,!0)},this),!0)},_animateZoom:function(e,t,i,o){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,G(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,noUpdate:o}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&se(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ws(e,t){return new H(e,t)}var Ee=Ge.extend({options:{position:"topright"},initialize:function(e){T(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),i=this.getPosition(),o=e._controlCorners[i];return G(t,"leaflet-control"),i.indexOf("bottom")!==-1?o.insertBefore(t,o.firstChild):o.appendChild(t),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(re(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),Dt=function(e){return new Ee(e)};H.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},t="leaflet-",i=this._controlContainer=$("div",t+"control-container",this._container);function o(s,c){var p=t+s+" "+t+c;e[s+c]=$("div",p,i)}o("top","left"),o("top","right"),o("bottom","left"),o("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)re(this._controlCorners[e]);re(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ao=Ee.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,i,o){return i<o?-1:o<i?1:0}},initialize:function(e,t,i){T(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var o in e)this._addLayer(e[o],o);for(o in t)this._addLayer(t[o],o,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return Ee.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var t=this._getLayer(d(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){G(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(G(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):se(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return se(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=$("div",e),i=this.options.collapsed;t.setAttribute("aria-haspopup",!0),Bt(t),Ji(t);var o=this._section=$("section",e+"-list");i&&(this._map.on("click",this.collapse,this),R(t,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var s=this._layersLink=$("a",e+"-toggle",t);s.href="#",s.title="Layers",s.setAttribute("role","button"),R(s,{keydown:function(c){c.keyCode===13&&this._expandSafely()},click:function(c){he(c),this._expandSafely()}},this),i||this.expand(),this._baseLayersList=$("div",e+"-base",o),this._separator=$("div",e+"-separator",o),this._overlaysList=$("div",e+"-overlays",o),t.appendChild(o)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&d(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,i){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:i}),this.options.sortLayers&&this._layers.sort(l(function(o,s){return this.options.sortFunction(o.layer,s.layer,o.name,s.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Xt(this._baseLayersList),Xt(this._overlaysList),this._layerControlInputs=[];var e,t,i,o,s=0;for(i=0;i<this._layers.length;i++)o=this._layers[i],this._addItem(o),t=t||o.overlay,e=e||!o.overlay,s+=o.overlay?0:1;return this.options.hideSingleBase&&(e=e&&s>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=t&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var t=this._getLayer(d(e.target)),i=t.overlay?e.type==="add"?"overlayadd":"overlayremove":e.type==="add"?"baselayerchange":null;i&&this._map.fire(i,t)},_createRadioElement:function(e,t){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':"")+"/>",o=document.createElement("div");return o.innerHTML=i,o.firstChild},_addItem:function(e){var t=document.createElement("label"),i=this._map.hasLayer(e.layer),o;e.overlay?(o=document.createElement("input"),o.type="checkbox",o.className="leaflet-control-layers-selector",o.defaultChecked=i):o=this._createRadioElement("leaflet-base-layers_"+d(this),i),this._layerControlInputs.push(o),o.layerId=d(e.layer),R(o,"click",this._onInputClick,this);var s=document.createElement("span");s.innerHTML=" "+e.name;var c=document.createElement("span");t.appendChild(c),c.appendChild(o),c.appendChild(s);var p=e.overlay?this._overlaysList:this._baseLayersList;return p.appendChild(t),this._checkDisabledLayers(),t},_onInputClick:function(){if(!this._preventClick){var e=this._layerControlInputs,t,i,o=[],s=[];this._handlingClick=!0;for(var c=e.length-1;c>=0;c--)t=e[c],i=this._getLayer(t.layerId).layer,t.checked?o.push(i):t.checked||s.push(i);for(c=0;c<s.length;c++)this._map.hasLayer(s[c])&&this._map.removeLayer(s[c]);for(c=0;c<o.length;c++)this._map.hasLayer(o[c])||this._map.addLayer(o[c]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var e=this._layerControlInputs,t,i,o=this._map.getZoom(),s=e.length-1;s>=0;s--)t=e[s],i=this._getLayer(t.layerId).layer,t.disabled=i.options.minZoom!==void 0&&o<i.options.minZoom||i.options.maxZoom!==void 0&&o>i.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var e=this._section;this._preventClick=!0,R(e,"click",he),this.expand();var t=this;setTimeout(function(){Y(e,"click",he),t._preventClick=!1})}}),$s=function(e,t,i){return new ao(e,t,i)},tn=Ee.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",i=$("div",t+" leaflet-bar"),o=this.options;return this._zoomInButton=this._createButton(o.zoomInText,o.zoomInTitle,t+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(o.zoomOutText,o.zoomOutTitle,t+"-out",i,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,t,i,o,s){var c=$("a",i,o);return c.innerHTML=e,c.href="#",c.title=t,c.setAttribute("role","button"),c.setAttribute("aria-label",t),Bt(c),R(c,"click",ot),R(c,"click",s,this),R(c,"click",this._refocusOnMap,this),c},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";se(this._zoomInButton,t),se(this._zoomOutButton,t),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||e._zoom===e.getMinZoom())&&(G(this._zoomOutButton,t),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||e._zoom===e.getMaxZoom())&&(G(this._zoomInButton,t),this._zoomInButton.setAttribute("aria-disabled","true"))}});H.mergeOptions({zoomControl:!0}),H.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new tn,this.addControl(this.zoomControl))});var qs=function(e){return new tn(e)},lo=Ee.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t="leaflet-control-scale",i=$("div",t),o=this.options;return this._addScales(o,t+"-line",i),e.on(o.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),i},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,i){e.metric&&(this._mScale=$("div",t,i)),e.imperial&&(this._iScale=$("div",t,i))},_update:function(){var e=this._map,t=e.getSize().y/2,i=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(i)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),i=t<1e3?t+" m":t/1e3+" km";this._updateScale(this._mScale,i,t/e)},_updateImperial:function(e){var t=e*3.2808399,i,o,s;t>5280?(i=t/5280,o=this._getRoundNum(i),this._updateScale(this._iScale,o+" mi",o/i)):(s=this._getRoundNum(t),this._updateScale(this._iScale,s+" ft",s/t))},_updateScale:function(e,t,i){e.style.width=Math.round(this.options.maxWidth*i)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),i=e/t;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1,t*i}}),Qs=function(e){return new lo(e)},Ks='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',nn=Ee.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(z.inlineSvg?Ks+" ":"")+"Leaflet</a>"},initialize:function(e){T(this,e),this._attributions={}},onAdd:function(e){e.attributionControl=this,this._container=$("div","leaflet-control-attribution"),Bt(this._container);for(var t in e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),e.on("layeradd",this._addAttribution,this),this._container},onRemove:function(e){e.off("layeradd",this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once("remove",function(){this.removeAttribution(e.layer.getAttribution())},this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var i=[];this.options.prefix&&i.push(this.options.prefix),e.length&&i.push(e.join(", ")),this._container.innerHTML=i.join(' <span aria-hidden="true">|</span> ')}}});H.mergeOptions({attributionControl:!0}),H.addInitHook(function(){this.options.attributionControl&&new nn().addTo(this)});var Xs=function(e){return new nn(e)};Ee.Layers=ao,Ee.Zoom=tn,Ee.Scale=lo,Ee.Attribution=nn,Dt.layers=$s,Dt.zoom=qs,Dt.scale=Qs,Dt.attribution=Xs;var Be=Ge.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Be.addTo=function(e,t){return e.addHandler(t,this),this};var Ys={Events:xe},co=z.touch?"touchstart mousedown":"mousedown",qe=Tt.extend({options:{clickTolerance:3},initialize:function(e,t,i,o){T(this,o),this._element=e,this._dragStartTarget=t||e,this._preventOutline=i},enable:function(){this._enabled||(R(this._dragStartTarget,co,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(qe._dragging===this&&this.finishDrag(!0),Y(this._dragStartTarget,co,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._enabled&&(this._moved=!1,!Vi(this._element,"leaflet-zoom-anim"))){if(e.touches&&e.touches.length!==1){qe._dragging===this&&this.finishDrag();return}if(!(qe._dragging||e.shiftKey||e.which!==1&&e.button!==1&&!e.touches)&&(qe._dragging=this,this._preventOutline&&qi(this._element),ji(),zt(),!this._moving)){this.fire("down");var t=e.touches?e.touches[0]:e,i=to(this._element);this._startPoint=new D(t.clientX,t.clientY),this._startPos=it(this._element),this._parentScale=Qi(i);var o=e.type==="mousedown";R(document,o?"mousemove":"touchmove",this._onMove,this),R(document,o?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(e){if(this._enabled){if(e.touches&&e.touches.length>1){this._moved=!0;return}var t=e.touches&&e.touches.length===1?e.touches[0]:e,i=new D(t.clientX,t.clientY)._subtract(this._startPoint);!i.x&&!i.y||Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(i.x/=this._parentScale.x,i.y/=this._parentScale.y,he(e),this._moved||(this.fire("dragstart"),this._moved=!0,G(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),G(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,this._lastEvent=e,this._updatePosition())}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),le(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(e){se(document.body,"leaflet-dragging"),this._lastTarget&&(se(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Y(document,"mousemove touchmove",this._onMove,this),Y(document,"mouseup touchend touchcancel",this._onUp,this),Wi(),Ot();var t=this._moved&&this._moving;this._moving=!1,qe._dragging=!1,t&&this.fire("dragend",{noInertia:e,distance:this._newPos.distanceTo(this._startPos)})}});function uo(e,t,i){var o,s=[1,4,2,8],c,p,f,g,w,S,A,N;for(c=0,S=e.length;c<S;c++)e[c]._code=rt(e[c],t);for(f=0;f<4;f++){for(A=s[f],o=[],c=0,S=e.length,p=S-1;c<S;p=c++)g=e[c],w=e[p],g._code&A?w._code&A||(N=ii(w,g,A,t,i),N._code=rt(N,t),o.push(N)):(w._code&A&&(N=ii(w,g,A,t,i),N._code=rt(N,t),o.push(N)),o.push(g));e=o}return e}function ho(e,t){var i,o,s,c,p,f,g,w,S;if(!e||e.length===0)throw new Error("latlngs not passed");ke(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var A=F([0,0]),N=ae(e),pe=N.getNorthWest().distanceTo(N.getSouthWest())*N.getNorthEast().distanceTo(N.getNorthWest());pe<1700&&(A=on(e));var ue=e.length,Me=[];for(i=0;i<ue;i++){var ve=F(e[i]);Me.push(t.project(F([ve.lat-A.lat,ve.lng-A.lng])))}for(f=g=w=0,i=0,o=ue-1;i<ue;o=i++)s=Me[i],c=Me[o],p=s.y*c.x-c.y*s.x,g+=(s.x+c.x)*p,w+=(s.y+c.y)*p,f+=p*3;f===0?S=Me[0]:S=[g/f,w/f];var vt=t.unproject(B(S));return F([vt.lat+A.lat,vt.lng+A.lng])}function on(e){for(var t=0,i=0,o=0,s=0;s<e.length;s++){var c=F(e[s]);t+=c.lat,i+=c.lng,o++}return F([t/o,i/o])}var Js={__proto__:null,clipPolygon:uo,polygonCenter:ho,centroid:on};function po(e,t){if(!t||!e.length)return e.slice();var i=t*t;return e=ia(e,i),e=ta(e,i),e}function fo(e,t,i){return Math.sqrt(Rt(e,t,i,!0))}function ea(e,t,i){return Rt(e,t,i)}function ta(e,t){var i=e.length,o=typeof Uint8Array<"u"?Uint8Array:Array,s=new o(i);s[0]=s[i-1]=1,rn(e,s,t,0,i-1);var c,p=[];for(c=0;c<i;c++)s[c]&&p.push(e[c]);return p}function rn(e,t,i,o,s){var c=0,p,f,g;for(f=o+1;f<=s-1;f++)g=Rt(e[f],e[o],e[s],!0),g>c&&(p=f,c=g);c>i&&(t[p]=1,rn(e,t,i,o,p),rn(e,t,i,p,s))}function ia(e,t){for(var i=[e[0]],o=1,s=0,c=e.length;o<c;o++)na(e[o],e[s])>t&&(i.push(e[o]),s=o);return s<c-1&&i.push(e[c-1]),i}var mo;function _o(e,t,i,o,s){var c=o?mo:rt(e,i),p=rt(t,i),f,g,w;for(mo=p;;){if(!(c|p))return[e,t];if(c&p)return!1;f=c||p,g=ii(e,t,f,i,s),w=rt(g,i),f===c?(e=g,c=w):(t=g,p=w)}}function ii(e,t,i,o,s){var c=t.x-e.x,p=t.y-e.y,f=o.min,g=o.max,w,S;return i&8?(w=e.x+c*(g.y-e.y)/p,S=g.y):i&4?(w=e.x+c*(f.y-e.y)/p,S=f.y):i&2?(w=g.x,S=e.y+p*(g.x-e.x)/c):i&1&&(w=f.x,S=e.y+p*(f.x-e.x)/c),new D(w,S,s)}function rt(e,t){var i=0;return e.x<t.min.x?i|=1:e.x>t.max.x&&(i|=2),e.y<t.min.y?i|=4:e.y>t.max.y&&(i|=8),i}function na(e,t){var i=t.x-e.x,o=t.y-e.y;return i*i+o*o}function Rt(e,t,i,o){var s=t.x,c=t.y,p=i.x-s,f=i.y-c,g=p*p+f*f,w;return g>0&&(w=((e.x-s)*p+(e.y-c)*f)/g,w>1?(s=i.x,c=i.y):w>0&&(s+=p*w,c+=f*w)),p=e.x-s,f=e.y-c,o?p*p+f*f:new D(s,c)}function ke(e){return!ne(e[0])||typeof e[0][0]!="object"&&typeof e[0][0]<"u"}function go(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ke(e)}function vo(e,t){var i,o,s,c,p,f,g,w;if(!e||e.length===0)throw new Error("latlngs not passed");ke(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var S=F([0,0]),A=ae(e),N=A.getNorthWest().distanceTo(A.getSouthWest())*A.getNorthEast().distanceTo(A.getNorthWest());N<1700&&(S=on(e));var pe=e.length,ue=[];for(i=0;i<pe;i++){var Me=F(e[i]);ue.push(t.project(F([Me.lat-S.lat,Me.lng-S.lng])))}for(i=0,o=0;i<pe-1;i++)o+=ue[i].distanceTo(ue[i+1])/2;if(o===0)w=ue[0];else for(i=0,c=0;i<pe-1;i++)if(p=ue[i],f=ue[i+1],s=p.distanceTo(f),c+=s,c>o){g=(c-o)/s,w=[f.x-g*(f.x-p.x),f.y-g*(f.y-p.y)];break}var ve=t.unproject(B(w));return F([ve.lat+S.lat,ve.lng+S.lng])}var oa={__proto__:null,simplify:po,pointToSegmentDistance:fo,closestPointOnSegment:ea,clipSegment:_o,_getEdgeIntersection:ii,_getBitCode:rt,_sqClosestPointOnSegment:Rt,isFlat:ke,_flat:go,polylineCenter:vo},sn={project:function(e){return new D(e.lng,e.lat)},unproject:function(e){return new K(e.y,e.x)},bounds:new oe([-180,-90],[180,90])},an={R:6378137,R_MINOR:6356752314245179e-9,bounds:new oe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(e){var t=Math.PI/180,i=this.R,o=e.lat*t,s=this.R_MINOR/i,c=Math.sqrt(1-s*s),p=c*Math.sin(o),f=Math.tan(Math.PI/4-o/2)/Math.pow((1-p)/(1+p),c/2);return o=-i*Math.log(Math.max(f,1e-10)),new D(e.lng*t*i,o)},unproject:function(e){for(var t=180/Math.PI,i=this.R,o=this.R_MINOR/i,s=Math.sqrt(1-o*o),c=Math.exp(-e.y/i),p=Math.PI/2-2*Math.atan(c),f=0,g=.1,w;f<15&&Math.abs(g)>1e-7;f++)w=s*Math.sin(p),w=Math.pow((1-w)/(1+w),s/2),g=Math.PI/2-2*Math.atan(c*w)-p,p+=g;return new K(p*t,e.x*t/i)}},ra={__proto__:null,LonLat:sn,Mercator:an,SphericalMercator:zi},sa=r({},$e,{code:"EPSG:3395",projection:an,transformation:function(){var e=.5/(Math.PI*an.R);return St(e,.5,-e,.5)}()}),yo=r({},$e,{code:"EPSG:4326",projection:sn,transformation:St(1/180,1,-1/180,.5)}),aa=r({},Ne,{projection:sn,transformation:St(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,t){var i=t.lng-e.lng,o=t.lat-e.lat;return Math.sqrt(i*i+o*o)},infinite:!0});Ne.Earth=$e,Ne.EPSG3395=sa,Ne.EPSG3857=Ai,Ne.EPSG900913=ps,Ne.EPSG4326=yo,Ne.Simple=aa;var Ie=Tt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[d(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[d(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var t=e.target;if(t.hasLayer(this)){if(this._map=t,this._zoomAnimated=t._zoomAnimated,this.getEvents){var i=this.getEvents();t.on(i,this),this.once("remove",function(){t.off(i,this)},this)}this.onAdd(t),this.fire("add"),t.fire("layeradd",{layer:this})}}});H.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var t=d(e);return this._layers[t]?this:(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e),this)},removeLayer:function(e){var t=d(e);return this._layers[t]?(this._loaded&&e.onRemove(this),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return d(e)in this._layers},eachLayer:function(e,t){for(var i in this._layers)e.call(t,this._layers[i]);return this},_addLayers:function(e){e=e?ne(e)?e:[e]:[];for(var t=0,i=e.length;t<i;t++)this.addLayer(e[t])},_addZoomLimit:function(e){(!isNaN(e.options.maxZoom)||!isNaN(e.options.minZoom))&&(this._zoomBoundLayers[d(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=d(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,t=-1/0,i=this._getZoomSpan();for(var o in this._zoomBoundLayers){var s=this._zoomBoundLayers[o].options;e=s.minZoom===void 0?e:Math.min(e,s.minZoom),t=s.maxZoom===void 0?t:Math.max(t,s.maxZoom)}this._layersMaxZoom=t===-1/0?void 0:t,this._layersMinZoom=e===1/0?void 0:e,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var pt=Ie.extend({initialize:function(e,t){T(this,t),this._layers={};var i,o;if(e)for(i=0,o=e.length;i<o;i++)this.addLayer(e[i])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){var t=typeof e=="number"?e:this.getLayerId(e);return t in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var t=Array.prototype.slice.call(arguments,1),i,o;for(i in this._layers)o=this._layers[i],o[e]&&o[e].apply(o,t);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,t){for(var i in this._layers)e.call(t,this._layers[i]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return d(e)}}),la=function(e,t){return new pt(e,t)},Ue=pt.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),pt.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),pt.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new ge;for(var t in this._layers){var i=this._layers[t];e.extend(i.getBounds?i.getBounds():i.getLatLng())}return e}}),ca=function(e,t){return new Ue(e,t)},ft=Ge.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){T(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var i=this._getIconUrl(e);if(!i){if(e==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var o=this._createImg(i,t&&t.tagName==="IMG"?t:null);return this._setIconStyles(o,e),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),o},_setIconStyles:function(e,t){var i=this.options,o=i[t+"Size"];typeof o=="number"&&(o=[o,o]);var s=B(o),c=B(t==="shadow"&&i.shadowAnchor||i.iconAnchor||s&&s.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(i.className||""),c&&(e.style.marginLeft=-c.x+"px",e.style.marginTop=-c.y+"px"),s&&(e.style.width=s.x+"px",e.style.height=s.y+"px")},_createImg:function(e,t){return t=t||document.createElement("img"),t.src=e,t},_getIconUrl:function(e){return z.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});function ua(e){return new ft(e)}var Zt=ft.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return typeof Zt.imagePath!="string"&&(Zt.imagePath=this._detectIconPath()),(this.options.imagePath||Zt.imagePath)+ft.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var t=function(i,o,s){var c=o.exec(i);return c&&c[s]};return e=t(e,/^url\((['"])?(.+)\1\)$/,2),e&&t(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=$("div","leaflet-default-icon-path",document.body),t=It(e,"background-image")||It(e,"backgroundImage");if(document.body.removeChild(e),t=this._stripUrl(t),t)return t;var i=document.querySelector('link[href$="leaflet.css"]');return i?i.href.substring(0,i.href.length-11-1):""}}),xo=Be.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new qe(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),G(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&se(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var t=this._marker,i=t._map,o=this._marker.options.autoPanSpeed,s=this._marker.options.autoPanPadding,c=it(t._icon),p=i.getPixelBounds(),f=i.getPixelOrigin(),g=_e(p.min._subtract(f).add(s),p.max._subtract(f).subtract(s));if(!g.contains(c)){var w=B((Math.max(g.max.x,c.x)-g.max.x)/(p.max.x-g.max.x)-(Math.min(g.min.x,c.x)-g.min.x)/(p.min.x-g.min.x),(Math.max(g.max.y,c.y)-g.max.y)/(p.max.y-g.max.y)-(Math.min(g.min.y,c.y)-g.min.y)/(p.min.y-g.min.y)).multiplyBy(o);i.panBy(w,{animate:!1}),this._draggable._newPos._add(w),this._draggable._startPos._add(w),le(t._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=me(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(Le(this._panRequest),this._panRequest=me(this._adjustPan.bind(this,e)))},_onDrag:function(e){var t=this._marker,i=t._shadow,o=it(t._icon),s=t._map.layerPointToLatLng(o);i&&le(i,o),t._latlng=s,e.latlng=s,e.oldLatLng=this._oldLatLng,t.fire("move",e).fire("drag",e)},_onDragEnd:function(e){Le(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),ni=Ie.extend({options:{icon:new Zt,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,t){T(this,t),this._latlng=F(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=F(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=e.icon.createIcon(this._icon),o=!1;i!==this._icon&&(this._icon&&this._removeIcon(),o=!0,e.title&&(i.title=e.title),i.tagName==="IMG"&&(i.alt=e.alt||"")),G(i,t),e.keyboard&&(i.tabIndex="0",i.setAttribute("role","button")),this._icon=i,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&R(i,"focus",this._panOnFocus,this);var s=e.icon.createShadow(this._shadow),c=!1;s!==this._shadow&&(this._removeShadow(),c=!0),s&&(G(s,t),s.alt=""),this._shadow=s,e.opacity<1&&this._updateOpacity(),o&&this.getPane().appendChild(this._icon),this._initInteraction(),s&&c&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Y(this._icon,"focus",this._panOnFocus,this),re(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&re(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&le(this._icon,e),this._shadow&&le(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(G(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),xo)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new xo(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&we(this._icon,e),this._shadow&&we(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(e){var t=this.options.icon.options,i=t.iconSize?B(t.iconSize):B(0,0),o=t.iconAnchor?B(t.iconAnchor):B(0,0);e.panInside(this._latlng,{paddingTopLeft:o,paddingBottomRight:i.subtract(o)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ha(e,t){return new ni(e,t)}var Qe=Ie.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return T(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),oi=Qe.extend({options:{fill:!0,radius:10},initialize:function(e,t){T(this,t),this._latlng=F(e),this._radius=this.options.radius},setLatLng:function(e){var t=this._latlng;return this._latlng=F(e),this.redraw(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return Qe.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,i=this._clickTolerance(),o=[e+i,t+i];this._pxBounds=new oe(this._point.subtract(o),this._point.add(o))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function da(e,t){return new oi(e,t)}var ln=oi.extend({initialize:function(e,t,i){if(typeof t=="number"&&(t=r({},i,{radius:t})),T(this,t),this._latlng=F(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new ge(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:Qe.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,i=this._map,o=i.options.crs;if(o.distance===$e.distance){var s=Math.PI/180,c=this._mRadius/$e.R/s,p=i.project([t+c,e]),f=i.project([t-c,e]),g=p.add(f).divideBy(2),w=i.unproject(g).lat,S=Math.acos((Math.cos(c*s)-Math.sin(t*s)*Math.sin(w*s))/(Math.cos(t*s)*Math.cos(w*s)))/s;(isNaN(S)||S===0)&&(S=c/Math.cos(Math.PI/180*t)),this._point=g.subtract(i.getPixelOrigin()),this._radius=isNaN(S)?0:g.x-i.project([w,e-S]).x,this._radiusY=g.y-p.y}else{var A=o.unproject(o.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(A).x}this._updateBounds()}});function pa(e,t,i){return new ln(e,t,i)}var Ve=Qe.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){T(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t=1/0,i=null,o=Rt,s,c,p=0,f=this._parts.length;p<f;p++)for(var g=this._parts[p],w=1,S=g.length;w<S;w++){s=g[w-1],c=g[w];var A=o(e,s,c,!0);A<t&&(t=A,i=o(e,s,c))}return i&&(i.distance=Math.sqrt(t)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return vo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=F(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new ge,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return ke(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],i=ke(e),o=0,s=e.length;o<s;o++)i?(t[o]=F(e[o]),this._bounds.extend(t[o])):t[o]=this._convertLatLngs(e[o]);return t},_project:function(){var e=new oe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),t=new D(e,e);this._rawPxBounds&&(this._pxBounds=new oe([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)]))},_projectLatlngs:function(e,t,i){var o=e[0]instanceof K,s=e.length,c,p;if(o){for(p=[],c=0;c<s;c++)p[c]=this._map.latLngToLayerPoint(e[c]),i.extend(p[c]);t.push(p)}else for(c=0;c<s;c++)this._projectLatlngs(e[c],t,i)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}var t=this._parts,i,o,s,c,p,f,g;for(i=0,s=0,c=this._rings.length;i<c;i++)for(g=this._rings[i],o=0,p=g.length;o<p-1;o++)f=_o(g[o],g[o+1],e,o,!0),f&&(t[s]=t[s]||[],t[s].push(f[0]),(f[1]!==g[o+1]||o===p-2)&&(t[s].push(f[1]),s++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,i=0,o=e.length;i<o;i++)e[i]=po(e[i],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var i,o,s,c,p,f,g=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(i=0,c=this._parts.length;i<c;i++)for(f=this._parts[i],o=0,p=f.length,s=p-1;o<p;s=o++)if(!(!t&&o===0)&&fo(e,f[s],f[o])<=g)return!0;return!1}});function fa(e,t){return new Ve(e,t)}Ve._flat=go;var mt=Ve.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ho(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var t=Ve.prototype._convertLatLngs.call(this,e),i=t.length;return i>=2&&t[0]instanceof K&&t[0].equals(t[i-1])&&t.pop(),t},_setLatLngs:function(e){Ve.prototype._setLatLngs.call(this,e),ke(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ke(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,i=new D(t,t);if(e=new oe(e.min.subtract(i),e.max.add(i)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}for(var o=0,s=this._rings.length,c;o<s;o++)c=uo(this._rings[o],e,!0),c.length&&this._parts.push(c)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var t=!1,i,o,s,c,p,f,g,w;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(c=0,g=this._parts.length;c<g;c++)for(i=this._parts[c],p=0,w=i.length,f=w-1;p<w;f=p++)o=i[p],s=i[f],o.y>e.y!=s.y>e.y&&e.x<(s.x-o.x)*(e.y-o.y)/(s.y-o.y)+o.x&&(t=!t);return t||Ve.prototype._containsPoint.call(this,e,!0)}});function ma(e,t){return new mt(e,t)}var Fe=Ue.extend({initialize:function(e,t){T(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t=ne(e)?e:e.features,i,o,s;if(t){for(i=0,o=t.length;i<o;i++)s=t[i],(s.geometries||s.geometry||s.features||s.coordinates)&&this.addData(s);return this}var c=this.options;if(c.filter&&!c.filter(e))return this;var p=ri(e,c);return p?(p.feature=li(e),p.defaultOptions=p.options,this.resetStyle(p),c.onEachFeature&&c.onEachFeature(e,p),this.addLayer(p)):this},resetStyle:function(e){return e===void 0?this.eachLayer(this.resetStyle,this):(e.options=r({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){e.setStyle&&(typeof t=="function"&&(t=t(e.feature)),e.setStyle(t))}});function ri(e,t){var i=e.type==="Feature"?e.geometry:e,o=i?i.coordinates:null,s=[],c=t&&t.pointToLayer,p=t&&t.coordsToLatLng||cn,f,g,w,S;if(!o&&!i)return null;switch(i.type){case"Point":return f=p(o),bo(c,e,f,t);case"MultiPoint":for(w=0,S=o.length;w<S;w++)f=p(o[w]),s.push(bo(c,e,f,t));return new Ue(s);case"LineString":case"MultiLineString":return g=si(o,i.type==="LineString"?0:1,p),new Ve(g,t);case"Polygon":case"MultiPolygon":return g=si(o,i.type==="Polygon"?1:2,p),new mt(g,t);case"GeometryCollection":for(w=0,S=i.geometries.length;w<S;w++){var A=ri({geometry:i.geometries[w],type:"Feature",properties:e.properties},t);A&&s.push(A)}return new Ue(s);case"FeatureCollection":for(w=0,S=i.features.length;w<S;w++){var N=ri(i.features[w],t);N&&s.push(N)}return new Ue(s);default:throw new Error("Invalid GeoJSON object.")}}function bo(e,t,i,o){return e?e(t,i):new ni(i,o&&o.markersInheritOptions&&o)}function cn(e){return new K(e[1],e[0],e[2])}function si(e,t,i){for(var o=[],s=0,c=e.length,p;s<c;s++)p=t?si(e[s],t-1,i):(i||cn)(e[s]),o.push(p);return o}function un(e,t){return e=F(e),e.alt!==void 0?[C(e.lng,t),C(e.lat,t),C(e.alt,t)]:[C(e.lng,t),C(e.lat,t)]}function ai(e,t,i,o){for(var s=[],c=0,p=e.length;c<p;c++)s.push(t?ai(e[c],ke(e[c])?0:t-1,i,o):un(e[c],o));return!t&&i&&s.length>0&&s.push(s[0].slice()),s}function _t(e,t){return e.feature?r({},e.feature,{geometry:t}):li(t)}function li(e){return e.type==="Feature"||e.type==="FeatureCollection"?e:{type:"Feature",properties:{},geometry:e}}var hn={toGeoJSON:function(e){return _t(this,{type:"Point",coordinates:un(this.getLatLng(),e)})}};ni.include(hn),ln.include(hn),oi.include(hn),Ve.include({toGeoJSON:function(e){var t=!ke(this._latlngs),i=ai(this._latlngs,t?1:0,!1,e);return _t(this,{type:(t?"Multi":"")+"LineString",coordinates:i})}}),mt.include({toGeoJSON:function(e){var t=!ke(this._latlngs),i=t&&!ke(this._latlngs[0]),o=ai(this._latlngs,i?2:t?1:0,!0,e);return t||(o=[o]),_t(this,{type:(i?"Multi":"")+"Polygon",coordinates:o})}}),pt.include({toMultiPoint:function(e){var t=[];return this.eachLayer(function(i){t.push(i.toGeoJSON(e).geometry.coordinates)}),_t(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(t==="MultiPoint")return this.toMultiPoint(e);var i=t==="GeometryCollection",o=[];return this.eachLayer(function(s){if(s.toGeoJSON){var c=s.toGeoJSON(e);if(i)o.push(c.geometry);else{var p=li(c);p.type==="FeatureCollection"?o.push.apply(o,p.features):o.push(p)}}}),i?_t(this,{geometries:o,type:"GeometryCollection"}):{type:"FeatureCollection",features:o}}});function Co(e,t){return new Fe(e,t)}var _a=Co,ci=Ie.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,t,i){this._url=e,this._bounds=ae(t),T(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(G(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){re(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&ht(this._image),this},bringToBack:function(){return this._map&&dt(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=ae(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e=this._url.tagName==="IMG",t=this._image=e?this._url:$("img");if(G(t,"leaflet-image-layer"),this._zoomAnimated&&G(t,"leaflet-zoom-animated"),this.options.className&&G(t,this.options.className),t.onselectstart=_,t.onmousemove=_,t.onload=l(this.fire,this,"load"),t.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(t.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e){this._url=t.src;return}t.src=this._url,t.alt=this.options.alt},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;tt(this._image,i,t)},_reset:function(){var e=this._image,t=new oe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=t.getSize();le(e,t.min),e.style.width=i.x+"px",e.style.height=i.y+"px"},_updateOpacity:function(){we(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}}),ga=function(e,t,i){return new ci(e,t,i)},Lo=ci.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e=this._url.tagName==="VIDEO",t=this._image=e?this._url:$("video");if(G(t,"leaflet-image-layer"),this._zoomAnimated&&G(t,"leaflet-zoom-animated"),this.options.className&&G(t,this.options.className),t.onselectstart=_,t.onmousemove=_,t.onloadeddata=l(this.fire,this,"load"),e){for(var i=t.getElementsByTagName("source"),o=[],s=0;s<i.length;s++)o.push(i[s].src);this._url=i.length>0?o:[t.src];return}ne(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(t.style,"objectFit")&&(t.style.objectFit="fill"),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop,t.muted=!!this.options.muted,t.playsInline=!!this.options.playsInline;for(var c=0;c<this._url.length;c++){var p=$("source");p.src=this._url[c],t.appendChild(p)}}});function va(e,t,i){return new Lo(e,t,i)}var wo=ci.extend({_initImage:function(){var e=this._image=this._url;G(e,"leaflet-image-layer"),this._zoomAnimated&&G(e,"leaflet-zoom-animated"),this.options.className&&G(e,this.options.className),e.onselectstart=_,e.onmousemove=_}});function ya(e,t,i){return new wo(e,t,i)}var De=Ie.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(e,t){e&&(e instanceof K||ne(e))?(this._latlng=F(e),T(this,t)):(T(this,e),this._source=t),this.options.content&&(this._content=this.options.content)},openOn:function(e){return e=arguments.length?e:this._source._map,e.hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&we(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&we(this._container,1),this.bringToFront(),this.options.interactive&&(G(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(we(this._container,0),this._removeTimeout=setTimeout(l(re,void 0,this._container),200)):re(this._container),this.options.interactive&&(se(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=F(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ht(this._container),this},bringToBack:function(){return this._map&&dt(this._container),this},_prepareOpen:function(e){var t=this._source;if(!t._map)return!1;if(t instanceof Ue){t=null;var i=this._source._layers;for(var o in i)if(i[o]._map){t=i[o];break}if(!t)return!1;this._source=t}if(!e)if(t.getCenter)e=t.getCenter();else if(t.getLatLng)e=t.getLatLng();else if(t.getBounds)e=t.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var e=this._contentNode,t=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof t=="string")e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=B(this.options.offset),i=this._getAnchor();this._zoomAnimated?le(this._container,e.add(i)):t=t.add(e).add(i);var o=this._containerBottom=-t.y,s=this._containerLeft=-Math.round(this._containerWidth/2)+t.x;this._container.style.bottom=o+"px",this._container.style.left=s+"px"}},_getAnchor:function(){return[0,0]}});H.include({_initOverlay:function(e,t,i,o){var s=t;return s instanceof e||(s=new e(o).setContent(t)),i&&s.setLatLng(i),s}}),Ie.include({_initOverlay:function(e,t,i,o){var s=i;return s instanceof e?(T(s,o),s._source=this):(s=t&&!o?t:new e(o,this),s.setContent(i)),s}});var ui=De.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return e=arguments.length?e:this._source._map,!e.hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,De.prototype.openOn.call(this,e)},onAdd:function(e){De.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Qe||this._source.on("preclick",nt))},onRemove:function(e){De.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Qe||this._source.off("preclick",nt))},getEvents:function(){var e=De.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e="leaflet-popup",t=this._container=$("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=$("div",e+"-content-wrapper",t);if(this._contentNode=$("div",e+"-content",i),Bt(t),Ji(this._contentNode),R(t,"contextmenu",nt),this._tipContainer=$("div",e+"-tip-container",t),this._tip=$("div",e+"-tip",this._tipContainer),this.options.closeButton){var o=this._closeButton=$("a",e+"-close-button",t);o.setAttribute("role","button"),o.setAttribute("aria-label","Close popup"),o.href="#close",o.innerHTML='<span aria-hidden="true">&#215;</span>',R(o,"click",function(s){he(s),this.close()},this)}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var i=e.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),t.width=i+1+"px",t.whiteSpace="",t.height="";var o=e.offsetHeight,s=this.options.maxHeight,c="leaflet-popup-scrolled";s&&o>s?(t.height=s+"px",G(e,c)):se(e,c),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),i=this._getAnchor();le(this._container,t.add(i))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var e=this._map,t=parseInt(It(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+t,o=this._containerWidth,s=new D(this._containerLeft,-i-this._containerBottom);s._add(it(this._container));var c=e.layerPointToContainerPoint(s),p=B(this.options.autoPanPadding),f=B(this.options.autoPanPaddingTopLeft||p),g=B(this.options.autoPanPaddingBottomRight||p),w=e.getSize(),S=0,A=0;c.x+o+g.x>w.x&&(S=c.x+o-w.x+g.x),c.x-S-f.x<0&&(S=c.x-f.x),c.y+i+g.y>w.y&&(A=c.y+i-w.y+g.y),c.y-A-f.y<0&&(A=c.y-f.y),(S||A)&&(this.options.keepInView&&(this._autopanning=!0),e.fire("autopanstart").panBy([S,A]))}},_getAnchor:function(){return B(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),xa=function(e,t){return new ui(e,t)};H.mergeOptions({closePopupOnClick:!0}),H.include({openPopup:function(e,t,i){return this._initOverlay(ui,e,t,i).openOn(this),this},closePopup:function(e){return e=arguments.length?e:this._popup,e&&e.close(),this}}),Ie.include({bindPopup:function(e,t){return this._popup=this._initOverlay(ui,this._popup,e,t),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e){return this._popup&&(this instanceof Ue||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(!(!this._popup||!this._map)){ot(e);var t=e.layer||e.target;if(this._popup._source===t&&!(t instanceof Qe)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng);return}this._popup._source=t,this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){e.originalEvent.keyCode===13&&this._openPopup(e)}});var hi=De.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){De.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(e){De.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var e=De.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){var e="leaflet-tooltip",t=e+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=$("div",t),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t,i,o=this._map,s=this._container,c=o.latLngToContainerPoint(o.getCenter()),p=o.layerPointToContainerPoint(e),f=this.options.direction,g=s.offsetWidth,w=s.offsetHeight,S=B(this.options.offset),A=this._getAnchor();f==="top"?(t=g/2,i=w):f==="bottom"?(t=g/2,i=0):f==="center"?(t=g/2,i=w/2):f==="right"?(t=0,i=w/2):f==="left"?(t=g,i=w/2):p.x<c.x?(f="right",t=0,i=w/2):(f="left",t=g+(S.x+A.x)*2,i=w/2),e=e.subtract(B(t,i,!0)).add(S).add(A),se(s,"leaflet-tooltip-right"),se(s,"leaflet-tooltip-left"),se(s,"leaflet-tooltip-top"),se(s,"leaflet-tooltip-bottom"),G(s,"leaflet-tooltip-"+f),le(s,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&we(this._container,e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(t)},_getAnchor:function(){return B(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ba=function(e,t){return new hi(e,t)};H.include({openTooltip:function(e,t,i){return this._initOverlay(hi,e,t,i).openOn(this),this},closeTooltip:function(e){return e.close(),this}}),Ie.include({bindTooltip:function(e,t){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(hi,this._tooltip,e,t),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(!(!e&&this._tooltipHandlersAdded)){var t=e?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,i.click=this._openTooltip,this._map?this._addFocusListeners():i.add=this._addFocusListeners),this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),this[t](i),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&(this instanceof Ue||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){var t=typeof e.getElement=="function"&&e.getElement();t&&(R(t,"focus",function(){this._tooltip._source=e,this.openTooltip()},this),R(t,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(e){var t=typeof e.getElement=="function"&&e.getElement();t&&t.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(e){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var t=this;this._map.once("moveend",function(){t._openOnceFlag=!1,t._openTooltip(e)});return}this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)}},_moveTooltip:function(e){var t=e.latlng,i,o;this._tooltip.options.sticky&&e.originalEvent&&(i=this._map.mouseEventToContainerPoint(e.originalEvent),o=this._map.containerPointToLayerPoint(i),t=this._map.layerPointToLatLng(o)),this._tooltip.setLatLng(t)}});var ko=ft.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var t=e&&e.tagName==="DIV"?e:document.createElement("div"),i=this.options;if(i.html instanceof Element?(Xt(t),t.appendChild(i.html)):t.innerHTML=i.html!==!1?i.html:"",i.bgPos){var o=B(i.bgPos);t.style.backgroundPosition=-o.x+"px "+-o.y+"px"}return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}});function Ca(e){return new ko(e)}ft.Default=Zt;var Gt=Ie.extend({options:{tileSize:256,opacity:1,updateWhenIdle:z.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){T(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),re(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ht(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(dt(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof D?e:new D(e,e)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t=this.getPane().children,i=-e(-1/0,1/0),o=0,s=t.length,c;o<s;o++)c=t[o].style.zIndex,t[o]!==this._container&&c&&(i=e(i,+c));isFinite(i)&&(this.options.zIndex=i+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!z.ielt9){we(this._container,this.options.opacity);var e=+new Date,t=!1,i=!1;for(var o in this._tiles){var s=this._tiles[o];if(!(!s.current||!s.loaded)){var c=Math.min(1,(e-s.loaded)/200);we(s.el,c),c<1?t=!0:(s.active?i=!0:this._onOpaqueTile(s),s.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),t&&(Le(this._fadeFrame),this._fadeFrame=me(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=$("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(e!==void 0){for(var i in this._levels)i=Number(i),this._levels[i].el.children.length||i===e?(this._levels[i].el.style.zIndex=t-Math.abs(e-i),this._onUpdateLevel(i)):(re(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var o=this._levels[e],s=this._map;return o||(o=this._levels[e]={},o.el=$("div","leaflet-tile-container leaflet-zoom-animated",this._container),o.el.style.zIndex=t,o.origin=s.project(s.unproject(s.getPixelOrigin()),e).round(),o.zoom=e,this._setZoomTransform(o,s.getCenter(),s.getZoom()),_(o.el.offsetWidth),this._onCreateLevel(o)),this._level=o,o}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(this._map){var e,t,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom){this._removeAllTiles();return}for(e in this._tiles)t=this._tiles[e],t.retain=t.current;for(e in this._tiles)if(t=this._tiles[e],t.current&&!t.active){var o=t.coords;this._retainParent(o.x,o.y,o.z,o.z-5)||this._retainChildren(o.x,o.y,o.z,o.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)re(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,t,i,o){var s=Math.floor(e/2),c=Math.floor(t/2),p=i-1,f=new D(+s,+c);f.z=+p;var g=this._tileCoordsToKey(f),w=this._tiles[g];return w&&w.active?(w.retain=!0,!0):(w&&w.loaded&&(w.retain=!0),p>o?this._retainParent(s,c,p,o):!1)},_retainChildren:function(e,t,i,o){for(var s=2*e;s<2*e+2;s++)for(var c=2*t;c<2*t+2;c++){var p=new D(s,c);p.z=i+1;var f=this._tileCoordsToKey(p),g=this._tiles[f];if(g&&g.active){g.retain=!0;continue}else g&&g.loaded&&(g.retain=!0);i+1<o&&this._retainChildren(s,c,i+1,o)}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var t=this.options;return t.minNativeZoom!==void 0&&e<t.minNativeZoom?t.minNativeZoom:t.maxNativeZoom!==void 0&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(e,t,i,o){var s=Math.round(t);this.options.maxZoom!==void 0&&s>this.options.maxZoom||this.options.minZoom!==void 0&&s<this.options.minZoom?s=void 0:s=this._clampZoom(s);var c=this.options.updateWhenZooming&&s!==this._tileZoom;(!o||c)&&(this._tileZoom=s,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),s!==void 0&&this._update(e),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var i in this._levels)this._setZoomTransform(this._levels[i],e,t)},_setZoomTransform:function(e,t,i){var o=this._map.getZoomScale(i,e.zoom),s=e.origin.multiplyBy(o).subtract(this._map._getNewPixelOrigin(t,i)).round();z.any3d?tt(e.el,s,o):le(e.el,s)},_resetGrid:function(){var e=this._map,t=e.options.crs,i=this._tileSize=this.getTileSize(),o=this._tileZoom,s=this._map.getPixelWorldBounds(this._tileZoom);s&&(this._globalTileRange=this._pxBoundsToTileRange(s)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],o).x/i.x),Math.ceil(e.project([0,t.wrapLng[1]],o).x/i.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],o).y/i.x),Math.ceil(e.project([t.wrapLat[1],0],o).y/i.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(e){var t=this._map,i=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),o=t.getZoomScale(i,this._tileZoom),s=t.project(e,this._tileZoom).floor(),c=t.getSize().divideBy(o*2);return new oe(s.subtract(c),s.add(c))},_update:function(e){var t=this._map;if(t){var i=this._clampZoom(t.getZoom());if(e===void 0&&(e=t.getCenter()),this._tileZoom!==void 0){var o=this._getTiledPixelBounds(e),s=this._pxBoundsToTileRange(o),c=s.getCenter(),p=[],f=this.options.keepBuffer,g=new oe(s.getBottomLeft().subtract([f,-f]),s.getTopRight().add([f,-f]));if(!(isFinite(s.min.x)&&isFinite(s.min.y)&&isFinite(s.max.x)&&isFinite(s.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var w in this._tiles){var S=this._tiles[w].coords;(S.z!==this._tileZoom||!g.contains(new D(S.x,S.y)))&&(this._tiles[w].current=!1)}if(Math.abs(i-this._tileZoom)>1){this._setView(e,i);return}for(var A=s.min.y;A<=s.max.y;A++)for(var N=s.min.x;N<=s.max.x;N++){var pe=new D(N,A);if(pe.z=this._tileZoom,!!this._isValidTile(pe)){var ue=this._tiles[this._tileCoordsToKey(pe)];ue?ue.current=!0:p.push(pe)}}if(p.sort(function(ve,vt){return ve.distanceTo(c)-vt.distanceTo(c)}),p.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Me=document.createDocumentFragment();for(N=0;N<p.length;N++)this._addTile(p[N],Me);this._level.el.appendChild(Me)}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var i=this._globalTileRange;if(!t.wrapLng&&(e.x<i.min.x||e.x>i.max.x)||!t.wrapLat&&(e.y<i.min.y||e.y>i.max.y))return!1}if(!this.options.bounds)return!0;var o=this._tileCoordsToBounds(e);return ae(this.options.bounds).overlaps(o)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var t=this._map,i=this.getTileSize(),o=e.scaleBy(i),s=o.add(i),c=t.unproject(o,e.z),p=t.unproject(s,e.z);return[c,p]},_tileCoordsToBounds:function(e){var t=this._tileCoordsToNwSe(e),i=new ge(t[0],t[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),i=new D(+t[0],+t[1]);return i.z=+t[2],i},_removeTile:function(e){var t=this._tiles[e];t&&(re(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){G(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=_,e.onmousemove=_,z.ielt9&&this.options.opacity<1&&we(e,this.options.opacity)},_addTile:function(e,t){var i=this._getTilePos(e),o=this._tileCoordsToKey(e),s=this.createTile(this._wrapCoords(e),l(this._tileReady,this,e));this._initTile(s),this.createTile.length<2&&me(l(this._tileReady,this,e,null,s)),le(s,i),this._tiles[o]={el:s,coords:e,current:!0},t.appendChild(s),this.fire("tileloadstart",{tile:s,coords:e})},_tileReady:function(e,t,i){t&&this.fire("tileerror",{error:t,tile:i,coords:e});var o=this._tileCoordsToKey(e);i=this._tiles[o],i&&(i.loaded=+new Date,this._map._fadeAnimated?(we(i.el,0),Le(this._fadeFrame),this._fadeFrame=me(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),t||(G(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),z.ielt9||!this._map._fadeAnimated?me(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new D(this._wrapX?x(e.x,this._wrapX):e.x,this._wrapY?x(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new oe(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});function La(e){return new Gt(e)}var gt=Gt.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,t){this._url=e,t=T(this,t),t.detectRetina&&z.retina&&t.maxZoom>0?(t.tileSize=Math.floor(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom=Math.min(t.maxZoom,t.minZoom+1)):(t.zoomOffset++,t.maxZoom=Math.max(t.minZoom,t.maxZoom-1)),t.minZoom=Math.max(0,t.minZoom)):t.zoomReverse?t.minZoom=Math.min(t.maxZoom,t.minZoom):t.maxZoom=Math.max(t.minZoom,t.maxZoom),typeof t.subdomains=="string"&&(t.subdomains=t.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url===e&&t===void 0&&(t=!0),this._url=e,t||this.redraw(),this},createTile:function(e,t){var i=document.createElement("img");return R(i,"load",l(this._tileOnLoad,this,t,i)),R(i,"error",l(this._tileOnError,this,t,i)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(i.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(i.referrerPolicy=this.options.referrerPolicy),i.alt="",i.src=this.getTileUrl(e),i},getTileUrl:function(e){var t={r:z.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-e.y;this.options.tms&&(t.y=i),t["-y"]=i}return ie(this._url,r(t,this.options))},_tileOnLoad:function(e,t){z.ielt9?setTimeout(l(e,this,null,t),0):e(null,t)},_tileOnError:function(e,t,i){var o=this.options.errorTileUrl;o&&t.getAttribute("src")!==o&&(t.src=o),e(i,t)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom,i=this.options.zoomReverse,o=this.options.zoomOffset;return i&&(e=t-e),e+o},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&(t=this._tiles[e].el,t.onload=_,t.onerror=_,!t.complete)){t.src=ye;var i=this._tiles[e].coords;re(t),delete this._tiles[e],this.fire("tileabort",{tile:t,coords:i})}},_removeTile:function(e){var t=this._tiles[e];if(t)return t.el.setAttribute("src",ye),Gt.prototype._removeTile.call(this,e)},_tileReady:function(e,t,i){if(!(!this._map||i&&i.getAttribute("src")===ye))return Gt.prototype._tileReady.call(this,e,t,i)}});function Mo(e,t){return new gt(e,t)}var To=gt.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,t){this._url=e;var i=r({},this.defaultWmsParams);for(var o in t)o in this.options||(i[o]=t[o]);t=T(this,t);var s=t.detectRetina&&z.retina?2:1,c=this.getTileSize();i.width=c.x*s,i.height=c.y*s,this.wmsParams=i},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,gt.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToNwSe(e),i=this._crs,o=_e(i.project(t[0]),i.project(t[1])),s=o.min,c=o.max,p=(this._wmsVersion>=1.3&&this._crs===yo?[s.y,s.x,c.y,c.x]:[s.x,s.y,c.x,c.y]).join(","),f=gt.prototype.getTileUrl.call(this,e);return f+X(this.wmsParams,f,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+p},setParams:function(e,t){return r(this.wmsParams,e),t||this.redraw(),this}});function wa(e,t){return new To(e,t)}gt.WMS=To,Mo.wms=wa;var He=Ie.extend({options:{padding:.1},initialize:function(e){T(this,e),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),G(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var i=this._map.getZoomScale(t,this._zoom),o=this._map.getSize().multiplyBy(.5+this.options.padding),s=this._map.project(this._center,t),c=o.multiplyBy(-i).add(s).subtract(this._map._getNewPixelOrigin(e,t));z.any3d?tt(this._container,c,i):le(this._container,c)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var e in this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),i=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new oe(i,i.add(t.multiplyBy(1+e*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),So=He.extend({options:{tolerance:0},getEvents:function(){var e=He.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){He.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");R(e,"mousemove",this._onMouseMove,this),R(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),R(e,"mouseout",this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext("2d")},_destroyContainer:function(){Le(this._redrawRequest),delete this._ctx,re(this._container),Y(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var e;this._redrawBounds=null;for(var t in this._layers)e=this._layers[t],e._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){He.prototype._update.call(this);var e=this._bounds,t=this._container,i=e.getSize(),o=z.retina?2:1;le(t,e.min),t.width=o*i.x,t.height=o*i.y,t.style.width=i.x+"px",t.style.height=i.y+"px",z.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){He.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[d(e)]=e;var t=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,i=t.next,o=t.prev;i?i.prev=o:this._drawLast=o,o?o.next=i:this._drawFirst=i,delete e._order,delete this._layers[d(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if(typeof e.options.dashArray=="string"){var t=e.options.dashArray.split(/[, ]+/),i=[],o,s;for(s=0;s<t.length;s++){if(o=Number(t[s]),isNaN(o))return;i.push(o)}e.options._dashArray=i}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||me(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new oe,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,t=this._redrawBounds;if(this._ctx.save(),t){var i=t.getSize();this._ctx.beginPath(),this._ctx.rect(t.min.x,t.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var o=this._drawFirst;o;o=o.next)e=o.layer,(!t||e._pxBounds&&e._pxBounds.intersects(t))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(this._drawing){var i,o,s,c,p=e._parts,f=p.length,g=this._ctx;if(f){for(g.beginPath(),i=0;i<f;i++){for(o=0,s=p[i].length;o<s;o++)c=p[i][o],g[o?"lineTo":"moveTo"](c.x,c.y);t&&g.closePath()}this._fillStroke(g,e)}}},_updateCircle:function(e){if(!(!this._drawing||e._empty())){var t=e._point,i=this._ctx,o=Math.max(Math.round(e._radius),1),s=(Math.max(Math.round(e._radiusY),1)||o)/o;s!==1&&(i.save(),i.scale(1,s)),i.beginPath(),i.arc(t.x,t.y/s,o,0,Math.PI*2,!1),s!==1&&i.restore(),this._fillStroke(i,e)}},_fillStroke:function(e,t){var i=t.options;i.fill&&(e.globalAlpha=i.fillOpacity,e.fillStyle=i.fillColor||i.color,e.fill(i.fillRule||"evenodd")),i.stroke&&i.weight!==0&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=i.opacity,e.lineWidth=i.weight,e.strokeStyle=i.color,e.lineCap=i.lineCap,e.lineJoin=i.lineJoin,e.stroke())},_onClick:function(e){for(var t=this._map.mouseEventToLayerPoint(e),i,o,s=this._drawFirst;s;s=s.next)i=s.layer,i.options.interactive&&i._containsPoint(t)&&(!(e.type==="click"||e.type==="preclick")||!this._map._draggableMoved(i))&&(o=i);this._fireEvent(o?[o]:!1,e)},_onMouseMove:function(e){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var t=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,t)}},_handleMouseOut:function(e){var t=this._hoveredLayer;t&&(se(this._container,"leaflet-interactive"),this._fireEvent([t],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,t){if(!this._mouseHoverThrottled){for(var i,o,s=this._drawFirst;s;s=s.next)i=s.layer,i.options.interactive&&i._containsPoint(t)&&(o=i);o!==this._hoveredLayer&&(this._handleMouseOut(e),o&&(G(this._container,"leaflet-interactive"),this._fireEvent([o],e,"mouseover"),this._hoveredLayer=o)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,e),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(e,t,i){this._map._fireDOMEvent(t,i||t.type,e)},_bringToFront:function(e){var t=e._order;if(t){var i=t.next,o=t.prev;if(i)i.prev=o;else return;o?o.next=i:i&&(this._drawFirst=i),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(e)}},_bringToBack:function(e){var t=e._order;if(t){var i=t.next,o=t.prev;if(o)o.next=i;else return;i?i.prev=o:o&&(this._drawLast=o),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e)}}});function Po(e){return z.canvas?new So(e):null}var Nt=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch{}return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),ka={_initContainer:function(){this._container=$("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(He.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var t=e._container=Nt("shape");G(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=Nt("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[d(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;re(t),e.removeInteractiveTarget(t),delete this._layers[d(e)]},_updateStyle:function(e){var t=e._stroke,i=e._fill,o=e.options,s=e._container;s.stroked=!!o.stroke,s.filled=!!o.fill,o.stroke?(t||(t=e._stroke=Nt("stroke")),s.appendChild(t),t.weight=o.weight+"px",t.color=o.color,t.opacity=o.opacity,o.dashArray?t.dashStyle=ne(o.dashArray)?o.dashArray.join(" "):o.dashArray.replace(/( *, *)/g," "):t.dashStyle="",t.endcap=o.lineCap.replace("butt","flat"),t.joinstyle=o.lineJoin):t&&(s.removeChild(t),e._stroke=null),o.fill?(i||(i=e._fill=Nt("fill")),s.appendChild(i),i.color=o.fillColor||o.color,i.opacity=o.fillOpacity):i&&(s.removeChild(i),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),i=Math.round(e._radius),o=Math.round(e._radiusY||i);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+i+","+o+" 0,"+65535*360)},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){ht(e._container)},_bringToBack:function(e){dt(e._container)}},di=z.vml?Nt:zn,Ut=He.extend({_initContainer:function(){this._container=di("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=di("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){re(this._container),Y(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){He.prototype._update.call(this);var e=this._bounds,t=e.getSize(),i=this._container;(!this._svgSize||!this._svgSize.equals(t))&&(this._svgSize=t,i.setAttribute("width",t.x),i.setAttribute("height",t.y)),le(i,e.min),i.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" ")),this.fire("update")}},_initPath:function(e){var t=e._path=di("path");e.options.className&&G(t,e.options.className),e.options.interactive&&G(t,"leaflet-interactive"),this._updateStyle(e),this._layers[d(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){re(e._path),e.removeInteractiveTarget(e._path),delete this._layers[d(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,i=e.options;t&&(i.stroke?(t.setAttribute("stroke",i.color),t.setAttribute("stroke-opacity",i.opacity),t.setAttribute("stroke-width",i.weight),t.setAttribute("stroke-linecap",i.lineCap),t.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?t.setAttribute("stroke-dasharray",i.dashArray):t.removeAttribute("stroke-dasharray"),i.dashOffset?t.setAttribute("stroke-dashoffset",i.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),i.fill?(t.setAttribute("fill",i.fillColor||i.color),t.setAttribute("fill-opacity",i.fillOpacity),t.setAttribute("fill-rule",i.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(e,t){this._setPath(e,On(e._parts,t))},_updateCircle:function(e){var t=e._point,i=Math.max(Math.round(e._radius),1),o=Math.max(Math.round(e._radiusY),1)||i,s="a"+i+","+o+" 0 1,0 ",c=e._empty()?"M0 0":"M"+(t.x-i)+","+t.y+s+i*2+",0 "+s+-i*2+",0 ";this._setPath(e,c)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){ht(e._path)},_bringToBack:function(e){dt(e._path)}});z.vml&&Ut.include(ka);function Eo(e){return z.svg||z.vml?new Ut(e):null}H.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this._createRenderer()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if(e==="overlayPane"||e===void 0)return!1;var t=this._paneRenderers[e];return t===void 0&&(t=this._createRenderer({pane:e}),this._paneRenderers[e]=t),t},_createRenderer:function(e){return this.options.preferCanvas&&Po(e)||Eo(e)}});var Io=mt.extend({initialize:function(e,t){mt.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=ae(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});function Ma(e,t){return new Io(e,t)}Ut.create=di,Ut.pointsToPath=On,Fe.geometryToLayer=ri,Fe.coordsToLatLng=cn,Fe.coordsToLatLngs=si,Fe.latLngToCoords=un,Fe.latLngsToCoords=ai,Fe.getFeature=_t,Fe.asFeature=li,H.mergeOptions({boxZoom:!0});var zo=Be.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){R(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Y(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){re(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||e.which!==1&&e.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),zt(),ji(),this._startPoint=this._map.mouseEventToContainerPoint(e),R(document,{contextmenu:ot,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=$("div","leaflet-zoom-box",this._container),G(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var t=new oe(this._point,this._startPoint),i=t.getSize();le(this._box,t.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(re(this._box),se(this._container,"leaflet-crosshair")),Ot(),Wi(),Y(document,{contextmenu:ot,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if(!(e.which!==1&&e.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var t=new ge(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})}},_onKeyDown:function(e){e.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});H.addInitHook("addHandler","boxZoom",zo),H.mergeOptions({doubleClickZoom:!0});var Oo=Be.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,i=t.getZoom(),o=t.options.zoomDelta,s=e.originalEvent.shiftKey?i-o:i+o;t.options.doubleClickZoom==="center"?t.setZoom(s):t.setZoomAround(e.containerPoint,s)}});H.addInitHook("addHandler","doubleClickZoom",Oo),H.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ao=Be.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new qe(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}G(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){se(this._map._container,"leaflet-grab"),se(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=ae(this._map.options.maxBounds);this._offsetLimit=_e(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var t=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(t),this._prunePositions(t)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=Math.round(e/2),i=this._initialWorldOffset,o=this._draggable._newPos.x,s=(o-t+i)%e+t-i,c=(o+t+i)%e-t-i,p=Math.abs(s+i)<Math.abs(c+i)?s:c;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=p},_onDragEnd:function(e){var t=this._map,i=t.options,o=!i.inertia||e.noInertia||this._times.length<2;if(t.fire("dragend",e),o)t.fire("moveend");else{this._prunePositions(+new Date);var s=this._lastPos.subtract(this._positions[0]),c=(this._lastTime-this._times[0])/1e3,p=i.easeLinearity,f=s.multiplyBy(p/c),g=f.distanceTo([0,0]),w=Math.min(i.inertiaMaxSpeed,g),S=f.multiplyBy(w/g),A=w/(i.inertiaDeceleration*p),N=S.multiplyBy(-A/2).round();!N.x&&!N.y?t.fire("moveend"):(N=t._limitOffset(N,t.options.maxBounds),me(function(){t.panBy(N,{duration:A,easeLinearity:p,noMoveStart:!0,animate:!0})}))}}});H.addInitHook("addHandler","dragging",Ao),H.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Bo=Be.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),R(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Y(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,t=document.documentElement,i=e.scrollTop||t.scrollTop,o=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(o,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var t=this._panKeys={},i=this.keyCodes,o,s;for(o=0,s=i.left.length;o<s;o++)t[i.left[o]]=[-1*e,0];for(o=0,s=i.right.length;o<s;o++)t[i.right[o]]=[e,0];for(o=0,s=i.down.length;o<s;o++)t[i.down[o]]=[0,e];for(o=0,s=i.up.length;o<s;o++)t[i.up[o]]=[0,-1*e]},_setZoomDelta:function(e){var t=this._zoomKeys={},i=this.keyCodes,o,s;for(o=0,s=i.zoomIn.length;o<s;o++)t[i.zoomIn[o]]=e;for(o=0,s=i.zoomOut.length;o<s;o++)t[i.zoomOut[o]]=-e},_addHooks:function(){R(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Y(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t=e.keyCode,i=this._map,o;if(t in this._panKeys){if(!i._panAnim||!i._panAnim._inProgress)if(o=this._panKeys[t],e.shiftKey&&(o=B(o).multiplyBy(3)),i.options.maxBounds&&(o=i._limitOffset(B(o),i.options.maxBounds)),i.options.worldCopyJump){var s=i.wrapLatLng(i.unproject(i.project(i.getCenter()).add(o)));i.panTo(s)}else i.panBy(o)}else if(t in this._zoomKeys)i.setZoom(i.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[t]);else if(t===27&&i._popup&&i._popup.options.closeOnEscapeKey)i.closePopup();else return;ot(e)}}});H.addInitHook("addHandler","keyboard",Bo),H.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Do=Be.extend({addHooks:function(){R(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Y(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var t=ro(e),i=this._map.options.wheelDebounceTime;this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var o=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),o),ot(e)},_performZoom:function(){var e=this._map,t=e.getZoom(),i=this._map.options.zoomSnap||0;e._stop();var o=this._delta/(this._map.options.wheelPxPerZoomLevel*4),s=4*Math.log(2/(1+Math.exp(-Math.abs(o))))/Math.LN2,c=i?Math.ceil(s/i)*i:s,p=e._limitZoom(t+(this._delta>0?c:-c))-t;this._delta=0,this._startTime=null,p&&(e.options.scrollWheelZoom==="center"?e.setZoom(t+p):e.setZoomAround(this._lastMousePos,t+p))}});H.addInitHook("addHandler","scrollWheelZoom",Do);var Ta=600;H.mergeOptions({tapHold:z.touchNative&&z.safari&&z.mobile,tapTolerance:15});var Ro=Be.extend({addHooks:function(){R(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Y(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),e.touches.length===1){var t=e.touches[0];this._startPos=this._newPos=new D(t.clientX,t.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(R(document,"touchend",he),R(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",t))},this),Ta),R(document,"touchend touchcancel contextmenu",this._cancel,this),R(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function e(){Y(document,"touchend",he),Y(document,"touchend touchcancel",e)},_cancel:function(){clearTimeout(this._holdTimeout),Y(document,"touchend touchcancel contextmenu",this._cancel,this),Y(document,"touchmove",this._onMove,this)},_onMove:function(e){var t=e.touches[0];this._newPos=new D(t.clientX,t.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,t){var i=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY});i._simulated=!0,t.target.dispatchEvent(i)}});H.addInitHook("addHandler","tapHold",Ro),H.mergeOptions({touchZoom:z.touch,bounceAtZoomLimits:!0});var Zo=Be.extend({addHooks:function(){G(this._map._container,"leaflet-touch-zoom"),R(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){se(this._map._container,"leaflet-touch-zoom"),Y(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(!(!e.touches||e.touches.length!==2||t._animatingZoom||this._zooming)){var i=t.mouseEventToContainerPoint(e.touches[0]),o=t.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),t.options.touchZoom!=="center"&&(this._pinchStartLatLng=t.containerPointToLatLng(i.add(o)._divideBy(2))),this._startDist=i.distanceTo(o),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t._stop(),R(document,"touchmove",this._onTouchMove,this),R(document,"touchend touchcancel",this._onTouchEnd,this),he(e)}},_onTouchMove:function(e){if(!(!e.touches||e.touches.length!==2||!this._zooming)){var t=this._map,i=t.mouseEventToContainerPoint(e.touches[0]),o=t.mouseEventToContainerPoint(e.touches[1]),s=i.distanceTo(o)/this._startDist;if(this._zoom=t.getScaleZoom(s,this._startZoom),!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&s<1||this._zoom>t.getMaxZoom()&&s>1)&&(this._zoom=t._limitZoom(this._zoom)),t.options.touchZoom==="center"){if(this._center=this._startLatLng,s===1)return}else{var c=i._add(o)._divideBy(2)._subtract(this._centerPoint);if(s===1&&c.x===0&&c.y===0)return;this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(c),this._zoom)}this._moved||(t._moveStart(!0,!1),this._moved=!0),Le(this._animRequest);var p=l(t._move,t,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=me(p,this,!0),he(e)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Le(this._animRequest),Y(document,"touchmove",this._onTouchMove,this),Y(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});H.addInitHook("addHandler","touchZoom",Zo),H.BoxZoom=zo,H.DoubleClickZoom=Oo,H.Drag=Ao,H.Keyboard=Bo,H.ScrollWheelZoom=Do,H.TapHold=Ro,H.TouchZoom=Zo,h.Bounds=oe,h.Browser=z,h.CRS=Ne,h.Canvas=So,h.Circle=ln,h.CircleMarker=oi,h.Class=Ge,h.Control=Ee,h.DivIcon=ko,h.DivOverlay=De,h.DomEvent=js,h.DomUtil=Fs,h.Draggable=qe,h.Evented=Tt,h.FeatureGroup=Ue,h.GeoJSON=Fe,h.GridLayer=Gt,h.Handler=Be,h.Icon=ft,h.ImageOverlay=ci,h.LatLng=K,h.LatLngBounds=ge,h.Layer=Ie,h.LayerGroup=pt,h.LineUtil=oa,h.Map=H,h.Marker=ni,h.Mixin=Ys,h.Path=Qe,h.Point=D,h.PolyUtil=Js,h.Polygon=mt,h.Polyline=Ve,h.Popup=ui,h.PosAnimation=so,h.Projection=ra,h.Rectangle=Io,h.Renderer=He,h.SVG=Ut,h.SVGOverlay=wo,h.TileLayer=gt,h.Tooltip=hi,h.Transformation=Oi,h.Util=hs,h.VideoOverlay=Lo,h.bind=l,h.bounds=_e,h.canvas=Po,h.circle=pa,h.circleMarker=da,h.control=Dt,h.divIcon=Ca,h.extend=r,h.featureGroup=ca,h.geoJSON=Co,h.geoJson=_a,h.gridLayer=La,h.icon=ua,h.imageOverlay=ga,h.latLng=F,h.latLngBounds=ae,h.layerGroup=la,h.map=Ws,h.marker=ha,h.point=B,h.polygon=ma,h.polyline=fa,h.popup=xa,h.rectangle=Ma,h.setOptions=T,h.stamp=d,h.svg=Eo,h.svgOverlay=ya,h.tileLayer=Mo,h.tooltip=ba,h.transformation=St,h.version=a,h.videoOverlay=va;var Sa=window.L;h.noConflict=function(){return window.L=Sa,this},window.L=h})});var Mn=Fo((Si,ls)=>{"use strict";(function(h,a){typeof Si=="object"&&typeof ls<"u"?a(Si):typeof define=="function"&&define.amd?define(["exports"],a):(h=h||self,a((h.Leaflet=h.Leaflet||{},h.Leaflet.markercluster={})))})(Si,function(h){"use strict";var a=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(n){L.Util.setOptions(this,n),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var l=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,l?this._withAnimation:this._noAnimation),this._markerCluster=l?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(n){if(n instanceof L.LayerGroup)return this.addLayers([n]);if(!n.getLatLng)return this._nonPointGroup.addLayer(n),this.fire("layeradd",{layer:n}),this;if(!this._map)return this._needsClustering.push(n),this.fire("layeradd",{layer:n}),this;if(this.hasLayer(n))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(n,this._maxZoom),this.fire("layeradd",{layer:n}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var l=n,u=this._zoom;if(n.__parent)for(;l.__parent._zoom>=u;)l=l.__parent;return this._currentShownBounds.contains(l.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(n,l):this._animationAddLayerNonAnimated(n,l)),this},removeLayer:function(n){return n instanceof L.LayerGroup?this.removeLayers([n]):n.getLatLng?this._map?n.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(n)),this._removeLayer(n,!0),this.fire("layerremove",{layer:n}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),n.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(n)&&(this._featureGroup.removeLayer(n),n.clusterShow&&n.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,n)&&this.hasLayer(n)&&this._needsRemoving.push({layer:n,latlng:n._latlng}),this.fire("layerremove",{layer:n}),this):(this._nonPointGroup.removeLayer(n),this.fire("layerremove",{layer:n}),this)},addLayers:function(n,l){if(!L.Util.isArray(n))return this.addLayer(n);var u=this._featureGroup,d=this._nonPointGroup,m=this.options.chunkedLoading,x=this.options.chunkInterval,_=this.options.chunkProgress,C=n.length,b=0,P=!0,T;if(this._map){var X=new Date().getTime(),Z=L.bind(function(){var ne=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();b<C;b++){if(m&&b%200===0){var Ze=new Date().getTime()-ne;if(Ze>x)break}if(T=n[b],T instanceof L.LayerGroup){P&&(n=n.slice(),P=!1),this._extractNonGroupLayers(T,n),C=n.length;continue}if(!T.getLatLng){d.addLayer(T),l||this.fire("layeradd",{layer:T});continue}if(!this.hasLayer(T)&&(this._addLayer(T,this._maxZoom),l||this.fire("layeradd",{layer:T}),T.__parent&&T.__parent.getChildCount()===2)){var ye=T.__parent.getAllChildMarkers(),Mt=ye[0]===T?ye[1]:ye[0];u.removeLayer(Mt)}}_&&_(b,C,new Date().getTime()-X),b===C?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(Z,this.options.chunkDelay)},this);Z()}else for(var ie=this._needsClustering;b<C;b++){if(T=n[b],T instanceof L.LayerGroup){P&&(n=n.slice(),P=!1),this._extractNonGroupLayers(T,n),C=n.length;continue}if(!T.getLatLng){d.addLayer(T);continue}this.hasLayer(T)||ie.push(T)}return this},removeLayers:function(n){var l,u,d=n.length,m=this._featureGroup,x=this._nonPointGroup,_=!0;if(!this._map){for(l=0;l<d;l++){if(u=n[l],u instanceof L.LayerGroup){_&&(n=n.slice(),_=!1),this._extractNonGroupLayers(u,n),d=n.length;continue}this._arraySplice(this._needsClustering,u),x.removeLayer(u),this.hasLayer(u)&&this._needsRemoving.push({layer:u,latlng:u._latlng}),this.fire("layerremove",{layer:u})}return this}if(this._unspiderfy){this._unspiderfy();var C=n.slice(),b=d;for(l=0;l<b;l++){if(u=C[l],u instanceof L.LayerGroup){this._extractNonGroupLayers(u,C),b=C.length;continue}this._unspiderfyLayer(u)}}for(l=0;l<d;l++){if(u=n[l],u instanceof L.LayerGroup){_&&(n=n.slice(),_=!1),this._extractNonGroupLayers(u,n),d=n.length;continue}if(!u.__parent){x.removeLayer(u),this.fire("layerremove",{layer:u});continue}this._removeLayer(u,!0,!0),this.fire("layerremove",{layer:u}),m.hasLayer(u)&&(m.removeLayer(u),u.clusterShow&&u.clusterShow())}return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(n){n.off(this._childMarkerEventHandlers,this),delete n.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var n=new L.LatLngBounds;this._topClusterLevel&&n.extend(this._topClusterLevel._bounds);for(var l=this._needsClustering.length-1;l>=0;l--)n.extend(this._needsClustering[l].getLatLng());return n.extend(this._nonPointGroup.getBounds()),n},eachLayer:function(n,l){var u=this._needsClustering.slice(),d=this._needsRemoving,m,x,_;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(u),x=u.length-1;x>=0;x--){for(m=!0,_=d.length-1;_>=0;_--)if(d[_].layer===u[x]){m=!1;break}m&&n.call(l,u[x])}this._nonPointGroup.eachLayer(n,l)},getLayers:function(){var n=[];return this.eachLayer(function(l){n.push(l)}),n},getLayer:function(n){var l=null;return n=parseInt(n,10),this.eachLayer(function(u){L.stamp(u)===n&&(l=u)}),l},hasLayer:function(n){if(!n)return!1;var l,u=this._needsClustering;for(l=u.length-1;l>=0;l--)if(u[l]===n)return!0;for(u=this._needsRemoving,l=u.length-1;l>=0;l--)if(u[l].layer===n)return!1;return!!(n.__parent&&n.__parent._group===this)||this._nonPointGroup.hasLayer(n)},zoomToShowLayer:function(n,l){var u=this._map;typeof l!="function"&&(l=function(){});var d=function(){(u.hasLayer(n)||u.hasLayer(n.__parent))&&!this._inZoomAnimation&&(this._map.off("moveend",d,this),this.off("animationend",d,this),u.hasLayer(n)?l():n.__parent._icon&&(this.once("spiderfied",l,this),n.__parent.spiderfy()))};n._icon&&this._map.getBounds().contains(n.getLatLng())?l():n.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",d,this),this._map.panTo(n.getLatLng())):(this._map.on("moveend",d,this),this.on("animationend",d,this),n.__parent.zoomToBounds())},onAdd:function(n){this._map=n;var l,u,d;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(n),this._nonPointGroup.addTo(n),this._gridClusters||this._generateInitialClusters(),this._maxLat=n.options.crs.projection.MAX_LATITUDE,l=0,u=this._needsRemoving.length;l<u;l++)d=this._needsRemoving[l],d.newlatlng=d.layer._latlng,d.layer._latlng=d.latlng;for(l=0,u=this._needsRemoving.length;l<u;l++)d=this._needsRemoving[l],this._removeLayer(d.layer,!0),d.layer._latlng=d.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),u=this._needsClustering,this._needsClustering=[],this.addLayers(u,!0)},onRemove:function(n){n.off("zoomend",this._zoomEnd,this),n.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(n){for(var l=n;l&&!l._icon;)l=l.__parent;return l||null},_arraySplice:function(n,l){for(var u=n.length-1;u>=0;u--)if(n[u]===l)return n.splice(u,1),!0},_removeFromGridUnclustered:function(n,l){for(var u=this._map,d=this._gridUnclustered,m=Math.floor(this._map.getMinZoom());l>=m&&d[l].removeObject(n,u.project(n.getLatLng(),l));l--);},_childMarkerDragStart:function(n){n.target.__dragStart=n.target._latlng},_childMarkerMoved:function(n){if(!this._ignoreMove&&!n.target.__dragStart){var l=n.target._popup&&n.target._popup.isOpen();this._moveChild(n.target,n.oldLatLng,n.latlng),l&&n.target.openPopup()}},_moveChild:function(n,l,u){n._latlng=l,this.removeLayer(n),n._latlng=u,this.addLayer(n)},_childMarkerDragEnd:function(n){var l=n.target.__dragStart;delete n.target.__dragStart,l&&this._moveChild(n.target,l,n.target._latlng)},_removeLayer:function(n,l,u){var d=this._gridClusters,m=this._gridUnclustered,x=this._featureGroup,_=this._map,C=Math.floor(this._map.getMinZoom());l&&this._removeFromGridUnclustered(n,this._maxZoom);var b=n.__parent,P=b._markers,T;for(this._arraySplice(P,n);b&&(b._childCount--,b._boundsNeedUpdate=!0,!(b._zoom<C));)l&&b._childCount<=1?(T=b._markers[0]===n?b._markers[1]:b._markers[0],d[b._zoom].removeObject(b,_.project(b._cLatLng,b._zoom)),m[b._zoom].addObject(T,_.project(T.getLatLng(),b._zoom)),this._arraySplice(b.__parent._childClusters,b),b.__parent._markers.push(T),T.__parent=b.__parent,b._icon&&(x.removeLayer(b),u||x.addLayer(T))):b._iconNeedsUpdate=!0,b=b.__parent;delete n.__parent},_isOrIsParent:function(n,l){for(;l;){if(n===l)return!0;l=l.parentNode}return!1},fire:function(n,l,u){if(l&&l.layer instanceof L.MarkerCluster){if(l.originalEvent&&this._isOrIsParent(l.layer._icon,l.originalEvent.relatedTarget))return;n="cluster"+n}L.FeatureGroup.prototype.fire.call(this,n,l,u)},listens:function(n,l){return L.FeatureGroup.prototype.listens.call(this,n,l)||L.FeatureGroup.prototype.listens.call(this,"cluster"+n,l)},_defaultIconCreateFunction:function(n){var l=n.getChildCount(),u=" marker-cluster-";return l<10?u+="small":l<100?u+="medium":u+="large",new L.DivIcon({html:"<div><span>"+l+"</span></div>",className:"marker-cluster"+u,iconSize:new L.Point(40,40)})},_bindEvents:function(){var n=this._map,l=this.options.spiderfyOnMaxZoom,u=this.options.showCoverageOnHover,d=this.options.zoomToBoundsOnClick,m=this.options.spiderfyOnEveryZoom;(l||d||m)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),u&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),n.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(n){var l=n.layer,u=l;if(!(n.type==="clusterkeypress"&&n.originalEvent&&n.originalEvent.keyCode!==13)){for(;u._childClusters.length===1;)u=u._childClusters[0];u._zoom===this._maxZoom&&u._childCount===l._childCount&&this.options.spiderfyOnMaxZoom?l.spiderfy():this.options.zoomToBoundsOnClick&&l.zoomToBounds(),this.options.spiderfyOnEveryZoom&&l.spiderfy(),n.originalEvent&&n.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(n){var l=this._map;this._inZoomAnimation||(this._shownPolygon&&l.removeLayer(this._shownPolygon),n.layer.getChildCount()>2&&n.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(n.layer.getConvexHull(),this.options.polygonOptions),l.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var n=this.options.spiderfyOnMaxZoom,l=this.options.showCoverageOnHover,u=this.options.zoomToBoundsOnClick,d=this.options.spiderfyOnEveryZoom,m=this._map;(n||u||d)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),l&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),m.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var n=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,n),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),n),this._currentShownBounds=n}},_generateInitialClusters:function(){var n=Math.ceil(this._map.getMaxZoom()),l=Math.floor(this._map.getMinZoom()),u=this.options.maxClusterRadius,d=u;typeof u!="function"&&(d=function(){return u}),this.options.disableClusteringAtZoom!==null&&(n=this.options.disableClusteringAtZoom-1),this._maxZoom=n,this._gridClusters={},this._gridUnclustered={};for(var m=n;m>=l;m--)this._gridClusters[m]=new L.DistanceGrid(d(m)),this._gridUnclustered[m]=new L.DistanceGrid(d(m));this._topClusterLevel=new this._markerCluster(this,l-1)},_addLayer:function(n,l){var u=this._gridClusters,d=this._gridUnclustered,m=Math.floor(this._map.getMinZoom()),x,_;for(this.options.singleMarkerMode&&this._overrideMarkerIcon(n),n.on(this._childMarkerEventHandlers,this);l>=m;l--){x=this._map.project(n.getLatLng(),l);var C=u[l].getNearObject(x);if(C){C._addChild(n),n.__parent=C;return}if(C=d[l].getNearObject(x),C){var b=C.__parent;b&&this._removeLayer(C,!1);var P=new this._markerCluster(this,l,C,n);u[l].addObject(P,this._map.project(P._cLatLng,l)),C.__parent=P,n.__parent=P;var T=P;for(_=l-1;_>b._zoom;_--)T=new this._markerCluster(this,_,T),u[_].addObject(T,this._map.project(C.getLatLng(),_));b._addChild(T),this._removeFromGridUnclustered(C,l);return}d[l].addObject(n,x)}this._topClusterLevel._addChild(n),n.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(n){n instanceof L.MarkerCluster&&n._iconNeedsUpdate&&n._updateIcon()})},_enqueue:function(n){this._queue.push(n),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var n=0;n<this._queue.length;n++)this._queue[n].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var n=Math.round(this._map._zoom);this._processQueue(),this._zoom<n&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,n)):this._zoom>n?(this._animationStart(),this._animationZoomOut(this._zoom,n)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(this.options.removeOutsideVisibleBounds){if(L.Browser.mobile)return this._checkBoundsMaxLat(this._map.getBounds())}else return this._mapBoundsInfinite;return this._checkBoundsMaxLat(this._map.getBounds().pad(1))},_checkBoundsMaxLat:function(n){var l=this._maxLat;return l!==void 0&&(n.getNorth()>=l&&(n._northEast.lat=1/0),n.getSouth()<=-l&&(n._southWest.lat=-1/0)),n},_animationAddLayerNonAnimated:function(n,l){if(l===n)this._featureGroup.addLayer(n);else if(l._childCount===2){l._addToMap();var u=l.getAllChildMarkers();this._featureGroup.removeLayer(u[0]),this._featureGroup.removeLayer(u[1])}else l._updateIcon()},_extractNonGroupLayers:function(n,l){var u=n.getLayers(),d=0,m;for(l=l||[];d<u.length;d++){if(m=u[d],m instanceof L.LayerGroup){this._extractNonGroupLayers(m,l);continue}l.push(m)}return l},_overrideMarkerIcon:function(n){var l=n.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[n]}});return l}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(n,l){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),n),this._topClusterLevel._recursivelyAddChildrenToMap(null,l,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(n,l){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),n),this._topClusterLevel._recursivelyAddChildrenToMap(null,l,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(n,l){this._animationAddLayerNonAnimated(n,l)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(n,l){var u=this._getExpandedVisibleBounds(),d=this._featureGroup,m=Math.floor(this._map.getMinZoom()),x;this._ignoreMove=!0,this._topClusterLevel._recursively(u,n,m,function(_){var C=_._latlng,b=_._markers,P;for(u.contains(C)||(C=null),_._isSingleParent()&&n+1===l?(d.removeLayer(_),_._recursivelyAddChildrenToMap(null,l,u)):(_.clusterHide(),_._recursivelyAddChildrenToMap(C,l,u)),x=b.length-1;x>=0;x--)P=b[x],u.contains(P._latlng)||d.removeLayer(P)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(u,l),d.eachLayer(function(_){!(_ instanceof L.MarkerCluster)&&_._icon&&_.clusterShow()}),this._topClusterLevel._recursively(u,n,l,function(_){_._recursivelyRestoreChildPositions(l)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(u,n,m,function(_){d.removeLayer(_),_.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(n,l){this._animationZoomOutSingle(this._topClusterLevel,n-1,l),this._topClusterLevel._recursivelyAddChildrenToMap(null,l,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),n,this._getExpandedVisibleBounds())},_animationAddLayer:function(n,l){var u=this,d=this._featureGroup;d.addLayer(n),l!==n&&(l._childCount>2?(l._updateIcon(),this._forceLayout(),this._animationStart(),n._setPos(this._map.latLngToLayerPoint(l.getLatLng())),n.clusterHide(),this._enqueue(function(){d.removeLayer(n),n.clusterShow(),u._animationEnd()})):(this._forceLayout(),u._animationStart(),u._animationZoomOutSingle(l,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(n,l,u){var d=this._getExpandedVisibleBounds(),m=Math.floor(this._map.getMinZoom());n._recursivelyAnimateChildrenInAndAddSelfToMap(d,m,l+1,u);var x=this;this._forceLayout(),n._recursivelyBecomeVisible(d,u),this._enqueue(function(){if(n._childCount===1){var _=n._markers[0];this._ignoreMove=!0,_.setLatLng(_.getLatLng()),this._ignoreMove=!1,_.clusterShow&&_.clusterShow()}else n._recursively(d,u,m,function(C){C._recursivelyRemoveChildrenFromMap(d,m,l+1)});x._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(n){return new L.MarkerClusterGroup(n)};var r=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(n,l,u,d){L.Marker.prototype.initialize.call(this,u?u._cLatLng||u.getLatLng():new L.LatLng(0,0),{icon:this,pane:n.options.clusterPane}),this._group=n,this._zoom=l,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,u&&this._addChild(u),d&&this._addChild(d)},getAllChildMarkers:function(n,l){n=n||[];for(var u=this._childClusters.length-1;u>=0;u--)this._childClusters[u].getAllChildMarkers(n,l);for(var d=this._markers.length-1;d>=0;d--)l&&this._markers[d].__dragStart||n.push(this._markers[d]);return n},getChildCount:function(){return this._childCount},zoomToBounds:function(n){for(var l=this._childClusters.slice(),u=this._group._map,d=u.getBoundsZoom(this._bounds),m=this._zoom+1,x=u.getZoom(),_;l.length>0&&d>m;){m++;var C=[];for(_=0;_<l.length;_++)C=C.concat(l[_]._childClusters);l=C}d>m?this._group._map.setView(this._latlng,m):d<=x?this._group._map.setView(this._latlng,x+1):this._group._map.fitBounds(this._bounds,n)},getBounds:function(){var n=new L.LatLngBounds;return n.extend(this._bounds),n},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(n,l){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(n),n instanceof L.MarkerCluster?(l||(this._childClusters.push(n),n.__parent=this),this._childCount+=n._childCount):(l||this._markers.push(n),this._childCount++),this.__parent&&this.__parent._addChild(n,!0)},_setClusterCenter:function(n){this._cLatLng||(this._cLatLng=n._cLatLng||n._latlng)},_resetBounds:function(){var n=this._bounds;n._southWest&&(n._southWest.lat=1/0,n._southWest.lng=1/0),n._northEast&&(n._northEast.lat=-1/0,n._northEast.lng=-1/0)},_recalculateBounds:function(){var n=this._markers,l=this._childClusters,u=0,d=0,m=this._childCount,x,_,C,b;if(m!==0){for(this._resetBounds(),x=0;x<n.length;x++)C=n[x]._latlng,this._bounds.extend(C),u+=C.lat,d+=C.lng;for(x=0;x<l.length;x++)_=l[x],_._boundsNeedUpdate&&_._recalculateBounds(),this._bounds.extend(_._bounds),C=_._wLatLng,b=_._childCount,u+=C.lat*b,d+=C.lng*b;this._latlng=this._wLatLng=new L.LatLng(u/m,d/m),this._boundsNeedUpdate=!1}},_addToMap:function(n){n&&(this._backupLatlng=this._latlng,this.setLatLng(n)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(n,l,u){this._recursively(n,this._group._map.getMinZoom(),u-1,function(d){var m=d._markers,x,_;for(x=m.length-1;x>=0;x--)_=m[x],_._icon&&(_._setPos(l),_.clusterHide())},function(d){var m=d._childClusters,x,_;for(x=m.length-1;x>=0;x--)_=m[x],_._icon&&(_._setPos(l),_.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(n,l,u,d){this._recursively(n,d,l,function(m){m._recursivelyAnimateChildrenIn(n,m._group._map.latLngToLayerPoint(m.getLatLng()).round(),u),m._isSingleParent()&&u-1===d?(m.clusterShow(),m._recursivelyRemoveChildrenFromMap(n,l,u)):m.clusterHide(),m._addToMap()})},_recursivelyBecomeVisible:function(n,l){this._recursively(n,this._group._map.getMinZoom(),l,null,function(u){u.clusterShow()})},_recursivelyAddChildrenToMap:function(n,l,u){this._recursively(u,this._group._map.getMinZoom()-1,l,function(d){if(l!==d._zoom)for(var m=d._markers.length-1;m>=0;m--){var x=d._markers[m];u.contains(x._latlng)&&(n&&(x._backupLatlng=x.getLatLng(),x.setLatLng(n),x.clusterHide&&x.clusterHide()),d._group._featureGroup.addLayer(x))}},function(d){d._addToMap(n)})},_recursivelyRestoreChildPositions:function(n){for(var l=this._markers.length-1;l>=0;l--){var u=this._markers[l];u._backupLatlng&&(u.setLatLng(u._backupLatlng),delete u._backupLatlng)}if(n-1===this._zoom)for(var d=this._childClusters.length-1;d>=0;d--)this._childClusters[d]._restorePosition();else for(var m=this._childClusters.length-1;m>=0;m--)this._childClusters[m]._recursivelyRestoreChildPositions(n)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(n,l,u,d){var m,x;this._recursively(n,l-1,u-1,function(_){for(x=_._markers.length-1;x>=0;x--)m=_._markers[x],(!d||!d.contains(m._latlng))&&(_._group._featureGroup.removeLayer(m),m.clusterShow&&m.clusterShow())},function(_){for(x=_._childClusters.length-1;x>=0;x--)m=_._childClusters[x],(!d||!d.contains(m._latlng))&&(_._group._featureGroup.removeLayer(m),m.clusterShow&&m.clusterShow())})},_recursively:function(n,l,u,d,m){var x=this._childClusters,_=this._zoom,C,b;if(l<=_&&(d&&d(this),m&&_===u&&m(this)),_<l||_<u)for(C=x.length-1;C>=0;C--)b=x[C],b._boundsNeedUpdate&&b._recalculateBounds(),n.intersects(b._bounds)&&b._recursively(n,l,u,d,m)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var n=this.options.opacity;return this.setOpacity(0),this.options.opacity=n,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(n){this._cellSize=n,this._sqCellSize=n*n,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(n,l){var u=this._getCoord(l.x),d=this._getCoord(l.y),m=this._grid,x=m[d]=m[d]||{},_=x[u]=x[u]||[],C=L.Util.stamp(n);this._objectPoint[C]=l,_.push(n)},updateObject:function(n,l){this.removeObject(n),this.addObject(n,l)},removeObject:function(n,l){var u=this._getCoord(l.x),d=this._getCoord(l.y),m=this._grid,x=m[d]=m[d]||{},_=x[u]=x[u]||[],C,b;for(delete this._objectPoint[L.Util.stamp(n)],C=0,b=_.length;C<b;C++)if(_[C]===n)return _.splice(C,1),b===1&&delete x[u],!0},eachObject:function(n,l){var u,d,m,x,_,C,b,P=this._grid;for(u in P){_=P[u];for(d in _)for(C=_[d],m=0,x=C.length;m<x;m++)b=n.call(l,C[m]),b&&(m--,x--)}},getNearObject:function(n){var l=this._getCoord(n.x),u=this._getCoord(n.y),d,m,x,_,C,b,P,T,X=this._objectPoint,Z=this._sqCellSize,ie=null;for(d=u-1;d<=u+1;d++)if(_=this._grid[d],_){for(m=l-1;m<=l+1;m++)if(C=_[m],C)for(x=0,b=C.length;x<b;x++)P=C[x],T=this._sqDist(X[L.Util.stamp(P)],n),(T<Z||T<=Z&&ie===null)&&(Z=T,ie=P)}return ie},_getCoord:function(n){var l=Math.floor(n/this._cellSize);return isFinite(l)?l:n},_sqDist:function(n,l){var u=l.x-n.x,d=l.y-n.y;return u*u+d*d}},function(){L.QuickHull={getDistant:function(n,l){var u=l[1].lat-l[0].lat,d=l[0].lng-l[1].lng;return d*(n.lat-l[0].lat)+u*(n.lng-l[0].lng)},findMostDistantPointFromBaseLine:function(n,l){var u=0,d=null,m=[],x,_,C;for(x=l.length-1;x>=0;x--){if(_=l[x],C=this.getDistant(_,n),C>0)m.push(_);else continue;C>u&&(u=C,d=_)}return{maxPoint:d,newPoints:m}},buildConvexHull:function(n,l){var u=[],d=this.findMostDistantPointFromBaseLine(n,l);return d.maxPoint?(u=u.concat(this.buildConvexHull([n[0],d.maxPoint],d.newPoints)),u=u.concat(this.buildConvexHull([d.maxPoint,n[1]],d.newPoints)),u):[n[0]]},getConvexHull:function(n){var l=!1,u=!1,d=!1,m=!1,x=null,_=null,C=null,b=null,P=null,T=null,X;for(X=n.length-1;X>=0;X--){var Z=n[X];(l===!1||Z.lat>l)&&(x=Z,l=Z.lat),(u===!1||Z.lat<u)&&(_=Z,u=Z.lat),(d===!1||Z.lng>d)&&(C=Z,d=Z.lng),(m===!1||Z.lng<m)&&(b=Z,m=Z.lng)}u!==l?(T=_,P=x):(T=b,P=C);var ie=[].concat(this.buildConvexHull([T,P],n),this.buildConvexHull([P,T],n));return ie}}}(),L.MarkerCluster.include({getConvexHull:function(){var n=this.getAllChildMarkers(),l=[],u,d;for(d=n.length-1;d>=0;d--)u=n[d].getLatLng(),l.push(u);return L.QuickHull.getConvexHull(l)}}),L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(!(this._group._spiderfied===this||this._group._inZoomAnimation)){var n=this.getAllChildMarkers(null,!0),l=this._group,u=l._map,d=u.latLngToLayerPoint(this._latlng),m;this._group._unspiderfy(),this._group._spiderfied=this,this._group.options.spiderfyShapePositions?m=this._group.options.spiderfyShapePositions(n.length,d):n.length>=this._circleSpiralSwitchover?m=this._generatePointsSpiral(n.length,d):(d.y+=10,m=this._generatePointsCircle(n.length,d)),this._animationSpiderfy(n,m)}},unspiderfy:function(n){this._group._inZoomAnimation||(this._animationUnspiderfy(n),this._group._spiderfied=null)},_generatePointsCircle:function(n,l){var u=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+n),d=u/this._2PI,m=this._2PI/n,x=[],_,C;for(d=Math.max(d,35),x.length=n,_=0;_<n;_++)C=this._circleStartAngle+_*m,x[_]=new L.Point(l.x+d*Math.cos(C),l.y+d*Math.sin(C))._round();return x},_generatePointsSpiral:function(n,l){var u=this._group.options.spiderfyDistanceMultiplier,d=u*this._spiralLengthStart,m=u*this._spiralFootSeparation,x=u*this._spiralLengthFactor*this._2PI,_=0,C=[],b;for(C.length=n,b=n;b>=0;b--)b<n&&(C[b]=new L.Point(l.x+d*Math.cos(_),l.y+d*Math.sin(_))._round()),_+=m/d+b*5e-4,d+=x/_;return C},_noanimationUnspiderfy:function(){var n=this._group,l=n._map,u=n._featureGroup,d=this.getAllChildMarkers(null,!0),m,x;for(n._ignoreMove=!0,this.setOpacity(1),x=d.length-1;x>=0;x--)m=d[x],u.removeLayer(m),m._preSpiderfyLatlng&&(m.setLatLng(m._preSpiderfyLatlng),delete m._preSpiderfyLatlng),m.setZIndexOffset&&m.setZIndexOffset(0),m._spiderLeg&&(l.removeLayer(m._spiderLeg),delete m._spiderLeg);n.fire("unspiderfied",{cluster:this,markers:d}),n._ignoreMove=!1,n._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(n,l){var u=this._group,d=u._map,m=u._featureGroup,x=this._group.options.spiderLegPolylineOptions,_,C,b,P;for(u._ignoreMove=!0,_=0;_<n.length;_++)P=d.layerPointToLatLng(l[_]),C=n[_],b=new L.Polyline([this._latlng,P],x),d.addLayer(b),C._spiderLeg=b,C._preSpiderfyLatlng=C._latlng,C.setLatLng(P),C.setZIndexOffset&&C.setZIndexOffset(1e6),m.addLayer(C);this.setOpacity(.3),u._ignoreMove=!1,u.fire("spiderfied",{cluster:this,markers:n})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(n,l){var u=this,d=this._group,m=d._map,x=d._featureGroup,_=this._latlng,C=m.latLngToLayerPoint(_),b=L.Path.SVG,P=L.extend({},this._group.options.spiderLegPolylineOptions),T=P.opacity,X,Z,ie,ne,Ze,ye;for(T===void 0&&(T=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),b?(P.opacity=0,P.className=(P.className||"")+" leaflet-cluster-spider-leg"):P.opacity=T,d._ignoreMove=!0,X=0;X<n.length;X++)Z=n[X],ye=m.layerPointToLatLng(l[X]),ie=new L.Polyline([_,ye],P),m.addLayer(ie),Z._spiderLeg=ie,b&&(ne=ie._path,Ze=ne.getTotalLength()+.1,ne.style.strokeDasharray=Ze,ne.style.strokeDashoffset=Ze),Z.setZIndexOffset&&Z.setZIndexOffset(1e6),Z.clusterHide&&Z.clusterHide(),x.addLayer(Z),Z._setPos&&Z._setPos(C);for(d._forceLayout(),d._animationStart(),X=n.length-1;X>=0;X--)ye=m.layerPointToLatLng(l[X]),Z=n[X],Z._preSpiderfyLatlng=Z._latlng,Z.setLatLng(ye),Z.clusterShow&&Z.clusterShow(),b&&(ie=Z._spiderLeg,ne=ie._path,ne.style.strokeDashoffset=0,ie.setStyle({opacity:T}));this.setOpacity(.3),d._ignoreMove=!1,setTimeout(function(){d._animationEnd(),d.fire("spiderfied",{cluster:u,markers:n})},200)},_animationUnspiderfy:function(n){var l=this,u=this._group,d=u._map,m=u._featureGroup,x=n?d._latLngToNewLayerPoint(this._latlng,n.zoom,n.center):d.latLngToLayerPoint(this._latlng),_=this.getAllChildMarkers(null,!0),C=L.Path.SVG,b,P,T,X,Z,ie;for(u._ignoreMove=!0,u._animationStart(),this.setOpacity(1),P=_.length-1;P>=0;P--)b=_[P],b._preSpiderfyLatlng&&(b.closePopup(),b.setLatLng(b._preSpiderfyLatlng),delete b._preSpiderfyLatlng,ie=!0,b._setPos&&(b._setPos(x),ie=!1),b.clusterHide&&(b.clusterHide(),ie=!1),ie&&m.removeLayer(b),C&&(T=b._spiderLeg,X=T._path,Z=X.getTotalLength()+.1,X.style.strokeDashoffset=Z,T.setStyle({opacity:0})));u._ignoreMove=!1,setTimeout(function(){var ne=0;for(P=_.length-1;P>=0;P--)b=_[P],b._spiderLeg&&ne++;for(P=_.length-1;P>=0;P--)b=_[P],b._spiderLeg&&(b.clusterShow&&b.clusterShow(),b.setZIndexOffset&&b.setZIndexOffset(0),ne>1&&m.removeLayer(b),d.removeLayer(b._spiderLeg),delete b._spiderLeg);u._animationEnd(),u.fire("unspiderfied",{cluster:l,markers:_})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(n){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(n))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(n){this._spiderfied&&this._spiderfied.unspiderfy(n)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(n){n._spiderLeg&&(this._featureGroup.removeLayer(n),n.clusterShow&&n.clusterShow(),n.setZIndexOffset&&n.setZIndexOffset(0),this._map.removeLayer(n._spiderLeg),delete n._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(n){return n?n instanceof L.MarkerClusterGroup?n=n._topClusterLevel.getAllChildMarkers():n instanceof L.LayerGroup?n=n._layers:n instanceof L.MarkerCluster?n=n.getAllChildMarkers():n instanceof L.Marker&&(n=[n]):n=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(n),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(n),this},_flagParentsIconsNeedUpdate:function(n){var l,u;for(l in n)for(u=n[l].__parent;u;)u._iconNeedsUpdate=!0,u=u.__parent},_refreshSingleMarkerModeMarkers:function(n){var l,u;for(l in n)u=n[l],this.hasLayer(u)&&u.setIcon(this._overrideMarkerIcon(u))}}),L.Marker.include({refreshIconOptions:function(n,l){var u=this.options.icon;return L.setOptions(u,n),this.setIcon(u),l&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),h.MarkerClusterGroup=a,h.MarkerCluster=r,Object.defineProperty(h,"__esModule",{value:!0})})});var ts=class h{static \u0275fac=function(r){return new(r||h)};static \u0275cmp=Ct({type:h,selectors:[["app-documentation"]],decls:68,vars:0,consts:[[1,"card"],[1,"font-semibold","text-2xl","mb-4"],[1,"font-semibold","text-xl","mb-4"],[1,"text-lg","mb-4"],[1,"app-code"],[1,"bg-highlight","px-2","py-1","rounded-border","not-italic","text-base"],[1,"leading-normal","list-disc","pl-8","text-lg","mb-4"],[1,"text-primary","font-medium"]],template:function(r,n){r&1&&(J(0,"div",0)(1,"div",1),k(2,"Documentation"),Q(),J(3,"div",2),k(4,"Get Started"),Q(),J(5,"p",3),k(6,"Sakai is an application template for Angular and is distributed as a CLI project. Current versions is Angular v20 with PrimeNG v20. In case CLI is not installed already, use the command below to set it up."),Q(),J(7,"pre",4)(8,"code"),k(9,"npm install -g @angular/cli"),Q()(),J(10,"p",3),k(11,' Once CLI is ready in your system, extract the contents of the zip file distribution, cd to the directory, install the libraries from npm and then execute "ng serve" to run the application in your local environment. '),Q(),J(12,"pre",4)(13,"code"),k(14,`git clone https://github.com/primefaces/sakai-ng
npm install
ng serve`),Q()(),J(15,"p",3),k(16,"The application should run at "),J(17,"i",5),k(18,"http://localhost:4200/"),Q(),k(19," to view the application in your local environment."),Q(),J(20,"div",2),k(21,"Structure"),Q(),J(22,"p",3),k(23,"Templates consists of a couple folders, demos and layout have been separated so that you can easily identify what is necessary for your application."),Q(),J(24,"ul",6)(25,"li")(26,"span",7),k(27,"src/app/layout"),Q(),k(28,": Main layout files, needs to be present."),Q(),J(29,"li")(30,"span",7),k(31,"src/app/pages"),Q(),k(32,": Demo content like Dashboard."),Q(),J(33,"li")(34,"span",7),k(35,"src/assets/demo"),Q(),k(36,": Assets used in demos"),Q(),J(37,"li")(38,"span",7),k(39,"src/assets/layout"),Q(),k(40,": SCSS files of the main layout"),Q()(),J(41,"div",2),k(42,"Menu"),Q(),J(43,"p",3),k(44," Main menu is defined at "),J(45,"span",5),k(46,"src/app/layout/component/app.menu.ts"),Q(),k(47," file. Update the "),J(48,"i",5),k(49,"model"),Q(),k(50," property to define your own menu items. "),Q(),J(51,"div",2),k(52,"Layout Service"),Q(),J(53,"p",3)(54,"span",5),k(55,"src/app/layout/service/layout.service.ts"),Q(),k(56," is a service that manages layout state changes, including dark mode, PrimeNG theme, menu modes, and states. "),Q(),J(57,"div",2),k(58,"Tailwind CSS"),Q(),J(59,"p",3),k(60,"The demo pages are developed with Tailwind CSS however the core application shell uses custom CSS."),Q(),J(61,"div",2),k(62,"Variables"),Q(),J(63,"p",3),k(64," CSS variables used in the template are derived from the applied PrimeNG theme. Customize them through the CSS variables in "),J(65,"span",5),k(66,"src/assets/layout/variables"),Q(),k(67,". "),Q()())},dependencies:[wt],styles:["@media screen and (max-width: 991px){.video-container[_ngcontent-%COMP%]{position:relative;width:100%;height:0;padding-bottom:56.25%}.video-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}}"]})};var is=`
    .p-confirmdialog .p-dialog-content {
        display: flex;
        align-items: center;
        gap: dt('confirmdialog.content.gap');
    }

    .p-confirmdialog-icon {
        color: dt('confirmdialog.icon.color');
        font-size: dt('confirmdialog.icon.size');
        width: dt('confirmdialog.icon.size');
        height: dt('confirmdialog.icon.size');
    }
`;var Ga=["header"],Na=["footer"],Ua=["rejecticon"],Va=["accepticon"],Fa=["message"],Ha=["icon"],ja=["headless"],Wa=[[["p-footer"]]],$a=["p-footer"],qa=(h,a,r)=>({$implicit:h,onAccept:a,onReject:r}),Qa=h=>({$implicit:h});function Ka(h,a){h&1&&_i(0)}function Xa(h,a){if(h&1&&te(0,Ka,1,0,"ng-container",7),h&2){let r=I(2);q("ngTemplateOutlet",r.headlessTemplate||r._headlessTemplate)("ngTemplateOutletContext",ar(2,qa,r.confirmation,r.onAccept.bind(r),r.onReject.bind(r)))}}function Ya(h,a){h&1&&te(0,Xa,1,6,"ng-template",null,2,ct)}function Ja(h,a){h&1&&_i(0)}function el(h,a){if(h&1&&te(0,Ja,1,0,"ng-container",8),h&2){let r=I(3);q("ngTemplateOutlet",r.headerTemplate||r._headerTemplate)}}function tl(h,a){h&1&&te(0,el,1,1,"ng-template",null,4,ct)}function il(h,a){}function nl(h,a){h&1&&te(0,il,0,0,"ng-template")}function ol(h,a){if(h&1&&te(0,nl,1,0,null,8),h&2){let r=I(3);q("ngTemplateOutlet",r.iconTemplate||r._iconTemplate)}}function rl(h,a){if(h&1&&E(0,"i",12),h&2){let r=I(4);Xe(r.option("icon")),q("ngClass",r.cx("icon"))}}function sl(h,a){if(h&1&&te(0,rl,1,3,"i",11),h&2){let r=I(3);q("ngIf",r.option("icon"))}}function al(h,a){}function ll(h,a){h&1&&te(0,al,0,0,"ng-template")}function cl(h,a){if(h&1&&te(0,ll,1,0,null,7),h&2){let r=I(3);q("ngTemplateOutlet",r.messageTemplate||r._messageTemplate)("ngTemplateOutletContext",sr(2,Qa,r.confirmation))}}function ul(h,a){if(h&1&&E(0,"span",13),h&2){let r=I(3);Xe(r.cx("message")),q("innerHTML",r.option("message"),Xo)}}function hl(h,a){if(h&1&&(j(0,ol,1,1)(1,sl,1,1,"i",9),j(2,cl,1,4)(3,ul,1,3,"span",10)),h&2){let r=I(2);W(r.iconTemplate||r._iconTemplate?0:!r.iconTemplate&&!r._iconTemplate&&!r._messageTemplate&&!r.messageTemplate?1:-1),M(2),W(r.messageTemplate||r._messageTemplate?2:3)}}function dl(h,a){if(h&1&&(j(0,tl,2,0),te(1,hl,4,2,"ng-template",null,3,ct)),h&2){let r=I();W(r.headerTemplate||r._headerTemplate?0:-1)}}function pl(h,a){h&1&&_i(0)}function fl(h,a){if(h&1&&(ir(0),te(1,pl,1,0,"ng-container",8)),h&2){let r=I(2);M(),q("ngTemplateOutlet",r.footerTemplate||r._footerTemplate)}}function ml(h,a){if(h&1&&E(0,"i"),h&2){let r=I(6);Xe(r.option("rejectIcon"))}}function _l(h,a){if(h&1&&te(0,ml,1,2,"i",17),h&2){let r=I(5);q("ngIf",r.option("rejectIcon"))}}function gl(h,a){}function vl(h,a){h&1&&te(0,gl,0,0,"ng-template")}function yl(h,a){if(h&1&&(j(0,_l,1,1,"i",16),te(1,vl,1,0,null,8)),h&2){let r=I(4);W(r.rejectIcon&&!r.rejectIconTemplate&&!r._rejectIconTemplate?0:-1),M(),q("ngTemplateOutlet",r.rejectIconTemplate||r._rejectIconTemplate)}}function xl(h,a){if(h&1){let r=de();v(0,"p-button",15),ee("onClick",function(){U(r);let l=I(3);return V(l.onReject())}),te(1,yl,2,2,"ng-template",null,5,ct),y()}if(h&2){let r=I(3);q("label",r.rejectButtonLabel)("styleClass",r.getButtonStyleClass("pcRejectButton","rejectButtonStyleClass"))("ariaLabel",r.option("rejectButtonProps","ariaLabel"))("buttonProps",r.getRejectButtonProps())}}function bl(h,a){if(h&1&&E(0,"i"),h&2){let r=I(6);Xe(r.option("acceptIcon"))}}function Cl(h,a){if(h&1&&te(0,bl,1,2,"i",17),h&2){let r=I(5);q("ngIf",r.option("acceptIcon"))}}function Ll(h,a){}function wl(h,a){h&1&&te(0,Ll,0,0,"ng-template")}function kl(h,a){if(h&1&&(j(0,Cl,1,1,"i",16),te(1,wl,1,0,null,8)),h&2){let r=I(4);W(r.acceptIcon&&!r._acceptIconTemplate&&!r.acceptIconTemplate?0:-1),M(),q("ngTemplateOutlet",r.acceptIconTemplate||r._acceptIconTemplate)}}function Ml(h,a){if(h&1){let r=de();v(0,"p-button",15),ee("onClick",function(){U(r);let l=I(3);return V(l.onAccept())}),te(1,kl,2,2,"ng-template",null,5,ct),y()}if(h&2){let r=I(3);q("label",r.acceptButtonLabel)("styleClass",r.getButtonStyleClass("pcAcceptButton","acceptButtonStyleClass"))("ariaLabel",r.option("acceptButtonProps","ariaLabel"))("buttonProps",r.getAcceptButtonProps())}}function Tl(h,a){if(h&1&&te(0,xl,3,4,"p-button",14)(1,Ml,3,4,"p-button",14),h&2){let r=I(2);q("ngIf",r.option("rejectVisible")),M(),q("ngIf",r.option("acceptVisible"))}}function Sl(h,a){if(h&1&&(j(0,fl,2,1),j(1,Tl,2,2)),h&2){let r=I();W(r.footerTemplate||r._footerTemplate?0:-1),M(),W(!r.footerTemplate&&!r._footerTemplate?1:-1)}}var Pl={root:"p-confirmdialog",icon:"p-confirmdialog-icon",message:"p-confirmdialog-message",pcRejectButton:"p-confirmdialog-reject-button",pcAcceptButton:"p-confirmdialog-accept-button"},ns=(()=>{class h extends _r{name="confirmdialog";theme=is;classes=Pl;static \u0275fac=(()=>{let r;return function(l){return(r||(r=Ko(h)))(l||h)}})();static \u0275prov=Ke({token:h,factory:h.\u0275fac})}return h})();var El=bn([xi({transform:"{{transform}}",opacity:0}),yn("{{transition}}",xi({transform:"none",opacity:1}))]),Il=bn([yn("{{transition}}",xi({transform:"{{transform}}",opacity:0}))]),zl=(()=>{class h extends wr{confirmationService;zone;header;icon;message;get style(){return this._style}set style(r){this._style=r,this.cd.markForCheck()}styleClass;maskStyleClass;acceptIcon;acceptLabel;closeAriaLabel;acceptAriaLabel;acceptVisible=!0;rejectIcon;rejectLabel;rejectAriaLabel;rejectVisible=!0;acceptButtonStyleClass;rejectButtonStyleClass;closeOnEscape=!0;dismissableMask;blockScroll=!0;rtl=!1;closable=!0;appendTo="body";key;autoZIndex=!0;baseZIndex=0;transitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)";focusTrap=!0;defaultFocus="accept";breakpoints;get visible(){return this._visible}set visible(r){this._visible=r,this._visible&&!this.maskVisible&&(this.maskVisible=!0),this.cd.markForCheck()}get position(){return this._position}set position(r){switch(this._position=r,r){case"topleft":case"bottomleft":case"left":this.transformOptions="translate3d(-100%, 0px, 0px)";break;case"topright":case"bottomright":case"right":this.transformOptions="translate3d(100%, 0px, 0px)";break;case"bottom":this.transformOptions="translate3d(0px, 100%, 0px)";break;case"top":this.transformOptions="translate3d(0px, -100%, 0px)";break;default:this.transformOptions="scale(0.7)";break}}draggable=!0;onHide=new mi;footer;_componentStyle=bt(ns);headerTemplate;footerTemplate;rejectIconTemplate;acceptIconTemplate;messageTemplate;iconTemplate;headlessTemplate;templates;_headerTemplate;_footerTemplate;_rejectIconTemplate;_acceptIconTemplate;_messageTemplate;_iconTemplate;_headlessTemplate;confirmation;_visible;_style;maskVisible;dialog;wrapper;contentContainer;subscription;preWidth;_position="center";transformOptions="scale(0.7)";styleElement;id=Ln("pn_id_");ariaLabelledBy=this.getAriaLabelledBy();translationSubscription;constructor(r,n){super(),this.confirmationService=r,this.zone=n,this.subscription=this.confirmationService.requireConfirmation$.subscribe(l=>{if(!l){this.hide();return}l.key===this.key&&(this.confirmation=l,Object.keys(l).forEach(d=>{this[d]=l[d]}),this.confirmation.accept&&(this.confirmation.acceptEvent=new mi,this.confirmation.acceptEvent.subscribe(this.confirmation.accept)),this.confirmation.reject&&(this.confirmation.rejectEvent=new mi,this.confirmation.rejectEvent.subscribe(this.confirmation.reject)),this.visible=!0)})}ngOnInit(){super.ngOnInit(),this.breakpoints&&this.createStyle(),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.visible&&this.cd.markForCheck()})}ngAfterContentInit(){this.templates?.forEach(r=>{switch(r.getType()){case"header":this._headerTemplate=r.template;break;case"footer":this._footerTemplate=r.template;break;case"message":this._messageTemplate=r.template;break;case"icon":this._iconTemplate=r.template;break;case"rejecticon":this._rejectIconTemplate=r.template;break;case"accepticon":this._acceptIconTemplate=r.template;break;case"headless":this._headlessTemplate=r.template;break}})}getAriaLabelledBy(){return this.header!==null?Ln("pn_id_")+"_header":null}option(r,n){let l=this;if(l.hasOwnProperty(r))return n?l[n]:l[r]}getButtonStyleClass(r,n){let l=this.cx(r),u=this.option(n);return[l,u].filter(Boolean).join(" ")}getElementToFocus(){switch(this.option("defaultFocus")){case"accept":return Wt(this.dialog.el.nativeElement,".p-confirm-dialog-accept");case"reject":return Wt(this.dialog.el.nativeElement,".p-confirm-dialog-reject");case"close":return Wt(this.dialog.el.nativeElement,".p-dialog-header-close");case"none":return null;default:return Wt(this.dialog.el.nativeElement,".p-confirm-dialog-accept")}}createStyle(){if(!this.styleElement){this.styleElement=this.document.createElement("style"),this.styleElement.type="text/css",this.document.head.appendChild(this.styleElement);let r="";for(let n in this.breakpoints)r+=`
                    @media screen and (max-width: ${n}) {
                        .p-dialog[${this.id}] {
                            width: ${this.breakpoints[n]} !important;
                        }
                    }
                `;this.styleElement.innerHTML=r,pr(this.styleElement,"nonce",this.config?.csp()?.nonce)}}close(){this.confirmation?.rejectEvent&&this.confirmation.rejectEvent.emit(kt.CANCEL),this.hide(kt.CANCEL)}hide(r){this.onHide.emit(r),this.visible=!1,this.unsubscribeConfirmationEvents(),this.confirmation=null}destroyStyle(){this.styleElement&&(this.document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.subscription.unsubscribe(),this.unsubscribeConfirmationEvents(),this.translationSubscription&&this.translationSubscription.unsubscribe(),this.destroyStyle(),super.ngOnDestroy()}onVisibleChange(r){r?this.visible=r:this.close()}onAccept(){this.confirmation&&this.confirmation.acceptEvent&&this.confirmation.acceptEvent.emit(),this.hide(kt.ACCEPT)}onReject(){this.confirmation&&this.confirmation.rejectEvent&&this.confirmation.rejectEvent.emit(kt.REJECT),this.hide(kt.REJECT)}unsubscribeConfirmationEvents(){this.confirmation&&(this.confirmation.acceptEvent?.unsubscribe(),this.confirmation.rejectEvent?.unsubscribe())}get acceptButtonLabel(){return this.option("acceptLabel")||this.getAcceptButtonProps()?.label||this.config.getTranslation(wn.ACCEPT)}get rejectButtonLabel(){return this.option("rejectLabel")||this.getRejectButtonProps()?.label||this.config.getTranslation(wn.REJECT)}getAcceptButtonProps(){return this.option("acceptButtonProps")}getRejectButtonProps(){return this.option("rejectButtonProps")}static \u0275fac=function(n){return new(n||h)(We(fr),We(er))};static \u0275cmp=Ct({type:h,selectors:[["p-confirmDialog"],["p-confirmdialog"],["p-confirm-dialog"]],contentQueries:function(n,l,u){if(n&1&&(Re(u,mr,5),Re(u,Ga,4),Re(u,Na,4),Re(u,Ua,4),Re(u,Va,4),Re(u,Fa,4),Re(u,Ha,4),Re(u,ja,4),Re(u,Ci,4)),n&2){let d;be(d=Ce())&&(l.footer=d.first),be(d=Ce())&&(l.headerTemplate=d.first),be(d=Ce())&&(l.footerTemplate=d.first),be(d=Ce())&&(l.rejectIconTemplate=d.first),be(d=Ce())&&(l.acceptIconTemplate=d.first),be(d=Ce())&&(l.messageTemplate=d.first),be(d=Ce())&&(l.iconTemplate=d.first),be(d=Ce())&&(l.headlessTemplate=d.first),be(d=Ce())&&(l.templates=d)}},inputs:{header:"header",icon:"icon",message:"message",style:"style",styleClass:"styleClass",maskStyleClass:"maskStyleClass",acceptIcon:"acceptIcon",acceptLabel:"acceptLabel",closeAriaLabel:"closeAriaLabel",acceptAriaLabel:"acceptAriaLabel",acceptVisible:[2,"acceptVisible","acceptVisible",ze],rejectIcon:"rejectIcon",rejectLabel:"rejectLabel",rejectAriaLabel:"rejectAriaLabel",rejectVisible:[2,"rejectVisible","rejectVisible",ze],acceptButtonStyleClass:"acceptButtonStyleClass",rejectButtonStyleClass:"rejectButtonStyleClass",closeOnEscape:[2,"closeOnEscape","closeOnEscape",ze],dismissableMask:[2,"dismissableMask","dismissableMask",ze],blockScroll:[2,"blockScroll","blockScroll",ze],rtl:[2,"rtl","rtl",ze],closable:[2,"closable","closable",ze],appendTo:"appendTo",key:"key",autoZIndex:[2,"autoZIndex","autoZIndex",ze],baseZIndex:[2,"baseZIndex","baseZIndex",lr],transitionOptions:"transitionOptions",focusTrap:[2,"focusTrap","focusTrap",ze],defaultFocus:"defaultFocus",breakpoints:"breakpoints",visible:"visible",position:"position",draggable:[2,"draggable","draggable",ze]},outputs:{onHide:"onHide"},features:[rr([ns]),Jo],ngContentSelectors:$a,decls:6,vars:14,consts:[["dialog",""],["footer",""],["headless",""],["content",""],["header",""],["icon",""],["role","alertdialog",3,"visibleChange","visible","closable","styleClass","modal","header","closeOnEscape","blockScroll","appendTo","position","dismissableMask","draggable"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngTemplateOutlet"],[3,"ngClass","class"],[3,"class","innerHTML"],[3,"ngClass","class",4,"ngIf"],[3,"ngClass"],[3,"innerHTML"],[3,"label","styleClass","ariaLabel","buttonProps","onClick",4,"ngIf"],[3,"onClick","label","styleClass","ariaLabel","buttonProps"],[3,"class"],[3,"class",4,"ngIf"]],template:function(n,l){if(n&1){let u=de();tr(Wa),v(0,"p-dialog",6,0),ee("visibleChange",function(m){return U(u),V(l.onVisibleChange(m))}),j(2,Ya,2,0)(3,dl,3,1),te(4,Sl,2,2,"ng-template",null,1,ct),y()}n&2&&(nr(l.style),q("visible",l.visible)("closable",l.option("closable"))("styleClass",l.cn(l.cx("root"),l.styleClass))("modal",!0)("header",l.option("header"))("closeOnEscape",l.option("closeOnEscape"))("blockScroll",l.option("blockScroll"))("appendTo",l.option("appendTo"))("position",l.position)("dismissableMask",l.dismissableMask)("draggable",l.draggable),M(2),W(l.headlessTemplate||l._headlessTemplate?2:3))},dependencies:[wt,vi,cr,ur,ki,jr,Li],encapsulation:2,data:{animation:[dr("animation",[xn("void => visible",[Cn(El)]),xn("visible => void",[Cn(Il)])])]},changeDetection:0})}return h})(),rs=(()=>{class h{static \u0275fac=function(n){return new(n||h)};static \u0275mod=Yo({type:h});static \u0275inj=Qo({imports:[zl,Li,Li]})}return h})();var Mi=class h{constructor(a){this.http=a}baseUrl=$t.apiUrl+"/usuarios";baseUrl2=$t.apiUrl2;authService=bt(wi);getAllListUser(){let a=this.authService.getToken(),r=new Je({Authorization:`Bearer ${a}`});return this.http.get(`${this.baseUrl}/listacompleta`,{headers:r})}getAllListUser2(a=!1){let r=this.authService.getToken(),n=new Je({Authorization:`Bearer ${r}`});return a&&(n=n.set("X-Skip-Loader","true")),this.http.get(`${this.baseUrl}/listacompleta`,{headers:n})}getVendedoresConGeocercas(a){let r=this.authService.getToken(),n=new Je({Authorization:`Bearer ${r}`}),l=new yi;return a?.pageNumber?l=l.set("pageNumber",a.pageNumber.toString()):l=l.set("pageNumber","1"),a?.pageSize?l=l.set("pageSize",a.pageSize.toString()):l=l.set("pageSize","10"),a?.busqueda&&(l=l.set("busqueda",a.busqueda)),this.http.get(`${this.baseUrl2}/vendedores-con-geocercas`,{headers:n,params:l})}static \u0275fac=function(r){return new(r||h)(st(et))};static \u0275prov=Ke({token:h,factory:h.\u0275fac,providedIn:"root"})};var O=pn(as()),Yc=pn(Mn());var iu=pn(Mn());var Pi=class h{constructor(a,r){this.http=a;this.msgService=r;this.configureLeafletIcons()}trackingMarkers=new Map;chargeMarkers=new Map;orderMarkers=new Map;trackingPath=null;trackingClusterGroup=null;chargeClusterGroup=null;orderClusterGroup=null;markerClusterLoaded=!1;geocercasLayer=null;geocercasMarkers=new Map;customerMarkers=new Map;customerClusterGroup=null;map=null;userMarkers=new Map;markerClusterGroup=null;searchMarker=null;userRangeLayer=null;userRange$=new xt(null);defaultConfig={center:[-.2298,-78.5249],zoom:13,defaultLocation:"Quito, Ecuador",zoomControl:!0};mapInitialized$=new xt(!1);searchingLocation$=new xt(!1);searchResults$=new xt([]);boundsSubject=new xt(null);get currentUserRange$(){return this.userRange$.asObservable()}displayVendorGeocercas(a){this.map&&(this.clearGeocercas(),this.geocercasLayer=O.featureGroup().addTo(this.map),a.forEach(r=>{if(r.geocact){let n=this.createGeocercaLayer(r);n&&(this.geocercasMarkers.set(r.geoccod,n),this.geocercasLayer?.addLayer(n))}}),this.fitGeocercasBounds())}createGeocercaLayer(a){try{let r=JSON.parse(a.geoccoor);if(!Array.isArray(r)||r.length===0)return null;let n=r.map(d=>[d.lat,d.lng]),l=O.polygon(n,{color:"#f32a2a",fillColor:"#f32a2a",fillOpacity:.15,weight:2,opacity:.8});l.bindPopup(this.createGeocercaPopup(a),{maxWidth:280,className:"geocerca-popup"});let u=O.circleMarker([a.geoclat,a.geoclon],{radius:6,color:"#8b5cf6",fillColor:"#ffffff",fillOpacity:1,weight:2});return u.bindTooltip(`Geocerca: ${a.geocnom}`,{permanent:!1,direction:"top"}),O.layerGroup([l,u])}catch(r){return console.error("Error al crear geocerca:",r),null}}createGeocercaPopup(a){let r=new Date(a.fechaAsignacion).toLocaleDateString("es-EC");return`
            <div class="bg-white rounded-lg shadow-sm border-0 overflow-hidden">
                <div class="bg-purple-500 text-white px-3 py-2">
                    <h3 class="font-semibold text-sm">${a.geocnom}</h3>
                    <span class="text-xs opacity-90">${a.geoccod}</span>
                </div>
                <div class="p-3 space-y-2">
                    <div class="flex items-center space-x-2 text-xs">
                        <svg class="w-3 h-3 text-gray-400" viewBox="0 0 20 20">
                            <path fill="currentColor" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z"/>
                        </svg>
                        <span class="text-gray-700">${a.geocsec}</span>
                    </div>
                    <div class="flex items-center space-x-2 text-xs">
                        <svg class="w-3 h-3 text-gray-400" viewBox="0 0 20 20">
                            <path fill="currentColor" d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4z"/>
                        </svg>
                        <span class="text-gray-600">${a.geocciud}, ${a.geocprov}</span>
                    </div>
                    <div class="flex items-center space-x-2 text-xs">
                        <svg class="w-3 h-3 text-gray-400" viewBox="0 0 20 20">
                            <path fill="currentColor" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zM4 8h12v8H4V8z"/>
                        </svg>
                        <span class="text-gray-600">Asignada: ${r}</span>
                    </div>
                    <div class="flex items-center space-x-2 text-xs">
                        <svg class="w-3 h-3 text-gray-400" viewBox="0 0 20 20">
                            <path fill="currentColor" d="M9 12a1 1 0 102 0V8a1 1 0 10-2 0v4zm1-7a1 1 0 100 2 1 1 0 000-2z M10 18a8 8 0 100-16 8 8 0 000 16z"/>
                        </svg>
                        <span class="text-gray-600">Prioridad: ${a.geocpri}</span>
                    </div>
                    <div class="flex items-center justify-between mt-3 pt-2 border-t border-gray-100">
                        <div class="flex items-center space-x-1">
                            <div class="w-2 h-2 bg-green-400 rounded-full"></div>
                            <span class="text-xs text-green-600 font-medium">Activa</span>
                        </div>
                        <span class="text-xs text-gray-500">\xC1rea: ${a.geocarm}m\xB2</span>
                    </div>
                </div>
            </div>
        `}fitGeocercasBounds(){if(!this.map||this.geocercasMarkers.size===0)return;let a=O.latLngBounds([]);this.geocercasMarkers.forEach(r=>{r instanceof O.Polygon?a.extend(r.getBounds()):r instanceof O.LayerGroup&&r.eachLayer(n=>{n instanceof O.Polygon&&a.extend(n.getBounds())})}),a.isValid()&&this.map.fitBounds(a,{padding:[20,20]})}clearGeocercas(){this.geocercasLayer&&this.map&&(this.map.removeLayer(this.geocercasLayer),this.geocercasLayer=null),this.geocercasMarkers.clear()}addCustomerMarkers(a){this.map&&(this.clearCustomerMarkers(),this.initializeCustomerCluster(),a.forEach(r=>{if(r.latitud&&r.longitud)try{let n=this.createCustomerMarker(r);this.customerMarkers.set(r.dirclave,n),this.customerClusterGroup?.addLayer(n)}catch(n){console.error("\u274C Error al agregar marcador de cliente:",n)}}),setTimeout(()=>{this.map?.invalidateSize()},100))}initializeCustomerCluster(){if(this.map){if(this.customerClusterGroup&&(this.map.removeLayer(this.customerClusterGroup),this.customerClusterGroup=null),!O.markerClusterGroup)throw new Error("leaflet.markercluster no est\xE1 inicializado");this.customerClusterGroup=O.markerClusterGroup({showCoverageOnHover:!1,maxClusterRadius:40,spiderfyOnMaxZoom:!0,iconCreateFunction:a=>{let r=a.getChildCount();return O.divIcon({html:`<div class="w-8 h-8 bg-purple-500 rounded-full border-2 border-white shadow-lg flex items-center justify-center text-white text-xs font-bold">${r}</div>`,className:"custom-customer-cluster",iconSize:[32,32],iconAnchor:[16,16]})}}),this.map.addLayer(this.customerClusterGroup)}}createCustomerMarker(a){let r=this.createCustomerIcon(a.asignado),n=O.marker([a.latitud,a.longitud],{icon:r}),l=this.createCustomerPopupContent(a);return n.bindPopup(l,{maxWidth:260,className:"custom-customer-popup"}),n}focusOnCustomer(a){if(!this.map||!a.latitud||!a.longitud)return;this.map.setView([a.latitud,a.longitud],20);let r=this.customerMarkers.get(a.dirclave);r&&r.openPopup()}createCustomerIcon(a){let r=a?"bg-green-500":"bg-red-500",n=a?"bg-green-400":"bg-yellow-400";return O.divIcon({html:`
            <div class="relative">
                <div class="w-10 h-10 ${r} rounded-full border-2 border-white shadow-md flex items-center justify-center">
                    <svg class="w-5 h-5 text-white" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 12c2.7 0 4.9-2.2 4.9-4.9S14.7 2.2 12 2.2 7.1 4.4 7.1 7.1 9.3 12 12 12zm0 2.4c-3.2 0-9.6 1.6-9.6 4.8v2.4h19.2v-2.4c0-3.2-6.4-4.8-9.6-4.8z"/>
                    </svg>
                </div>
                <div class="absolute -top-0.5 -right-0.5 w-3 h-3 ${n} border border-white rounded-full"></div>
            </div>`,className:"custom-customer-marker",iconSize:[40,40],iconAnchor:[20,20]})}createCustomerPopupContent(a){let r=a.asignado?"text-blue-600":"text-gray-600",n=a.asignado?"Asignado":"No asignado",l=a.asignado?"text-green-500":"text-yellow-500";return`
        <div class="bg-white rounded-lg shadow-sm border-0 overflow-hidden">
            <div class="p-3 space-y-2">
                <div class="flex items-center space-x-2 text-sm">
                    <svg class="w-3 h-3 text-gray-400" viewBox="0 0 20 20">
                        <path fill="currentColor" d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1z"/>
                    </svg>
                    <span class="font-medium text-gray-800">${a.dirnombre}</span>
                </div>
                <div class="flex items-center space-x-2 text-xs text-gray-600">
                    <svg class="w-2.5 h-2.5 text-gray-400" viewBox="0 0 20 20">
                        <path fill="currentColor" d="M2 5a2 2 0 012-2h7a2 2 0 012 2v4a2 2 0 01-2 2H9l-3 3v-3H4a2 2 0 01-2-2V5z"/>
                    </svg>
                    <span>${a.dirruc}</span>
                </div>
                <div class="flex items-start space-x-2 text-xs text-gray-600">
                    <svg class="w-2.5 h-2.5 text-gray-400 mt-0.5" viewBox="0 0 20 20">
                        <path fill="currentColor" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z"/>
                    </svg>
                    <span class="leading-tight">${a.dirdirec}</span>
                </div>
                <div class="flex items-center space-x-2 mt-2 pt-2 border-t border-gray-100">
                    <div class="w-2 h-2 ${l} rounded-full"></div>
                    <span class="text-xs ${r} font-medium">${n}</span>
                </div>
            </div>
        </div>
    `}clearCustomerMarkers(){this.customerClusterGroup&&this.map&&(this.customerClusterGroup.clearLayers(),this.map.removeLayer(this.customerClusterGroup),this.customerClusterGroup=null),this.customerMarkers.clear()}focusOnUserWithRange(a,r=1e3){if(!this.map||!a.ubicacion)return null;this.hideAllUserMarkersExcept(a.usucod);let n=a.ubicacion.geublat,l=a.ubicacion.geublon;this.map.setView([n,l],16);let u=this.calculateUserRange(n,l,r),d={user:a,range:u,bounds:O.latLngBounds([u.southWest[0],u.southWest[1]],[u.northEast[0],u.northEast[1]])};this.displayUserRange(d),this.userRange$.next(d);let m=this.userMarkers.get(a.usucod);return m&&m.openPopup(),d}hideAllUserMarkersExcept(a){this.markerClusterGroup&&this.userMarkers.forEach((r,n)=>{n!==a&&this.markerClusterGroup?.removeLayer(r)})}restoreAllUserMarkers(){this.markerClusterGroup&&this.userMarkers.forEach(a=>{this.markerClusterGroup?.addLayer(a)})}calculateUserRange(a,r,n){let u=n/6371e3*(180/Math.PI),d=u/Math.cos(a*Math.PI/180),m=[a+u,r+d],x=[a-u,r-d];return{center:[a,r],northEast:m,southWest:x,radius:n}}displayUserRange(a){if(!this.map)return;this.clearUserRange(),this.userRangeLayer=O.layerGroup().addTo(this.map);let{range:r}=a,n=O.rectangle([[r.southWest[0],r.southWest[1]],[r.northEast[0],r.northEast[1]]],{color:"#ef4444",fillColor:"#ef4444",fillOpacity:0,opacity:0,weight:1,dashArray:"3, 3"});this.userRangeLayer.addLayer(n),this.addCornerMarkers(r)}addCornerMarkers(a){if(!this.userRangeLayer)return;let r=O.circleMarker([a.northEast[0],a.northEast[1]],{radius:6,color:"#ffffff",fillColor:"#ffffff",fillOpacity:1,weight:2});r.bindTooltip(`
            <div class="font-semibold text-xs">
                <div class="text-red-600">L\xEDmite Superior Derecho</div>
                <div class="mt-1">
                    <div>Lat: ${a.northEast[0].toFixed(6)}</div>
                    <div>Lng: ${a.northEast[1].toFixed(6)}</div>
                </div>
            </div>
        `,{permanent:!1,direction:"top",className:"range-tooltip"});let n=O.circleMarker([a.southWest[0],a.southWest[1]],{radius:6,color:"#ef4444",fillColor:"#ffffff",fillOpacity:1,weight:2});n.bindTooltip(`
            <div class="font-semibold text-xs">
                <div class="text-red-600">L\xEDmite Inferior Izquierdo</div>
                <div class="mt-1">
                    <div>Lat: ${a.southWest[0].toFixed(6)}</div>
                    <div>Lng: ${a.southWest[1].toFixed(6)}</div>
                </div>
            </div>
        `,{permanent:!1,direction:"bottom",className:"range-tooltip"}),this.userRangeLayer.addLayer(r),this.userRangeLayer.addLayer(n)}clearUserRange(){this.userRangeLayer&&this.map&&(this.map.removeLayer(this.userRangeLayer),this.userRangeLayer=null),this.userRange$.next(null)}get isMapInitialized$(){return this.mapInitialized$.asObservable()}get isSearchingLocation$(){return this.searchingLocation$.asObservable()}get searchResultsList$(){return this.searchResults$.asObservable()}initializeMap(a,r){return yt(this,null,function*(){return new Promise((n,l)=>{try{let u=Vt(Vt({},this.defaultConfig),r),d=a.nativeElement;d||(this.showMapFallback(a),n(!1)),this.map=O.map(d,{center:u.center,zoom:u.zoom,zoomControl:u.zoomControl}),O.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:"\xA9 OpenStreetMap contributors"}).addTo(this.map);let m=this.map;m.on("moveend zoomend",()=>{let _=m.getBounds();this.boundsSubject.next(_),console.log("Nuevas coordenadas:",{southWest:_.getSouthWest(),northEast:_.getNorthEast()})}),O.marker(u.center).addTo(this.map).bindPopup(`<b>${u.defaultLocation}</b><br>Ubicaci\xF3n principal`).openPopup(),this.initializeMarkerCluster(),setTimeout(()=>{this.map?.invalidateSize()},100),this.mapInitialized$.next(!0),console.log("Mapa inicializado correctamente"),n(!0)}catch(u){console.error("Error inicializando el mapa:",u),this.showMapFallback(a),this.mapInitialized$.next(!1),l(u)}})})}addSearchAreaButton(a){if(!this.map)return;let r=this.map.getContainer(),n=O.DomUtil.create("div","leaflet-control leaflet-control-custom",r);n.style.position="absolute",n.style.top="10px",n.style.left="50%",n.style.transform="translateX(-50%)",n.style.backgroundColor="white",n.style.padding="6px 12px",n.style.display="flex",n.style.alignItems="center",n.style.gap="6px",n.style.cursor="pointer",n.style.fontSize="13px",n.style.fontWeight="600",n.style.fontFamily="Segoe UI, Roboto, sans-serif",n.style.border="2px solid rgba(0,0,0,0.2)",n.style.borderRadius="10px",n.style.boxShadow="0 2px 6px rgba(0,0,0,0.15)",n.style.transition="all 0.2s ease",n.innerHTML=`
            <i class="pi pi-search" style="font-size: 15px; color: #4f46e5;"></i>
            <span style="color: #374151;">Buscar en esta \xE1rea</span>
        `,n.onmouseenter=()=>{n.style.backgroundColor="#f3f4f6",n.style.borderColor="#4f46e5",n.style.boxShadow="0 3px 8px rgba(0,0,0,0.25)"},n.onmouseleave=()=>{n.style.backgroundColor="white",n.style.borderColor="rgba(0,0,0,0.2)",n.style.boxShadow="0 2px 6px rgba(0,0,0,0.15)"},n.onclick=()=>{let l=this.map.getBounds();a(l)},O.DomEvent.disableClickPropagation(n)}configureLeafletIcons(){delete O.Icon.Default.prototype._getIconUrl,O.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"})}initializeMarkerCluster(){this.map&&(this.markerClusterGroup=O.markerClusterGroup({showCoverageOnHover:!1,maxClusterRadius:50,spiderfyOnMaxZoom:!0}),this.map.addLayer(this.markerClusterGroup))}addUserMarkers(a){!this.map||!this.markerClusterGroup||(this.clearUserMarkers(),a.forEach(r=>{if(r.ubicacion?.geublat&&r.ubicacion?.geublon){let n=this.createUserMarker(r);this.userMarkers.set(r.usucod,n),this.markerClusterGroup?.addLayer(n)}}))}getCurrentBounds(){if(!this.map)throw new Error("El mapa no est\xE1 inicializado");return this.map.getBounds()}fitBoundsToCoordinates(a){if(!(!this.map||a.length===0))try{if(a.length===1)this.map.setView(a[0],15);else{let r=new O.FeatureGroup;a.forEach(n=>{O.marker(n).addTo(r)}),this.map.fitBounds(r.getBounds(),{padding:[20,20],maxZoom:16}),r.clearLayers()}}catch(r){console.error("Error al centrar el mapa:",r)}}createUserMarker(a){let r=this.createUserIcon(),n=O.marker([a.ubicacion.geublat,a.ubicacion.geublon],{icon:r}),l=this.createUserPopupContent(a);return n.bindPopup(l,{maxWidth:240,className:"custom-popup"}),n}createUserIcon(){return O.divIcon({html:`
        <div class="relative">
          <div class="w-8 h-8 bg-blue-500 rounded-full border-2 border-white shadow-lg flex items-center justify-center">
            <svg class="w-4 h-4 text-white" viewBox="0 0 20 20">
              <path
                fill="currentColor"
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"
              />
            </svg>
          </div>
          <div class="absolute -top-1 -right-1 w-3 h-3 bg-green-400 border border-white rounded-full"></div>
        </div>
      `,className:"custom-user-marker",iconSize:[32,32],iconAnchor:[16,16]})}createUserPopupContent(a){let r=new Date(a.ubicacion.geubfech).toLocaleString("es-EC",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"});return`
      <div class="bg-white rounded-lg shadow-sm border-0 overflow-hidden">
        <div class="p-2 space-y-1.5">
          <div class="flex items-center space-x-1.5 text-xs">
            <svg class="w-2.5 h-2.5 text-gray-400" viewBox="0 0 20 20">
              <path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"
                d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1z" />
            </svg>
            <span class="text-gray-700 font-medium">${a.usucod}</span>
            <span class="text-gray-400">\u2022</span>
            <span class="text-gray-500">${a.usucodv}</span>
          </div>
          <div class="flex items-center space-x-1.5 text-xs">
            <svg class="w-2.5 h-2.5 text-gray-400" viewBox="0 0 20 20">
              <path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"
                d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z" />
            </svg>
            <span class="text-gray-600 text-xs">${a.usuemail||"No tiene correo"}</span>
          </div>
          <div class="flex items-center space-x-1.5 text-xs">
            <svg class="w-2.5 h-2.5 text-gray-400" viewBox="0 0 20 20">
              <path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"
                d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" />
            </svg>
            <span class="text-gray-500">\xDAltima ubicaci\xF3n: ${r}</span>
          </div>
          <div class="flex items-center space-x-1.5 mt-2">
            <div class="w-2 h-2 bg-green-400 rounded-full"></div>
            <span class="text-xs text-green-600 font-medium">Usuario activo</span>
          </div>
        </div>
      </div>
    `}searchLocation(a){if(!a.trim())return this.msgService.add({severity:"warn",summary:"Advertencia",detail:"Ingrese una ubicaci\xF3n para buscar"}),new fn(l=>l.next([]));this.searchingLocation$.next(!0);let n=`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(a.trim())}&limit=5&countrycodes=ec&addressdetails=1`;return new fn(l=>{this.http.get(n).subscribe({next:u=>{this.searchingLocation$.next(!1),this.searchResults$.next(u),l.next(u),l.complete()},error:u=>{this.searchingLocation$.next(!1),this.searchResults$.next([]),this.msgService.add({severity:"error",summary:"Error",detail:"Error al buscar la ubicaci\xF3n"}),l.error(u)}})})}selectSearchResult(a){if(!this.map)return;let r=parseFloat(a.lat),n=parseFloat(a.lon);this.map.setView([r,n],15),this.clearSearchMarker(),this.searchMarker=O.marker([r,n]).addTo(this.map).bindPopup(`<b>${a.display_name}</b><br><small>Resultado de b\xFAsqueda</small>`).openPopup(),this.searchResults$.next([]),this.msgService.add({severity:"success",summary:"Ubicaci\xF3n encontrada",detail:"Ubicaci\xF3n marcada en el mapa"})}focusOnUser(a){if(!this.map||!a.ubicacion)return;this.map.setView([a.ubicacion.geublat,a.ubicacion.geublon],15);let r=this.userMarkers.get(a.usucod);r&&r.openPopup()}clearUserMarkers(){this.markerClusterGroup&&this.markerClusterGroup.clearLayers(),this.userMarkers.clear()}clearSearchMarker(){this.searchMarker&&this.map&&(this.map.removeLayer(this.searchMarker),this.searchMarker=null)}showMapFallback(a){let r=a.nativeElement;r.innerHTML=`
      <div class="flex items-center justify-center h-full bg-surface-100 dark:bg-surface-800 rounded-lg">
        <div class="text-center">
          <i class="pi pi-exclamation-triangle text-4xl text-orange-500 mb-4"></i>
          <p class="text-surface-600 dark:text-surface-400 mb-2">Error al cargar el mapa</p>
          <p class="text-sm text-surface-500">Verifique que Leaflet est\xE9 instalado correctamente</p>
        </div>
      </div>
    `}addGeocercaMarkers(a){this.map&&(this.clearGeocercas(),this.geocercasLayer=O.featureGroup().addTo(this.map),a.forEach(r=>{if(r.geocact&&r.geoclat&&r.geoclon)try{let n=this.createGeocercaResponseLayer(r);n&&(this.geocercasMarkers.set(r.geoccod,n),this.geocercasLayer?.addLayer(n))}catch(n){console.error("Error al agregar marcador de geocerca:",n)}}),a.length>0&&this.fitGeocercasBounds(),setTimeout(()=>{this.map?.invalidateSize()},100))}createGeocercaResponseLayer(a){try{let r=[];if(a.geoccoor){let n=JSON.parse(a.geoccoor);if(Array.isArray(n)&&n.length>0){let l=n.map(d=>[d.lat,d.lng]),u=O.polygon(l,{color:"#8b5cf6",fillColor:"#8b5cf6",fillOpacity:.15,weight:2,opacity:.8});u.bindPopup(this.createGeocercaResponsePopup(a),{maxWidth:280,className:"geocerca-response-popup"}),r.push(u)}}return r.length>1?O.layerGroup(r):r[0]}catch(r){console.error("Error al crear geocerca:",r);let n=O.circleMarker([a.geoclat,a.geoclon],{radius:6,color:"#ef4444",fillColor:"#ffffff",fillOpacity:1,weight:2});return n.bindPopup(this.createGeocercaResponsePopup(a)),n}}createGeocercaResponsePopup(a){let r=new Date(a.geocfcre).toLocaleDateString("es-EC",{day:"2-digit",month:"2-digit",year:"numeric"}),n=a.geocact?"text-green-600":"text-red-600",l=a.geocact?"Activa":"Inactiva",u=a.geocact?"bg-green-400":"bg-red-400";return`
        <div class="bg-white rounded-lg shadow-sm border-0 overflow-hidden">
            <div class="bg-purple-500 text-white px-3 py-2">
                <h3 class="font-semibold text-sm">${a.geocnom}</h3>
                <span class="text-xs opacity-90">${a.geoccod}</span>
            </div>
            <div class="p-3 space-y-2">
                <div class="flex items-center space-x-2 text-xs">
                    <svg class="w-3 h-3 text-gray-400" viewBox="0 0 20 20">
                        <path fill="currentColor" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z"/>
                    </svg>
                    <span class="text-gray-700">${a.geocsec}</span>
                </div>
                <div class="flex items-center space-x-2 text-xs">
                    <svg class="w-3 h-3 text-gray-400" viewBox="0 0 20 20">
                        <path fill="currentColor" d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4z"/>
                    </svg>
                    <span class="text-gray-600">${a.geocciud}, ${a.geocprov}</span>
                </div>
                <div class="flex items-center space-x-2 text-xs">
                    <svg class="w-3 h-3 text-gray-400" viewBox="0 0 20 20">
                        <path fill="currentColor" d="M9 12a1 1 0 102 0V8a1 1 0 10-2 0v4zm1-7a1 1 0 100 2 1 1 0 000-2z M10 18a8 8 0 100-16 8 8 0 000 16z"/>
                    </svg>
                    <span class="text-gray-600">Pa\xEDs: ${a.geocpais}</span>
                </div>
                <div class="flex items-center space-x-2 text-xs">
                    <svg class="w-3 h-3 text-gray-400" viewBox="0 0 20 20">
                        <path fill="currentColor" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zM4 8h12v8H4V8z"/>
                    </svg>
                    <span class="text-gray-600">Creada: ${r}</span>
                </div>
                <div class="flex items-center justify-between mt-3 pt-2 border-t border-gray-100">
                    <div class="flex items-center space-x-1">
                        <div class="w-2 h-2 ${u} rounded-full"></div>
                        <span class="text-xs ${n} font-medium">${l}</span>
                    </div>
                    <div class="text-right">
                        <div class="text-xs text-gray-500">Prioridad: ${a.geocpri}</div>
                        ${a.geocarm?`<div class="text-xs text-gray-500">\xC1rea: ${a.geocarm}m\xB2</div>`:""}
                    </div>
                </div>
            </div>
        </div>
    `}focusOnGeocerca(a){if(!this.map||!a.geoclat||!a.geoclon)return;this.map.setView([a.geoclat,a.geoclon],16);let r=this.geocercasMarkers.get(a.geoccod);if(r)if("getLayers"in r){let l=r.getLayers().find(u=>"openPopup"in u&&"_popup"in u);l&&l.openPopup()}else"openPopup"in r&&r.openPopup();this.msgService.add({severity:"info",summary:"Geocerca seleccionada",detail:`Mostrando: ${a.geocnom}`,life:1e3})}resetMapView(){this.map&&(this.map.setView(this.defaultConfig.center,this.defaultConfig.zoom),this.clearSearchMarker(),this.clearTrackingMarkers(),this.clearAllTrackingData(),this.clearCustomerMarkers(),this.clearGeocercas(),this.clearUserRange(),this.restoreAllUserMarkers(),this.searchResults$.next([]),this.msgService.add({severity:"info",summary:"Vista restablecida",detail:"El mapa ha vuelto a la vista inicial"}),setTimeout(()=>{this.map?.invalidateSize()},100))}addTrackingMarkers(a){if(!this.map||a.length===0)return;this.clearTrackingMarkers(),this.initializeTrackingCluster();let n=a[0].ubicaciones;n.forEach((l,u)=>{if(l.latitud&&l.longitud)try{let d=this.createTrackingMarker(l,u,n.length),m=`${l.latitud}-${l.longitud}-${l.tiempo}`;this.trackingMarkers.set(m,d),this.trackingClusterGroup?.addLayer(d)}catch(d){console.error("Error al agregar marcador de tracking:",d)}}),this.createTrackingPath(a),setTimeout(()=>{this.map?.invalidateSize()},100)}addChargeMarkers(a){this.map&&(this.clearChargeMarkers(),this.initializeChargeCluster(),a.forEach(r=>{if(r.cablat&&r.cablon)try{let n=this.createChargeMarker(r);this.chargeMarkers.set(r.cabnumero.toString(),n),this.chargeClusterGroup?.addLayer(n)}catch(n){console.error("\u274C Error al agregar marcador de cobro:",n)}}),setTimeout(()=>{this.map?.invalidateSize()},100))}addOrderMarkers(a){this.map&&(this.clearOrderMarkers(),this.initializeOrderCluster(),a.forEach(r=>{if(r.pdtlat&&r.pdtlon)try{let n=this.createOrderMarker(r);this.orderMarkers.set(r.pdtfactura.toString(),n),this.orderClusterGroup?.addLayer(n)}catch(n){console.error("\u274C Error al agregar marcador de pedido:",n)}}),setTimeout(()=>{this.map?.invalidateSize()},100))}createTrackingMarker(a,r,n){let l=r===n-1,u=this.createTrackingIcon(r,l),d=O.marker([a.latitud,a.longitud],{icon:u}),m=this.createTrackingPopupContent(a,r,l);return d.bindPopup(m,{maxWidth:260,className:"custom-tracking-popup"}),d}createChargeMarker(a){let r=this.createChargeIcon(),n=O.marker([a.cablat,a.cablon],{icon:r}),l=this.createChargePopupContent(a);return n.bindPopup(l,{maxWidth:280,className:"custom-charge-popup"}),n}createOrderMarker(a){let r=this.createOrderIcon(),n=O.marker([a.pdtlat,a.pdtlon],{icon:r}),l=this.createOrderPopupContent(a);return n.bindPopup(l,{maxWidth:280,className:"custom-order-popup"}),n}createTrackingIcon(a,r=!1){return r?this.createDeliveryPersonIcon():O.divIcon({html:`
            <div class="relative">
                <div class="w-3 h-3 bg-gray-400 rounded-full border-2 border-white shadow-sm">
                </div>
            </div>`,className:"custom-tracking-marker",iconSize:[12,12],iconAnchor:[6,6]})}createDeliveryPersonIcon(){return O.divIcon({html:`
<div class="relative">
    <div class="w-10 h-10 bg-blue-500 rounded-full border-2 border-white shadow-lg flex items-center justify-center">
        <svg class="w-5 h-5 text-white" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"/>
        </svg>
    </div>
</div>`,className:"custom-delivery-person-marker",iconSize:[40,40],iconAnchor:[20,20]})}createChargeIcon(){return O.divIcon({html:`
        <div class="relative">
            <div class="w-10 h-10 bg-green-600 rounded-full border-2 border-white shadow-md flex items-center justify-center">
                <svg class="w-5 h-5 text-white" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M7,15H9C9,16.08 10.37,17 12,17C13.63,17 15,16.08 15,15C15,13.9 13.96,13.5 11.76,12.97C9.64,12.44 7,11.78 7,9C7,7.21 8.47,5.69 10.5,5.18V3H13.5V5.18C15.53,5.69 17,7.21 17,9H15C15,7.92 13.63,7 12,7C10.37,7 9,7.92 9,9C9,10.1 10.04,10.5 12.24,11.03C14.36,11.56 17,12.22 17,15C17,16.79 15.53,18.31 13.5,18.82V21H10.5V18.82C8.47,18.31 7,16.79 7,15Z"/>
                </svg>
            </div>
            <div class="absolute -top-1 -right-1 w-4 h-4 bg-yellow-400 border border-white rounded-full flex items-center justify-center">
                <span class="text-xs font-bold text-green-800">$</span>
            </div>
        </div>`,className:"custom-charge-marker",iconSize:[40,40],iconAnchor:[20,20]})}createOrderIcon(){return O.divIcon({html:`
            <div class="relative">
                <div class="w-10 h-10 bg-purple-500 rounded-full border-2 border-white shadow-md flex items-center justify-center">
                    <svg class="w-5 h-5 text-white" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M17 18C15.89 18 15 18.89 15 20C15 21.11 15.89 22 17 22C18.11 22 19 21.11 19 20C19 18.89 18.11 18 17 18ZM1 2V4H3L6.6 11.59L5.25 14.04C5.09 14.32 5 14.65 5 15C5 16.11 5.89 17 7 17H19V15H7.42C7.28 15 7.17 14.89 7.17 14.75L7.2 14.63L8.1 13H15.55C16.3 13 16.96 12.59 17.3 11.97L20.88 5H5.21L4.27 2H1ZM7 18C5.89 18 5 18.89 5 20C5 21.11 5.89 22 7 22C8.11 22 9 21.11 9 20C9 18.89 8.11 18 7 18Z"/>
                    </svg>
                </div>
                <div class="absolute -top-1 -right-1 w-4 h-4 bg-purple-400 border border-white rounded-full flex items-center justify-center">
                    <span class="text-xs font-bold text-purple-800">P</span>
                </div>
            </div>`,className:"custom-order-marker",iconSize:[40,40],iconAnchor:[20,20]})}createTrackingPopupContent(a,r,n=!1){let l=new Date(a.tiempo),u=l.toLocaleDateString("es-ES"),d=l.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),m=n?"bg-green-600":"bg-blue-600",x=n?"Ubicaci\xF3n Actual":`Ubicaci\xF3n ${r+1}`,_=n?"\xDAltima actualizaci\xF3n":"Registro";return`
        <div class="bg-white rounded-lg shadow-sm border-0 overflow-hidden">
            <div class="${m} px-3 py-2">
                <div class="flex items-center space-x-2 text-white">
                    <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor">
                        ${n?'<path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"/>':'<path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"/>'}
                    </svg>
                    <span class="font-semibold text-sm">${x}</span>
                    ${n?'<div class="w-2 h-2 bg-green-300 rounded-full animate-pulse ml-1"></div>':""}
                </div>
            </div>
            <div class="p-3 space-y-2">
                <div class="flex items-center space-x-2 text-sm">
                    <svg class="w-3 h-3 text-gray-400" viewBox="0 0 20 20">
                        <path fill="currentColor" d="M10 2L3 7v11h4v-6h6v6h4V7l-7-5z"/>
                    </svg>
                    <span class="font-medium text-gray-800">Vendedor</span>
                </div>
                <div class="flex items-center space-x-2 text-xs text-gray-600">
                    <svg class="w-2.5 h-2.5 text-gray-400" viewBox="0 0 20 20">
                        <path fill="currentColor" d="M10 2a6 6 0 00-6 6c0 4.314 5.686 9.32 5.814 9.45a.5.5 0 00.372 0C10.314 17.32 16 12.314 16 8a6 6 0 00-6-6z"/>
                    </svg>
                    <span>${a.latitud.toFixed(6)}, ${a.longitud.toFixed(6)}</span>
                </div>
                <div class="flex items-center space-x-2 text-xs text-gray-600">
                    <svg class="w-2.5 h-2.5 text-gray-400" viewBox="0 0 20 20">
                        <path fill="currentColor" d="M10 2a8 8 0 100 16 8 8 0 000-16zm1 11H9v-2h2v2zm0-4H9V5h2v4z"/>
                    </svg>
                    <span>${_}: ${u} - ${d}</span>
                </div>
            </div>
        </div>
    `}createChargePopupContent(a){let n=new Date(a.cabfecha).toLocaleDateString("es-ES");return`
    <div class="bg-white rounded-lg shadow-sm border-0 overflow-hidden">
        <div class="bg-green-600 px-3 py-2">
            <div class="flex items-center space-x-2 text-white">
                <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M7,15H9C9,16.08 10.37,17 12,17C13.63,17 15,16.08 15,15C15,13.9 13.96,13.5 11.76,12.97C9.64,12.44 7,11.78 7,9C7,7.21 8.47,5.69 10.5,5.18V3H13.5V5.18C15.53,5.69 17,7.21 17,9H15C15,7.92 13.63,7 12,7C10.37,7 9,7.92 9,9C9,10.1 10.04,10.5 12.24,11.03C14.36,11.56 17,12.22 17,15C17,16.79 15.53,18.31 13.5,18.82V21H10.5V18.82C8.47,18.31 7,16.79 7,15Z"/>
                </svg>
                <span class="font-semibold text-sm">Cobro #${a.cabnumero}</span>
            </div>
        </div>
        <div class="p-3 space-y-2">
            <div class="flex items-center space-x-2 text-sm">
                <svg class="w-3 h-3 text-gray-400" viewBox="0 0 20 20">
                    <path fill="currentColor" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
                <span class="font-medium text-gray-800">${a.cabclave1}</span>
            </div>
            <div class="flex items-center space-x-2 text-xs text-gray-600">
                <svg class="w-2.5 h-2.5 text-gray-400" viewBox="0 0 20 20">
                    <path fill="currentColor" d="M6 2a1 1 0 000 2h8a1 1 0 100-2H6zM3 6a2 2 0 012-2h10a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2V6z"/>
                </svg>
                <span>Recibo: ${a.cabnrecibo}</span>
            </div>
            <div class="flex items-center space-x-2 text-xs text-gray-600">
                <svg class="w-2.5 h-2.5 text-gray-400" viewBox="0 0 20 20">
                    <path fill="currentColor" d="M10 2a8 8 0 100 16 8 8 0 000-16zm1 11H9v-2h2v2zm0-4H9V5h2v4z"/>
                </svg>
                <span>${n}</span>
            </div>
            <div class="flex items-center space-x-2 text-xs text-gray-600">
                <svg class="w-2.5 h-2.5 text-gray-400" viewBox="0 0 20 20">
                    <path fill="currentColor" d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4z"/>
                </svg>
                <span>Vendedor: ${a.cabnvendedor}</span>
            </div>
            <div class="flex items-center space-x-2 text-xs text-gray-600">
                <svg class="w-2.5 h-2.5 text-gray-400" viewBox="0 0 20 20">
                    <path fill="currentColor" d="M10 2L3 7v11h4v-6h6v6h4V7l-7-5z"/>
                </svg>
                <span>Sucursal: ${a.cabsucu}</span>
            </div>
        </div>
    </div>
    `}createOrderPopupContent(a){let r=new Date(a.pdtfechaf),n=r.toLocaleDateString("es-ES"),l=r.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"});return`
        <div class="bg-white rounded-lg shadow-sm border-0 overflow-hidden">
            <div class="bg-purple-600 px-3 py-2">
                <div class="flex items-center space-x-2 text-white">
                    <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19,7H18V6A2,2 0 0,0 16,4H8A2,2 0 0,0 6,6V7H5A1,1 0 0,0 4,8V19A3,3 0 0,0 7,22H17A3,3 0 0,0 20,19V8A1,1 0 0,0 19,7Z"/>
                    </svg>
                    <span class="font-semibold text-sm">Pedido #${a.pdtfactura}</span>
                </div>
            </div>
            <div class="p-3 space-y-2">
                <div class="flex items-center space-x-2 text-sm">
                    <svg class="w-3 h-3 text-gray-400" viewBox="0 0 20 20">
                        <path fill="currentColor" d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4z"/>
                    </svg>
                    <span class="font-medium text-gray-800">${a.pdtnombre}</span>
                </div>
                <div class="flex items-center space-x-2 text-xs text-gray-600">
                    <svg class="w-2.5 h-2.5 text-gray-400" viewBox="0 0 20 20">
                        <path fill="currentColor" d="M6 2a1 1 0 000 2h8a1 1 0 100-2H6zM3 6a2 2 0 012-2h10a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2V6z"/>
                    </svg>
                    <span>Cliente: ${a.pdtclave} - ${a.pdtclave1}</span>
                </div>
                <div class="flex items-center space-x-2 text-xs text-gray-600">
                    <svg class="w-2.5 h-2.5 text-gray-400" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M17.707 9.293l-5-5A.997.997 0 0012 4H5a3 3 0 00-3 3v6a3 3 0 003 3h7c.265 0 .52-.105.707-.293l5-5a.999.999 0 000-1.414zM6 9a1 1 0 110-2 1 1 0 010 2z"/>
                    </svg>
                    <span>Tipo: ${a.pdttd}</span>
                </div>
                <div class="flex items-center space-x-2 text-xs text-gray-600">
                    <svg class="w-2.5 h-2.5 text-gray-400" viewBox="0 0 20 20">
                        <path fill="currentColor" d="M10 2a8 8 0 100 16 8 8 0 000-16zm1 11H9v-2h2v2zm0-4H9V5h2v4z"/>
                    </svg>
                    <span>${n} - ${l}</span>
                </div>
            </div>
        </div>
        `}initializeTrackingCluster(){this.map&&(this.trackingClusterGroup=new O.MarkerClusterGroup({disableClusteringAtZoom:0,iconCreateFunction:a=>{let r=a.getChildCount();return O.divIcon({html:`<div class="bg-blue-600 text-white rounded-full w-10 h-10 flex items-center justify-center font-semibold text-sm shadow-lg border-2 border-white">${r}</div>`,className:"custom-tracking-cluster",iconSize:[40,40]})},spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,zoomToBoundsOnClick:!0}),this.map.addLayer(this.trackingClusterGroup))}initializeChargeCluster(){this.map&&(this.chargeClusterGroup=new O.MarkerClusterGroup({iconCreateFunction:a=>{let r=a.getChildCount();return O.divIcon({html:`<div class="bg-green-600 text-white rounded-full w-10 h-10 flex items-center justify-center font-semibold text-sm shadow-lg border-2 border-white">${r}</div>`,className:"custom-charge-cluster",iconSize:[40,40]})},spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,zoomToBoundsOnClick:!0}),this.map.addLayer(this.chargeClusterGroup))}initializeOrderCluster(){this.map&&(this.orderClusterGroup=new O.MarkerClusterGroup({iconCreateFunction:a=>{let r=a.getChildCount();return O.divIcon({html:`<div class="bg-orange-600 text-white rounded-full w-10 h-10 flex items-center justify-center font-semibold text-sm shadow-lg border-2 border-white">${r}</div>`,className:"custom-order-cluster",iconSize:[40,40]})},spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,zoomToBoundsOnClick:!0}),this.map.addLayer(this.orderClusterGroup))}createTrackingPath(a){if(!this.map||a.length===0)return;let r=a[0];if(r.ubicaciones.length<2)return;let l=r.ubicaciones.sort((u,d)=>new Date(u.tiempo).getTime()-new Date(d.tiempo).getTime()).map(u=>[u.latitud,u.longitud]);this.trackingPath=O.polyline(l,{color:"#3B82F6",weight:3,opacity:.7,smoothFactor:1}),this.trackingPath.addTo(this.map)}clearTrackingMarkers(){this.trackingClusterGroup&&this.map&&(this.trackingClusterGroup.clearLayers(),this.map.removeLayer(this.trackingClusterGroup),this.trackingClusterGroup=null),this.trackingPath&&this.map&&(this.map.removeLayer(this.trackingPath),this.trackingPath=null),this.trackingMarkers.clear()}clearChargeMarkers(){this.chargeClusterGroup&&this.map&&(this.chargeClusterGroup.clearLayers(),this.map.removeLayer(this.chargeClusterGroup),this.chargeClusterGroup=null),this.chargeMarkers.clear()}clearOrderMarkers(){this.orderClusterGroup&&this.map&&(this.orderClusterGroup.clearLayers(),this.map.removeLayer(this.orderClusterGroup),this.orderClusterGroup=null),this.orderMarkers.clear()}clearAllTrackingData(){this.clearTrackingMarkers(),this.clearChargeMarkers(),this.clearOrderMarkers()}updateUserMarkersLocation(a){!this.map||!this.markerClusterGroup||a.forEach(r=>{if(r.ubicacion?.geublat&&r.ubicacion?.geublon){let n=this.userMarkers.get(r.usucod);if(n){let l=O.latLng(r.ubicacion.geublat,r.ubicacion.geublon);n.setLatLng(l);let u=this.createUserPopupContent(r);n.setPopupContent(u)}else{let l=this.createUserMarker(r);this.userMarkers.set(r.usucod,l),this.markerClusterGroup?.addLayer(l)}}})}destroyMap(){this.clearSearchMarker(),this.clearAllTrackingData(),this.clearUserMarkers(),this.clearUserRange(),this.clearCustomerMarkers(),this.clearGeocercas(),this.markerClusterGroup&&this.map&&(this.map.removeLayer(this.markerClusterGroup),this.markerClusterGroup=null),this.map&&(this.map.remove(),this.map=null),this.mapInitialized$.next(!1)}static \u0275fac=function(r){return new(r||h)(st(et),st(bi))};static \u0275prov=Ke({token:h,factory:h.\u0275fac,providedIn:"root"})};var Ei=class h{constructor(a){this.http=a}baseUrl=$t.apiUrl;authService=bt(wi);getCustomersByVendorAndArea(a){let r=this.authService.getToken(),n=new Je({Authorization:`Bearer ${r}`,"Content-Type":"application/json"});return this.http.post(`${this.baseUrl}/geolocalizacion/webclientezona`,a,{headers:n})}getTrackingDetails(a){let r=this.authService.getToken(),n=new Je({Authorization:`Bearer ${r}`,"Content-Type":"application/json"});return this.http.post(`${this.baseUrl}/geolocalizacion/webconsultacompleta`,a,{headers:n})}getCustomersByCodeVendor(a){let r=this.authService.getToken(),n=new Je({Authorization:`Bearer ${r}`,"Content-Type":"application/json"}),l=new yi().set("codvendedor",a);return this.http.get(`${this.baseUrl}/clientes/weblistacompletafiltro`,{headers:n,params:l})}static \u0275fac=function(r){return new(r||h)(st(et))};static \u0275prov=Ke({token:h,factory:h.\u0275fac,providedIn:"root"})};var Dl=["mapContainer"],Rl=["scrollContainer"],Zl=()=>[1,2,3,4,5],us=()=>[1,2,3],Gl=(h,a)=>a.dirclave;function Nl(h,a){if(h&1&&(v(0,"div",85)(1,"span"),k(2),y()()),h&2){let r=I(2);M(2),fe("",r.filteredUsers.length," vendedores disponibles")}}function Ul(h,a){if(h&1){let r=de();v(0,"div",8)(1,"input",80),ee("input",function(l){U(r);let u=I();return V(u.onSearch(l))}),y(),v(2,"div",81),E(3,"i",82),y(),v(4,"button",83),E(5,"i",84),y()(),j(6,Nl,3,1,"div",85)}if(h&2){let r=I();M(6),W(r.filteredUsers.length>0?6:-1)}}function Vl(h,a){if(h&1){let r=de();v(0,"button",106),ee("click",function(){U(r);let l=I(2);return V(l.selectOnlyUser(l.selectedUser))}),E(1,"i",107),y()}}function Fl(h,a){if(h&1&&(v(0,"div",95)(1,"div",108),E(2,"i",109),y(),v(3,"span",110),k(4),y()()),h&2){let r=I(2);M(3),q("title",r.selectedUser.ubicacion.geublat+", "+r.selectedUser.ubicacion.geublon),M(),fe(" ",r.getUserLocationName(r.selectedUser)," ")}}function Hl(h,a){if(h&1&&(v(0,"span",114),k(1),y()),h&2){let r=I(3);M(),fe(" ",r.getLocationTimeAgo(r.selectedUser.ubicacion.geubfech)," ")}}function jl(h,a){if(h&1&&(v(0,"div",124)(1,"div",125),k(2),y()()),h&2){let r=I(3);M(2),fe(" ",r.formatLocationDateTime(r.selectedUser.ubicacion.geubfech)," ")}}function Wl(h,a){if(h&1){let r=de();v(0,"div",101)(1,"div",111)(2,"div",95),E(3,"div",112),v(4,"span",113),k(5,"Ubicaci\xF3n activa"),y()(),j(6,Hl,2,1,"span",114),y(),v(7,"div",115)(8,"div",116)(9,"div",95),E(10,"i",117),v(11,"div",118)(12,"span",119),k(13,"Lat:"),y(),v(14,"span",120),k(15),Ht(16,"number"),y(),v(17,"span",121),k(18,"|"),y(),v(19,"span",119),k(20,"Lng:"),y(),v(21,"span",120),k(22),Ht(23,"number"),y()()(),v(24,"button",122),ee("click",function(){U(r);let l=I(2);return V(l.copyCoordinates(l.selectedUser.ubicacion))}),E(25,"i",123),y()(),j(26,jl,3,1,"div",124),y()()}if(h&2){let r=I(2);M(6),W(r.selectedUser.ubicacion.geubfech?6:-1),M(9),Ye(jt(16,4,r.selectedUser.ubicacion.geublat,"1.4-4")),M(7),Ye(jt(23,7,r.selectedUser.ubicacion.geublon,"1.4-4")),M(4),W(r.selectedUser.ubicacion.geubfech?26:-1)}}function $l(h,a){h&1&&(v(0,"div",101)(1,"div",126),E(2,"i",127),v(3,"span",128),k(4,"Sin ubicaci\xF3n registrada"),y()()())}function ql(h,a){if(h&1&&(v(0,"div",105)(1,"div",95),E(2,"i",129),v(3,"span",130),k(4,"Clientes asignados"),y()(),v(5,"span",131),k(6),y()()),h&2){let r=I(2);M(6),Ft(" ",r.filteredCustomers.length," / ",r.customers.length," ")}}function Ql(h,a){if(h&1){let r=de();v(0,"div",9)(1,"div",86)(2,"div",87)(3,"button",88),ee("click",function(){U(r);let l=I();return V(l.backToUsersList())}),E(4,"i",89),y(),j(5,Vl,2,0,"button",90),y(),v(6,"div",91)(7,"div",92),E(8,"i",93),y(),v(9,"div",69)(10,"h6",94),k(11),y(),v(12,"div",95)(13,"span",96),k(14),y(),v(15,"span",97),k(16),y()()()(),v(17,"div",9)(18,"div",98),E(19,"i",99),v(20,"span",100),k(21,"Informaci\xF3n de Ubicaci\xF3n"),y()(),j(22,Fl,5,2,"div",95),j(23,Wl,27,10,"div",101)(24,$l,5,0,"div",101),y()(),v(25,"div",8)(26,"input",102),Pe("ngModelChange",function(l){U(r);let u=I();return Se(u.customerSearchTerm,l)||(u.customerSearchTerm=l),V(l)}),ee("input",function(){U(r);let l=I();return V(l.filterCustomers())}),y(),v(27,"div",103),E(28,"i",104),y()(),j(29,ql,7,2,"div",105),y()}if(h&2){let r=I();M(5),W(r.selectedUser.ubicacion.geublat&&r.selectedUser.ubicacion.geublon?5:-1),M(6),fe(" ",r.selectedUser.usunombre," "),M(3),fe(" ",r.selectedUser.usucod," "),M(2),fe(" ",r.selectedUser.usucodv," "),M(6),W(r.selectedUser.ubicacion?22:-1),M(),W(r.selectedUser.ubicacion.geublat&&r.selectedUser.ubicacion.geublon?23:24),M(3),Te("ngModel",r.customerSearchTerm),M(3),W(r.customers.length>0?29:-1)}}function Kl(h,a){h&1&&(v(0,"div",134)(1,"div",135),E(2,"div",136),v(3,"div",137),E(4,"div",138)(5,"div",139)(6,"div",140),y()()())}function Xl(h,a){h&1&&(v(0,"div",132),at(1,Kl,7,0,"div",134,Lt),y()),h&2&&(M(),lt(gi(0,Zl)))}function Yl(h,a){if(h&1&&(v(0,"div",163),E(1,"i",164),v(2,"span"),k(3),y()()),h&2){let r=I(2).$implicit,n=I(3);M(3),Ye(n.formatLocationDate(r.ubicacion.geubfech))}}function Jl(h,a){if(h&1&&(v(0,"div",156),E(1,"div",112),v(2,"span",159),k(3,"Ubicaci\xF3n activa"),y()(),v(4,"div",160),E(5,"i",161),v(6,"span",162),k(7),Ht(8,"number"),Ht(9,"number"),y()(),j(10,Yl,4,1,"div",163)),h&2){let r=I().$implicit;M(7),Ft("",jt(8,3,r.ubicacion.geublat,"1.6-6"),", ",jt(9,6,r.ubicacion.geublon,"1.6-6")),M(3),W(r.ubicacion.geubfech?10:-1)}}function ec(h,a){h&1&&(v(0,"div",156),E(1,"div",165),v(2,"span",166),k(3,"Sin ubicaci\xF3n registrada"),y()())}function tc(h,a){if(h&1){let r=de();v(0,"div",145),ee("click",function(){let l=U(r).$implicit,u=I(3);return V(u.selectUser(l))}),E(1,"div",146),v(2,"div",147)(3,"div",135)(4,"div",148)(5,"div",149),E(6,"i",93),y()(),v(7,"div",69)(8,"h6",150),k(9),y(),v(10,"div",151)(11,"span",152),E(12,"i",153),k(13),y(),v(14,"span",154),k(15),y()(),v(16,"div",155),j(17,Jl,11,9)(18,ec,4,0,"div",156),y()(),v(19,"div",157),E(20,"i",158),y()()()()}if(h&2){let r=a.$implicit;M(9),fe(" ",r.usunombre," "),M(4),fe(" ",r.usucod," "),M(2),fe(" ",r.usucodv," "),M(2),W(r.ubicacion.geublat&&r.ubicacion.geublon?17:18)}}function ic(h,a){h&1&&(v(0,"div",134)(1,"div",135),E(2,"div",136),v(3,"div",137),E(4,"div",138)(5,"div",139)(6,"div",140),y()()())}function nc(h,a){h&1&&(v(0,"div",143),at(1,ic,7,0,"div",134,Lt),y()),h&2&&(M(),lt(gi(0,us)))}function oc(h,a){h&1&&(v(0,"div",144)(1,"div",8),E(2,"div",167),v(3,"div",168)(4,"div",169),E(5,"i",170),y(),v(6,"h6",171),k(7," No se encontraron usuarios "),y(),v(8,"p",172),k(9," Intenta ajustar los filtros de b\xFAsqueda "),y()()()())}function rc(h,a){if(h&1){let r=de();v(0,"div",141,1),ee("scroll",function(l){U(r);let u=I(2);return V(u.onScroll(l))}),at(2,tc,21,4,"div",142,Lt),j(4,nc,3,1,"div",143),j(5,oc,10,0,"div",144),y()}if(h&2){let r=I(2);Xe(r.paginatedUsers.length>5?"max-h-[70rem] overflow-y-auto":""),M(2),lt(r.paginatedUsers),M(2),W(r.loadingMore?4:-1),M(),W(r.filteredUsers.length===0&&!r.loadingMore?5:-1)}}function sc(h,a){if(h&1&&(j(0,Xl,3,1,"div",132),j(1,rc,6,4,"div",133)),h&2){let r=I();W(r.loading?0:-1),M(),W(r.loading?-1:1)}}function ac(h,a){h&1&&(v(0,"div",175)(1,"div",9),E(2,"div",176)(3,"div",177)(4,"div",178),y()())}function lc(h,a){h&1&&(v(0,"div",9),at(1,ac,5,0,"div",175,Lt),y()),h&2&&(M(),lt(gi(0,us)))}function cc(h,a){if(h&1){let r=de();v(0,"div",179)(1,"div",180)(2,"div",181)(3,"h6",182),k(4),y()(),v(5,"span",183),k(6),y()(),v(7,"div",184)(8,"div",160),E(9,"i",185),v(10,"span",162),k(11),y()(),v(12,"div",186),E(13,"i",187),v(14,"span",188),k(15),y()()(),v(16,"div",189)(17,"button",190),ee("click",function(){let l=U(r).$implicit,u=I(3);return V(u.focusCustomerOnMap(l))}),E(18,"i",191),k(19," Centrar en mapa "),y()()()}if(h&2){let r=a.$implicit;M(4),fe(" ",r.dirnombre," "),M(),Xe(r.asignado?"bg-green-100 dark:bg-green-900/40 text-green-700 dark:text-green-300 border border-green-200 dark:border-green-700":"bg-orange-100 dark:bg-orange-900/40 text-orange-700 dark:text-orange-300 border border-orange-200 dark:border-orange-700"),M(),fe(" ",r.asignado?"Asignado":"No asignado"," "),M(5),Ye(r.dirruc),M(4),Ye(r.dirdirec)}}function uc(h,a){if(h&1&&(v(0,"div",174)(1,"div",169),E(2,"i",192),y(),v(3,"h6",193),k(4,"No se encontraron clientes"),y(),v(5,"p",194),k(6),y()()),h&2){let r=I(3);M(6),fe(' No hay clientes que coincidan con "',r.customerSearchTerm,'" ')}}function hc(h,a){if(h&1&&(v(0,"div",173),at(1,cc,20,6,"div",179,Gl,!1,uc,7,1,"div",174),y()),h&2){let r=I(2);M(),lt(r.filteredCustomers)}}function dc(h,a){h&1&&(v(0,"div",174)(1,"div",195),E(2,"i",196),y(),v(3,"h6",193),k(4,"No hay clientes asignados"),y(),v(5,"p",194),k(6," Este usuario no tiene clientes en el \xE1rea seleccionada "),y()())}function pc(h,a){if(h&1&&(v(0,"div",11),j(1,lc,3,1,"div",9)(2,hc,4,1,"div",173)(3,dc,7,0,"div",174),y()),h&2){let r=I();M(),W(r.loadingCustomers?1:r.customers.length>0?2:3)}}function fc(h,a){if(h&1){let r=de();v(0,"p-paginator",197),ee("onPageChange",function(l){U(r);let u=I();return V(u.onPageChange(l))}),y()}if(h&2){let r=I();q("rows",r.itemsPerPage)("totalRecords",r.filteredUsers.length)("first",r.first)}}function mc(h,a){if(h&1&&(v(0,"div",209)(1,"span",210),k(2),y(),v(3,"small",211),k(4),y()()),h&2){let r=a.$implicit;M(2),Ye(r.geocerca==null?null:r.geocerca.geocnom),M(2),Ft("",r.geocerca==null?null:r.geocerca.geocciud," - ",r.geocerca==null?null:r.geocerca.geocprov)}}function _c(h,a){if(h&1&&(v(0,"span"),k(1),y()),h&2){let r=I().$implicit;M(),or("",r.length," geocerca",r.length===1?"":"s"," seleccionada",r.length===1?"":"s")}}function gc(h,a){if(h&1&&j(0,_c,2,3,"span"),h&2){let r=a.$implicit;W(r&&r.length>0?0:-1)}}function vc(h,a){if(h&1){let r=de();v(0,"div",205)(1,"label",43),k(2," Seleccionar Geocercas "),y(),v(3,"p-multiSelect",206),Pe("ngModelChange",function(l){U(r);let u=I(2);return Se(u.selectedGeofence,l)||(u.selectedGeofence=l),V(l)}),ee("onChange",function(l){U(r);let u=I(2);return V(u.onGeofencesChange(l))}),te(4,mc,5,3,"ng-template",207)(5,gc,1,1,"ng-template",208),y()()}if(h&2){let r=I(2);M(3),Te("ngModel",r.selectedGeofence),q("options",r.geofenceOptions)("filter",!0)("disabled",!r.geofenceEnabled)("showToggleAll",!0)("showHeader",!0)("maxSelectedLabels",2)}}function yc(h,a){if(h&1){let r=de();v(0,"div",36)(1,"div",37),E(2,"i",198),v(3,"span",39),k(4,"Geocerca"),y(),E(5,"div",40),y(),v(6,"div",199)(7,"div",200)(8,"div",201)(9,"p-toggleswitch",202),Pe("ngModelChange",function(l){U(r);let u=I();return Se(u.geofenceEnabled,l)||(u.geofenceEnabled=l),V(l)}),ee("onChange",function(){U(r);let l=I();return V(l.onToggleChange())}),y(),v(10,"div")(11,"span",203),k(12,"Activa"),y(),v(13,"span",204),k(14),y()()()(),j(15,vc,6,7,"div",205),y()()}if(h&2){let r=I();M(9),Te("ngModel",r.geofenceEnabled),M(4),q("ngClass",r.geofenceEnabled?"text-green-600":"text-surface-500"),M(),fe(" ",r.geofenceEnabled?"S\xED":"No"," "),M(),W(r.geofenceEnabled?15:-1)}}function xc(h,a){if(h&1){let r=de();v(0,"div",215),ee("click",function(){let l=U(r).$implicit,u=I(2);return V(u.selectSearchResult(l))}),v(1,"div",216),E(2,"i",217),v(3,"span",218),k(4),y()(),E(5,"i",219),y()}if(h&2){let r=a.$implicit;M(4),Ye(r.display_name)}}function bc(h,a){if(h&1&&(v(0,"div",76)(1,"div",212),k(2," Resultados de b\xFAsqueda: "),y(),v(3,"div",213),at(4,xc,6,1,"div",214,Lt),y()()),h&2){let r=I();M(4),lt(r.searchResults.slice(0,3))}}function Cc(h,a){h&1&&(v(0,"div",78)(1,"div",220),E(2,"i",221),v(3,"p",222),k(4,"Cargando mapa..."),y()()())}var cs=class h{constructor(a,r,n,l,u){this.userService=a;this.msgService=r;this.mapService=n;this.http=l;this.customerService=u}mapContainer;scrollContainer;pollingSubscription$=new fi;POLLING_INTERVAL=3e4;isPollingActive=!1;userLocations=new Map;loadingLocations=new Set;geocodingQueue=[];isProcessingQueue=!1;lastRequestTime=0;MIN_REQUEST_INTERVAL=1500;MAX_RETRIES=3;failedRequests=new Map;loadingMore=!1;hasReachedEnd=!1;currentPage=0;scrollThreshold=100;debounceTimer;filterFrom=null;selectedTimeUnit=null;timeValue=null;selectedGeofence=[];geofenceEnabled=!0;pedidosEnabled=!1;collectionsEnabled=!1;clientesNone=!1;clientesAll=!1;clientesAssigned=!1;timeUnitOptions=[];geofenceOptions=[];vendorGeocercas=[];loadingGeocercas=!1;showGeocercasDrawer=!1;selectedVendor=null;customers=[];loadingCustomers=!1;customerSearchTerm="";filteredCustomers=[];destroy$=new fi;users=[];filteredUsers=[];paginatedUsers=[];selectedUser=null;loading=!0;first=0;itemsPerPage=6;searchLocation="";searchingLocation=!1;searchResults=[];mapInitialized=!1;showRangeDrawer=!1;userRange=null;showRangeDialog=!1;defaultRadius=1e3;ngOnInit(){this.getAllUsers(),this.subscribeToMapService(),this.startUserLocationPolling()}ngAfterViewInit(){requestAnimationFrame(()=>{this.initializeMap().then(()=>{})})}initializeMap(){return yt(this,null,function*(){this.mapInitialized=!0;try{yield this.mapService.initializeMap(this.mapContainer,{center:[-.2298,-78.5249],zoom:13,defaultLocation:"Quito, Ecuador",zoomControl:!1}),this.mapService.addSearchAreaButton(a=>this.searchCustomersInCurrentArea(a)),!this.loading&&this.users.length>0&&this.mapService.addUserMarkers(this.users)}catch(a){console.error("Error al inicializar el mapa:",a)}})}searchCustomersInCurrentArea(a){if(!this.selectedUser){this.msgService.add({severity:"warn",summary:"Advertencia",detail:"Seleccione un usuario primero"});return}let r={southWest:[a.getSouth(),a.getWest()],northEast:[a.getNorth(),a.getEast()]};this.getCustomersInArea(this.selectedUser.usucodv,r)}getUserLocationName(a){let r=this.userLocations.get(a.usucodv);return this.loadingLocations.has(a.usucodv)?"Obteniendo ubicaci\xF3n...":r||(a.ubicacion.geublat&&a.ubicacion.geublon?(setTimeout(()=>{this.addToGeocodingQueue(parseFloat(String(a.ubicacion.geublat)),parseFloat(String(a.ubicacion.geublon)),a.usucodv)},100),"Cargando ubicaci\xF3n..."):"Sin ubicaci\xF3n disponible")}addToGeocodingQueue(a,r,n){this.geocodingQueue.some(u=>u.userId===n)||this.loadingLocations.has(n)||this.userLocations.has(n)||(this.geocodingQueue.push({userId:n,lat:a,lon:r}),this.loadingLocations.add(n),this.isProcessingQueue||this.processGeocodingQueue().then())}processGeocodingQueue(){return yt(this,null,function*(){if(!(this.isProcessingQueue||this.geocodingQueue.length===0)){for(this.isProcessingQueue=!0;this.geocodingQueue.length>0;){let a=this.geocodingQueue.shift();if(a){try{let n=Date.now()-this.lastRequestTime,l=Math.max(0,this.MIN_REQUEST_INTERVAL-n);l>0&&(yield this.delay(l)),yield this.performGeocodingRequest(a.lat,a.lon,a.userId),this.lastRequestTime=Date.now()}catch(r){console.warn(`Error procesando geocoding para ${a.userId}:`,r),this.handleGeocodingError(a)}yield this.delay(200)}}this.isProcessingQueue=!1}})}performGeocodingRequest=(a,r,n)=>yt(this,null,function*(){let l=`https://nominatim.openstreetmap.org/reverse?format=json&lat=${a}&lon=${r}&addressdetails=1`;this.http.get(l).pipe(Ho(1e4),Wo({count:this.MAX_RETRIES,delay:(u,d)=>jo(Math.pow(2,d)*1e3)}),_n(()=>mn(null)),gn(()=>this.loadingLocations.delete(n))).subscribe(u=>{let d=u?.address?this.buildLocationName(u):"Ubicaci\xF3n no disponible";this.userLocations.set(n,d),u?.address&&this.failedRequests.delete(n)})});buildLocationName(a){let r=a.address,n=[];return r.road&&n.push(r.road),r.quarter&&r.quarter!==r.road&&n.push(r.quarter),r.city_district&&r.city_district!==r.quarter&&n.push(r.city_district),r.city&&n.push(r.city),n.length>0?n.slice(0,3).join(", "):a.display_name.split(",").slice(0,2).join(",")}delay(a){return new Promise(r=>setTimeout(r,a))}handleGeocodingError=({userId:a,lat:r,lon:n})=>{let l=this.failedRequests.get(a)||0;l<this.MAX_RETRIES?setTimeout(()=>{this.failedRequests.set(a,l+1),this.geocodingQueue.push({userId:a,lat:r,lon:n}),!this.isProcessingQueue&&this.processGeocodingQueue()},Math.pow(2,l)*2e3):(this.loadingLocations.delete(a),this.userLocations.set(a,"Ubicaci\xF3n no disponible"),this.failedRequests.delete(a))};subscribeToMapService(){this.mapService.currentUserRange$.pipe(je(this.destroy$)).subscribe(a=>{this.userRange=a}),this.mapService.isMapInitialized$.pipe(je(this.destroy$)).subscribe(a=>{this.mapInitialized=a,a&&this.mapService.map&&this.mapService.addUserMarkers(this.users)}),this.mapService.isSearchingLocation$.pipe(je(this.destroy$)).subscribe(a=>{this.searchingLocation=a}),this.mapService.searchResultsList$.pipe(je(this.destroy$)).subscribe(a=>{this.searchResults=a})}filterCustomers(){if(!this.customerSearchTerm.trim()){this.filteredCustomers=[...this.customers];return}let a=this.customerSearchTerm.toLowerCase();this.filteredCustomers=this.customers.filter(r=>r.dirnombre.toLowerCase().includes(a)||r.dirruc.toLowerCase().includes(a)||r.dirdirec.toLowerCase().includes(a))}getCustomersInArea(a,r){this.loadingCustomers=!0;let n={clientes:{tipoelementos:0,codvendedor:a},zonasbusqueda:{latmax:r.southWest[0],latmin:r.northEast[0],lonmax:r.southWest[1],lonmin:r.northEast[1]}};this.fetchCustomersByArea(n)}fetchCustomersByArea(a){this.customerService.getCustomersByVendorAndArea(a).pipe(je(this.destroy$)).subscribe({next:r=>{this.customers=r,this.filteredCustomers=[...r],this.loadingCustomers=!1,setTimeout(()=>this.mapService.addCustomerMarkers(r),200);let n=r.filter(l=>l.asignado).length;this.msgService.add({severity:"success",summary:"Clientes cargados",detail:`${r.length} clientes encontrados (${n} asignados)`,life:3e3})},error:r=>{console.error("Error al cargar clientes:",r),this.loadingCustomers=!1,this.customers=[],this.msgService.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los clientes del \xE1rea"})}})}getAllUsers=()=>{this.loading=!0,this.userService.getAllListUser().subscribe({next:a=>{this.users=a,this.filteredUsers=[...a],this.resetInfiniteScroll(),this.updatePagination(),this.mapInitialized&&this.mapService.addUserMarkers(a),this.loading=!1},error:a=>{console.error("Error al cargar usuarios:",a),this.msgService.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los usuarios"}),this.loading=!1}})};onSearch(a){let r=a.target.value.toLowerCase();this.filteredUsers=this.users.filter(n=>n.usunombre.toLowerCase().includes(r)||n.usucod.toLowerCase().includes(r)||n.usuemail.toLowerCase().includes(r)),this.first=0,this.updatePagination()}onPageChange(a){this.first=a.first,this.itemsPerPage=a.rows,this.updatePagination()}updatePagination(){let a=this.first,r=a+this.itemsPerPage;this.paginatedUsers=this.filteredUsers.slice(a,r)}selectUser(a){this.selectedUser=a,this.selectedGeofence=[];let r=this.mapService.focusOnUserWithRange(a,this.defaultRadius);r&&this.getCustomersInArea(a.usucodv,r.range),this.loadVendorGeocercas(a.usucodv)}selectOnlyUser(a){this.selectedUser=a,this.mapService.focusOnUser(a)}loadVendorGeocercas(a){this.loadingGeocercas=!0;let r={busqueda:a,pageNumber:1,pageSize:50};this.userService.getVendedoresConGeocercas(r).pipe(je(this.destroy$)).subscribe({next:n=>{let l=this.findVendorByCode(n.data,a);l&&l.geocercas.length>0?(this.selectedVendor=l,this.vendorGeocercas=l.geocercas,this.loadGeofenceOptions(),this.mapService.displayVendorGeocercas(this.vendorGeocercas),this.msgService.add({severity:"success",summary:"Geocercas cargadas",detail:`${this.vendorGeocercas.length} geocercas encontradas para ${l.nombreVendedor}`,life:3e3})):this.handleNoGeocercasFound(a),this.loadingGeocercas=!1},error:n=>{this.handleGeocercasError(n,a)}})}findVendorByCode(a,r){return a.find(n=>n.codigoVendedor===r||n.codigoVendedorSecundario===r)||null}handleNoGeocercasFound(a){this.vendorGeocercas=[],this.selectedVendor=null,this.showGeocercasDrawer=!1,this.msgService.add({severity:"info",summary:"Sin geocercas",detail:`No se encontraron geocercas para el vendedor ${a}`,life:2e3})}handleGeocercasError(a,r){console.error("Error al cargar geocercas:",a),this.loadingGeocercas=!1,this.vendorGeocercas=[],this.selectedVendor=null,this.msgService.add({severity:"error",summary:"Error",detail:`No se pudieron cargar las geocercas para el vendedor ${r}`})}searchLocationOnMap(){this.searchLocation.trim()&&this.mapService.searchLocation(this.searchLocation).subscribe({next:a=>{a.length===1?this.selectSearchResult(a[0]):a.length===0&&this.msgService.add({severity:"info",summary:"Sin resultados",detail:"No se encontraron ubicaciones para la b\xFAsqueda"})},error:a=>{console.error("Error en b\xFAsqueda:",a)}})}selectSearchResult(a){this.mapService.selectSearchResult(a)}clearLocationSearch(){this.searchLocation="",this.mapService.clearSearchMarker(),this.searchResults=[]}resetMapView(){this.mapService.resetMapView()}backToUsersList(){this.refreshData()}refreshData(){this.loading=!0,this.selectedUser=null,this.filteredCustomers=[],this.getAllUsers(),this.resetMapView(),this.clearFilters(),this.customers=[]}focusCustomerOnMap(a){this.mapService.focusOnCustomer(a),this.msgService.add({severity:"info",summary:"Cliente localizado",detail:`Mapa centrado en ${a.dirnombre}`,life:2e3})}searchTimeUnit(a){let r=a.query.toLowerCase();this.timeUnitOptions=[{label:"Segundos",value:"Segundos"},{label:"Minutos",value:"Minutos"},{label:"Horas",value:"Horas"},{label:"D\xEDas",value:"D\xEDas"},{label:"Semanas",value:"Semanas"},{label:"Meses",value:"Meses"},{label:"A\xF1os",value:"A\xF1os"}].filter(n=>n.label.toLowerCase().includes(r))}searchGeofence(a){let r=a.query.toLowerCase();if(!this.selectedUser||!this.vendorGeocercas.length){this.geofenceOptions=[];return}this.geofenceOptions=this.vendorGeocercas.filter(n=>n.geocnom.toLowerCase().includes(r)||n.geocciud.toLowerCase().includes(r)||n.geocprov.toLowerCase().includes(r)).map(n=>({label:`${n.geocnom} - ${n.geocciud}`,value:n.geoccod,geocerca:n}))}onClientFilterChange(a){switch(this.clientesNone=!1,this.clientesAll=!1,this.clientesAssigned=!1,a){case"none":this.clientesNone=!0,this.mapService.clearCustomerMarkers();break;case"all":this.clientesAll=!0;break;case"assigned":this.clientesAssigned=!0;break}}onToggleChange(){this.geofenceEnabled?this.vendorGeocercas.length>0&&(this.selectedGeofence=this.vendorGeocercas.map(a=>a.geoccod),this.onGeofencesChange({value:this.selectedGeofence})):(this.selectedGeofence=[],this.mapService.clearGeocercas(),this.msgService.add({severity:"info",summary:"Geocercas deshabilitadas",detail:"Se ha limpiado la selecci\xF3n de geocercas",life:2e3}))}getActiveFiltersCount(){let a=0;return this.filterFrom&&a++,this.geofenceEnabled&&this.selectedGeofence&&a++,this.pedidosEnabled&&a++,this.collectionsEnabled&&a++,this.timeValue&&this.selectedTimeUnit&&a++,(this.clientesNone||this.clientesAll||this.clientesAssigned)&&a++,a}clearFilters(){this.filterFrom=null,this.selectedTimeUnit=null,this.timeValue=null,this.geofenceEnabled=!1,this.selectedGeofence=[],this.pedidosEnabled=!1,this.collectionsEnabled=!1,this.clientesNone=!1,this.clientesAll=!1,this.clientesAssigned=!1,this.msgService.add({severity:"info",summary:"Filtros",detail:"Todos los filtros han sido limpiados"})}applyFilters(){if(!this.selectedUser){this.msgService.add({severity:"warn",summary:"Advertencia",detail:"Seleccione un usuario primero"});return}if(!this.validateFilters())return;let a={usuarios:{tipoelementos:0,usuarios:[this.selectedUser.usucod],buscaxzona:0},transacciones:{codvendedor:this.selectedUser.usucodv,cobros:this.collectionsEnabled,pedidos:this.pedidosEnabled},lapzotiempo:{tipofiltro:1,fechainicio:this.buildFechaInicio(),tipotiempo:this.selectedTimeUnit?.value??4,valortiempo:this.timeValue??4},clientes:{tipoelementos:this.buildClientesFilter(),codvendedor:this.selectedUser.usucodv},zonasbusqueda:this.buildZonaClientes()};this.loading=!0,this.loadingCustomers=!0,this.customerService.getTrackingDetails(a).pipe(je(this.destroy$),gn(()=>{this.loading=!1,this.loadingCustomers=!1})).subscribe({next:r=>{this.processTrackingResponse(r),this.msgService.add({severity:"success",summary:"\xC9xito",detail:"Filtros aplicados correctamente"})},error:r=>{console.error("Error al aplicar filtros:",r),this.msgService.add({severity:"error",summary:"Error",detail:"No se pudieron aplicar los filtros"})}})}buildFechaInicio(){return this.filterFrom?this.filterFrom.toISOString():new Date().toISOString()}buildClientesFilter(){return this.clientesAll?0:this.clientesAssigned?1:0}buildZonaClientes(){let a=this.mapService.getCurrentBounds();return{latmax:a.getSouth(),latmin:a.getNorth(),lonmax:a.getWest(),lonmin:a.getEast()}}validateFilters(){return!this.pedidosEnabled&&!this.collectionsEnabled?(this.msgService.add({severity:"warn",summary:"Validaci\xF3n",detail:"Seleccione al menos un tipo de transacci\xF3n"}),!1):this.selectedTimeUnit&&(!this.timeValue||this.timeValue<=0)?(this.msgService.add({severity:"warn",summary:"Validaci\xF3n",detail:"Ingrese un valor v\xE1lido para el tiempo"}),!1):!0}processTrackingResponse(a){this.validateTrackingDataAvailability(a),a.ubicaciones&&a.ubicaciones.length>0&&this.mapService.addTrackingMarkers(a.ubicaciones),this.loadingCustomers=!1,a.clientes&&a.clientes.length>0?(this.customers=a.clientes,this.filterCustomers(),this.mapService.addCustomerMarkers(a.clientes)):(this.customers=[],this.filteredCustomers=[],this.mapService.clearCustomerMarkers()),this.collectionsEnabled?(this.mapService.clearChargeMarkers(),a.cobros&&a.cobros.length>0&&this.mapService.addChargeMarkers(a.cobros)):this.mapService.clearChargeMarkers(),this.pedidosEnabled?(this.mapService.clearOrderMarkers(),a.pedidos&&a.pedidos.length>0&&this.mapService.addOrderMarkers(a.pedidos)):this.mapService.clearOrderMarkers(),this.centerMapOnFilteredData(a)}centerMapOnFilteredData(a){let r=[];a.ubicaciones&&a.ubicaciones.length>0&&a.ubicaciones.forEach(n=>{n.ubicaciones.forEach(l=>{l.latitud&&l.longitud&&r.push([l.latitud,l.longitud])})}),a.clientes&&a.clientes.length>0&&a.clientes.forEach(n=>{n.latitud&&n.longitud&&r.push([n.latitud,n.longitud])}),a.cobros&&a.cobros.length>0&&a.cobros.forEach(n=>{n.cablat&&n.cablon&&r.push([n.cablat,n.cablon])}),a.pedidos&&a.pedidos.length>0&&a.pedidos.forEach(n=>{n.pdtlat&&n.pdtlon&&r.push([n.pdtlat,n.pdtlon])}),r.length>0?this.mapService.fitBoundsToCoordinates(r):this.selectedUser&&this.mapService.focusOnUser(this.selectedUser)}validateTrackingDataAvailability(a){let r=[];this.pedidosEnabled&&(!a.pedidos||a.pedidos.length===0)&&r.push("Pedidos"),this.collectionsEnabled&&(!a.cobros||a.cobros.length===0)&&r.push("Cobros"),r.length>0&&this.msgService.add({severity:"info",summary:"Datos no disponibles",detail:`No se encontraron datos para: ${r.join(", ")}`,life:5e3});let n=(a.ubicaciones?.length??0)>0||(a.clientes?.length??0)>0||(a.cobros?.length??0)>0||(a.pedidos?.length??0)>0;a.clientes.length===0&&this.msgService.add({severity:"info",summary:"Sin clientes",detail:"No se encontraron clientes para mostrar con los filtros aplicados",life:2e3}),n||this.msgService.add({severity:"warn",summary:"Sin datos",detail:"No se encontraron datos para mostrar con los filtros aplicados. Intente con diferentes criterios de b\xFAsqueda",life:6e3})}onScroll(a){let r=a.target,{scrollTop:n,scrollHeight:l,clientHeight:u}=r;n+u>=l-this.scrollThreshold&&!this.loadingMore&&!this.hasReachedEnd&&this.canLoadMore()&&this.loadMoreUsers()}canLoadMore(){let a=this.paginatedUsers.length,r=this.filteredUsers.length;return a<r}loadMoreUsers(){this.loadingMore||(this.loadingMore=!0,setTimeout(()=>{let a=this.currentPage*this.itemsPerPage,r=a+this.itemsPerPage,n=this.filteredUsers.slice(a,r);n.length>0?(this.paginatedUsers=[...this.paginatedUsers,...n],this.currentPage++,this.paginatedUsers.length>=this.filteredUsers.length&&(this.hasReachedEnd=!0)):this.hasReachedEnd=!0,this.loadingMore=!1},600))}resetInfiniteScroll(){this.currentPage=0,this.loadingMore=!1,this.hasReachedEnd=!1,this.paginatedUsers=[],this.loadInitialUsers()}loadInitialUsers(){this.paginatedUsers=this.filteredUsers.slice(0,this.itemsPerPage),this.currentPage=1,this.paginatedUsers.length>=this.filteredUsers.length&&(this.hasReachedEnd=!0)}formatLocationDate(a){if(!a)return"Sin fecha";let r=new Date(a),l=new Date().getTime()-r.getTime(),u=Math.floor(l/(1e3*60*60)),d=Math.floor(u/24);return u<1?"Hace menos de 1 hora":u<24?`Hace ${u} horas`:d===1?"Ayer":d<7?`Hace ${d} d\xEDas`:r.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})}getLocationTimeAgo(a){if(!a)return"";let r=new Date(a),l=new Date().getTime()-r.getTime(),u=Math.floor(l/(1e3*60)),d=Math.floor(u/60),m=Math.floor(d/24);return u<1?"Reci\xE9n actualizada":u<60?`Hace ${u} minutos`:d<24?`Hace ${d} horas`:`Hace ${m} d\xEDas`}formatLocationDateTime(a){return a?new Date(a).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Sin fecha"}copyCoordinates(a){if(a?.geublat&&a?.geublon){let r=`${a.geublat}, ${a.geublon}`;navigator.clipboard.writeText(r).then(()=>{this.msgService.add({severity:"success",summary:"Copia exitosa",detail:"Las coordenadas se copiaron al portapapeles",life:1e3})})}}loadGeofenceOptions(){if(!this.vendorGeocercas.length){this.geofenceOptions=[],this.selectedGeofence=[];return}this.geofenceOptions=this.vendorGeocercas.map(a=>({label:`${a.geocnom} - ${a.geocciud}`,value:a.geoccod,geocerca:a})),this.geofenceEnabled?(this.selectedGeofence=this.vendorGeocercas.map(a=>a.geoccod),this.onGeofencesChange({value:this.selectedGeofence})):this.selectedGeofence=[]}onGeofencesChange(a){let r=a.value,n=this.vendorGeocercas.filter(l=>r.includes(l.geoccod));n.length>0?(this.mapService.displayVendorGeocercas(n),this.msgService.add({severity:"info",summary:"Filtro aplicado",detail:`Mostrando ${n.length} de ${this.vendorGeocercas.length} geocerca${n.length===1?"":"s"}`,life:2e3})):(this.mapService.clearGeocercas(),this.msgService.add({severity:"warn",summary:"Sin filtro",detail:"No hay geocercas seleccionadas para mostrar",life:2e3}))}startUserLocationPolling(){this.isPollingActive||(this.isPollingActive=!0,this.pollingSubscription$.pipe($o(0),qo(()=>this.userService.getAllListUser2(!0)),je(this.destroy$),_n(a=>(console.error("Error en polling de usuarios:",a),mn([])))).subscribe({next:a=>{this.updateUsersLocation(a)},error:a=>{console.error("Error cr\xEDtico en polling:",a),this.restartPolling()}}),this.scheduleNextPoll())}scheduleNextPoll(){this.isPollingActive&&setTimeout(()=>{this.isPollingActive&&(this.pollingSubscription$.next(),this.scheduleNextPoll())},this.POLLING_INTERVAL)}updateUsersLocation(a){a.forEach(r=>{let n=this.users.findIndex(l=>l.usucod===r.usucod);n!==-1&&(this.users[n].ubicacion=r.ubicacion)}),this.filteredUsers=this.filteredUsers.map(r=>{let n=a.find(l=>l.usucod===r.usucod);return n?Vo(Vt({},r),{ubicacion:n.ubicacion}):r}),this.mapInitialized&&this.mapService.updateUserMarkersLocation(a)}stopUserLocationPolling(){this.isPollingActive=!1,this.pollingSubscription$.complete()}restartPolling(){this.stopUserLocationPolling(),this.pollingSubscription$=new fi,setTimeout(()=>this.startUserLocationPolling(),5e3)}pausePolling(){this.isPollingActive=!1}resumePolling(){this.isPollingActive||this.startUserLocationPolling()}ngOnDestroy(){this.stopUserLocationPolling(),this.debounceTimer&&clearTimeout(this.debounceTimer),this.destroy$.next(),this.destroy$.complete(),this.mapService.destroyMap(),this.showRangeDrawer=!1,this.showRangeDialog=!1,this.customerSearchTerm="",this.userRange=null,this.customers=[],this.vendorGeocercas=[],this.selectedUser=null,this.selectedVendor=null}static \u0275fac=function(r){return new(r||h)(We(Mi),We(bi),We(Pi),We(et),We(Ei))};static \u0275cmp=Ct({type:h,selectors:[["app-geocercas"]],viewQuery:function(r,n){if(r&1&&(vn(Dl,5),vn(Rl,5)),r&2){let l;be(l=Ce())&&(n.mapContainer=l.first),be(l=Ce())&&(n.scrollContainer=l.first)}},decls:111,vars:29,consts:[["mapContainer",""],["scrollContainer",""],[1,"flex","flex-col","md:flex-row","gap-8"],[1,"flex","flex-1","flex-col","lg:flex-row","gap-2","sm:gap-4","overflow-hidden","min-h-0"],[1,"w-full","lg:w-1/4","flex","flex-col"],[1,"flex","flex-col","flex-1","overflow-hidden","h-full","bg-white","dark:bg-surface-900","border","border-surface-200","dark:border-surface-700","rounded-lg","shadow-sm"],[1,"relative","overflow-hidden","p-4","bg-gradient-to-br","from-white","via-surface-50/80","to-surface-100/30","dark:from-surface-900","dark:via-surface-800/90","dark:to-surface-900/60","rounded-t-lg","border-b","border-surface-200/60","dark:border-surface-700/60"],[1,"absolute","inset-0","bg-gradient-to-r","from-transparent","via-primary-50/10","to-transparent","dark:via-primary-900/5"],[1,"relative"],[1,"space-y-3"],[1,"overflow-hidden","flex-1"],[1,"p-3"],[1,"p-4","border-t","border-surface-200/60","dark:border-surface-700/60","mt-auto"],[1,"text-sm",3,"rows","totalRecords","first"],[1,"w-full","lg:flex-1","flex","flex-col","order-1","lg:order-2"],[1,"flex","flex-col","flex-1","overflow-hidden","h-80","sm:h-96","lg:h-full","bg-white","dark:bg-surface-900","border","border-surface-200","dark:border-surface-700","rounded-lg","shadow-sm"],[1,"flex","flex-col","gap-3","sm:gap-4","p-3","sm:p-4","border-b","border-surface-200","dark:border-surface-700"],[1,"flex","flex-col","sm:flex-row","sm:justify-between","sm:items-center","gap-3","p-3","sm:p-4","bg-gradient-to-r","from-surface-50","to-white","dark:from-surface-900","dark:to-surface-800","rounded-lg","border","border-surface-200","dark:border-surface-700"],[1,"flex","items-center","gap-2","min-w-0"],[1,"w-12","h-12","flex","items-center","justify-center","rounded-xl","bg-gradient-to-br","from-primary-100","via-primary-200/60","to-primary-300/40","dark:from-primary-900/50","dark:via-primary-800/70","dark:to-primary-700/50","border","border-primary-200/60","dark:border-primary-600/40","shadow-lg"],[1,"pi","pi-users","text-primary-600","dark:text-primary-300","text-xl"],[1,"min-w-0"],[1,"text-gray-800","dark:text-white","text-xl","sm:text-2xl","font-bold","leading-snug","tracking-tight"],[1,"text-gray-500","dark:text-gray-400","text-xs","sm:text-sm","leading-snug",2,"margin-top","-15px"],[1,"flex","gap-2","flex-shrink-0","items-center"],["pTooltip","Restablecer vista","tooltipPosition","bottom",1,"flex","items-center","justify-center","h-9","w-9","rounded-full","bg-white","dark:bg-surface-800","hover:bg-primary-50","dark:hover:bg-primary-900/30","shadow-sm","border","border-surface-200","dark:border-surface-700","transition-all","duration-200",3,"click"],[1,"pi","pi-refresh","text-primary-500","dark:text-primary-400"],[1,"mt-3"],["value","0"],[1,"flex","align-items-center","gap-2","w-full"],[1,"w-8","h-8","flex","items-center","justify-center","rounded-lg","bg-indigo-100","dark:bg-indigo-900/50"],[1,"pi","pi-filter","text-indigo-600","dark:text-indigo-300","text-sm"],[1,"flex-1"],[1,"font-semibold","text-surface-800","dark:text-surface-200","text-sm"],[1,"text-xs","text-surface-500","dark:text-surface-400","ml-2"],[1,"p-0"],[1,"mb-4"],[1,"flex","align-items-center","gap-2","mb-3"],[1,"pi","pi-clock","text-blue-600","dark:text-blue-400","text-sm"],[1,"font-medium","text-surface-700","dark:text-surface-200","text-sm"],[1,"flex-1","border-bottom-1","border-surface-200","dark:border-surface-700"],[1,"grid","grid-cols-12","gap-2"],[1,"col-span-12","sm:col-span-7"],[1,"block","text-xs","font-medium","text-surface-600","dark:text-surface-300","mb-1"],["inputId","filter-datetime-compact","placeholder","Fecha y hora...",1,"w-full",3,"ngModelChange","ngModel","showTime","hourFormat"],[1,"col-span-12","sm:col-span-5"],[1,"flex","gap-1"],["optionLabel","label","placeholder","d\xEDas",1,"w-[300px]",3,"ngModelChange","completeMethod","ngModel","suggestions","dropdown"],["pInputText","","placeholder","2","type","number","min","1",1,"w-16","flex-1","text-center","text-sm",3,"ngModelChange","ngModel"],[1,"pi","pi-database","text-green-600","dark:text-green-400","text-sm"],[1,"flex","gap-4","p-2","bg-surface-50","dark:bg-surface-800","border-round"],[1,"flex","align-items-center","gap-2"],["inputId","pedidos-compact",3,"ngModelChange","ngModel","binary"],["for","pedidos-compact",1,"text-sm","text-surface-700","dark:text-surface-300","cursor-pointer"],[1,"pi","pi-shopping-cart","mr-1"],["inputId","cobros-compact",3,"ngModelChange","ngModel","binary"],["for","cobros-compact",1,"text-sm","text-surface-700","dark:text-surface-300","cursor-pointer"],[1,"pi","pi-dollar","mr-1"],[1,"pi","pi-users","text-green-600","dark:text-green-400","text-sm"],["inputId","clientes-all",3,"ngModelChange","onChange","ngModel","binary"],["for","clientes-all",1,"text-sm","text-surface-700","dark:text-surface-300","cursor-pointer"],[1,"pi","pi-users","mr-1"],["inputId","clientes-assigned",3,"ngModelChange","onChange","ngModel","binary"],["for","clientes-assigned",1,"text-sm","text-surface-700","dark:text-surface-300","cursor-pointer"],[1,"pi","pi-user-check","mr-1"],[1,"flex","justify-content-end","gap-2"],["label","Limpiar","icon","pi pi-refresh","severity","secondary","size","small",3,"onClick","text"],["label","Aplicar","icon","pi pi-check","size","small",3,"onClick"],[1,"flex","flex-col","sm:flex-row","gap-2"],[1,"flex-1","min-w-0"],["iconPosition","left",1,"w-full"],[1,"pi","pi-map-marker"],["pInputText","","type","text","placeholder","Buscar ubicaci\xF3n (ej: Quito, Ecuador)",1,"w-full","text-sm",3,"ngModelChange","keyup.enter","ngModel"],[1,"flex","gap-2","flex-shrink-0"],["icon","pi pi-search","severity","primary","size","small","pTooltip","Buscar ubicaci\xF3n","tooltipPosition","bottom",3,"click","loading"],["icon","pi pi-times","severity","secondary","size","small","pTooltip","Limpiar b\xFAsqueda","tooltipPosition","bottom",3,"click","text"],[1,"bg-surface-50","dark:bg-surface-800","rounded-lg","p-3"],[1,"flex-1","relative","overflow-hidden","min-h-0"],[1,"absolute","inset-0","flex","items-center","justify-center","bg-surface-100","dark:bg-surface-800","rounded-lg","z-10"],[1,"w-full","h-full","rounded-lg",2,"min-height","700px","height","100%","width","100%"],["type","text","placeholder","Buscar vendedores...",1,"w-full","py-3","pl-11","pr-12","text-sm","rounded-xl","border-2","border-surface-200/80","dark:border-surface-600/80","bg-gradient-to-r","from-white","to-surface-50/50","dark:from-surface-800","dark:to-surface-800/80","hover:border-primary-300/60","dark:hover:border-primary-600/60","focus:ring-2","focus:ring-primary-500/30","focus:border-primary-500/80","transition-all","duration-200","shadow-sm",3,"input"],[1,"absolute","left-3.5","top-1/2","transform","-translate-y-1/2"],[1,"pi","pi-search","text-primary-400","dark:text-primary-500"],["title","Limpiar b\xFAsqueda",1,"absolute","right-3","top-1/2","transform","-translate-y-1/2","w-6","h-6","flex","items-center","justify-center","text-surface-400","hover:text-primary-500","dark:hover:text-primary-400","transition-colors","rounded-full","hover:bg-surface-100/80","dark:hover:bg-surface-700/60"],[1,"pi","pi-times","text-xs"],[1,"mt-3","flex","justify-between","items-center","text-xs","text-surface-600","dark:text-surface-400"],[1,"bg-gradient-to-br","from-white","via-surface-50/60","to-surface-100/30","dark:from-surface-800","dark:via-surface-800/80","dark:to-surface-900/40","rounded-xl","border","border-surface-200/60","dark:border-surface-700/60","p-4"],[1,"flex","items-center","justify-between","mb-3"],[1,"w-8","h-8","flex","items-center","justify-center","rounded-lg","bg-surface-100/80","dark:bg-surface-700/60","hover:bg-primary-100/80","dark:hover:bg-primary-900/40","border","border-surface-200/60","dark:border-surface-600/60","hover:border-primary-300/60","dark:hover:border-primary-600/60","transition-all","duration-200","group",3,"click"],[1,"pi","pi-arrow-left","text-surface-600","dark:text-surface-400","group-hover:text-primary-600","dark:group-hover:text-primary-400","text-sm"],[1,"inline-flex","items-center","gap-2","px-3","py-1.5","rounded-lg","bg-primary-100/80","dark:bg-primary-900/40","hover:bg-primary-200/80","dark:hover:bg-primary-900/60","border","border-primary-200/60","dark:border-primary-700/60","text-primary-700","dark:text-primary-300","text-xs","font-medium","transition-all","duration-200"],[1,"flex","items-center","gap-3","mb-3"],[1,"w-12","h-12","flex","items-center","justify-center","rounded-xl","bg-gradient-to-br","from-primary-100","via-primary-200/50","to-primary-300/30","dark:from-primary-900/40","dark:via-primary-800/60","dark:to-primary-700/40","border","border-primary-200/50","dark:border-primary-700/50"],[1,"pi","pi-user","text-primary-600","dark:text-primary-300","text-lg"],[1,"font-bold","text-surface-900","dark:text-surface-100","mb-1","truncate"],[1,"flex","items-center","gap-2"],[1,"inline-flex","items-center","px-2","py-1","rounded-md","bg-primary-100/80","dark:bg-primary-900/40","border","border-primary-200/60","dark:border-primary-700/60","text-xs","font-mono","font-medium","text-primary-700","dark:text-primary-300"],[1,"inline-flex","items-center","px-2","py-0.5","rounded","bg-surface-200/60","dark:bg-surface-600/40","text-xs","font-mono","text-surface-600","dark:text-surface-400"],[1,"flex","items-center","gap-2","mb-3"],[1,"pi","pi-map","text-surface-600","dark:text-surface-400"],[1,"font-semibold","text-surface-700","dark:text-surface-300","text-sm"],[1,"border-t","border-surface-200/60","dark:border-surface-700/60","pt-3"],["type","text","placeholder","Buscar clientes...",1,"w-full","py-2.5","pl-10","pr-4","text-sm","rounded-lg","border","border-surface-200/80","dark:border-surface-600/80","bg-white","dark:bg-surface-800","hover:border-primary-300/60","dark:hover:border-primary-600/60","focus:ring-2","focus:ring-primary-500/30","focus:border-primary-500/80","transition-all","duration-200",3,"ngModelChange","input","ngModel"],[1,"absolute","left-3","top-1/2","transform","-translate-y-1/2"],[1,"pi","pi-search","text-surface-400","dark:text-surface-500","text-sm"],[1,"flex","justify-between","items-center"],[1,"inline-flex","items-center","gap-2","px-3","py-1.5","rounded-lg","bg-primary-100/80","dark:bg-primary-900/40","hover:bg-primary-200/80","dark:hover:bg-primary-900/60","border","border-primary-200/60","dark:border-primary-700/60","text-primary-700","dark:text-primary-300","text-xs","font-medium","transition-all","duration-200",3,"click"],[1,"pi","pi-map-marker","text-xs"],[1,"flex","items-center","justify-center","w-6","h-6","rounded-lg","bg-blue-100/80","dark:bg-blue-900/30","border","border-blue-200/60","dark:border-blue-700/40"],[1,"pi","pi-map-marker","text-blue-600","dark:text-blue-400","text-xs"],[1,"text-sm","text-surface-700","dark:text-surface-300","font-medium","truncate",3,"title"],[1,"flex","items-center","justify-between","mb-2"],[1,"w-2","h-2","bg-green-500","rounded-full","animate-pulse"],[1,"text-xs","font-medium","text-green-600","dark:text-green-400"],[1,"text-xs","text-surface-500","dark:text-surface-500"],[1,"bg-white","dark:bg-surface-700/50","rounded-lg","border","border-surface-200/60","dark:border-surface-600/60","p-2"],[1,"flex","items-center","justify-between"],[1,"pi","pi-compass","text-blue-500","text-xs"],[1,"flex","items-center","gap-3","text-xs"],[1,"text-surface-500","dark:text-surface-500"],[1,"font-mono","text-surface-700","dark:text-surface-300"],[1,"text-surface-300","dark:text-surface-600"],["title","Copiar coordenadas",1,"text-xs","text-primary-600","dark:text-primary-400","hover:text-primary-700","dark:hover:text-primary-300","p-1","rounded","hover:bg-primary-50","dark:hover:bg-primary-900/20","transition-all",3,"click"],[1,"pi","pi-copy","text-xs"],[1,"mt-2","pt-2","border-t","border-surface-200/40","dark:border-surface-600/40"],[1,"text-xs","text-surface-600","dark:text-surface-400"],[1,"flex","items-center","gap-2","text-center","bg-orange-50/80","dark:bg-orange-900/20","rounded-lg","border","border-orange-200/60","dark:border-orange-700/60","p-2"],[1,"pi","pi-exclamation-triangle","text-orange-600","dark:text-orange-400","text-sm"],[1,"text-xs","text-orange-700","dark:text-orange-300","font-medium"],[1,"pi","pi-users","text-purple-600","dark:text-purple-400"],[1,"text-sm","font-medium","text-surface-700","dark:text-surface-300"],[1,"inline-flex","items-center","px-3","py-1.5","rounded-lg","bg-purple-100/80","dark:bg-purple-900/40","border","border-purple-200/60","dark:border-purple-700/60","text-sm","font-medium","text-purple-700","dark:text-purple-300"],[1,"space-y-3","p-3","max-h-[400px]","overflow-y-auto","custom-scrollbar"],[1,"space-y-3","p-3","custom-scrollbar",3,"class"],[1,"rounded-xl","border","border-surface-200/60","dark:border-surface-700/60","bg-gradient-to-br","from-white","via-surface-50/50","to-surface-100/20","dark:from-surface-800","dark:via-surface-800/80","dark:to-surface-900/40","p-4"],[1,"flex","items-center","gap-4"],[1,"w-12","h-12","rounded-xl","bg-gradient-to-br","from-surface-200","to-surface-300","dark:from-surface-700","dark:to-surface-600","animate-pulse"],[1,"flex-1","space-y-2"],[1,"h-5","w-32","bg-surface-200","dark:bg-surface-700","rounded","animate-pulse"],[1,"h-4","w-24","bg-surface-200","dark:bg-surface-700","rounded","animate-pulse"],[1,"h-3","w-16","bg-surface-200","dark:bg-surface-700","rounded","animate-pulse"],[1,"space-y-3","p-3","custom-scrollbar",3,"scroll"],[1,"relative","overflow-hidden","rounded-xl","border","border-surface-200/80","dark:border-surface-600/80","bg-gradient-to-br","from-white","via-surface-50/60","to-surface-100/30","dark:from-surface-700","dark:via-surface-700/90","dark:to-surface-800/60","hover:from-primary-50/30","hover:via-white","hover:to-primary-100/20","dark:hover:from-surface-600/80","dark:hover:via-surface-700/60","dark:hover:to-primary-900/20","transition-all","duration-300","group","hover:shadow-lg","hover:border-primary-200/60","dark:hover:border-primary-600/60","hover:-translate-y-0.5","cursor-pointer"],[1,"space-y-3","mt-3"],[1,"text-center","py-12"],[1,"relative","overflow-hidden","rounded-xl","border","border-surface-200/80","dark:border-surface-600/80","bg-gradient-to-br","from-white","via-surface-50/60","to-surface-100/30","dark:from-surface-700","dark:via-surface-700/90","dark:to-surface-800/60","hover:from-primary-50/30","hover:via-white","hover:to-primary-100/20","dark:hover:from-surface-600/80","dark:hover:via-surface-700/60","dark:hover:to-primary-900/20","transition-all","duration-300","group","hover:shadow-lg","hover:border-primary-200/60","dark:hover:border-primary-600/60","hover:-translate-y-0.5","cursor-pointer",3,"click"],[1,"absolute","inset-0","bg-gradient-to-r","from-transparent","via-primary-50/20","to-transparent","dark:via-primary-900/10","opacity-0","group-hover:opacity-100","transition-opacity","duration-300"],[1,"relative","p-4"],[1,"relative","flex-shrink-0"],[1,"w-12","h-12","flex","items-center","justify-center","rounded-xl","bg-gradient-to-br","from-primary-100","via-primary-200/50","to-primary-300/30","dark:from-primary-900/40","dark:via-primary-800/60","dark:to-primary-700/40","border","border-primary-200/50","dark:border-primary-700/50","group-hover:scale-105","transition-transform","duration-200"],[1,"font-bold","text-surface-900","dark:text-surface-0","mb-2","group-hover:text-primary-700","dark:group-hover:text-primary-300","transition-colors","leading-tight"],[1,"flex","items-center","gap-2","mb-2"],[1,"inline-flex","items-center","px-2.5","py-1","rounded-lg","bg-surface-100/80","dark:bg-surface-600/60","border","border-surface-200/60","dark:border-surface-500/60","text-xs","font-mono","font-medium","text-surface-700","dark:text-surface-300"],[1,"pi","pi-id-card","mr-1.5","text-xs"],[1,"inline-flex","items-center","px-2","py-1","rounded-md","bg-surface-200/60","dark:bg-surface-600/40","text-xs","font-mono","text-surface-600","dark:text-surface-400"],[1,"space-y-2"],[1,"flex","items-center","gap-1.5"],[1,"flex","items-center","justify-center","w-6"],[1,"pi","pi-chevron-right","text-surface-300","dark:text-surface-600","text-sm","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"text-xs","text-green-600","dark:text-green-400","font-medium"],[1,"flex","items-center","gap-2","text-xs","text-surface-600","dark:text-surface-400"],[1,"pi","pi-map-marker","text-green-500","w-3"],[1,"font-mono"],[1,"flex","items-center","gap-2","text-xs","text-surface-500","dark:text-surface-500"],[1,"pi","pi-clock","text-blue-500","w-3"],[1,"w-2","h-2","bg-gray-400","rounded-full"],[1,"text-xs","text-gray-500","dark:text-gray-400"],[1,"absolute","inset-0","bg-gradient-to-br","from-surface-100/50","via-transparent","to-surface-200/30","dark:from-surface-800/30","dark:to-surface-900/50","rounded-3xl"],[1,"relative","p-8"],[1,"w-16","h-16","mx-auto","mb-4","bg-gradient-to-br","from-surface-200","to-surface-300","dark:from-surface-700","dark:to-surface-800","rounded-2xl","flex","items-center","justify-center","border","border-surface-300/60","dark:border-surface-600/60"],[1,"pi","pi-users","text-2xl","text-surface-500","dark:text-surface-400"],[1,"text-surface-700","dark:text-surface-300","font-bold","mb-2","text-sm"],[1,"text-surface-500","dark:text-surface-500","text-xs","max-w-sm","mx-auto","leading-relaxed"],[1,"max-h-[60rem]","overflow-y-auto","space-y-3","custom-scrollbar"],[1,"text-center","text-surface-500","dark:text-surface-400","text-sm","py-12"],[1,"bg-white","dark:bg-surface-800","p-4","rounded-lg","border","border-surface-200/60","dark:border-surface-700/60"],[1,"h-4","w-3/4","bg-surface-200","dark:bg-surface-700","rounded","animate-pulse"],[1,"h-3","w-1/2","bg-surface-200","dark:bg-surface-700","rounded","animate-pulse"],[1,"h-3","w-full","bg-surface-200","dark:bg-surface-700","rounded","animate-pulse"],[1,"bg-white","dark:bg-surface-800","p-4","rounded-lg","border","border-surface-200/60","dark:border-surface-700/60","hover:shadow-md","transition-all","duration-200","hover:border-purple-200/60","dark:hover:border-purple-600/60"],[1,"flex","justify-between","items-start","mb-3"],[1,"flex-1","pr-2"],[1,"font-semibold","text-surface-900","dark:text-surface-100","text-sm","m-0","leading-tight"],[1,"inline-flex","items-center","px-2","py-1","rounded-md","text-xs","font-medium"],[1,"space-y-2","mb-3"],[1,"pi","pi-id-card","w-3","text-purple-500","dark:text-purple-400"],[1,"flex","items-start","gap-2","text-xs","text-surface-600","dark:text-surface-400"],[1,"pi","pi-map-marker","w-3","mt-0.5","text-purple-500","dark:text-purple-400"],[1,"leading-relaxed"],[1,"flex","justify-end"],[1,"inline-flex","items-center","gap-2","px-3","py-1.5","rounded-lg","border","border-purple-200/60","dark:border-purple-700/60","bg-purple-50/80","dark:bg-purple-900/40","hover:bg-purple-100/80","dark:hover:bg-purple-900/60","text-purple-700","dark:text-purple-300","text-xs","font-medium","transition-all","duration-200","hover:shadow-sm",3,"click"],[1,"pi","pi-eye","text-xs"],[1,"pi","pi-search","text-2xl","text-surface-500","dark:text-surface-400"],[1,"font-semibold","mb-2"],[1,"text-xs"],[1,"w-16","h-16","mx-auto","mb-4","bg-gradient-to-br","from-purple-100","to-purple-200","dark:from-purple-900/40","dark:to-purple-800/60","rounded-2xl","flex","items-center","justify-center","border","border-purple-200/60","dark:border-purple-700/60"],[1,"pi","pi-users","text-2xl","text-purple-600","dark:text-purple-400"],[1,"text-sm",3,"onPageChange","rows","totalRecords","first"],[1,"pi","pi-map","text-purple-600","dark:text-purple-400","text-sm"],[1,"grid","grid-cols-12","gap-2","align-items-end"],[1,"col-span-12","sm:col-span-4"],[1,"flex","align-items-center","gap-2","p-2","bg-surface-50","dark:bg-surface-800","border-round","mt-3"],["size","small",3,"ngModelChange","onChange","ngModel"],[1,"block","text-xs","font-medium","text-surface-700","dark:text-surface-200"],[1,"text-xs",3,"ngClass"],[1,"col-span-12","sm:col-span-8"],["optionLabel","label","optionValue","value","placeholder","Elegir geocercas...","filterBy","label","selectedItemsLabel","{0} geocercas seleccionadas",1,"w-full",3,"ngModelChange","onChange","ngModel","options","filter","disabled","showToggleAll","showHeader","maxSelectedLabels"],["pTemplate","item"],["pTemplate","selectedItems"],[1,"flex","flex-col"],[1,"font-medium"],[1,"text-surface-500"],[1,"text-xs","sm:text-sm","text-surface-600","dark:text-surface-400","mb-2"],[1,"space-y-1"],[1,"flex","items-center","justify-between","p-2","hover:bg-surface-100","dark:hover:bg-surface-700","rounded","cursor-pointer","transition-colors"],[1,"flex","items-center","justify-between","p-2","hover:bg-surface-100","dark:hover:bg-surface-700","rounded","cursor-pointer","transition-colors",3,"click"],[1,"flex","items-center","gap-2","min-w-0","flex-1"],[1,"pi","pi-map-marker","text-primary","text-sm","flex-shrink-0"],[1,"text-xs","sm:text-sm","text-surface-900","dark:text-surface-0","truncate"],[1,"pi","pi-arrow-right","text-surface-400","text-xs","flex-shrink-0","ml-2"],[1,"text-center","p-4"],[1,"pi","pi-spin","pi-spinner","text-2xl","text-primary","mb-2"],[1,"text-sm","sm:text-base","text-surface-600","dark:text-surface-400"]],template:function(r,n){if(r&1){let l=de();v(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6),E(5,"div",7),v(6,"div",8),j(7,Ul,7,1),j(8,Ql,30,8,"div",9),y()(),v(9,"div",10),j(10,sc,2,2),j(11,pc,4,1,"div",11),y(),v(12,"div",12),j(13,fc,1,3,"p-paginator",13),y()()(),v(14,"div",14)(15,"div",15)(16,"div",16)(17,"div",17)(18,"div",18)(19,"div",19),E(20,"i",20),y(),v(21,"div",21)(22,"p",22),k(23," Vendedores "),y(),v(24,"p",23),k(25," Mapa de geolocalizaci\xF3n de vendedores activos "),y()()(),v(26,"div",24)(27,"button",25),ee("click",function(){return U(l),V(n.refreshData())}),E(28,"i",26),y()()(),v(29,"p-accordion",27)(30,"p-accordion-panel",28)(31,"p-accordion-header")(32,"div",29)(33,"div",30),E(34,"i",31),y(),v(35,"div",32)(36,"span",33),k(37," Filtrado Especial "),y(),v(38,"span",34),k(39),y()()()(),v(40,"p-accordion-content")(41,"div",35)(42,"div",36)(43,"div",37),E(44,"i",38),v(45,"span",39),k(46,"Per\xEDodo"),y(),E(47,"div",40),y(),v(48,"div",41)(49,"div",42)(50,"label",43),k(51," Desde "),y(),v(52,"p-datepicker",44),Pe("ngModelChange",function(d){return U(l),Se(n.filterFrom,d)||(n.filterFrom=d),V(d)}),y()(),v(53,"div",45)(54,"label",43),k(55," Tiempo "),y(),v(56,"div",46)(57,"p-autoComplete",47),Pe("ngModelChange",function(d){return U(l),Se(n.selectedTimeUnit,d)||(n.selectedTimeUnit=d),V(d)}),ee("completeMethod",function(d){return U(l),V(n.searchTimeUnit(d))}),y(),v(58,"input",48),Pe("ngModelChange",function(d){return U(l),Se(n.timeValue,d)||(n.timeValue=d),V(d)}),y()()()()(),j(59,yc,16,4,"div",36),v(60,"div",36)(61,"div",37),E(62,"i",49),v(63,"span",39),k(64,"Tipo de Transacci\xF3n"),y(),E(65,"div",40),y(),v(66,"div",50)(67,"div",51)(68,"p-checkbox",52),Pe("ngModelChange",function(d){return U(l),Se(n.pedidosEnabled,d)||(n.pedidosEnabled=d),V(d)}),y(),v(69,"label",53),E(70,"i",54),k(71,"Pedidos "),y()(),v(72,"div",51)(73,"p-checkbox",55),Pe("ngModelChange",function(d){return U(l),Se(n.collectionsEnabled,d)||(n.collectionsEnabled=d),V(d)}),y(),v(74,"label",56),E(75,"i",57),k(76,"Cobros "),y()()()(),v(77,"div",36)(78,"div",37),E(79,"i",58),v(80,"span",39),k(81,"Clientes"),y(),E(82,"div",40),y(),v(83,"div",50)(84,"div",51)(85,"p-checkbox",59),Pe("ngModelChange",function(d){return U(l),Se(n.clientesAll,d)||(n.clientesAll=d),V(d)}),ee("onChange",function(){return U(l),V(n.onClientFilterChange("all"))}),y(),v(86,"label",60),E(87,"i",61),k(88,"Todos "),y()(),v(89,"div",51)(90,"p-checkbox",62),Pe("ngModelChange",function(d){return U(l),Se(n.clientesAssigned,d)||(n.clientesAssigned=d),V(d)}),ee("onChange",function(){return U(l),V(n.onClientFilterChange("assigned"))}),y(),v(91,"label",63),E(92,"i",64),k(93,"Asignados "),y()()()(),v(94,"div",65)(95,"p-button",66),ee("onClick",function(){return U(l),V(n.clearFilters())}),y(),v(96,"p-button",67),ee("onClick",function(){return U(l),V(n.applyFilters())}),y()()()()()(),v(97,"div",68)(98,"div",69)(99,"p-iconField",70)(100,"p-inputIcon"),E(101,"i",71),y(),v(102,"input",72),Pe("ngModelChange",function(d){return U(l),Se(n.searchLocation,d)||(n.searchLocation=d),V(d)}),ee("keyup.enter",function(){return U(l),V(n.searchLocationOnMap())}),y()()(),v(103,"div",73)(104,"p-button",74),ee("click",function(){return U(l),V(n.searchLocationOnMap())}),y(),v(105,"p-button",75),ee("click",function(){return U(l),V(n.clearLocationSearch())}),y()()(),j(106,bc,6,0,"div",76),y(),v(107,"div",77),j(108,Cc,5,0,"div",78),E(109,"div",79,0),y()()()()()}r&2&&(M(7),W(n.selectedUser?-1:7),M(),W(n.selectedUser?8:-1),M(2),W(n.selectedUser?-1:10),M(),W(n.selectedUser?11:-1),M(2),W(!n.loading&&n.filteredUsers.length>0&&!n.selectedUser?13:-1),M(26),Ft(" (",n.getActiveFiltersCount()," activo",n.getActiveFiltersCount()!==1?"s":"",") "),M(13),Te("ngModel",n.filterFrom),q("showTime",!0)("hourFormat","24"),M(5),Te("ngModel",n.selectedTimeUnit),q("suggestions",n.timeUnitOptions)("dropdown",!0),M(),Te("ngModel",n.timeValue),M(),W(n.selectedUser?59:-1),M(9),Te("ngModel",n.pedidosEnabled),q("binary",!0),M(5),Te("ngModel",n.collectionsEnabled),q("binary",!0),M(12),Te("ngModel",n.clientesAll),q("binary",!0),M(5),Te("ngModel",n.clientesAssigned),q("binary",!0),M(5),q("text",!0),M(7),Te("ngModel",n.searchLocation),M(2),q("loading",n.searchingLocation),M(),q("text",!0),M(),W(n.searchResults.length>0?106:-1),M(2),W(n.mapInitialized?-1:108))},dependencies:[wt,vi,Gr,Ci,Cr,gr,xr,vr,br,yr,Er,Pr,Mr,ki,kr,Fr,Hr,zr,Wr,Vr,Dr,Br,Ar,Or,Lr,rs,Nr,Zr,Rr,Ur,Tr,$r,Ir,Sr,Qr,qr,Jr,Yr,Kr,Xr,es,hr],encapsulation:2})};export{ts as a,zl as b,rs as c,Mi as d,Mn as e,O as f,Pi as g,Ei as h,cs as i};
