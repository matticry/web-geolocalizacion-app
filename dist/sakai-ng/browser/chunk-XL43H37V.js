import{a as si,b as ke,c as _e,d as De,e as Ai,f as E,g as Pe,h as hi,i as vi}from"./chunk-EBFY7J3T.js";import{a as st,b as xi,c as bi,d as Ei}from"./chunk-TRWLMTZX.js";import{$ as xe,A as ie,B as he,E as ve,F as tt,G as Te,H as Me,I as ei,J as ti,K as it,N as ii,O as ri,R as ai,S as oi,T as ni,U as re,V as rt,W as at,X as Ge,Y as li,Z as Ce,_ as di,aa as Ue,ba as be,da as Ee,ea as Se,ha as ot,ja as nt,ka as mi,la as pi,ma as ui,na as gi,oa as fi,s as ue,t as Yt,ta as Ci,u as Kt,w as Xt,x as fe,y as te,z as Ae}from"./chunk-XOGAT6YL.js";import{a as Jt,b as me}from"./chunk-MSZ233RX.js";import{A as _t,C as Ne,Ib as Qt,La as le,Pa as V,Ta as Ie,Tb as X,Ub as pe,Zb as Wt,ac as ee,bc as ge,cc as ci,db as Q,dc as we,eb as N,gb as Y,hb as Qe,i as qt,ib as W,jb as Ye,k as jt,lb as We,mb as Ke,ob as $t,p as Zt,pb as Xe,q as zt,qb as et,r as Je,rb as K,sb as Re,t as ce,xb as de,z as F}from"./chunk-MPAEZOI7.js";import{$b as St,Ab as w,Bb as G,Bc as Ht,Cb as v,Cc as k,D as Ut,Db as r,Eb as a,Fb as d,Gb as bt,Hb as Et,I as kt,L as qe,Mb as b,O as je,P as Dt,Qb as h,Rb as m,T as Pt,Ta as xt,Vb as Z,Wb as z,X as U,Xa as s,Xb as $,_b as Be,a as q,aa as Oe,ab as I,ac as ze,b as Tt,bc as ne,cc as R,dc as l,e as Mt,ea as Ze,ec as _,f as P,fa as Vt,fc as x,gb as H,gc as B,hc as Ft,ic as L,jc as y,ka as u,kc as O,l as j,la as g,m as vt,mb as M,nc as $e,oc as T,q as wt,ta as Bt,u as Ct,v as Gt,xb as f,yb as A,yc as J,zb as D,zc as se}from"./chunk-6U6YA3Y5.js";var ki=["dt"],Di=()=>["name","country.name","representative.name","status"],Pi=()=>({"min-width":"75rem"}),Vi=()=>[10,20,30],Si=()=>({width:"450px"});function Bi(o,t){if(o&1){let e=b();r(0,"p-button",11),h("onClick",function(){u(e);let n=m();return g(n.openNew())}),a(),r(1,"p-button",12),h("onClick",function(){u(e);let n=m();return g(n.deleteSelectedProducts())}),a()}if(o&2){let e=m();s(),v("disabled",!e.selectedProducts||!e.selectedProducts.length)}}function Fi(o,t){if(o&1){let e=b();r(0,"p-button",13),h("onClick",function(){u(e);let n=m();return g(n.exportCSV())}),a()}}function Hi(o,t){if(o&1){let e=b();r(0,"div",14)(1,"h5",15),l(2,"Manage Products"),a(),r(3,"p-iconfield"),d(4,"p-inputicon",16),r(5,"input",17),h("input",function(n){u(e);let c=m(),p=Be(6);return g(c.onGlobalFilter(p,n))}),a()()()}}function qi(o,t){o&1&&(r(0,"tr")(1,"th",18),d(2,"p-tableHeaderCheckbox"),a(),r(3,"th",19),l(4,"Code"),a(),r(5,"th",20),l(6," Name "),d(7,"p-sortIcon",21),a(),r(8,"th"),l(9,"Image"),a(),r(10,"th",22),l(11," Price "),d(12,"p-sortIcon",23),a(),r(13,"th",24),l(14," Category "),d(15,"p-sortIcon",25),a(),r(16,"th",26),l(17," Reviews "),d(18,"p-sortIcon",27),a(),r(19,"th",28),l(20," Status "),d(21,"p-sortIcon",29),a(),d(22,"th",30),a())}function ji(o,t){if(o&1){let e=b();r(0,"tr")(1,"td",18),d(2,"p-tableCheckbox",31),a(),r(3,"td",30),l(4),a(),r(5,"td",19),l(6),a(),r(7,"td"),d(8,"img",32),a(),r(9,"td"),l(10),J(11,"currency"),a(),r(12,"td"),l(13),a(),r(14,"td")(15,"p-rating",33),O("ngModelChange",function(n){let c=u(e).$implicit;return y(c.rating,n)||(c.rating=n),g(n)}),a()(),r(16,"td"),d(17,"p-tag",34),a(),r(18,"td")(19,"p-button",35),h("click",function(){let n=u(e).$implicit,c=m();return g(c.editProduct(n))}),a(),r(20,"p-button",36),h("click",function(){let n=u(e).$implicit,c=m();return g(c.deleteProduct(n))}),a()()()}if(o&2){let e=t.$implicit,i=m();s(2),v("value",e),s(2),_(e.code),s(2),_(e.name),s(2),v("src","https://primefaces.org/cdn/primeng/images/demo/product/"+e.image,xt)("alt",e.name),s(2),_(se(11,15,e.price,"USD")),s(3),_(e.category),s(2),L("ngModel",e.rating),v("readonly",!0),s(2),v("value",e.inventoryStatus)("severity",i.getSeverity(e.inventoryStatus)),s(2),v("rounded",!0)("outlined",!0),s(),v("rounded",!0)("outlined",!0)}}function Zi(o,t){if(o&1&&d(0,"img",62),o&2){let e=m(2);v("src","https://primefaces.org/cdn/primeng/images/demo/product/"+e.product.image,xt)("alt",e.product.image)}}function zi(o,t){o&1&&(r(0,"small",63),l(1,"Name is required."),a())}function $i(o,t){if(o&1){let e=b();r(0,"div",37),M(1,Zi,1,2,"img",38),r(2,"div")(3,"label",39),l(4,"Name"),a(),r(5,"input",40),O("ngModelChange",function(n){u(e);let c=m();return y(c.product.name,n)||(c.product.name=n),g(n)}),a(),M(6,zi,2,0,"small",41),a(),r(7,"div")(8,"label",42),l(9,"Description"),a(),r(10,"textarea",43),O("ngModelChange",function(n){u(e);let c=m();return y(c.product.description,n)||(c.product.description=n),g(n)}),a()(),r(11,"div")(12,"label",44),l(13,"Inventory Status"),a(),r(14,"p-select",45),O("ngModelChange",function(n){u(e);let c=m();return y(c.product.inventoryStatus,n)||(c.product.inventoryStatus=n),g(n)}),a()(),r(15,"div")(16,"span",46),l(17,"Category"),a(),r(18,"div",47)(19,"div",48)(20,"p-radiobutton",49),O("ngModelChange",function(n){u(e);let c=m();return y(c.product.category,n)||(c.product.category=n),g(n)}),a(),r(21,"label",50),l(22,"Accessories"),a()(),r(23,"div",48)(24,"p-radiobutton",51),O("ngModelChange",function(n){u(e);let c=m();return y(c.product.category,n)||(c.product.category=n),g(n)}),a(),r(25,"label",52),l(26,"Clothing"),a()(),r(27,"div",48)(28,"p-radiobutton",53),O("ngModelChange",function(n){u(e);let c=m();return y(c.product.category,n)||(c.product.category=n),g(n)}),a(),r(29,"label",54),l(30,"Electronics"),a()(),r(31,"div",48)(32,"p-radiobutton",55),O("ngModelChange",function(n){u(e);let c=m();return y(c.product.category,n)||(c.product.category=n),g(n)}),a(),r(33,"label",56),l(34,"Fitness"),a()()()(),r(35,"div",47)(36,"div",57)(37,"label",58),l(38,"Price"),a(),r(39,"p-inputnumber",59),O("ngModelChange",function(n){u(e);let c=m();return y(c.product.price,n)||(c.product.price=n),g(n)}),a()(),r(40,"div",57)(41,"label",60),l(42,"Quantity"),a(),r(43,"p-inputnumber",61),O("ngModelChange",function(n){u(e);let c=m();return y(c.product.quantity,n)||(c.product.quantity=n),g(n)}),a()()()()}if(o&2){let e=m();s(),v("ngIf",e.product.image),s(4),L("ngModel",e.product.name),s(),v("ngIf",e.submitted&&!e.product.name),s(4),L("ngModel",e.product.description),s(4),L("ngModel",e.product.inventoryStatus),v("options",e.statuses),s(6),L("ngModel",e.product.category),s(4),L("ngModel",e.product.category),s(4),L("ngModel",e.product.category),s(4),L("ngModel",e.product.category),s(7),L("ngModel",e.product.price),s(4),L("ngModel",e.product.quantity)}}function Ji(o,t){if(o&1){let e=b();r(0,"p-button",64),h("click",function(){u(e);let n=m();return g(n.hideDialog())}),a(),r(1,"p-button",65),h("click",function(){u(e);let n=m();return g(n.saveProduct())}),a()}}var ct=class o{constructor(t,e,i){this.productService=t;this.messageService=e;this.confirmationService=i}productDialog=!1;products=Bt([]);product;selectedProducts;submitted=!1;statuses;dt;exportColumns;cols;exportCSV(){this.dt.exportCSV()}ngOnInit(){this.loadDemoData()}loadDemoData(){this.productService.getProducts().then(t=>{this.products.set(t)}),this.statuses=[{label:"INSTOCK",value:"instock"},{label:"LOWSTOCK",value:"lowstock"},{label:"OUTOFSTOCK",value:"outofstock"}],this.cols=[{field:"code",header:"Code",customExportHeader:"Product Code"},{field:"name",header:"Name"},{field:"image",header:"Image"},{field:"price",header:"Price"},{field:"category",header:"Category"}],this.exportColumns=this.cols.map(t=>({title:t.header,dataKey:t.field}))}onGlobalFilter(t,e){t.filterGlobal(e.target.value,"contains")}openNew(){this.product={},this.submitted=!1,this.productDialog=!0}editProduct(t){this.product=q({},t),this.productDialog=!0}deleteSelectedProducts(){this.confirmationService.confirm({message:"Are you sure you want to delete the selected products?",header:"Confirm",icon:"pi pi-exclamation-triangle",accept:()=>{this.products.set(this.products().filter(t=>!this.selectedProducts?.includes(t))),this.selectedProducts=null,this.messageService.add({severity:"success",summary:"Successful",detail:"Products Deleted",life:3e3})}})}hideDialog(){this.productDialog=!1,this.submitted=!1}deleteProduct(t){this.confirmationService.confirm({message:"Are you sure you want to delete "+t.name+"?",header:"Confirm",icon:"pi pi-exclamation-triangle",accept:()=>{this.products.set(this.products().filter(e=>e.id!==t.id)),this.product={},this.messageService.add({severity:"success",summary:"Successful",detail:"Product Deleted",life:3e3})}})}findIndexById(t){let e=-1;for(let i=0;i<this.products().length;i++)if(this.products()[i].id===t){e=i;break}return e}createId(){let t="";for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<5;i++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}getSeverity(t){switch(t){case"INSTOCK":return"success";case"LOWSTOCK":return"warn";case"OUTOFSTOCK":return"danger";default:return"info"}}saveProduct(){this.submitted=!0;let t=this.products();this.product.name?.trim()&&(this.product.id?(t[this.findIndexById(this.product.id)]=this.product,this.products.set([...t]),this.messageService.add({severity:"success",summary:"Successful",detail:"Product Updated",life:3e3})):(this.product.id=this.createId(),this.product.image="product-placeholder.svg",this.messageService.add({severity:"success",summary:"Successful",detail:"Product Created",life:3e3}),this.products.set([...t,this.product])),this.productDialog=!1,this.product={})}static \u0275fac=function(e){return new(e||o)(I(rt),I(V),I(le))};static \u0275cmp=H({type:o,selectors:[["app-crud"]],viewQuery:function(e,i){if(e&1&&Z(ki,5),e&2){let n;z(n=$())&&(i.dt=n.first)}},features:[$e([V,rt,le])],decls:19,vars:18,consts:[["start",""],["end",""],["dt",""],["caption",""],["header",""],["body",""],["content",""],["footer",""],["styleClass","mb-6"],["dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} products",3,"selectionChange","value","rows","columns","globalFilterFields","tableStyle","selection","rowsPerPageOptions"],["header","Product Details",3,"visibleChange","visible","modal"],["label","New","icon","pi pi-plus","severity","secondary",1,"mr-2",3,"onClick"],["severity","secondary","label","Delete","icon","pi pi-trash","outlined","",3,"onClick","disabled"],["label","Export","icon","pi pi-upload","severity","secondary",3,"onClick"],[1,"flex","items-center","justify-between"],[1,"m-0"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"],[2,"width","3rem"],[2,"min-width","16rem"],["pSortableColumn","name",2,"min-width","16rem"],["field","name"],["pSortableColumn","price",2,"min-width","8rem"],["field","price"],["pSortableColumn","category",2,"min-width","10rem"],["field","category"],["pSortableColumn","rating",2,"min-width","12rem"],["field","rating"],["pSortableColumn","inventoryStatus",2,"min-width","12rem"],["field","inventoryStatus"],[2,"min-width","12rem"],[3,"value"],[1,"rounded",2,"width","64px",3,"src","alt"],[3,"ngModelChange","ngModel","readonly"],[3,"value","severity"],["icon","pi pi-pencil",1,"mr-2",3,"click","rounded","outlined"],["icon","pi pi-trash","severity","danger",3,"click","rounded","outlined"],[1,"flex","flex-col","gap-6"],["class","block m-auto pb-4",3,"src","alt",4,"ngIf"],["for","name",1,"block","font-bold","mb-3"],["type","text","pInputText","","id","name","required","","autofocus","","fluid","",3,"ngModelChange","ngModel"],["class","text-red-500",4,"ngIf"],["for","description",1,"block","font-bold","mb-3"],["id","description","pTextarea","","required","","rows","3","cols","20","fluid","",3,"ngModelChange","ngModel"],["for","inventoryStatus",1,"block","font-bold","mb-3"],["inputId","inventoryStatus","optionLabel","label","optionValue","label","placeholder","Select a Status","fluid","",3,"ngModelChange","ngModel","options"],[1,"block","font-bold","mb-4"],[1,"grid","grid-cols-12","gap-4"],[1,"flex","items-center","gap-2","col-span-6"],["id","category1","name","category","value","Accessories",3,"ngModelChange","ngModel"],["for","category1"],["id","category2","name","category","value","Clothing",3,"ngModelChange","ngModel"],["for","category2"],["id","category3","name","category","value","Electronics",3,"ngModelChange","ngModel"],["for","category3"],["id","category4","name","category","value","Fitness",3,"ngModelChange","ngModel"],["for","category4"],[1,"col-span-6"],["for","price",1,"block","font-bold","mb-3"],["id","price","mode","currency","currency","USD","locale","en-US","fluid","",3,"ngModelChange","ngModel"],["for","quantity",1,"block","font-bold","mb-3"],["id","quantity","fluid","",3,"ngModelChange","ngModel"],[1,"block","m-auto","pb-4",3,"src","alt"],[1,"text-red-500"],["label","Cancel","icon","pi pi-times","text","",3,"click"],["label","Save","icon","pi pi-check",3,"click"]],template:function(e,i){if(e&1){let n=b();r(0,"p-toolbar",8),M(1,Bi,2,1,"ng-template",null,0,k)(3,Fi,1,0,"ng-template",null,1,k),a(),r(5,"p-table",9,2),O("selectionChange",function(p){return u(n),y(i.selectedProducts,p)||(i.selectedProducts=p),g(p)}),M(7,Hi,6,0,"ng-template",null,3,k)(9,qi,23,0,"ng-template",null,4,k)(11,ji,21,18,"ng-template",null,5,k),a(),r(13,"p-dialog",10),O("visibleChange",function(p){return u(n),y(i.productDialog,p)||(i.productDialog=p),g(p)}),M(14,$i,44,12,"ng-template",null,6,k)(16,Ji,2,0,"ng-template",null,7,k),a(),d(18,"p-confirmdialog")}e&2&&(s(5),v("value",i.products())("rows",10)("columns",i.cols)("globalFilterFields",T(13,Di))("tableStyle",T(14,Pi)),L("selection",i.selectedProducts),v("rowsPerPageOptions",T(15,Vi)),s(8),ne(T(16,Si)),L("visible",i.productDialog),v("modal",!0),s(5),ne(T(17,Si)))},dependencies:[ce,jt,re,it,ii,ri,ai,oi,K,Q,Y,$t,W,pe,X,de,Ci,xe,di,Ei,bi,ge,ee,be,Ue,tt,ve,ti,ei,fe,Xt,Se,Ee,Ce,li,he,ie,Ae,te,_e,ke,Je],encapsulation:2})};var dt=class o{static \u0275fac=function(e){return new(e||o)};static \u0275cmp=H({type:o,selectors:[["app-empty"]],decls:5,vars:0,consts:[[1,"card"],[1,"font-semibold","text-xl","mb-4"]],template:function(e,i){e&1&&(bt(0,"div",0)(1,"div",1),l(2,"Empty Page"),Et(),bt(3,"p"),l(4,"Use this page to start from scratch and place your custom content."),Et()())},encapsulation:2})};var gs=Mt(Ai());var ye=class o{constructor(t){this.http=t}baseUrl=Jt.apiUrl2;authService=Vt(me);consultarGeocerca(t){let e=this.authService.getToken(),i=new F({Authorization:`Bearer ${e}`,"Content-Type":"application/json"});return this.http.get(`${this.baseUrl}/ConsultarRelacion/${t}`,{headers:i})}desvincularGeocerca(t){let e=this.authService.getToken(),i=new F({Authorization:`Bearer ${e}`,"Content-Type":"application/json"});return this.http.patch(`${this.baseUrl}/desvincular-vendedor/${t}`,{headers:i})}assignGeocercaToUser(t,e){let i=this.authService.getToken(),n=new F({Authorization:`Bearer ${i}`,"Content-Type":"application/json"});return this.http.post(`${this.baseUrl}/asignar-vendedor/${t}`,e,{headers:n})}getGeocercasConVendedoresByEnterpriseName(t,e=1,i=10,n=!0,c=!0){let p=this.authService.getToken(),C=new F({Authorization:`Bearer ${p}`,"Content-Type":"application/json"}),S=new _t().set("pageNumber",e).set("pageSize",i).set("activo",n).set("soloConVendedores",c).set("nameEnterprise",t);return this.http.get(`${this.baseUrl}/obtenerGeocercasConVendedorAsync/`,{headers:C,params:S})}getOnlyGeocercasByEnterpriseName(t,e=1,i=10){let n=this.authService.getToken(),c=new F({Authorization:`Bearer ${n}`,"Content-Type":"application/json"}),p=new _t().set("pageNumber",e).set("pageSize",i).set("enterpriseName",t);return this.http.get(`${this.baseUrl}/getListGeofenceByEnterprise/`,{headers:c,params:p})}createOnlyGeocerca(t){let e=this.authService.getToken(),i=new F({Authorization:`Bearer ${e}`,"Content-Type":"application/json"});return this.http.post(`${this.baseUrl}/crear-geocercas`,t,{headers:i})}validarCodigoGeocerca(t){let e=this.authService.getToken(),i=new F({Authorization:`Bearer ${e}`,"Content-Type":"application/json"});return this.http.get(`${this.baseUrl}/validar-codigo-geocerca/${t}`,{headers:i})}crearGeocerca(t){let e=this.authService.getToken(),i=new F({Authorization:`Bearer ${e}`,"Content-Type":"application/json"});return this.http.post(`${this.baseUrl}/crear-con-vendedores`,t,{headers:i})}actualizarGeocerca(t,e){let i=this.authService.getToken(),n=new F({Authorization:`Bearer ${i}`,"Content-Type":"application/json"});return this.http.put(`${this.baseUrl}/actualizar-geocerca/${t}`,e,{headers:n})}eliminarGeocerca(t){let e=this.authService.getToken(),i=new F({Authorization:`Bearer ${e}`});return this.http.delete(`${this.baseUrl}/eliminar-geocerca/${t}`,{headers:i})}activarGeocerca(t){let e=this.authService.getToken(),i=new F({Authorization:`Bearer ${e}`});return this.http.patch(`${this.baseUrl}/activar-geocerca/${t}`,{headers:i})}desactivarGeocerca(t){let e=this.authService.getToken(),i=new F({Authorization:`Bearer ${e}`});return this.http.patch(`${this.baseUrl}/desactivar-geocerca/${t}`,{headers:i})}generarCodigoGeocerca(){return`G${Date.now().toString().slice(-6)}`}calcularAreaPoligono(t){if(t.length<3)return 0;let e=0,i=t.length;for(let p=0;p<i;p++){let C=(p+1)%i;e+=t[p].lat*t[C].lng,e-=t[C].lat*t[p].lng}e=Math.abs(e)/2;let n=111320,c=111320*Math.cos(t[0].lat*Math.PI/180);return Math.round(e*n*c)}calcularPerimetroPoligono(t){if(t.length<2)return 0;let e=0;for(let i=0;i<t.length-1;i++)e+=this.calcularDistancia(t[i],t[i+1]);return t.length>2&&(e+=this.calcularDistancia(t[t.length-1],t[0])),Math.round(e)}calcularAreaCirculo(t){return Math.round(Math.PI*t*t)}calcularPerimetroCirculo(t){return Math.round(2*Math.PI*t)}calcularDistancia(t,e){let n=(e.lat-t.lat)*Math.PI/180,c=(e.lng-t.lng)*Math.PI/180,p=Math.sin(n/2)*Math.sin(n/2)+Math.cos(t.lat*Math.PI/180)*Math.cos(e.lat*Math.PI/180)*Math.sin(c/2)*Math.sin(c/2);return 6371e3*(2*Math.atan2(Math.sqrt(p),Math.sqrt(1-p)))}static \u0275fac=function(e){return new(e||o)(Ze(Ne))};static \u0275prov=Oe({token:o,factory:o.\u0275fac,providedIn:"root"})};var mt={"1":{provincia:"AZUAY",cantones:{"101":{canton:"CUENCA",parroquias:{"10101":"BELLAVISTA","10102":"CA\xD1ARIBAMBA","10103":"EL BAT\xC1N","10104":"EL SAGRARIO","10105":"EL VECINO","10106":"GIL RAM\xCDREZ D\xC1VALOS","10107":"HUAYNAC\xC1PAC","10108":"MACH\xC1NGARA","10109":"MONAY","10110":"SAN BLAS","10111":"SAN SEBASTI\xC1N","10112":"SUCRE","10113":"TOTORACOCHA","10114":"YANUNCAY","10115":"HERMANO MIGUEL","10150":"CUENCA","10151":"BA\xD1OS","10152":"CUMBE","10153":"CHAUCHA","10154":"CHECA (JIDCAY)","10155":"CHIQUINTAD","10156":"LLACAO","10157":"MOLLETURO","10158":"NULTI","10159":"OCTAVIO CORDERO PALACIOS (SANTA ROSA)","10160":"PACCHA","10161":"QUINGEO","10162":"RICAURTE","10163":"SAN JOAQU\xCDN","10164":"SANTA ANA","10165":"SAYAUS\xCD","10166":"SIDCAY","10167":"SININCAY","10168":"TARQUI","10169":"TURI","10170":"VALLE","10171":"VICTORIA DEL PORTETE (IRQUIS)"}},"102":{canton:"GIR\xD3N",parroquias:{"10250":"GIR\xD3N","10251":"ASUNCI\xD3N","10252":"SAN GERARDO"}},"103":{canton:"GUALACEO",parroquias:{"10350":"GUALACEO","10351":"CHORDELEG","10352":"DANIEL C\xD3RDOVA TORAL (EL ORIENTE)","10353":"JAD\xC1N","10354":"MARIANO MORENO","10355":"PRINCIPAL","10356":"REMIGIO CRESPO TORAL (G\xDALAG)","10357":"SAN JUAN","10358":"ZHIDMAD","10359":"LUIS CORDERO VEGA","10360":"SIM\xD3N BOL\xCDVAR (CAB. EN GA\xD1ANZOL)"}},"104":{canton:"NAB\xD3N",parroquias:{"10450":"NAB\xD3N","10451":"COCHAPATA","10452":"EL PROGRESO (CAB.EN ZHOTA)","10453":"LAS NIEVES (CHAYA)","10454":"O\xD1A"}},"105":{canton:"PAUTE",parroquias:{"10550":"PAUTE","10551":"AMALUZA","10552":"BUL\xC1N (JOS\xC9 V\xCDCTOR IZQUIERDO)","10553":"CHIC\xC1N (GUILLERMO ORTEGA)","10554":"EL CABO","10555":"GUACHAPALA","10556":"GUARAINAG","10557":"PALMAS","10558":"PAN","10559":"SAN CRIST\xD3BAL (CARLOS ORD\xD3\xD1EZ LAZO)","10560":"SEVILLA DE ORO","10561":"TOMEBAMBA","10562":"DUG DUG"}},"106":{canton:"PUCARA",parroquias:{"10650":"PUCAR\xC1","10651":"CAMILO PONCE ENR\xCDQUEZ (CAB. EN R\xCDO 7 DE MOLLEPONGO)","10652":"SAN RAFAEL DE SHARUG"}},"107":{canton:"SAN FERNANDO",parroquias:{"10750":"SAN FERNANDO","10751":"CHUMBL\xCDN"}},"108":{canton:"SANTA ISABEL",parroquias:{"10850":"SANTA ISABEL (CHAGUARURCO)","10851":"ABD\xD3N CALDER\xD3N (LA UNI\xD3N)","10852":"EL CARMEN DE PIJIL\xCD","10853":"ZHAGLLI (SHAGLLI)","10854":"SAN SALVADOR DE CA\xD1ARIBAMBA"}},"109":{canton:"SIGSIG",parroquias:{"10950":"SIGSIG","10951":"CUCHIL (CUTCHIL)","10952":"GIMA","10953":"GUEL","10954":"LUDO","10955":"SAN BARTOLOM\xC9","10956":"SAN JOS\xC9 DE RARANGA"}},"110":{canton:"O\xD1A",parroquias:{"11050":"SAN FELIPE DE O\xD1A CABECERA CANTONAL","11051":"SUSUDEL"}},"111":{canton:"CHORDELEG",parroquias:{"11150":"CHORDELEG","11151":"PRINCIPAL","11152":"LA UNI\xD3N","11153":"LUIS GALARZA ORELLANA (CAB.EN DELEGSOL)","11154":"SAN MART\xCDN DE PUZHIO"}},"112":{canton:"EL PAN",parroquias:{"11250":"EL PAN","11251":"AMALUZA","11252":"PALMAS","11253":"SAN VICENTE"}},"113":{canton:"SEVILLA DE ORO",parroquias:{"11350":"SEVILLA DE ORO","11351":"AMALUZA","11352":"PALMAS"}},"114":{canton:"GUACHAPALA",parroquias:{"11450":"GUACHAPALA"}},"115":{canton:"CAMILO PONCE ENR\xCDQUEZ",parroquias:{"11550":"CAMILO PONCE ENR\xCDQUEZ","11551":"EL CARMEN DE PIJIL\xCD"}}}},"2":{provincia:"BOLIVAR",cantones:{"201":{canton:"GUARANDA",parroquias:{"20101":"\xC1NGEL POLIBIO CH\xC1VES","20102":"GABRIEL IGNACIO VEINTIMILLA","20103":"GUANUJO","20150":"GUARANDA","20151":"FACUNDO VELA","20152":"GUANUJO","20153":"JULIO E. MORENO (CATANAHU\xC1N GRANDE)","20154":"LAS NAVES","20155":"SALINAS","20156":"SAN LORENZO","20157":"SAN SIM\xD3N (YACOTO)","20158":"SANTA F\xC9 (SANTA F\xC9)","20159":"SIMI\xC1TUG","20160":"SAN LUIS DE PAMBIL"}},"202":{canton:"CHILLANES",parroquias:{"20250":"CHILLANES","20251":"SAN JOS\xC9 DEL TAMBO (TAMBOPAMBA)"}},"203":{canton:"CHIMBO",parroquias:{"20350":"SAN JOS\xC9 DE CHIMBO","20351":"ASUNCI\xD3N (ASANCOTO)","20352":"CALUMA","20353":"MAGDALENA (CHAPACOTO)","20354":"SAN SEBASTI\xC1N","20355":"TELIMBELA"}},"204":{canton:"ECHEAND\xCDA",parroquias:{"20450":"ECHEAND\xCDA"}},"205":{canton:"SAN MIGUEL",parroquias:{"20550":"SAN MIGUEL","20551":"BALSAPAMBA","20552":"BILOV\xC1N","20553":"R\xC9GULO DE MORA","20554":"SAN PABLO (SAN PABLO DE ATENAS)","20555":"SANTIAGO","20556":"SAN VICENTE"}},"206":{canton:"CALUMA",parroquias:{"20650":"CALUMA"}},"207":{canton:"LAS NAVES",parroquias:{"20701":"LAS MERCEDES","20702":"LAS NAVES","20750":"LAS NAVES"}}}},"3":{provincia:"CA\xD1AR",cantones:{"301":{canton:"AZOGUES",parroquias:{"30101":"AURELIO BAYAS MART\xCDNEZ","30102":"AZOGUES","30103":"BORRERO","30104":"SAN FRANCISCO","30150":"AZOGUES","30151":"COJITAMBO","30152":"D\xC9LEG","30153":"GUAP\xC1N","30154":"JAVIER LOYOLA (CHUQUIPATA)","30155":"LUIS CORDERO","30156":"PINDILIG","30157":"RIVERA","30158":"SAN MIGUEL","30159":"SOLANO","30160":"TADAY"}},"302":{canton:"BIBLI\xC1N",parroquias:{"30250":"BIBLI\xC1N","30251":"NAZ\xD3N (CAB. EN PAMPA DE DOM\xCDNGUEZ)","30252":"SAN FRANCISCO DE SAGEO","30253":"TURUPAMBA","30254":"JERUSAL\xC9N"}},"303":{canton:"CA\xD1AR",parroquias:{"30350":"CA\xD1AR","30351":"CHONTAMARCA","30352":"CHOROCOPTE","30353":"GENERAL MORALES (SOCARTE)","30354":"GUALLETURO","30355":"HONORATO V\xC1SQUEZ (TAMBO VIEJO)","30356":"INGAPIRCA","30357":"JUNCAL","30358":"SAN ANTONIO","30359":"SUSCAL","30360":"TAMBO","30361":"ZHUD","30362":"VENTURA","30363":"DUCUR"}},"304":{canton:"LA TRONCAL",parroquias:{"30450":"LA TRONCAL","30451":"MANUEL J. CALLE","30452":"PANCHO NEGRO"}},"305":{canton:"EL TAMBO",parroquias:{"30550":"EL TAMBO"}},"306":{canton:"D\xC9LEG",parroquias:{"30650":"D\xC9LEG","30651":"SOLANO"}},"307":{canton:"SUSCAL",parroquias:{"30750":"SUSCAL"}}}},"4":{provincia:"CARCHI",cantones:{"401":{canton:"TULC\xC1N",parroquias:{"40101":"GONZ\xC1LEZ SU\xC1REZ","40102":"TULC\xC1N","40150":"TULC\xC1N","40151":"EL CARMELO (EL PUN)","40152":"HUACA","40153":"JULIO ANDRADE (OREJUELA)","40154":"MALDONADO","40155":"PIOTER","40156":"TOBAR DONOSO (LA BOCANA DE CAMUMB\xCD)","40157":"TUFI\xD1O","40158":"URBINA (TAYA)","40159":"EL CHICAL","40160":"MARISCAL SUCRE","40161":"SANTA MARTHA DE CUBA"}},"402":{canton:"BOL\xCDVAR",parroquias:{"40250":"BOL\xCDVAR","40251":"GARC\xCDA MORENO","40252":"LOS ANDES","40253":"MONTE OLIVO","40254":"SAN VICENTE DE PUSIR","40255":"SAN RAFAEL"}},"403":{canton:"ESPEJO",parroquias:{"40301":"EL \xC1NGEL","40302":"27 DE SEPTIEMBRE","40350":"EL ANGEL","40351":"EL GOALTAL","40352":"LA LIBERTAD (ALIZO)","40353":"SAN ISIDRO"}},"404":{canton:"MIRA",parroquias:{"40450":"MIRA (CHONTAHUASI)","40451":"CONCEPCI\xD3N","40452":"JIJ\xD3N Y CAAMA\xD1O (CAB. EN R\xCDO BLANCO)","40453":"JUAN MONTALVO (SAN IGNACIO DE QUIL)"}},"405":{canton:"MONT\xDAFAR",parroquias:{"40501":"GONZ\xC1LEZ SU\xC1REZ","40502":"SAN JOS\xC9","40550":"SAN GABRIEL","40551":"CRIST\xD3BAL COL\xD3N","40552":"CHIT\xC1N DE NAVARRETE","40553":"FERN\xC1NDEZ SALVADOR","40554":"LA PAZ","40555":"PIARTAL"}},"406":{canton:"SAN PEDRO DE HUACA",parroquias:{"40650":"HUACA","40651":"MARISCAL SUCRE"}}}},"5":{provincia:"COTOPAXI",cantones:{"501":{canton:"LATACUNGA",parroquias:{"50101":"ELOY ALFARO (SAN FELIPE)","50102":"IGNACIO FLORES (PARQUE FLORES)","50103":"JUAN MONTALVO (SAN SEBASTI\xC1N)","50104":"LA MATRIZ","50105":"SAN BUENAVENTURA","50150":"LATACUNGA","50151":"ALAQUES (AL\xC1QUEZ)","50152":"BELISARIO QUEVEDO (GUANAIL\xCDN)","50153":"GUAITACAMA (GUAYTACAMA)","50154":"JOSEGUANGO BAJO","50155":"LAS PAMPAS","50156":"MULAL\xD3","50157":"11 DE NOVIEMBRE (ILINCHISI)","50158":"POAL\xD3","50159":"SAN JUAN DE PASTOCALLE","50160":"SIGCHOS","50161":"TANICUCH\xCD","50162":"TOACASO","50163":"PALO QUEMADO"}},"502":{canton:"LA MAN\xC1",parroquias:{"50201":"EL CARMEN","50202":"LA MAN\xC1","50203":"EL TRIUNFO","50250":"LA MAN\xC1","50251":"GUASAGANDA (CAB.EN GUASAGANDA","50252":"PUCAYACU"}},"503":{canton:"PANGUA",parroquias:{"50350":"EL CORAZ\xD3N","50351":"MORASPUNGO","50352":"PINLLOPATA","50353":"RAM\xD3N CAMPA\xD1A"}},"504":{canton:"PUJILI",parroquias:{"50450":"PUJIL\xCD","50451":"ANGAMARCA","50452":"CHUCCHIL\xC1N (CHUGCHIL\xC1N)","50453":"GUANGAJE","50454":"ISINLIB\xCD (ISINLIV\xCD)","50455":"LA VICTORIA","50456":"PILAL\xD3","50457":"TINGO","50458":"ZUMBAHUA"}},"505":{canton:"SALCEDO",parroquias:{"50550":"SAN MIGUEL","50551":"ANTONIO JOS\xC9 HOLGU\xCDN (SANTA LUC\xCDA)","50552":"CUSUBAMBA","50553":"MULALILLO","50554":"MULLIQUINDIL (SANTA ANA)","50555":"PANSALEO"}},"506":{canton:"SAQUISIL\xCD",parroquias:{"50650":"SAQUISIL\xCD","50651":"CANCHAGUA","50652":"CHANTIL\xCDN","50653":"COCHAPAMBA"}},"507":{canton:"SIGCHOS",parroquias:{"50750":"SIGCHOS","50751":"CHUGCHILL\xC1N","50752":"ISINLIV\xCD","50753":"LAS PAMPAS","50754":"PALO QUEMADO"}}}},"6":{provincia:"CHIMBORAZO",cantones:{"601":{canton:"RIOBAMBA",parroquias:{"60101":"LIZARZABURU","60102":"MALDONADO","60103":"VELASCO","60104":"VELOZ","60105":"YARUQU\xCDES","60150":"RIOBAMBA","60151":"CACHA (CAB. EN MACH\xC1NGARA)","60152":"CALPI","60153":"CUBIJ\xCDES","60154":"FLORES","60155":"LIC\xC1N","60156":"LICTO","60157":"PUNGAL\xC1","60158":"PUN\xCDN","60159":"QUIMIAG","60160":"SAN JUAN","60161":"SAN LUIS"}},"602":{canton:"ALAUSI",parroquias:{"60250":"ALAUS\xCD","60251":"ACHUPALLAS","60252":"CUMAND\xC1","60253":"GUASUNTOS","60254":"HUIGRA","60255":"MULTITUD","60256":"PISTISH\xCD (NARIZ DEL DIABLO)","60257":"PUMALLACTA","60258":"SEVILLA","60259":"SIBAMBE","60260":"TIX\xC1N"}},"603":{canton:"COLTA",parroquias:{"60301":"CAJABAMBA","60302":"SICALPA","60350":"VILLA LA UNI\xD3N (CAJABAMBA)","60351":"CA\xD1I","60352":"COLUMBE","60353":"JUAN DE VELASCO (PANGOR)","60354":"SANTIAGO DE QUITO (CAB. EN SAN ANTONIO DE QUITO)"}},"604":{canton:"CHAMBO",parroquias:{"60450":"CHAMBO"}},"605":{canton:"CHUNCHI",parroquias:{"60550":"CHUNCHI","60551":"CAPZOL","60552":"COMPUD","60553":"GONZOL","60554":"LLAGOS"}},"606":{canton:"GUAMOTE",parroquias:{"60650":"GUAMOTE","60651":"CEBADAS","60652":"PALMIRA"}},"607":{canton:"GUANO",parroquias:{"60701":"EL ROSARIO","60702":"LA MATRIZ","60750":"GUANO","60751":"GUANANDO","60752":"ILAPO","60753":"LA PROVIDENCIA","60754":"SAN ANDR\xC9S","60755":"SAN GERARDO DE PACAICAGU\xC1N","60756":"SAN ISIDRO DE PATUL\xDA","60757":"SAN JOS\xC9 DEL CHAZO","60758":"SANTA F\xC9 DE GAL\xC1N","60759":"VALPARA\xCDSO"}},"608":{canton:"PALLATANGA",parroquias:{"60850":"PALLATANGA"}},"609":{canton:"PENIPE",parroquias:{"60950":"PENIPE","60951":"EL ALTAR","60952":"MATUS","60953":"PUELA","60954":"SAN ANTONIO DE BAYUSHIG","60955":"LA CANDELARIA","60956":"BILBAO (CAB.EN QUILLUYACU)"}},"610":{canton:"CUMAND\xC1",parroquias:{"61050":"CUMAND\xC1"}}}},"7":{provincia:"EL ORO",cantones:{"701":{canton:"MACHALA",parroquias:{"70101":"LA PROVIDENCIA","70102":"MACHALA","70103":"PUERTO BOL\xCDVAR","70104":"NUEVE DE MAYO","70105":"EL CAMBIO","70150":"MACHALA","70151":"EL CAMBIO","70152":"EL RETIRO"}},"702":{canton:"ARENILLAS",parroquias:{"70250":"ARENILLAS","70251":"CHACRAS","70252":"LA LIBERTAD","70253":"LAS LAJAS (CAB. EN LA VICTORIA)","70254":"PALMALES","70255":"CARCAB\xD3N"}},"703":{canton:"ATAHUALPA",parroquias:{"70350":"PACCHA","70351":"AYAPAMBA","70352":"CORDONCILLO","70353":"MILAGRO","70354":"SAN JOS\xC9","70355":"SAN JUAN DE CERRO AZUL"}},"704":{canton:"BALSAS",parroquias:{"70450":"BALSAS","70451":"BELLAMAR\xCDA"}},"705":{canton:"CHILLA",parroquias:{"70550":"CHILLA"}},"706":{canton:"EL GUABO",parroquias:{"70650":"EL GUABO","70651":"BARBONES (SUCRE)","70652":"LA IBERIA","70653":"TENDALES (CAB.EN PUERTO TENDALES)","70654":"R\xCDO BONITO"}},"707":{canton:"HUAQUILLAS",parroquias:{"70701":"ECUADOR","70702":"EL PARA\xCDSO","70703":"HUALTACO","70704":"MILTON REYES","70705":"UNI\xD3N LOJANA","70750":"HUAQUILLAS"}},"708":{canton:"MARCABEL\xCD",parroquias:{"70850":"MARCABEL\xCD","70851":"EL INGENIO"}},"709":{canton:"PASAJE",parroquias:{"70901":"BOL\xCDVAR","70902":"LOMA DE FRANCO","70903":"OCHOA LE\xD3N (MATRIZ)","70904":"TRES CERRITOS","70950":"PASAJE","70951":"BUENAVISTA","70952":"CASACAY","70953":"LA PEA\xD1A","70954":"PROGRESO","70955":"UZHCURRUMI","70956":"CA\xD1AQUEMADA"}},"710":{canton:"PI\xD1AS",parroquias:{"71001":"LA MATRIZ","71002":"LA SUSAYA","71003":"PI\xD1AS GRANDE","71050":"PI\xD1AS","71051":"CAPIRO (CAB. EN LA CAPILLA DE CAPIRO)","71052":"LA BOCANA","71053":"MOROMORO (CAB. EN EL VADO)","71054":"PIEDRAS","71055":"SAN ROQUE (AMBROSIO MALDONADO)","71056":"SARACAY"}},"711":{canton:"PORTOVELO",parroquias:{"71150":"PORTOVELO","71151":"CURTINCAPA","71152":"MORALES","71153":"SALAT\xCD"}},"712":{canton:"SANTA ROSA",parroquias:{"71201":"SANTA ROSA","71202":"PUERTO JEL\xCD","71203":"BALNEARIO JAMBEL\xCD (SAT\xC9LITE)","71204":"JUM\xD3N (SAT\xC9LITE)","71205":"NUEVO SANTA ROSA","71250":"SANTA ROSA","71251":"BELLAVISTA","71252":"JAMBEL\xCD","71253":"LA AVANZADA","71254":"SAN ANTONIO","71255":"TORATA","71256":"VICTORIA","71257":"BELLAMAR\xCDA"}},"713":{canton:"ZARUMA",parroquias:{"71350":"ZARUMA","71351":"ABA\xD1\xCDN","71352":"ARCAPAMBA","71353":"GUANAZ\xC1N","71354":"GUIZHAGUI\xD1A","71355":"HUERTAS","71356":"MALVAS","71357":"MULUNCAY GRANDE","71358":"SINSAO","71359":"SALVIAS"}},"714":{canton:"LAS LAJAS",parroquias:{"71401":"LA VICTORIA","71402":"PLATANILLOS","71403":"VALLE HERMOSO","71450":"LA VICTORIA","71451":"LA LIBERTAD","71452":"EL PARA\xCDSO","71453":"SAN ISIDRO"}}}},"8":{provincia:"ESMERALDAS",cantones:{"801":{canton:"ESMERALDAS",parroquias:{"80101":"BARTOLOM\xC9 RUIZ (C\xC9SAR FRANCO CARRI\xD3N)","80102":"5 DE AGOSTO","80103":"ESMERALDAS","80104":"LUIS TELLO (LAS PALMAS)","80105":"SIM\xD3N PLATA TORRES","80150":"ESMERALDAS","80151":"ATACAMES","80152":"CAMARONES (CAB. EN SAN VICENTE)","80153":"CRNEL. CARLOS CONCHA TORRES (CAB.EN HUELE)","80154":"CHINCA","80155":"CHONTADURO","80156":"CHUMUND\xC9","80157":"LAGARTO","80158":"LA UNI\xD3N","80159":"MAJUA","80160":"MONTALVO (CAB. EN HORQUETA)","80161":"R\xCDO VERDE","80162":"ROCAFUERTE","80163":"SAN MATEO","80164":"S\xDAA (CAB. EN LA BOCANA)","80165":"TABIAZO","80166":"TACHINA","80167":"TONCHIG\xDCE","80168":"VUELTA LARGA"}},"802":{canton:"ELOY ALFARO",parroquias:{"80250":"VALDEZ (LIMONES)","80251":"ANCHAYACU","80252":"ATAHUALPA (CAB. EN CAMARONES)","80253":"BORB\xD3N","80254":"LA TOLA","80255":"LUIS VARGAS TORRES (CAB. EN PLAYA DE ORO)","80256":"MALDONADO","80257":"PAMPANAL DE BOL\xCDVAR","80258":"SAN FRANCISCO DE ONZOLE","80259":"SANTO DOMINGO DE ONZOLE","80260":"SELVA ALEGRE","80261":"TELEMB\xCD","80262":"COL\xD3N ELOY DEL MAR\xCDA","80263":"SAN JOS\xC9 DE CAYAPAS","80264":"TIMBIR\xC9"}},"803":{canton:"MUISNE",parroquias:{"80350":"MUISNE","80351":"BOL\xCDVAR","80352":"DAULE","80353":"GALERA","80354":"QUINGUE (OLMEDO PERDOMO FRANCO)","80355":"SALIMA","80356":"SAN FRANCISCO","80357":"SAN GREGORIO","80358":"SAN JOS\xC9 DE CHAMANGA (CAB.EN CHAMANGA)"}},"804":{canton:"QUININD\xC9",parroquias:{"80450":"ROSA Z\xC1RATE (QUININD\xC9)","80451":"CUBE","80452":"CHURA (CHANCAMA) (CAB. EN EL YERBERO)","80453":"MALIMPIA","80454":"VICHE","80455":"LA UNI\xD3N"}},"805":{canton:"SAN LORENZO",parroquias:{"80550":"SAN LORENZO","80551":"ALTO TAMBO (CAB. EN GUADUAL)","80552":"ANC\xD3N (PICHANGAL) (CAB. EN PALMA REAL)","80553":"CALDER\xD3N","80554":"CARONDELET","80555":"5 DE JUNIO (CAB. EN UIMBI)","80556":"CONCEPCI\xD3N","80557":"MATAJE (CAB. EN SANTANDER)","80558":"SAN JAVIER DE CACHAV\xCD (CAB. EN SAN JAVIER)","80559":"SANTA RITA","80560":"TAMBILLO","80561":"TULULB\xCD (CAB. EN RICAURTE)","80562":"URBINA"}},"806":{canton:"ATACAMES",parroquias:{"80650":"ATACAMES","80651":"LA UNI\xD3N","80652":"S\xDAA (CAB. EN LA BOCANA)","80653":"TONCHIG\xDCE","80654":"TONSUPA"}},"807":{canton:"RIOVERDE",parroquias:{"80750":"RIOVERDE","80751":"CHONTADURO","80752":"CHUMUND\xC9","80753":"LAGARTO","80754":"MONTALVO (CAB. EN HORQUETA)","80755":"ROCAFUERTE"}},"808":{canton:"LA CONCORDIA",parroquias:{"80850":"LA CONCORDIA","80851":"MONTERREY","80852":"LA VILLEGAS","80853":"PLAN PILOTO"}}}},"9":{provincia:"GUAYAS",cantones:{"901":{canton:"GUAYAQUIL",parroquias:{"90101":"AYACUCHO","90102":"BOL\xCDVAR (SAGRARIO)","90103":"CARBO (CONCEPCI\xD3N)","90104":"FEBRES CORDERO","90105":"GARC\xCDA MORENO","90106":"LETAMENDI","90107":"NUEVE DE OCTUBRE","90108":"OLMEDO (SAN ALEJO)","90109":"ROCA","90110":"ROCAFUERTE","90111":"SUCRE","90112":"TARQUI","90113":"URDANETA","90114":"XIMENA","90115":"PASCUALES","90150":"GUAYAQUIL","90151":"CHONG\xD3N","90152":"JUAN G\xD3MEZ REND\xD3N (PROGRESO)","90153":"MORRO","90154":"PASCUALES","90155":"PLAYAS (GRAL. VILLAMIL)","90156":"POSORJA","90157":"PUN\xC1","90158":"TENGUEL"}},"902":{canton:"ALFREDO BAQUERIZO MORENO (JUJ\xC1N)",parroquias:{"90250":"ALFREDO BAQUERIZO MORENO (JUJ\xC1N)"}},"903":{canton:"BALAO",parroquias:{"90350":"BALAO"}},"904":{canton:"BALZAR",parroquias:{"90450":"BALZAR"}},"905":{canton:"COLIMES",parroquias:{"90550":"COLIMES","90551":"SAN JACINTO"}},"906":{canton:"DAULE",parroquias:{"90601":"DAULE","90602":"LA AURORA (SAT\xC9LITE)","90603":"BANIFE","90604":"EMILIANO CAICEDO MARCOS","90605":"MAGRO","90606":"PADRE JUAN BAUTISTA AGUIRRE","90607":"SANTA CLARA","90608":"VICENTE PIEDRAHITA","90650":"DAULE","90651":"ISIDRO AYORA (SOLEDAD)","90652":"JUAN BAUTISTA AGUIRRE (LOS TINTOS)","90653":"LAUREL","90654":"LIMONAL","90655":"LOMAS DE SARGENTILLO","90656":"LOS LOJAS (ENRIQUE BAQUERIZO MORENO)","90657":"PIEDRAHITA (NOBOL)"}},"907":{canton:"DUR\xC1N",parroquias:{"90701":"ELOY ALFARO (DUR\xC1N)","90702":"EL RECREO","90750":"ELOY ALFARO (DUR\xC1N)"}},"908":{canton:"EL EMPALME",parroquias:{"90850":"VELASCO IBARRA (EL EMPALME)","90851":"GUAYAS (PUEBLO NUEVO)","90852":"EL ROSARIO"}},"909":{canton:"EL TRIUNFO",parroquias:{"90950":"EL TRIUNFO"}},"910":{canton:"MILAGRO",parroquias:{"91050":"MILAGRO","91051":"CHOBO","91052":"GENERAL ELIZALDE (BUCAY)","91053":"MARISCAL SUCRE (HUAQUES)","91054":"ROBERTO ASTUDILLO (CAB. EN CRUCE DE VENECIA)"}},"911":{canton:"NARANJAL",parroquias:{"91150":"NARANJAL","91151":"JES\xDAS MAR\xCDA","91152":"SAN CARLOS","91153":"SANTA ROSA DE FLANDES","91154":"TAURA"}},"912":{canton:"NARANJITO",parroquias:{"91250":"NARANJITO"}},"913":{canton:"PALESTINA",parroquias:{"91350":"PALESTINA"}},"914":{canton:"PEDRO CARBO",parroquias:{"91450":"PEDRO CARBO","91451":"VALLE DE LA VIRGEN","91452":"SABANILLA"}},"916":{canton:"SAMBOROND\xD3N",parroquias:{"91601":"SAMBOROND\xD3N","91602":"LA PUNTILLA (SAT\xC9LITE)","91650":"SAMBOROND\xD3N","91651":"TARIFA"}},"918":{canton:"SANTA LUC\xCDA",parroquias:{"91850":"SANTA LUC\xCDA"}},"919":{canton:"SALITRE (URBINA JADO)",parroquias:{"91901":"BOCANA","91902":"CANDILEJOS","91903":"CENTRAL","91904":"PARA\xCDSO","91905":"SAN MATEO","91950":"EL SALITRE (LAS RAMAS)","91951":"GRAL. VERNAZA (DOS ESTEROS)","91952":"LA VICTORIA (\xD1AUZA)","91953":"JUNQUILLAL"}},"920":{canton:"SAN JACINTO DE YAGUACHI",parroquias:{"92050":"SAN JACINTO DE YAGUACHI","92051":"CRNEL. LORENZO DE GARAICOA (PEDREGAL)","92052":"CRNEL. MARCELINO MARIDUE\xD1A (SAN CARLOS)","92053":"GRAL. PEDRO J. MONTERO (BOLICHE)","92054":"SIM\xD3N BOL\xCDVAR","92055":"YAGUACHI VIEJO (CONE)","92056":"VIRGEN DE F\xC1TIMA"}},"921":{canton:"PLAYAS",parroquias:{"92150":"GENERAL VILLAMIL (PLAYAS)"}},"922":{canton:"SIM\xD3N BOL\xCDVAR",parroquias:{"92250":"SIM\xD3N BOL\xCDVAR","92251":"CRNEL.LORENZO DE GARAICOA (PEDREGAL)"}},"923":{canton:"CORONEL MARCELINO MARIDUE\xD1A",parroquias:{"92350":"CORONEL MARCELINO MARIDUE\xD1A (SAN CARLOS)"}},"924":{canton:"LOMAS DE SARGENTILLO",parroquias:{"92450":"LOMAS DE SARGENTILLO","92451":"ISIDRO AYORA (SOLEDAD)"}},"925":{canton:"NOBOL",parroquias:{"92550":"NARCISA DE JES\xDAS"}},"927":{canton:"GENERAL ANTONIO ELIZALDE",parroquias:{"92750":"GENERAL ANTONIO ELIZALDE (BUCAY)"}},"928":{canton:"ISIDRO AYORA",parroquias:{"92850":"ISIDRO AYORA"}}}},"10":{provincia:"IMBABURA",cantones:{"1001":{canton:"IBARRA",parroquias:{"100101":"CARANQUI","100102":"GUAYAQUIL DE ALPACHACA","100103":"SAGRARIO","100104":"SAN FRANCISCO","100105":"LA DOLOROSA DEL PRIORATO","100150":"SAN MIGUEL DE IBARRA","100151":"AMBUQU\xCD","100152":"ANGOCHAGUA","100153":"CAROLINA","100154":"LA ESPERANZA","100155":"LITA","100156":"SALINAS","100157":"SAN ANTONIO"}},"1002":{canton:"ANTONIO ANTE",parroquias:{"100201":"ANDRADE MAR\xCDN (LOURDES)","100202":"ATUNTAQUI","100250":"ATUNTAQUI","100251":"IMBAYA (SAN LUIS DE COBUENDO)","100252":"SAN FRANCISCO DE NATABUELA","100253":"SAN JOS\xC9 DE CHALTURA","100254":"SAN ROQUE"}},"1003":{canton:"COTACACHI",parroquias:{"100301":"SAGRARIO","100302":"SAN FRANCISCO","100350":"COTACACHI","100351":"APUELA","100352":"GARC\xCDA MORENO (LLURIMAGUA)","100353":"IMANTAG","100354":"PE\xD1AHERRERA","100355":"PLAZA GUTI\xC9RREZ (CALVARIO)","100356":"QUIROGA","100357":"6 DE JULIO DE CUELLAJE (CAB. EN CUELLAJE)","100358":"VACAS GALINDO (EL CHURO) (CAB.EN SAN MIGUEL ALTO"}},"1004":{canton:"OTAVALO",parroquias:{"100401":"JORD\xC1N","100402":"SAN LUIS","100450":"OTAVALO","100451":"DR. MIGUEL EGAS CABEZAS (PEGUCHE)","100452":"EUGENIO ESPEJO (CALPAQU\xCD)","100453":"GONZ\xC1LEZ SU\xC1REZ","100454":"PATAQU\xCD","100455":"SAN JOS\xC9 DE QUICHINCHE","100456":"SAN JUAN DE ILUM\xC1N","100457":"SAN PABLO","100458":"SAN RAFAEL","100459":"SELVA ALEGRE (CAB.EN SAN MIGUEL DE PAMPLONA)"}},"1005":{canton:"PIMAMPIRO",parroquias:{"100550":"PIMAMPIRO","100551":"CHUG\xC1","100552":"MARIANO ACOSTA","100553":"SAN FRANCISCO DE SIGSIPAMBA"}},"1006":{canton:"SAN MIGUEL DE URCUQU\xCD",parroquias:{"100650":"URCUQU\xCD CABECERA CANTONAL","100651":"CAHUASQU\xCD","100652":"LA MERCED DE BUENOS AIRES","100653":"PABLO ARENAS","100654":"SAN BLAS","100655":"TUMBABIRO"}}}},"11":{provincia:"LOJA",cantones:{"1101":{canton:"LOJA",parroquias:{"110101":"EL SAGRARIO","110102":"SAN SEBASTI\xC1N","110103":"SUCRE","110104":"VALLE","110150":"LOJA","110151":"CHANTACO","110152":"CHUQUIRIBAMBA","110153":"EL CISNE","110154":"GUALEL","110155":"JIMBILLA","110156":"MALACATOS (VALLADOLID)","110157":"SAN LUCAS","110158":"SAN PEDRO DE VILCABAMBA","110159":"SANTIAGO","110160":"TAQUIL (MIGUEL RIOFR\xCDO)","110161":"VILCABAMBA (VICTORIA)","110162":"YANGANA (ARSENIO CASTILLO)","110163":"QUINARA"}},"1102":{canton:"CALVAS",parroquias:{"110201":"CARIAMANGA","110202":"CHILE","110203":"SAN VICENTE","110250":"CARIAMANGA","110251":"COLAISACA","110252":"EL LUCERO","110253":"UTUANA","110254":"SANGUILL\xCDN"}},"1103":{canton:"CATAMAYO",parroquias:{"110301":"CATAMAYO","110302":"SAN JOS\xC9","110350":"CATAMAYO (LA TOMA)","110351":"EL TAMBO","110352":"GUAYQUICHUMA","110353":"SAN PEDRO DE LA BENDITA","110354":"ZAMBI"}},"1104":{canton:"CELICA",parroquias:{"110450":"CELICA","110451":"CRUZPAMBA (CAB. EN CARLOS BUSTAMANTE)","110452":"CHAQUINAL","110453":"12 DE DICIEMBRE (CAB. EN ACHIOTES)","110454":"PINDAL (FEDERICO P\xC1EZ)","110455":"POZUL (SAN JUAN DE POZUL)","110456":"SABANILLA","110457":"TNTE. MAXIMILIANO RODR\xCDGUEZ LOAIZA"}},"1105":{canton:"CHAGUARPAMBA",parroquias:{"110550":"CHAGUARPAMBA","110551":"BUENAVISTA","110552":"EL ROSARIO","110553":"SANTA RUFINA","110554":"AMARILLOS"}},"1106":{canton:"ESP\xCDNDOLA",parroquias:{"110650":"AMALUZA","110651":"BELLAVISTA","110652":"JIMBURA","110653":"SANTA TERESITA","110654":"27 DE ABRIL (CAB. EN LA NARANJA)","110655":"EL INGENIO","110656":"EL AIRO"}},"1107":{canton:"GONZANAM\xC1",parroquias:{"110750":"GONZANAM\xC1","110751":"CHANGAIMINA (LA LIBERTAD)","110752":"FUNDOCHAMBA","110753":"NAMBACOLA","110754":"PURUNUMA (EGUIGUREN)","110755":"QUILANGA (LA PAZ)","110756":"SACAPALCA","110757":"SAN ANTONIO DE LAS ARADAS (CAB. EN LAS ARADAS)"}},"1108":{canton:"MACAR\xC1",parroquias:{"110801":"GENERAL ELOY ALFARO (SAN SEBASTI\xC1N)","110802":"MACAR\xC1 (MANUEL ENRIQUE RENGEL SUQUILANDA)","110850":"MACAR\xC1","110851":"LARAMA","110852":"LA VICTORIA","110853":"SABIANGO (LA CAPILLA)"}},"1109":{canton:"PALTAS",parroquias:{"110901":"CATACOCHA","110902":"LOURDES","110950":"CATACOCHA","110951":"CANGONAM\xC1","110952":"GUACHANAM\xC1","110953":"LA TINGUE","110954":"LAURO GUERRERO","110955":"OLMEDO (SANTA B\xC1RBARA)","110956":"ORIANGA","110957":"SAN ANTONIO","110958":"CASANGA","110959":"YAMANA"}},"1110":{canton:"PUYANGO",parroquias:{"111050":"ALAMOR","111051":"CIANO","111052":"EL ARENAL","111053":"EL LIMO (MARIANA DE JES\xDAS)","111054":"MERCADILLO","111055":"VICENTINO"}},"1111":{canton:"SARAGURO",parroquias:{"111150":"SARAGURO","111151":"EL PARA\xCDSO DE CEL\xC9N","111152":"EL TABL\xD3N","111153":"LLUZHAPA","111154":"MAN\xDA","111155":"SAN ANTONIO DE QUMBE (CUMBE)","111156":"SAN PABLO DE TENTA","111157":"SAN SEBASTI\xC1N DE Y\xDALUC","111158":"SELVA ALEGRE","111159":"URDANETA (PAQUISHAPA)","111160":"SUMAYPAMBA"}},"1112":{canton:"SOZORANGA",parroquias:{"111250":"SOZORANGA","111251":"NUEVA F\xC1TIMA","111252":"TACAMOROS"}},"1113":{canton:"ZAPOTILLO",parroquias:{"111350":"ZAPOTILLO","111351":"MANGAHURCO (CAZADEROS)","111352":"GARZAREAL","111353":"LIMONES","111354":"PALETILLAS","111355":"BOLASPAMBA"}},"1114":{canton:"PINDAL",parroquias:{"111450":"PINDAL","111451":"CHAQUINAL","111452":"12 DE DICIEMBRE (CAB.EN ACHIOTES)","111453":"MILAGROS"}},"1115":{canton:"QUILANGA",parroquias:{"111550":"QUILANGA","111551":"FUNDOCHAMBA","111552":"SAN ANTONIO DE LAS ARADAS (CAB. EN LAS ARADAS)"}},"1116":{canton:"OLMEDO",parroquias:{"111650":"OLMEDO","111651":"LA TINGUE"}}}},"12":{provincia:"LOS RIOS",cantones:{"1201":{canton:"BABAHOYO",parroquias:{"120101":"CLEMENTE BAQUERIZO","120102":"DR. CAMILO PONCE","120103":"BARREIRO","120104":"EL SALTO","120150":"BABAHOYO","120151":"BARREIRO (SANTA RITA)","120152":"CARACOL","120153":"FEBRES CORDERO (LAS JUNTAS)","120154":"PIMOCHA","120155":"LA UNI\xD3N"}},"1202":{canton:"BABA",parroquias:{"120250":"BABA","120251":"GUARE","120252":"ISLA DE BEJUCAL"}},"1203":{canton:"MONTALVO",parroquias:{"120350":"MONTALVO"}},"1204":{canton:"PUEBLOVIEJO",parroquias:{"120450":"PUEBLOVIEJO","120451":"PUERTO PECHICHE","120452":"SAN JUAN"}},"1205":{canton:"QUEVEDO",parroquias:{"120501":"QUEVEDO","120502":"SAN CAMILO","120503":"SAN JOS\xC9","120504":"GUAYAC\xC1N","120505":"NICOL\xC1S INFANTE D\xCDAZ","120506":"SAN CRIST\xD3BAL","120507":"SIETE DE OCTUBRE","120508":"24 DE MAYO","120509":"VENUS DEL R\xCDO QUEVEDO","120510":"VIVA ALFARO","120550":"QUEVEDO","120551":"BUENA F\xC9","120552":"MOCACHE","120553":"SAN CARLOS","120554":"VALENCIA","120555":"LA ESPERANZA"}},"1206":{canton:"URDANETA",parroquias:{"120650":"CATARAMA","120651":"RICAURTE"}},"1207":{canton:"VENTANAS",parroquias:{"120701":"10 DE NOVIEMBRE","120750":"VENTANAS","120751":"QUINSALOMA","120752":"ZAPOTAL","120753":"CHACARITA","120754":"LOS \xC1NGELES"}},"1208":{canton:"V\xCDNCES",parroquias:{"120850":"VINCES","120851":"ANTONIO SOTOMAYOR (CAB. EN PLAYAS DE VINCES)","120852":"PALENQUE"}},"1209":{canton:"PALENQUE",parroquias:{"120950":"PALENQUE"}},"1210":{canton:"BUENA F\xC9",parroquias:{"121001":"SAN JACINTO DE BUENA F\xC9","121002":"7 DE AGOSTO","121003":"11 DE OCTUBRE","121050":"SAN JACINTO DE BUENA F\xC9","121051":"PATRICIA PILAR"}},"1211":{canton:"VALENCIA",parroquias:{"121150":"VALENCIA"}},"1212":{canton:"MOCACHE",parroquias:{"121250":"MOCACHE"}},"1213":{canton:"QUINSALOMA",parroquias:{"121350":"QUINSALOMA"}}}},"13":{provincia:"MANABI",cantones:{"1301":{canton:"PORTOVIEJO",parroquias:{"130101":"PORTOVIEJO","130102":"12 DE MARZO","130103":"COL\xD3N","130104":"PICOAZ\xC1","130105":"SAN PABLO","130106":"ANDR\xC9S DE VERA","130107":"FRANCISCO PACHECO","130108":"18 DE OCTUBRE","130109":"SIM\xD3N BOL\xCDVAR","130150":"PORTOVIEJO","130151":"ABD\xD3N CALDER\xD3N (SAN FRANCISCO)","130152":"ALHAJUELA (BAJO GRANDE)","130153":"CRUCITA","130154":"PUEBLO NUEVO","130155":"RIOCHICO (R\xCDO CHICO)","130156":"SAN PL\xC1CIDO","130157":"CHIRIJOS"}},"1302":{canton:"BOL\xCDVAR",parroquias:{"130250":"CALCETA","130251":"MEMBRILLO","130252":"QUIROGA"}},"1303":{canton:"CHONE",parroquias:{"130301":"CHONE","130302":"SANTA RITA","130350":"CHONE","130351":"BOYAC\xC1","130352":"CANUTO","130353":"CONVENTO","130354":"CHIBUNGA","130355":"ELOY ALFARO","130356":"RICAURTE","130357":"SAN ANTONIO"}},"1304":{canton:"EL CARMEN",parroquias:{"130401":"EL CARMEN","130402":"4 DE DICIEMBRE","130450":"EL CARMEN","130451":"WILFRIDO LOOR MOREIRA (MAICITO)","130452":"SAN PEDRO DE SUMA"}},"1305":{canton:"FLAVIO ALFARO",parroquias:{"130550":"FLAVIO ALFARO","130551":"SAN FRANCISCO DE NOVILLO (CAB. EN","130552":"ZAPALLO"}},"1306":{canton:"JIPIJAPA",parroquias:{"130601":"DR. MIGUEL MOR\xC1N LUCIO","130602":"MANUEL INOCENCIO PARRALES Y GUALE","130603":"SAN LORENZO DE JIPIJAPA","130650":"JIPIJAPA","130651":"AM\xC9RICA","130652":"EL ANEGADO (CAB. EN ELOY ALFARO)","130653":"JULCUY","130654":"LA UNI\xD3N","130655":"MACHALILLA","130656":"MEMBRILLAL","130657":"PEDRO PABLO G\xD3MEZ","130658":"PUERTO DE CAYO","130659":"PUERTO L\xD3PEZ"}},"1307":{canton:"JUN\xCDN",parroquias:{"130750":"JUN\xCDN"}},"1308":{canton:"MANTA",parroquias:{"130801":"LOS ESTEROS","130802":"MANTA","130803":"SAN MATEO","130804":"TARQUI","130805":"ELOY ALFARO","130850":"MANTA","130851":"SAN LORENZO","130852":"SANTA MARIANITA (BOCA DE PACOCHE)"}},"1309":{canton:"MONTECRISTI",parroquias:{"130901":"ANIBAL SAN ANDR\xC9S","130902":"MONTECRISTI","130903":"EL COLORADO","130904":"GENERAL ELOY ALFARO","130905":"LEONIDAS PROA\xD1O","130950":"MONTECRISTI","130951":"JARAMIJ\xD3","130952":"LA PILA"}},"1310":{canton:"PAJ\xC1N",parroquias:{"131050":"PAJ\xC1N","131051":"CAMPOZANO (LA PALMA DE PAJ\xC1N)","131052":"CASCOL","131053":"GUALE","131054":"LASCANO"}},"1311":{canton:"PICHINCHA",parroquias:{"131150":"PICHINCHA","131151":"BARRAGANETE","131152":"SAN SEBASTI\xC1N"}},"1312":{canton:"ROCAFUERTE",parroquias:{"131250":"ROCAFUERTE"}},"1313":{canton:"SANTA ANA",parroquias:{"131301":"SANTA ANA","131302":"LODANA","131350":"SANTA ANA DE VUELTA LARGA","131351":"AYACUCHO","131352":"HONORATO V\xC1SQUEZ (CAB. EN V\xC1SQUEZ)","131353":"LA UNI\xD3N","131354":"OLMEDO","131355":"SAN PABLO (CAB. EN PUEBLO NUEVO)"}},"1314":{canton:"SUCRE",parroquias:{"131401":"BAH\xCDA DE CAR\xC1QUEZ","131402":"LEONIDAS PLAZA GUTI\xC9RREZ","131450":"BAH\xCDA DE CAR\xC1QUEZ","131451":"CANOA","131452":"COJIM\xCDES","131453":"CHARAPOT\xD3","131454":"10 DE AGOSTO","131455":"JAMA","131456":"PEDERNALES","131457":"SAN ISIDRO","131458":"SAN VICENTE"}},"1315":{canton:"TOSAGUA",parroquias:{"131550":"TOSAGUA","131551":"BACHILLERO","131552":"ANGEL PEDRO GILER (LA ESTANCILLA)"}},"1316":{canton:"24 DE MAYO",parroquias:{"131650":"SUCRE","131651":"BELLAVISTA","131652":"NOBOA","131653":"ARQ. SIXTO DUR\xC1N BALL\xC9N"}},"1317":{canton:"PEDERNALES",parroquias:{"131750":"PEDERNALES","131751":"COJIM\xCDES","131752":"10 DE AGOSTO","131753":"ATAHUALPA"}},"1318":{canton:"OLMEDO",parroquias:{"131850":"OLMEDO"}},"1319":{canton:"PUERTO L\xD3PEZ",parroquias:{"131950":"PUERTO L\xD3PEZ","131951":"MACHALILLA","131952":"SALANGO"}},"1320":{canton:"JAMA",parroquias:{"132050":"JAMA"}},"1321":{canton:"JARAMIJ\xD3",parroquias:{"132150":"JARAMIJ\xD3"}},"1322":{canton:"SAN VICENTE",parroquias:{"132250":"SAN VICENTE","132251":"CANOA"}}}},"14":{provincia:"MORONA SANTIAGO",cantones:{"1401":{canton:"MORONA",parroquias:{"140150":"MACAS","140151":"ALSHI (CAB. EN 9 DE OCTUBRE)","140152":"CHIGUAZA","140153":"GENERAL PROA\xD1O","140154":"HUASAGA (CAB.EN WAMPUIK)","140155":"MACUMA","140156":"SAN ISIDRO","140157":"SEVILLA DON BOSCO","140158":"SINA\xCD","140159":"TAISHA","140160":"ZU\xD1A (Z\xDA\xD1AC)","140161":"TUUTINENTZA","140162":"CUCHAENTZA","140163":"SAN JOS\xC9 DE MORONA","140164":"R\xCDO BLANCO"}},"1402":{canton:"GUALAQUIZA",parroquias:{"140201":"GUALAQUIZA","140202":"MERCEDES MOLINA","140250":"GUALAQUIZA","140251":"AMAZONAS (ROSARIO DE CUYES)","140252":"BERMEJOS","140253":"BOMBOIZA","140254":"CHIG\xDCINDA","140255":"EL ROSARIO","140256":"NUEVA TARQUI","140257":"SAN MIGUEL DE CUYES","140258":"EL IDEAL"}},"1403":{canton:"LIM\xD3N INDANZA",parroquias:{"140350":"GENERAL LEONIDAS PLAZA GUTI\xC9RREZ (LIM\xD3N)","140351":"INDANZA","140352":"PAN DE AZ\xDACAR","140353":"SAN ANTONIO (CAB. EN SAN ANTONIO CENTRO","140354":"SAN CARLOS DE LIM\xD3N (SAN CARLOS DEL","140355":"SAN JUAN BOSCO","140356":"SAN MIGUEL DE CONCHAY","140357":"SANTA SUSANA DE CHIVIAZA (CAB. EN CHIVIAZA)","140358":"YUNGANZA (CAB. EN EL ROSARIO)"}},"1404":{canton:"PALORA",parroquias:{"140450":"PALORA (METZERA)","140451":"ARAPICOS","140452":"CUMAND\xC1 (CAB. EN COLONIA AGR\xCDCOLA SEVILLA DEL ORO)","140453":"HUAMBOYA","140454":"SANGAY (CAB. EN NAYAMANACA)"}},"1405":{canton:"SANTIAGO",parroquias:{"140550":"SANTIAGO DE M\xC9NDEZ","140551":"COPAL","140552":"CHUPIANZA","140553":"PATUCA","140554":"SAN LUIS DE EL ACHO (CAB. EN EL ACHO)","140555":"SANTIAGO","140556":"TAYUZA","140557":"SAN FRANCISCO DE CHINIMBIMI"}},"1406":{canton:"SUC\xDAA",parroquias:{"140650":"SUC\xDAA","140651":"ASUNCI\xD3N","140652":"HUAMBI","140653":"LOGRO\xD1O","140654":"YAUPI","140655":"SANTA MARIANITA DE JES\xDAS"}},"1407":{canton:"HUAMBOYA",parroquias:{"140750":"HUAMBOYA","140751":"CHIGUAZA","140752":"PABLO SEXTO"}},"1408":{canton:"SAN JUAN BOSCO",parroquias:{"140850":"SAN JUAN BOSCO","140851":"PAN DE AZ\xDACAR","140852":"SAN CARLOS DE LIM\xD3N","140853":"SAN JACINTO DE WAKAMBEIS","140854":"SANTIAGO DE PANANZA"}},"1409":{canton:"TAISHA",parroquias:{"140950":"TAISHA","140951":"HUASAGA (CAB. EN WAMPUIK)","140952":"MACUMA","140953":"TUUTINENTZA","140954":"PUMPUENTSA"}},"1410":{canton:"LOGRO\xD1O",parroquias:{"141050":"LOGRO\xD1O","141051":"YAUPI","141052":"SHIMPIS"}},"1411":{canton:"PABLO SEXTO",parroquias:{"141150":"PABLO SEXTO"}},"1412":{canton:"TIWINTZA",parroquias:{"141250":"SANTIAGO","141251":"SAN JOS\xC9 DE MORONA"}}}},"15":{provincia:"NAPO",cantones:{"1501":{canton:"TENA",parroquias:{"150150":"TENA","150151":"AHUANO","150152":"CARLOS JULIO AROSEMENA TOLA (ZATZA-YACU)","150153":"CHONTAPUNTA","150154":"PANO","150155":"PUERTO MISAHUALLI","150156":"PUERTO NAPO","150157":"T\xC1LAG","150158":"SAN JUAN DE MUYUNA"}},"1503":{canton:"ARCHIDONA",parroquias:{"150350":"ARCHIDONA","150351":"AVILA","150352":"COTUNDO","150353":"LORETO","150354":"SAN PABLO DE USHPAYACU","150355":"PUERTO MURIALDO"}},"1504":{canton:"EL CHACO",parroquias:{"150450":"EL CHACO","150451":"GONZALO D\xEDAZ DE PINEDA (EL BOMB\xD3N)","150452":"LINARES","150453":"OYACACHI","150454":"SANTA ROSA","150455":"SARDINAS"}},"1507":{canton:"QUIJOS",parroquias:{"150750":"BAEZA","150751":"COSANGA","150752":"CUYUJA","150753":"PAPALLACTA","150754":"SAN FRANCISCO DE BORJA (VIRGILIO D\xC1VILA)","150755":"SAN JOS\xC9 DEL PAYAMINO","150756":"SUMACO"}},"1509":{canton:"CARLOS JULIO AROSEMENA TOLA",parroquias:{"150950":"CARLOS JULIO AROSEMENA TOLA"}}}},"16":{provincia:"PASTAZA",cantones:{"1601":{canton:"PASTAZA",parroquias:{"160150":"PUYO","160151":"ARAJUNO","160152":"CANELOS","160153":"CURARAY","160154":"DIEZ DE AGOSTO","160155":"F\xC1TIMA","160156":"MONTALVO (ANDOAS)","160157":"POMONA","160158":"R\xCDO CORRIENTES","160159":"R\xCDO TIGRE","160160":"SANTA CLARA","160161":"SARAYACU","160162":"SIM\xD3N BOL\xCDVAR (CAB. EN MUSHULLACTA)","160163":"TARQUI","160164":"TENIENTE HUGO ORTIZ","160165":"VERACRUZ (INDILLAMA) (CAB. EN INDILLAMA)","160166":"EL TRIUNFO"}},"1602":{canton:"MERA",parroquias:{"160250":"MERA","160251":"MADRE TIERRA","160252":"SHELL"}},"1603":{canton:"SANTA CLARA",parroquias:{"160350":"SANTA CLARA","160351":"SAN JOS\xC9"}},"1604":{canton:"ARAJUNO",parroquias:{"160450":"ARAJUNO","160451":"CURARAY"}}}},"17":{provincia:"PICHINCHA",cantones:{"1701":{canton:"QUITO",parroquias:{"170101":"BELISARIO QUEVEDO","170102":"CARCEL\xC9N","170103":"CENTRO HIST\xD3RICO","170104":"COCHAPAMBA","170105":"COMIT\xC9 DEL PUEBLO","170106":"COTOCOLLAO","170107":"CHILIBULO","170108":"CHILLOGALLO","170109":"CHIMBACALLE","170110":"EL CONDADO","170111":"GUAMAN\xCD","170112":"I\xD1AQUITO","170113":"ITCHIMB\xCDA","170114":"JIPIJAPA","170115":"KENNEDY","170116":"LA ARGELIA","170117":"LA CONCEPCI\xD3N","170118":"LA ECUATORIANA","170119":"LA FERROVIARIA","170120":"LA LIBERTAD","170121":"LA MAGDALENA","170122":"LA MENA","170123":"MARISCAL SUCRE","170124":"PONCEANO","170125":"PUENGAS\xCD","170126":"QUITUMBE","170127":"RUMIPAMBA","170128":"SAN BARTOLO","170129":"SAN ISIDRO DEL INCA","170130":"SAN JUAN","170131":"SOLANDA","170132":"TURUBAMBA","170150":"QUITO DISTRITO METROPOLITANO","170151":"ALANGAS\xCD","170152":"AMAGUA\xD1A","170153":"ATAHUALPA","170154":"CALACAL\xCD","170155":"CALDER\xD3N","170156":"CONOCOTO","170157":"CUMBAY\xC1","170158":"CHAVEZPAMBA","170159":"CHECA","170160":"EL QUINCHE","170161":"GUALEA","170162":"GUANGOPOLO","170163":"GUAYLLABAMBA","170164":"LA MERCED","170165":"LLANO CHICO","170166":"LLOA","170167":"MINDO","170168":"NANEGAL","170169":"NANEGALITO","170170":"NAY\xD3N","170171":"NONO","170172":"PACTO","170173":"PEDRO VICENTE MALDONADO","170174":"PERUCHO","170175":"PIFO","170176":"P\xCDNTAG","170177":"POMASQUI","170178":"PU\xC9LLARO","170179":"PUEMBO","170180":"SAN ANTONIO","170181":"SAN JOS\xC9 DE MINAS","170182":"SAN MIGUEL DE LOS BANCOS","170183":"TABABELA","170184":"TUMBACO","170185":"YARUQU\xCD","170186":"ZAMBIZA","170187":"PUERTO QUITO"}},"1702":{canton:"CAYAMBE",parroquias:{"170201":"AYORA","170202":"CAYAMBE","170203":"JUAN MONTALVO","170250":"CAYAMBE","170251":"ASC\xC1ZUBI","170252":"CANGAHUA","170253":"OLMEDO (PESILLO)","170254":"OT\xD3N","170255":"SANTA ROSA DE CUZUBAMBA"}},"1703":{canton:"MEJIA",parroquias:{"170350":"MACHACHI","170351":"AL\xD3AG","170352":"ALOAS\xCD","170353":"CUTUGLAHUA","170354":"EL CHAUPI","170355":"MANUEL CORNEJO ASTORGA (TANDAPI)","170356":"TAMBILLO","170357":"UYUMBICHO"}},"1704":{canton:"PEDRO MONCAYO",parroquias:{"170450":"TABACUNDO","170451":"LA ESPERANZA","170452":"MALCHINGU\xCD","170453":"TOCACHI","170454":"TUPIGACHI"}},"1705":{canton:"RUMI\xD1AHUI",parroquias:{"170501":"SANGOLQU\xCD","170502":"SAN PEDRO DE TABOADA","170503":"SAN RAFAEL","170550":"SANGOLQUI","170551":"COTOGCHOA","170552":"RUMIPAMBA"}},"1707":{canton:"SAN MIGUEL DE LOS BANCOS",parroquias:{"170750":"SAN MIGUEL DE LOS BANCOS","170751":"MINDO","170752":"PEDRO VICENTE MALDONADO","170753":"PUERTO QUITO"}},"1708":{canton:"PEDRO VICENTE MALDONADO",parroquias:{"170850":"PEDRO VICENTE MALDONADO"}},"1709":{canton:"PUERTO QUITO",parroquias:{"170950":"PUERTO QUITO"}}}},"18":{provincia:"TUNGURAHUA",cantones:{"1801":{canton:"AMBATO",parroquias:{"180101":"ATOCHA \u2013 FICOA","180102":"CELIANO MONGE","180103":"HUACHI CHICO","180104":"HUACHI LORETO","180105":"LA MERCED","180106":"LA PEN\xCDNSULA","180107":"MATRIZ","180108":"PISHILATA","180109":"SAN FRANCISCO","180150":"AMBATO","180151":"AMBATILLO","180152":"ATAHUALPA (CHISALATA)","180153":"AUGUSTO N. MART\xCDNEZ (MUNDUGLEO)","180154":"CONSTANTINO FERN\xC1NDEZ (CAB. EN CULLITAHUA)","180155":"HUACHI GRANDE","180156":"IZAMBA","180157":"JUAN BENIGNO VELA","180158":"MONTALVO","180159":"PASA","180160":"PICAIGUA","180161":"PILAG\xDC\xCDN (PILAH\xDC\xCDN)","180162":"QUISAPINCHA (QUIZAPINCHA)","180163":"SAN BARTOLOM\xC9 DE PINLLOG","180164":"SAN FERNANDO (PASA SAN FERNANDO)","180165":"SANTA ROSA","180166":"TOTORAS","180167":"CUNCHIBAMBA","180168":"UNAMUNCHO"}},"1802":{canton:"BA\xD1OS DE AGUA SANTA",parroquias:{"180250":"BA\xD1OS DE AGUA SANTA","180251":"LLIGUA","180252":"R\xCDO NEGRO","180253":"R\xCDO VERDE","180254":"ULBA"}},"1803":{canton:"CEVALLOS",parroquias:{"180350":"CEVALLOS"}},"1804":{canton:"MOCHA",parroquias:{"180450":"MOCHA","180451":"PINGUIL\xCD"}},"1805":{canton:"PATATE",parroquias:{"180550":"PATATE","180551":"EL TRIUNFO","180552":"LOS ANDES (CAB. EN POATUG)","180553":"SUCRE (CAB. EN SUCRE-PATATE URCU)"}},"1806":{canton:"QUERO",parroquias:{"180650":"QUERO","180651":"RUMIPAMBA","180652":"YANAYACU - MOCHAPATA (CAB. EN YANAYACU)"}},"1807":{canton:"SAN PEDRO DE PELILEO",parroquias:{"180701":"PELILEO","180702":"PELILEO GRANDE","180750":"PELILEO","180751":"BEN\xCDTEZ (PACHANLICA)","180752":"BOL\xCDVAR","180753":"COTAL\xD3","180754":"CHIQUICHA (CAB. EN CHIQUICHA GRANDE)","180755":"EL ROSARIO (RUMICHACA)","180756":"GARC\xCDA MORENO (CHUMAQUI)","180757":"GUAMBAL\xD3 (HUAMBAL\xD3)","180758":"SALASACA"}},"1808":{canton:"SANTIAGO DE P\xCDLLARO",parroquias:{"180801":"CIUDAD NUEVA","180802":"P\xCDLLARO","180850":"P\xCDLLARO","180851":"BAQUERIZO MORENO","180852":"EMILIO MAR\xCDA TER\xC1N (RUMIPAMBA)","180853":"MARCOS ESPINEL (CHACATA)","180854":"PRESIDENTE URBINA (CHAGRAPAMBA -PATZUCUL)","180855":"SAN ANDR\xC9S","180856":"SAN JOS\xC9 DE POAL\xD3","180857":"SAN MIGUELITO"}},"1809":{canton:"TISALEO",parroquias:{"180950":"TISALEO","180951":"QUINCHICOTO"}}}},"19":{provincia:"ZAMORA CHINCHIPE",cantones:{"1901":{canton:"ZAMORA",parroquias:{"190101":"EL LIM\xD3N","190102":"ZAMORA","190150":"ZAMORA","190151":"CUMBARATZA","190152":"GUADALUPE","190153":"IMBANA (LA VICTORIA DE IMBANA)","190154":"PAQUISHA","190155":"SABANILLA","190156":"TIMBARA","190157":"ZUMBI","190158":"SAN CARLOS DE LAS MINAS"}},"1902":{canton:"CHINCHIPE",parroquias:{"190250":"ZUMBA","190251":"CHITO","190252":"EL CHORRO","190253":"EL PORVENIR DEL CARMEN","190254":"LA CHONTA","190255":"PALANDA","190256":"PUCAPAMBA","190257":"SAN FRANCISCO DEL VERGEL","190258":"VALLADOLID","190259":"SAN ANDR\xC9S"}},"1903":{canton:"NANGARITZA",parroquias:{"190350":"GUAYZIMI","190351":"ZURMI","190352":"NUEVO PARA\xCDSO"}},"1904":{canton:"YACUAMBI",parroquias:{"190450":"28 DE MAYO (SAN JOS\xC9 DE YACUAMBI)","190451":"LA PAZ","190452":"TUTUPALI"}},"1905":{canton:"YANTZAZA (YANZATZA)",parroquias:{"190550":"YANTZAZA (YANZATZA)","190551":"CHICA\xD1A","190552":"EL PANGUI","190553":"LOS ENCUENTROS"}},"1906":{canton:"EL PANGUI",parroquias:{"190650":"EL PANGUI","190651":"EL GUISME","190652":"PACHICUTZA","190653":"TUNDAYME"}},"1907":{canton:"CENTINELA DEL C\xD3NDOR",parroquias:{"190750":"ZUMBI","190751":"PAQUISHA","190752":"TRIUNFO-DORADO","190753":"PANGUINTZA"}},"1908":{canton:"PALANDA",parroquias:{"190850":"PALANDA","190851":"EL PORVENIR DEL CARMEN","190852":"SAN FRANCISCO DEL VERGEL","190853":"VALLADOLID","190854":"LA CANELA"}},"1909":{canton:"PAQUISHA",parroquias:{"190950":"PAQUISHA","190951":"BELLAVISTA","190952":"NUEVO QUITO"}}}},"20":{provincia:"GALAPAGOS",cantones:{"2001":{canton:"SAN CRIST\xD3BAL",parroquias:{"200150":"PUERTO BAQUERIZO MORENO","200151":"EL PROGRESO","200152":"ISLA SANTA MAR\xCDA (FLOREANA) (CAB. EN PTO. VELASCO IBARRA)"}},"2002":{canton:"ISABELA",parroquias:{"200250":"PUERTO VILLAMIL","200251":"TOM\xC1S DE BERLANGA (SANTO TOM\xC1S)"}},"2003":{canton:"SANTA CRUZ",parroquias:{"200350":"PUERTO AYORA","200351":"BELLAVISTA","200352":"SANTA ROSA (INCLUYE LA ISLA BALTRA)"}}}},"21":{provincia:"SUCUMBIOS",cantones:{"2101":{canton:"LAGO AGRIO",parroquias:{"210150":"NUEVA LOJA","210151":"CUYABENO","210152":"DURENO","210153":"GENERAL FARF\xC1N","210154":"TARAPOA","210155":"EL ENO","210156":"PACAYACU","210157":"JAMBEL\xCD","210158":"SANTA CECILIA","210159":"AGUAS NEGRAS"}},"2102":{canton:"GONZALO PIZARRO",parroquias:{"210250":"EL DORADO DE CASCALES","210251":"EL REVENTADOR","210252":"GONZALO PIZARRO","210253":"LUMBAQU\xCD","210254":"PUERTO LIBRE","210255":"SANTA ROSA DE SUCUMB\xCDOS"}},"2103":{canton:"PUTUMAYO",parroquias:{"210350":"PUERTO EL CARMEN DEL PUTUMAYO","210351":"PALMA ROJA","210352":"PUERTO BOL\xCDVAR (PUERTO MONT\xDAFAR)","210353":"PUERTO RODR\xCDGUEZ","210354":"SANTA ELENA"}},"2104":{canton:"SHUSHUFINDI",parroquias:{"210450":"SHUSHUFINDI","210451":"LIMONCOCHA","210452":"PA\xD1ACOCHA","210453":"SAN ROQUE (CAB. EN SAN VICENTE)","210454":"SAN PEDRO DE LOS COFANES","210455":"SIETE DE JULIO"}},"2105":{canton:"SUCUMB\xCDOS",parroquias:{"210550":"LA BONITA","210551":"EL PLAY\xD3N DE SAN FRANCISCO","210552":"LA SOF\xCDA","210553":"ROSA FLORIDA","210554":"SANTA B\xC1RBARA"}},"2106":{canton:"CASCALES",parroquias:{"210650":"EL DORADO DE CASCALES","210651":"SANTA ROSA DE SUCUMB\xCDOS","210652":"SEVILLA"}},"2107":{canton:"CUYABENO",parroquias:{"210750":"TARAPOA","210751":"CUYABENO","210752":"AGUAS NEGRAS"}}}},"22":{provincia:"ORELLANA",cantones:{"2201":{canton:"ORELLANA",parroquias:{"220150":"PUERTO FRANCISCO DE ORELLANA (EL COCA)","220151":"DAYUMA","220152":"TARACOA (NUEVA ESPERANZA: YUCA)","220153":"ALEJANDRO LABAKA","220154":"EL DORADO","220155":"EL ED\xC9N","220156":"GARC\xCDA MORENO","220157":"IN\xC9S ARANGO (CAB. EN WESTERN)","220158":"LA BELLEZA","220159":"NUEVO PARA\xCDSO (CAB. EN UNI\xD3N","220160":"SAN JOS\xC9 DE GUAYUSA","220161":"SAN LUIS DE ARMENIA"}},"2202":{canton:"AGUARICO",parroquias:{"220201":"TIPITINI","220250":"NUEVO ROCAFUERTE","220251":"CAPIT\xC1N AUGUSTO RIVADENEYRA","220252":"CONONACO","220253":"SANTA MAR\xCDA DE HUIRIRIMA","220254":"TIPUTINI","220255":"YASUN\xCD"}},"2203":{canton:"LA JOYA DE LOS SACHAS",parroquias:{"220350":"LA JOYA DE LOS SACHAS","220351":"ENOKANQUI","220352":"POMPEYA","220353":"SAN CARLOS","220354":"SAN SEBASTI\xC1N DEL COCA","220355":"LAGO SAN PEDRO","220356":"RUMIPAMBA","220357":"TRES DE NOVIEMBRE","220358":"UNI\xD3N MILAGRE\xD1A"}},"2204":{canton:"LORETO",parroquias:{"220450":"LORETO","220451":"AVILA (CAB. EN HUIRUNO)","220452":"PUERTO MURIALDO","220453":"SAN JOS\xC9 DE PAYAMINO","220454":"SAN JOS\xC9 DE DAHUANO","220455":"SAN VICENTE DE HUATICOCHA"}}}},"23":{provincia:"SANTO DOMINGO DE LOS TSACHILAS",cantones:{"2301":{canton:"SANTO DOMINGO",parroquias:{"230101":"ABRAHAM CALAZAC\xD3N","230102":"BOMBOL\xCD","230103":"CHIGUILPE","230104":"R\xCDO TOACHI","230105":"R\xCDO VERDE","230106":"SANTO DOMINGO DE LOS COLORADOS","230107":"ZARACAY","230150":"SANTO DOMINGO DE LOS COLORADOS","230151":"ALLURIQU\xCDN","230152":"PUERTO LIM\xD3N","230153":"LUZ DE AM\xC9RICA","230154":"SAN JACINTO DEL B\xDAA","230155":"VALLE HERMOSO","230156":"EL ESFUERZO","230157":"SANTA MAR\xCDA DEL TOACHI"}}}},"24":{provincia:"SANTA ELENA",cantones:{"2401":{canton:"SANTA ELENA",parroquias:{"240101":"BALLENITA","240102":"SANTA ELENA","240150":"SANTA ELENA","240151":"ATAHUALPA","240152":"COLONCHE","240153":"CHANDUY","240154":"MANGLARALTO","240155":"SIM\xD3N BOL\xCDVAR (JULIO MORENO)","240156":"SAN JOS\xC9 DE ANC\xD3N"}},"2402":{canton:"LA LIBERTAD",parroquias:{"240250":"LA LIBERTAD"}},"2403":{canton:"SALINAS",parroquias:{"240301":"CARLOS ESPINOZA LARREA","240302":"GRAL. ALBERTO ENR\xCDQUEZ GALLO","240303":"VICENTE ROCAFUERTE","240304":"SANTA ROSA","240350":"SALINAS","240351":"ANCONCITO","240352":"JOS\xC9 LUIS TAMAYO (MUEY)"}}}}};var Ve=class o{provinciasList=[];constructor(){this.procesarDatosProvincias()}procesarDatosProvincias(){if(!mt){console.error("Error: No hay datos de provincias para procesar");return}this.provinciasList=Object.keys(mt).map(t=>{let e=mt[t],i=e.cantones?Object.keys(e.cantones).map(n=>{let c=e.cantones[n],p=c.parroquias?Object.keys(c.parroquias).map(C=>({codigo:C,parroquia:c.parroquias[C]})):[];return{codigo:n,canton:c.canton,parroquias:p}}):[];return{codigo:t,provincia:e.provincia,cantones:i}})}getProvincias(){return this.provinciasList}getCantones(t){return this.provinciasList.find(e=>e.codigo===t)?.cantones||[]}getParroquias(t,e){return this.getCantones(t).find(n=>n.codigo===e)?.parroquias||[]}filtrarProvincias(t){return t=t.toLowerCase(),this.provinciasList.filter(e=>e.provincia.toLowerCase().includes(t))}filtrarCantones(t,e){return e=e.toLowerCase(),t.filter(i=>i.canton.toLowerCase().includes(e))}filtrarParroquias(t,e){return e=e.toLowerCase(),t.filter(i=>i.parroquia.toLowerCase().includes(e))}static \u0275fac=function(e){return new(e||o)};static \u0275prov=Oe({token:o,factory:o.\u0275fac,providedIn:"root"})};var Wi=["mapContainer"],Ki=()=>({width:"600px"}),Xi=()=>[1,2,3,4,5],er=()=>[5,10,20],tr=(o,t)=>t.place_id;function ir(o,t){o&1&&(r(0,"div",29)(1,"div",30),d(2,"p-skeleton",31),r(3,"div",32),d(4,"p-skeleton",33)(5,"p-skeleton",34),a()()())}function rr(o,t){o&1&&(r(0,"div",19),w(1,ir,6,0,"div",29,D),a()),o&2&&(s(),G(T(0,Xi)))}function ar(o,t){o&1&&d(0,"i",43)}function or(o,t){if(o&1){let e=b();r(0,"div",37),h("click",function(){let n=u(e).$implicit,c=m(2);return g(c.selectUser(n))}),r(1,"div",30)(2,"div",38),d(3,"i",39),a(),r(4,"div",32)(5,"h3",40),l(6),a(),r(7,"p",41),l(8),a(),r(9,"div",42),f(10,ar,1,0,"i",43),a()(),d(11,"i",44),a()()}if(o&2){let e=t.$implicit,i=m(2);ze("border-primary-500",(i.selectedUser==null?null:i.selectedUser.usucodv)===e.usucodv)("bg-primary-50",(i.selectedUser==null?null:i.selectedUser.usucodv)===e.usucodv)("dark:bg-primary-900",(i.selectedUser==null?null:i.selectedUser.usucodv)===e.usucodv),s(6),x(" ",e.usunombre," "),s(2),B(" ",e.usucod," \u2022 ",e.usucodv," "),s(2),A(e.ubicacion?10:-1)}}function nr(o,t){o&1&&(r(0,"div",36),d(1,"i",45),r(2,"p",46),l(3," No se encontraron usuarios "),a()())}function sr(o,t){if(o&1&&(r(0,"div",20),w(1,or,12,10,"div",35,D),f(3,nr,4,0,"div",36),a()),o&2){let e=m();s(),G(e.paginatedUsers),s(2),A(e.filteredUsers.length===0?3:-1)}}function cr(o,t){if(o&1){let e=b();r(0,"p-paginator",49),h("onPageChange",function(n){u(e);let c=m(2);return g(c.onPageChange(n))}),a()}if(o&2){let e=m(2);v("rows",e.itemsPerPage)("totalRecords",e.filteredUsers.length)("first",e.first)("rowsPerPageOptions",T(4,er))}}function lr(o,t){if(o&1&&(r(0,"div",47),f(1,cr,1,5,"p-paginator",48),a()),o&2){let e=m();s(),A(!e.loading&&e.filteredUsers.length>0?1:-1)}}function dr(o,t){o&1&&(r(0,"div",70),l(1," \u26A0\uFE0F Seleccione un usuario de la lista para crear una geocerca "),a())}function mr(o,t){if(o&1){let e=b();r(0,"div",64)(1,"div",67)(2,"span",68),l(3,"Crear Geocerca"),a(),r(4,"p-button",69),h("click",function(){u(e);let n=m(2);return g(n.iniciarCreacionGeocerca())}),a()(),f(5,dr,2,0,"div",70),a()}if(o&2){let e=m(2);s(4),v("disabled",!e.selectedUser),s(),A(e.selectedUser?-1:5)}}function pr(o,t){if(o&1&&(r(0,"div",72),d(1,"i"),r(2,"span"),l(3),a()()),o&2){let e=t.$implicit;s(),R(e.icon),s(2),_(e.label)}}function ur(o,t){if(o&1){let e=b();r(0,"div",82)(1,"label",92),l(2),a(),r(3,"p-slider",93),O("ngModelChange",function(n){u(e);let c=m(3);return y(c.radioGeocerca,n)||(c.radioGeocerca=n),g(n)}),h("onSlideEnd",function(){u(e);let n=m(3);return g(n.actualizarRadioCirculo())}),a(),r(4,"div",94)(5,"span"),l(6,"50m"),a(),r(7,"span"),l(8,"2000m"),a()()()}if(o&2){let e=m(3);s(2),x(" Radio: ",e.radioGeocerca," metros "),s(),L("ngModel",e.radioGeocerca),v("min",50)("max",2e3)("step",10)}}function gr(o,t){o&1&&(r(0,"span",97),l(1," \u2713 Listo para continuar "),a())}function fr(o,t){if(o&1){let e=b();r(0,"div",82)(1,"div",95)(2,"div",96),l(3),f(4,gr,2,0,"span",97),a(),r(5,"p-button",98),h("click",function(){u(e);let n=m(3);return g(n.deshacerUltimoPunto())}),a()()()}if(o&2){let e=m(3);s(3),x(" Puntos agregados: ",e.coordenadasGeocerca.length," "),s(),A(e.coordenadasGeocerca.length>=3?4:-1),s(),v("text",!0)}}function Ar(o,t){o&1&&(r(0,"span")(1,"strong"),l(2,"C\xEDrculo:"),a(),l(3," Haga clic en el mapa para colocar el centro, luego ajuste el radio con el slider "),a())}function hr(o,t){o&1&&(r(0,"span")(1,"strong"),l(2,"Pol\xEDgono:"),a(),l(3," Haga clic en el mapa para agregar puntos numerados (m\xEDnimo 3). Use "),d(4,"i",99),l(5," para deshacer el \xFAltimo punto. "),a())}function vr(o,t){if(o&1){let e=b();r(0,"div",65)(1,"div",71)(2,"div",72),d(3,"i",73),r(4,"span",74),l(5,"Creando Geocerca"),a()(),r(6,"p-button",75),h("click",function(){u(e);let n=m(2);return g(n.cancelarCreacionGeocerca())}),a()(),r(7,"div",76)(8,"div",77),l(9,"Usuario asignado: "),a(),r(10,"div",72),d(11,"i",78),r(12,"span",79),l(13),a(),r(14,"span",80),l(15),a()()(),r(16,"div",81)(17,"div",82)(18,"label",83),l(19," Tipo de Geocerca "),a(),r(20,"p-select",84),O("ngModelChange",function(n){u(e);let c=m(2);return y(c.tipoGeocerca,n)||(c.tipoGeocerca=n),g(n)}),h("onChange",function(){u(e);let n=m(2);return g(n.onTipoGeocercaChange())}),M(21,pr,4,3,"ng-template",85),a()(),f(22,ur,9,5,"div",82),f(23,fr,6,3,"div",82),a(),r(24,"div",86)(25,"div",87),d(26,"i",88),f(27,Ar,4,0,"span"),f(28,hr,6,0,"span"),a()(),r(29,"div",89)(30,"p-button",90),h("click",function(){u(e);let n=m(2);return g(n.limpiarDibujo())}),a(),r(31,"p-button",91),h("click",function(){u(e);let n=m(2);return g(n.abrirDialogoGeocerca())}),a()()()}if(o&2){let e=m(2);s(6),v("text",!0),s(7),_(e.selectedUser==null?null:e.selectedUser.usunombre),s(2),x("(",e.selectedUser==null?null:e.selectedUser.usucod,")"),s(5),L("ngModel",e.tipoGeocerca),v("options",e.tiposGeocerca),s(2),A(e.tipoGeocerca==="circular"?22:-1),s(),A(e.tipoGeocerca==="poligono"&&e.coordenadasGeocerca.length>0?23:-1),s(4),A(e.tipoGeocerca==="circular"?27:-1),s(),A(e.tipoGeocerca==="poligono"?28:-1),s(2),v("text",!0),s(),v("disabled",!e.centroGeocerca||e.tipoGeocerca==="poligono"&&e.coordenadasGeocerca.length<3)}}function Cr(o,t){if(o&1){let e=b();r(0,"div",103),h("click",function(){let n=u(e).$implicit,c=m(3);return g(c.selectSearchResult(n))}),r(1,"div",104),d(2,"i",105),r(3,"span",106),l(4),a()(),d(5,"i",107),a()}if(o&2){let e=t.$implicit;s(4),_(e.display_name)}}function xr(o,t){if(o&1&&(r(0,"div",66)(1,"div",100),l(2," Resultados de b\xFAsqueda: "),a(),r(3,"div",101),w(4,Cr,6,1,"div",102,tr),a()()),o&2){let e=m(2);s(4),G(e.searchResults.slice(0,3))}}function br(o,t){if(o&1){let e=b();r(0,"div",50)(1,"div",51)(2,"div",52)(3,"div",8),d(4,"i",53),a(),r(5,"div",54)(6,"h2",10),l(7," Ubicaciones "),a(),r(8,"p",11),l(9," Mapa de geolocalizaci\xF3n de usuarios "),a()()(),r(10,"div",55)(11,"button",56),h("click",function(){u(e);let n=m();return g(n.refreshData())}),d(12,"i",57),a()()(),r(13,"div",58)(14,"div",32)(15,"p-iconField",13)(16,"p-inputIcon"),d(17,"i",59),a(),r(18,"input",60,1),O("ngModelChange",function(n){u(e);let c=m();return y(c.searchLocation,n)||(c.searchLocation=n),g(n)}),h("keyup.enter",function(){u(e);let n=m();return g(n.searchLocationOnMap())}),a()()(),r(20,"div",61)(21,"p-button",62),h("click",function(){u(e);let n=m();return g(n.searchLocationOnMap())}),a(),r(22,"p-button",63),h("click",function(){u(e);let n=m();return g(n.clearLocationSearch())}),a()()(),f(23,mr,6,2,"div",64),f(24,vr,32,11,"div",65),f(25,xr,6,0,"div",66),a()}if(o&2){let e=m();s(18),L("ngModel",e.searchLocation),s(3),v("loading",e.searchingLocation),s(),v("text",!0),s(),A(e.creandoGeocerca?-1:23),s(),A(e.creandoGeocerca?24:-1),s(),A(e.searchResults.length>0?25:-1)}}function Er(o,t){o&1&&(r(0,"div",25)(1,"div",108),d(2,"i",109),r(3,"p",110),l(4,"Cargando mapa..."),a()()())}function Sr(o,t){o&1&&d(0,"i",117)}function _r(o,t){o&1&&d(0,"i",118)}function Lr(o,t){o&1&&d(0,"i",119)}function yr(o,t){o&1&&(r(0,"p",121),d(1,"i",149),l(2," Validando c\xF3digo... "),a())}function Or(o,t){o&1&&d(0,"i",150)}function Nr(o,t){o&1&&d(0,"i",151)}function Ir(o,t){if(o&1&&(r(0,"p"),f(1,Or,1,0,"i",150),f(2,Nr,1,0,"i",151),l(3),a()),o&2){let e=m(2);R(e.getValidationMessageClass()),s(),A(e.codeValidationResult==="valid"?1:-1),s(),A(e.codeValidationResult==="invalid"?2:-1),s(),x(" ",e.codeValidationMessage," ")}}function Rr(o,t){if(o&1){let e=b();r(0,"form",111)(1,"div",112)(2,"div")(3,"label",113),l(4," C\xF3digo de la Geocerca * "),a(),r(5,"div",114),d(6,"input",115),r(7,"div",116),f(8,Sr,1,0,"i",117),f(9,_r,1,0,"i",118),f(10,Lr,1,0,"i",119),a()(),r(11,"div",120),f(12,yr,3,0,"p",121),f(13,Ir,4,5,"p",122),a()(),r(14,"div")(15,"label",123),l(16," Nombre de la Geocerca * "),a(),d(17,"input",124),a(),r(18,"div")(19,"label",125),l(20," Provincia * "),a(),r(21,"p-autocomplete",126),h("completeMethod",function(n){u(e);let c=m();return g(c.filtrarProvincias(n))})("onSelect",function(n){u(e);let c=m();return g(c.onProvinciaSeleccionada(n))})("onClear",function(){u(e);let n=m();return g(n.onProvinciaLimpiada())}),a()(),r(22,"div")(23,"label",127),l(24," Ciudad * "),a(),r(25,"p-autocomplete",128),h("completeMethod",function(n){u(e);let c=m();return g(c.filtrarCiudades(n))})("onSelect",function(n){u(e);let c=m();return g(c.onCiudadSeleccionada(n))})("onClear",function(){u(e);let n=m();return g(n.onCiudadLimpiada())}),a()(),r(26,"div")(27,"label",129),l(28," Sector * "),a(),r(29,"p-autocomplete",130),h("completeMethod",function(n){u(e);let c=m();return g(c.filtrarSectores(n))}),a()(),r(30,"div",131)(31,"label",132),l(32," Direcci\xF3n de Referencia * "),a(),d(33,"input",133),a(),r(34,"div")(35,"label",134),l(36," Pa\xEDs * "),a(),d(37,"input",135),a(),r(38,"div")(39,"div",136)(40,"label",137),l(41," Prioridad (1-10) * "),a(),r(42,"span",138),l(43),a()(),d(44,"p-slider",139),r(45,"div",94)(46,"span"),l(47,"Baja"),a(),r(48,"span"),l(49,"Alta"),a()()(),r(50,"div",140),d(51,"p-toggleSwitch",141),r(52,"label",142),l(53," Geocerca activa "),a()(),r(54,"div",131)(55,"label",143),l(56," Descripci\xF3n * "),a(),r(57,"textarea",144),l(58,"                    "),a()()(),r(59,"div",145)(60,"h4",146),l(61,"Resumen de la Geocerca"),a(),r(62,"div",147)(63,"div")(64,"span",110),l(65,"Tipo:"),a(),r(66,"span",148),l(67),a()(),r(68,"div")(69,"span",110),l(70,"Puntos:"),a(),r(71,"span",148),l(72),a()(),r(73,"div")(74,"span",110),l(75,"Centro:"),a(),r(76,"span",148),l(77),a()(),r(78,"div")(79,"span",110),l(80,"Usuario:"),a(),r(81,"span",148),l(82),a()()()()()}if(o&2){let e,i=m();v("formGroup",i.geocercaForm),s(6),R(i.getCodeInputClass()),s(2),A(i.validatingCode?8:-1),s(),A(i.codeValidationResult==="valid"?9:-1),s(),A(i.codeValidationResult==="invalid"?10:-1),s(2),A(i.validatingCode?12:-1),s(),A(i.codeValidationMessage&&!i.validatingCode?13:-1),s(8),v("suggestions",i.provinciasFiltradas)("dropdown",!0),s(4),v("suggestions",i.ciudadesFiltradas)("dropdown",!0)("disabled",!i.provinciaSeleccionada),s(4),v("suggestions",i.sectoresFiltrados)("dropdown",!0)("disabled",!i.ciudadSeleccionada),s(14),x(" ",((e=i.geocercaForm.get("geocpri"))==null?null:e.value)||1," "),s(),v("min",1)("max",10)("step",1),s(23),_(i.tipoGeocerca==="circular"?"Circular":"Pol\xEDgono"),s(5),_(i.coordenadasGeocerca.length),s(5),B("",(i.centroGeocerca==null||i.centroGeocerca.lat==null?null:i.centroGeocerca.lat.toFixed(6))||"N/A",", ",(i.centroGeocerca==null||i.centroGeocerca.lng==null?null:i.centroGeocerca.lng.toFixed(6))||"N/A"),s(5),_(i.selectedUser==null?null:i.selectedUser.usunombre)}}function Tr(o,t){if(o&1){let e=b();r(0,"div",152)(1,"p-button",153),h("click",function(){u(e);let n=m();return g(n.cerrarDialogoGeocerca())}),a(),r(2,"p-button",154),h("click",function(){u(e);let n=m();return g(n.guardarGeocerca())}),a()()}o&2&&(s(),v("text",!0))}var pt=class o{constructor(t,e,i,n,c,p,C){this.formBuilder=t;this.userService=e;this.geocercaService=i;this.authService=n;this.msgService=c;this.http=p;this.provinceService=C}mapContainer;validatingCode=!1;codeValidationResult=null;codeValidationMessage="";codeValidationSubject=new j;destroy$=new j;cantonesList=[];parroquiasList=[];provinciasFiltradas=[];ciudadesFiltradas=[];sectoresFiltrados=[];provinciaSeleccionada=null;ciudadSeleccionada=null;sectorSeleccionado=null;users=[];filteredUsers=[];paginatedUsers=[];selectedUser=null;loading=!0;first=0;itemsPerPage=5;userForm;map=null;userMarkers=new Map;markerClusterGroup=null;searchLocation="";searchingLocation=!1;searchResults=[];searchMarker=null;creandoGeocerca=!1;tipoGeocerca="circular";geocercaForm;geocercaDialog=!1;coordenadasGeocerca=[];centroGeocerca=null;radioGeocerca=200;dibujoLayer=null;formaActual=null;marcadoresPuntos=[];lineasTemporales=[];tiposGeocerca=[{label:"Circular",value:"circular",icon:"pi pi-circle"},{label:"Pol\xEDgono",value:"poligono",icon:"pi pi-stop"}];ngOnInit(){this.getAllUsers(),this.initializeForm(),this.initializeGeocercaForm(),this.inicializarProvincias(),this.setupCodeValidation()}ngAfterViewInit(){requestAnimationFrame(()=>{this.initializeMap()})}inicializarProvincias(){this.provinciasFiltradas=this.provinceService.getProvincias()}initializeForm(){this.userForm=this.formBuilder.group({usucod:["",[N.required]],usunombre:["",[N.required]],usuemail:["",[N.required,N.email]],usuestado:[0,[N.required]],usuapp:[!1],usuwebapp:[!1],usucodv:["",[N.required]],usugeol:[!1]})}initializeGeocercaForm(){this.geocercaForm=this.formBuilder.group({geoccod:["",[N.required,N.minLength(3)]],geocnom:["",[N.required,N.minLength(3)]],geocsec:["",[N.required]],geocdirre:["",[N.required]],geocciud:["",[N.required]],geocprov:["",[N.required]],geocpais:["ECUADOR",[N.required]],geocpri:[5,[N.required,N.min(1),N.max(10)]],geocdesc:["",[N.required]],geocact:[!0]})}initializeMap(){try{let t=this.mapContainer.nativeElement;if(!t){console.error("Contenedor del mapa no encontrado");return}delete E.Icon.Default.prototype._getIconUrl,E.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"}),this.map=E.map(t,{center:[-.2298,-78.5249],zoom:13,zoomControl:!1}),E.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:"\xA9 OpenStreetMap contributors"}).addTo(this.map),E.marker([-.2298,-78.5249]).addTo(this.map).bindPopup("<b>Quito, Ecuador</b><br>Ubicaci\xF3n principal").openPopup(),this.markerClusterGroup||(this.markerClusterGroup=E.markerClusterGroup({showCoverageOnHover:!1,maxClusterRadius:50,spiderfyOnMaxZoom:!0}),this.map.addLayer(this.markerClusterGroup)),!this.loading&&this.users.length>0&&this.addUserMarkersToMap(),requestAnimationFrame(()=>{this.map?.invalidateSize()}),console.log("Mapa inicializado correctamente")}catch(t){console.error("Error inicializando el mapa:",t),this.showMapFallback()}}setupCodeValidation(){this.codeValidationSubject.pipe(qe(500),je(),U(this.destroy$)).subscribe(t=>{t&&t.length>=3?this.validateGeocercaCode(t):this.resetCodeValidation()}),this.geocercaForm.get("geoccod")?.valueChanges.pipe(U(this.destroy$)).subscribe(t=>{t?(this.codeValidationResult="pending",this.codeValidationSubject.next(t)):this.resetCodeValidation()})}validateGeocercaCode(t){this.validatingCode=!0,this.codeValidationResult="pending",this.geocercaService.validarCodigoGeocerca(t).pipe(U(this.destroy$)).subscribe({next:e=>{this.validatingCode=!1,this.codeValidationResult="valid",this.codeValidationMessage="C\xF3digo disponible"},error:e=>{if(this.validatingCode=!1,e.status===400&&e.error){let i=e.error;i.errorCode==="BAD_REQUEST"&&i.message?.includes("ya existe")?(this.codeValidationResult="invalid",this.codeValidationMessage=this.extractCodeExistsMessage(i.message)):(this.codeValidationResult="invalid",this.codeValidationMessage=i.message||"C\xF3digo inv\xE1lido")}else console.error("Error validando c\xF3digo:",e),this.codeValidationResult="invalid",this.codeValidationMessage="Error al validar el c\xF3digo. Intente nuevamente."}})}extractCodeExistsMessage(t){let e=t.match(/'([^']+)'/);return e?`C\xF3digo '${e[1]}' ya est\xE1 en uso`:"Este c\xF3digo ya est\xE1 en uso"}resetCodeValidation(){this.validatingCode=!1,this.codeValidationResult=null,this.codeValidationMessage=""}getCodeInputClass(){let t="w-full";return this.codeValidationResult==="valid"?`${t} border-green-300 focus:border-green-500 focus:ring-green-200`:this.codeValidationResult==="invalid"?`${t} border-red-300 focus:border-red-500 focus:ring-red-200`:t}getValidationMessageClass(){return this.codeValidationResult==="valid"?"text-xs text-green-600 flex items-center gap-1":this.codeValidationResult==="invalid"?"text-xs text-red-600 flex items-center gap-1":"text-xs text-surface-500"}getAllUsers(){this.loading=!0,this.userService.getAllListUser().subscribe({next:t=>{this.users=t,this.filteredUsers=[...this.users],this.updatePagination(),this.loading=!1,this.map&&this.markerClusterGroup&&this.addUserMarkersToMap()},error:t=>{console.error("Error al cargar usuarios:",t),this.loading=!1,this.msgService.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los usuarios"})}})}deshacerUltimoPunto(){if(this.coordenadasGeocerca.length!==0){if(this.coordenadasGeocerca.pop(),this.marcadoresPuntos.length>0){let t=this.marcadoresPuntos.pop();t&&this.dibujoLayer&&this.dibujoLayer.removeLayer(t)}this.formaActual&&this.dibujoLayer&&(this.dibujoLayer.removeLayer(this.formaActual),this.formaActual=null),this.lineasTemporales.forEach(t=>{this.dibujoLayer&&this.dibujoLayer.removeLayer(t)}),this.lineasTemporales=[],this.coordenadasGeocerca.length>=2?this.actualizarPoligono():this.coordenadasGeocerca.length===0&&(this.centroGeocerca=null),this.msgService.add({severity:"info",summary:"Punto eliminado",detail:`\xDAltimo punto eliminado. Puntos restantes: ${this.coordenadasGeocerca.length}`})}}onSearch(t){let e=t.target.value.toLowerCase();this.filteredUsers=this.users.filter(i=>i.usunombre.toLowerCase().includes(e)||i.usucod.toLowerCase().includes(e)||i.usuemail.toLowerCase().includes(e)),this.first=0,this.updatePagination()}onPageChange(t){this.first=t.first,this.itemsPerPage=t.rows,this.updatePagination()}updatePagination(){let t=this.first,e=t+this.itemsPerPage;this.paginatedUsers=this.filteredUsers.slice(t,e)}selectUser(t){if(this.selectedUser=t,t.ubicacion&&this.map){this.map.setView([t.ubicacion.geublat,t.ubicacion.geublon],15);let e=this.userMarkers.get(t.usucod);e&&e.openPopup()}this.msgService.add({severity:"info",summary:"Usuario seleccionado",detail:`${t.usunombre} seleccionado para geocercas`})}configurarEventosMapa(){this.map&&(this.map.off("click"),setTimeout(()=>{this.tipoGeocerca==="circular"?(console.log("Configurando eventos para C\xCDRCULO"),this.map.on("click",this.onMapClickCircular.bind(this))):(console.log("Configurando eventos para POL\xCDGONO"),this.map.on("click",this.onMapClickPoligono.bind(this)))},100))}onMapClickCircular(t){if(!this.creandoGeocerca)return;let{lat:e,lng:i}=t.latlng;this.centroGeocerca={lat:e,lng:i},this.formaActual&&this.dibujoLayer&&this.dibujoLayer.removeLayer(this.formaActual),this.formaActual=E.circle([e,i],{radius:this.radioGeocerca,color:"#3b82f6",fillColor:"#3b82f6",fillOpacity:.2}),this.dibujoLayer.addLayer(this.formaActual),this.generarCoordenadasCirculo(e,i,this.radioGeocerca),this.msgService.add({severity:"success",summary:"Geocerca circular creada",detail:"Ajuste el radio si es necesario y proceda a guardar"})}onMapClickPoligono(t){let{lat:e,lng:i}=t.latlng;this.coordenadasGeocerca.push({lat:e,lng:i}),this.agregarMarcadorPunto(e,i,this.coordenadasGeocerca.length),this.actualizarPoligono(),this.msgService.add({severity:"info",summary:`Punto ${this.coordenadasGeocerca.length} agregado`,detail:this.coordenadasGeocerca.length>=3?"Ya puede continuar o agregar m\xE1s puntos":`Necesita ${3-this.coordenadasGeocerca.length} puntos m\xE1s`})}agregarMarcadorPunto(t,e,i){if(!this.dibujoLayer)return;let n=E.divIcon({className:"numero-punto-custom",iconSize:[30,30],html:`<div style="
            background-color: #8b5cf6;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 3px solid white;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
            font-weight: bold;
            font-size: 14px;
            box-sizing: border-box;
            cursor: move;
        ">${i}</div>`,iconAnchor:[15,15]}),c=E.marker([t,e],{icon:n,draggable:!0});c.addTo(this.dibujoLayer),this.marcadoresPuntos.push(c),c.bindTooltip(`Punto ${i}<br>Lat: ${t.toFixed(6)}<br>Lng: ${e.toFixed(6)}`,{permanent:!1,direction:"top"}),c.on("dragstart",()=>{c.closeTooltip();let p=c._icon;p&&p.classList.add("dragging")}),c.on("drag",p=>{let C=p.target.getLatLng();c.setTooltipContent(`Punto ${i}<br>Lat: ${C.lat.toFixed(6)}<br>Lng: ${C.lng.toFixed(6)}`)}),c.on("dragend",p=>{let C=p.target.getLatLng(),S=c._icon;S&&S.classList.remove("dragging");let oe=this.marcadoresPuntos.findIndex(ht=>ht===c);oe!==-1&&(this.coordenadasGeocerca[oe]={lat:C.lat,lng:C.lng},this.actualizarPoligono(),c.setTooltipContent(`Punto ${i}<br>Lat: ${C.lat.toFixed(6)}<br>Lng: ${C.lng.toFixed(6)}`),this.msgService.add({severity:"success",summary:`Punto ${i} movido`,detail:`Nueva posici\xF3n: ${C.lat.toFixed(6)}, ${C.lng.toFixed(6)}`}))})}crearLineasPunteadas(){if(!(this.coordenadasGeocerca.length<2))for(let t=0;t<this.coordenadasGeocerca.length;t++){let e=this.coordenadasGeocerca[t],i=this.coordenadasGeocerca[(t+1)%this.coordenadasGeocerca.length];if(this.coordenadasGeocerca.length>=3||t<this.coordenadasGeocerca.length-1){let n=E.polyline([[e.lat,e.lng],[i.lat,i.lng]],{color:"#8b5cf6",weight:2,opacity:.8,dashArray:"8, 6"});this.lineasTemporales.push(n),this.dibujoLayer.addLayer(n)}}}actualizarPoligono(){if(!(this.coordenadasGeocerca.length<2)){if(this.formaActual&&this.dibujoLayer&&this.dibujoLayer.removeLayer(this.formaActual),this.lineasTemporales.forEach(t=>{this.dibujoLayer&&this.dibujoLayer.removeLayer(t)}),this.lineasTemporales=[],this.crearLineasPunteadas(),this.coordenadasGeocerca.length>=3){let t=this.coordenadasGeocerca.map(i=>[i.lat,i.lng]),e=E.polygon(t,{stroke:!1,fillColor:"#8b5cf6",fillOpacity:.15});this.formaActual=e,this.dibujoLayer.addLayer(e)}this.calcularCentroPoligono()}}calcularCentroPoligono(){if(this.coordenadasGeocerca.length===0)return;let t=this.coordenadasGeocerca.reduce((i,n)=>i+n.lat,0),e=this.coordenadasGeocerca.reduce((i,n)=>i+n.lng,0);this.centroGeocerca={lat:t/this.coordenadasGeocerca.length,lng:e/this.coordenadasGeocerca.length}}generarCoordenadasCirculo(t,e,i){this.coordenadasGeocerca=[];let n=32;for(let c=0;c<n;c++){let p=c*2*Math.PI/n,C=i/111320*Math.cos(p),S=i/(111320*Math.cos(t*Math.PI/180))*Math.sin(p);this.coordenadasGeocerca.push({lat:t+C,lng:e+S})}}showMapFallback(){let t=this.mapContainer.nativeElement;t.innerHTML=`
      <div class="flex items-center justify-center h-full bg-surface-100 dark:bg-surface-800 rounded-lg">
        <div class="text-center">
          <i class="pi pi-exclamation-triangle text-4xl text-orange-500 mb-4"></i>
          <p class="text-surface-600 dark:text-surface-400 mb-2">Error al cargar el mapa</p>
          <p class="text-sm text-surface-500">Verifique que Leaflet est\xE9 instalado correctamente</p>
        </div>
      </div>
    `,this.map=null}addUserMarkersToMap(){!this.map||!this.markerClusterGroup||(this.markerClusterGroup.clearLayers(),this.userMarkers.clear(),this.users.forEach(t=>{if(t.ubicacion?.geublat&&t.ubicacion?.geublon){let e=E.divIcon({html:`
                    <div class="relative">
                        <div class="w-8 h-8 bg-blue-500 rounded-full border-2 border-white shadow-lg flex items-center justify-center">
                            <svg class="w-4 h-4 text-white" viewBox="0 0 20 20">
                              <path
                                fill="currentColor"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"
                              />
                            </svg>

                        </div>
                        <div class="absolute -top-1 -right-1 w-3 h-3 bg-green-400 border border-white rounded-full"></div>
                    </div>
                `,className:"custom-user-marker",iconSize:[32,32],iconAnchor:[16,16]}),i=E.marker([t.ubicacion.geublat,t.ubicacion.geublon],{icon:e}),n=this.createUserPopupContent(t);i.bindPopup(n,{maxWidth:240,className:"custom-popup"}),this.userMarkers.set(t.usucod,i),this.markerClusterGroup?.addLayer(i)}}))}createUserPopupContent(t){let e=new Date(t.ubicacion.geubfech).toLocaleString("es-EC",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"});return`
        <div class="bg-white rounded-lg shadow-sm border-0 overflow-hidden">
            <!-- Content -->
            <div class="p-2 space-y-1.5">
                <!-- C\xF3digos -->
                <div class="flex items-center space-x-1.5 text-xs">
                    <svg class="w-2.5 h-2.5 text-gray-400" viewBox="0 0 20 20">
                      <path
                        fill="currentColor"
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1z"
                      />
                    </svg>

                    <span class="text-gray-700 font-medium">${t.usucod}</span>
                    <span class="text-gray-400">\u2022</span>
                    <span class="text-gray-500">${t.usucodv}</span>
                </div>

                <!-- \xDAltima ubicaci\xF3n -->
                <div class="flex items-center space-x-1.5 text-xs">
                    <svg class="w-2.5 h-2.5 text-gray-400" viewBox="0 0 20 20">
                      <path
                        fill="currentColor"
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"
                      />
                    </svg>

                    <span class="text-gray-500">\xDAltima ubicaci\xF3n: ${e}</span>
                </div>

                <!-- Estado activo -->
                <div class="flex items-center space-x-1.5 mt-2">
                    <div class="w-2 h-2 bg-green-400 rounded-full"></div>
                    <span class="text-xs text-green-600 font-medium">Usuario activo</span>
                </div>
            </div>
        </div>
    `}searchLocationOnMap(){if(!this.searchLocation.trim()){this.msgService.add({severity:"warn",summary:"Advertencia",detail:"Ingrese una ubicaci\xF3n para buscar"});return}this.searchingLocation=!0,this.searchResults=[];let e=`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(this.searchLocation.trim())}&limit=5&countrycodes=ec&addressdetails=1`;this.http.get(e).subscribe({next:i=>{this.searchingLocation=!1,i&&i.length>0?(this.searchResults=i,i.length===1&&this.selectSearchResult(i[0])):this.msgService.add({severity:"info",summary:"Sin resultados",detail:"No se encontraron ubicaciones para la b\xFAsqueda"})},error:i=>{this.searchingLocation=!1,console.error("Error en b\xFAsqueda de ubicaci\xF3n:",i),this.msgService.add({severity:"error",summary:"Error",detail:"Error al buscar la ubicaci\xF3n"})}})}selectSearchResult(t){if(!this.map)return;let e=parseFloat(t.lat),i=parseFloat(t.lon);this.map.setView([e,i],15),this.searchMarker&&this.map.removeLayer(this.searchMarker),this.searchMarker=E.marker([e,i]).addTo(this.map).bindPopup(`<b>${t.display_name}</b><br><small>Resultado de b\xFAsqueda</small>`).openPopup(),this.searchResults=[],this.msgService.add({severity:"success",summary:"Ubicaci\xF3n encontrada",detail:"Ubicaci\xF3n marcada en el mapa"})}clearLocationSearch(){this.searchLocation="",this.searchResults=[],this.searchMarker&&this.map&&(this.map.removeLayer(this.searchMarker),this.searchMarker=null)}resetMapView(){this.map&&(this.map.setView([-.2298,-78.5249],13),this.clearLocationSearch(),this.msgService.add({severity:"info",summary:"Vista restablecida",detail:"El mapa volvi\xF3 a la vista inicial"}))}iniciarCreacionGeocerca(){if(!this.selectedUser){this.msgService.add({severity:"warn",summary:"Usuario requerido",detail:"Debe seleccionar un usuario antes de crear una geocerca"});return}this.creandoGeocerca=!0,this.coordenadasGeocerca=[],this.centroGeocerca=null,this.limpiarDibujo(),this.dibujoLayer||(this.dibujoLayer=E.layerGroup().addTo(this.map)),this.map&&this.map.off("click"),setTimeout(()=>{this.configurarEventosMapa(),console.log("Eventos configurados para tipo:",this.tipoGeocerca)},100),this.msgService.add({severity:"info",summary:"Modo creaci\xF3n activado",detail:`Haga clic en el mapa para crear una geocerca ${this.tipoGeocerca}`})}prepararCoordenadasParaServicio(){if(this.tipoGeocerca==="circular")return[...this.coordenadasGeocerca];let t=[...this.coordenadasGeocerca];if(t.length>3){let e=t[0],i=t[t.length-1];Math.abs(e.lat-i.lat)<1e-6&&Math.abs(e.lng-i.lng)<1e-6&&t.pop()}return t}actualizarRadioCirculo(){if(this.tipoGeocerca==="circular"&&this.centroGeocerca&&this.creandoGeocerca){let t={latlng:{lat:this.centroGeocerca.lat,lng:this.centroGeocerca.lng}};this.onMapClickCircular(t)}}limpiarDibujo(){if(this.dibujoLayer&&this.dibujoLayer.clearLayers(),this.marcadoresPuntos.forEach(t=>{if(this.dibujoLayer&&this.map)try{this.dibujoLayer.removeLayer(t)}catch(e){console.log("Error removiendo marcador:",e)}}),this.marcadoresPuntos=[],this.lineasTemporales.forEach(t=>{if(this.dibujoLayer&&this.map)try{this.dibujoLayer.removeLayer(t)}catch(e){console.log("Error removiendo l\xEDnea:",e)}}),this.lineasTemporales=[],this.formaActual&&this.dibujoLayer)try{this.dibujoLayer.removeLayer(this.formaActual)}catch(t){console.log("Error removiendo forma:",t)}this.coordenadasGeocerca=[],this.centroGeocerca=null,this.formaActual=null}cancelarCreacionGeocerca(){this.creandoGeocerca=!1,this.limpiarDibujo(),this.map&&this.map.off("click"),this.msgService.add({severity:"info",summary:"Creaci\xF3n cancelada",detail:"Se cancel\xF3 la creaci\xF3n de la geocerca"})}abrirDialogoGeocerca(){if(!this.centroGeocerca||this.coordenadasGeocerca.length===0){this.msgService.add({severity:"warn",summary:"Geocerca incompleta",detail:"Debe crear la forma en el mapa antes de continuar"});return}this.geocercaDialog=!0}guardarGeocerca(){if(this.geocercaForm.invalid||!this.selectedUser||!this.centroGeocerca){this.msgService.add({severity:"error",summary:"Error de validaci\xF3n",detail:"Complete todos los campos requeridos"});return}if(this.codeValidationResult!=="valid"){this.msgService.add({severity:"warn",summary:"C\xF3digo inv\xE1lido",detail:"Debe usar un c\xF3digo de geocerca v\xE1lido"});return}let t=this.geocercaForm.value,e=this.authService.getUsuarioFromToken()||"SUPERVISOR",i=this.authService.getEmpresa()?.nomempresa||"PC-ADMIN",n=this.prepararCoordenadasParaServicio(),c,p;this.tipoGeocerca==="circular"?(c=this.geocercaService.calcularAreaCirculo(this.radioGeocerca),p=this.geocercaService.calcularPerimetroCirculo(this.radioGeocerca)):(c=this.geocercaService.calcularAreaPoligono(n),p=this.geocercaService.calcularPerimetroPoligono(n));let C={geoccod:t.geoccod,geocnom:t.geocnom,geocdirre:t.geocdirre,geocsec:t.geocsec?.parroquia||t.geocsec||"",geocciud:t.geocciud?.canton||t.geocciud||"",geocprov:t.geocprov?.provincia||t.geocprov||"",geocpais:t.geocpais,geoclat:this.centroGeocerca.lat,geoclon:this.centroGeocerca.lng,geoccoor:n,geocarm:c,geocperm:p,geocest:"A",geocact:t.geocact,geocpri:t.geocpri,geocdesc:t.geocdesc,geocuscre:e,geoceqcre:i,vendedores:[{geugidv:this.selectedUser.usucod,geuglat:this.centroGeocerca.lat,geuglon:this.centroGeocerca.lng,geuguscre:e,geugeqcre:this.selectedUser.usucodv}],validarVendedoresDuplicados:!0};this.geocercaService.crearGeocerca(C).subscribe({next:()=>{this.msgService.add({severity:"success",summary:"Geocerca creada",detail:"La geocerca se cre\xF3 exitosamente"}),this.cerrarDialogoGeocerca(),this.cancelarCreacionGeocerca()},error:S=>{console.error("Error al crear geocerca:",S),this.msgService.add({severity:"error",summary:"Error",detail:"No se pudo crear la geocerca"})}})}cerrarDialogoGeocerca(){this.geocercaDialog=!1,this.geocercaForm.reset()}onTipoGeocercaChange(){this.limpiarDibujo(),this.map&&this.map.off("click"),this.creandoGeocerca&&this.configurarEventosMapa()}filtrarProvincias(t){let e=t.query?.toLowerCase()||"";this.provinciasFiltradas=this.provinceService.filtrarProvincias(e)}filtrarCiudades(t){let e=t.query?.toLowerCase()||"";this.ciudadesFiltradas=this.provinceService.filtrarCantones(this.cantonesList,e)}filtrarSectores(t){let e=t.query?.toLowerCase()||"";this.sectoresFiltrados=this.provinceService.filtrarParroquias(this.parroquiasList,e)}onProvinciaSeleccionada(t){let e=t.value;this.provinciaSeleccionada=e,this.cantonesList=this.provinceService.getCantones(e.codigo),this.ciudadSeleccionada=null,this.parroquiasList=[],this.sectorSeleccionado=null,this.geocercaForm.patchValue({geocciud:"",geocsec:""})}onProvinciaLimpiada(){this.provinciaSeleccionada=null,this.cantonesList=[],this.ciudadSeleccionada=null,this.parroquiasList=[],this.sectorSeleccionado=null}onCiudadSeleccionada(t){let e=t.value;this.ciudadSeleccionada=e,this.provinciaSeleccionada&&(this.parroquiasList=this.provinceService.getParroquias(this.provinciaSeleccionada.codigo,e.codigo)),this.sectorSeleccionado=null,this.geocercaForm.patchValue({geocsec:""})}onCiudadLimpiada(){this.ciudadSeleccionada=null,this.parroquiasList=[],this.sectorSeleccionado=null}refreshData(){this.loading=!0,this.selectedUser=null,this.getAllUsers(),this.resetMapView()}ngOnDestroy(){this.searchMarker&&this.map&&(this.map.removeLayer(this.searchMarker),this.searchMarker=null),this.marcadoresPuntos.forEach(t=>{this.map&&this.map.removeLayer(t)}),this.marcadoresPuntos=[],this.lineasTemporales.forEach(t=>{this.map&&this.map.removeLayer(t)}),this.lineasTemporales=[],this.dibujoLayer&&this.map&&(this.map.removeLayer(this.dibujoLayer),this.dibujoLayer=null),this.map&&(this.map.remove(),this.map=null)}static \u0275fac=function(e){return new(e||o)(I(et),I(De),I(ye),I(me),I(V),I(Ne),I(Ve))};static \u0275cmp=H({type:o,selectors:[["app-user-list"]],viewQuery:function(e,i){if(e&1&&Z(Wi,5),e&2){let n;z(n=$())&&(i.mapContainer=n.first)}},decls:34,vars:8,consts:[["mapContainer",""],["locationInput",""],[1,"flex","flex-col","min-h-screen","p-2","sm:p-4","gap-2","sm:gap-4"],[1,"flex","flex-1","flex-col","lg:flex-row","gap-2","sm:gap-4","overflow-hidden","min-h-0"],[1,"w-full","lg:w-1/3","flex","flex-col"],[1,"flex","flex-col","flex-1","overflow-hidden","h-full"],[1,"p-3","sm:p-4","bg-gradient-to-r","from-surface-50","to-white","dark:from-surface-900","dark:to-surface-800","rounded-lg"],[1,"flex","items-center","gap-3","mb-3"],[1,"w-10","h-10","flex","items-center","justify-center","rounded-full","bg-primary-100","dark:bg-primary-900","shadow-sm"],[1,"pi","pi-users","text-primary-600","dark:text-primary-300","text-xl"],[1,"text-xl","sm:text-2xl","font-extrabold","text-gray-800","dark:text-white","tracking-tight"],[1,"text-xs","text-gray-500","dark:text-gray-400","mt-0.5"],[1,"relative","mt-2"],["iconPosition","left",1,"w-full"],[1,"pi","pi-search","text-primary-400"],["pInputText","","type","text","placeholder","Buscar vendedores...",1,"w-full","py-2.5","text-sm","rounded-lg","border-2","border-surface-200","hover:border-primary-200","focus:border-primary-500","transition-colors","pl-9","shadow-sm","dark:bg-surface-800","dark:border-surface-700","dark:hover:border-primary-700",3,"input"],["title","Limpiar b\xFAsqueda",1,"absolute","right-2","top-1/2","transform","-translate-y-1/2","text-xs","text-gray-400","hover:text-primary-500","transition-colors","p-1","rounded-full","hover:bg-gray-100","dark:hover:bg-surface-700"],[1,"pi","pi-times"],[1,"flex-1","overflow-auto","min-h-0"],[1,"space-y-2","sm:space-y-3","px-1"],[1,"space-y-1","sm:space-y-2","px-1"],["pTemplate","footer"],[1,"w-full","lg:w-2/3","flex","flex-col"],["pTemplate","header"],[1,"flex-1","relative","overflow-hidden","min-h-0"],[1,"absolute","inset-0","flex","items-center","justify-center","bg-surface-100","dark:bg-surface-800","rounded-lg","z-10"],[1,"w-full","h-full","rounded-lg",2,"min-height","700px","height","100%","width","100%"],["header","Completar datos de la Geocerca",1,"p-fluid",3,"visibleChange","visible","modal"],["pTemplate","content"],[1,"border","rounded-lg","p-3","sm:p-4"],[1,"flex","items-center","space-x-3","sm:space-x-4"],["shape","circle","size","2.5rem",1,"sm:!w-12","sm:!h-12"],[1,"flex-1","min-w-0"],["height","1rem",1,"mb-2"],["height","0.8rem","width","70%"],[1,"border","rounded-lg","p-3","sm:p-4","hover:bg-surface-50","dark:hover:bg-surface-800","transition-colors","cursor-pointer",3,"border-primary-500","bg-primary-50","dark:bg-primary-900"],[1,"text-center","py-6","sm:py-8"],[1,"border","rounded-lg","p-3","sm:p-4","hover:bg-surface-50","dark:hover:bg-surface-800","transition-colors","cursor-pointer",3,"click"],[1,"flex","items-center","justify-center","w-10","h-10","sm:w-12","sm:h-12","rounded-full","bg-primary-100","dark:bg-primary-900/30","flex-shrink-0"],[1,"pi","pi-user","text-primary","text-lg","sm:text-xl"],[1,"font-semibold","text-sm","sm:text-base","text-surface-900","dark:text-surface-0","truncate"],[1,"text-xs","sm:text-sm","text-surface-600","dark:text-surface-400","truncate"],[1,"flex","space-x-1"],["title","Con ubicaci\xF3n",1,"pi","pi-map-marker","text-green-500","text-xs"],[1,"pi","pi-chevron-right","text-surface-400","flex-shrink-0"],[1,"pi","pi-users","text-3xl","sm:text-4xl","text-surface-400","mb-3","sm:mb-4"],[1,"text-sm","sm:text-base","text-surface-600","dark:text-surface-400"],[1,"pt-3","sm:pt-4"],[1,"text-sm","relative",3,"rows","totalRecords","first","rowsPerPageOptions"],[1,"text-sm","relative",3,"onPageChange","rows","totalRecords","first","rowsPerPageOptions"],[1,"flex","flex-col","gap-3","sm:gap-4","p-3","sm:p-4"],[1,"flex","flex-col","sm:flex-row","sm:justify-between","sm:items-center","gap-3"],[1,"flex","items-center","gap-3","min-w-0"],[1,"pi","pi-map-marker","text-primary-600","dark:text-primary-300","text-xl"],[1,"min-w-0"],[1,"flex","gap-2","flex-shrink-0","items-center"],["pTooltip","Restablecer vista","tooltipPosition","bottom",1,"flex","items-center","justify-center","h-9","w-9","rounded-full","bg-white","dark:bg-surface-800","hover:bg-primary-50","dark:hover:bg-primary-900/30","shadow-sm","border","border-surface-200","dark:border-surface-700","transition-all","duration-200",3,"click"],[1,"pi","pi-refresh","text-primary-500","dark:text-primary-400"],[1,"flex","flex-col","sm:flex-row","gap-2"],[1,"pi","pi-map-marker","text-primary-400"],["pInputText","","type","text","placeholder","Buscar ubicaci\xF3n (ej: Quito, Ecuador)",1,"w-full","py-2.5","text-sm","rounded-lg","border-2","border-surface-200","hover:border-primary-200","focus:border-primary-500","transition-colors","pl-9","shadow-sm","dark:bg-surface-800","dark:border-surface-700","dark:hover:border-primary-700",3,"ngModelChange","keyup.enter","ngModel"],[1,"flex","gap-2","flex-shrink-0"],["icon","pi pi-search","severity","primary","pTooltip","Buscar ubicaci\xF3n","tooltipPosition","bottom",3,"click","loading"],["icon","pi pi-times","severity","secondary","pTooltip","Limpiar b\xFAsqueda","tooltipPosition","bottom",3,"click","text"],[1,"border-t","pt-3"],[1,"p-4","rounded-lg","bg-primary-50/70","dark:bg-primary-900/20","border","border-primary-200","dark:border-primary-800","shadow-sm"],[1,"bg-surface-50","dark:bg-surface-800","rounded-lg","p-3"],[1,"flex","items-center","justify-between","mb-2"],[1,"text-sm","font-medium","text-surface-700","dark:text-surface-300"],["icon","pi pi-plus-circle","label","Nueva Geocerca","severity","success","size","small","pTooltip","Seleccione un usuario primero","tooltipPosition","bottom",3,"click","disabled"],[1,"text-xs","text-orange-600","dark:text-orange-400"],[1,"flex","items-center","justify-between","mb-3"],[1,"flex","items-center","gap-2"],[1,"pi","pi-map","text-primary-600","dark:text-primary-400","text-lg"],[1,"font-medium","text-primary-700","dark:text-primary-300"],["icon","pi pi-times","severity","danger","size","small","pTooltip","Cancelar creaci\xF3n","tooltipPosition","bottom",3,"click","text"],[1,"mb-3","p-2","bg-surface-0","dark:bg-surface-800","rounded","border"],[1,"text-xs","text-surface-600","dark:text-surface-400","mb-1"],[1,"pi","pi-user","text-primary","text-sm"],[1,"text-sm","font-medium"],[1,"text-xs","text-surface-500"],[1,"flex","flex-col","md:flex-row","gap-4","mb-3"],[1,"flex-1"],[1,"block","text-xs","font-medium","text-surface-700","dark:text-surface-300","mb-1"],["optionLabel","label","optionValue","value",1,"w-full",3,"ngModelChange","onChange","ngModel","options"],["pTemplate","item"],[1,"mb-3","p-2","bg-blue-50","dark:bg-blue-900/20","rounded","border","border-blue-200","dark:border-blue-800"],[1,"text-xs","text-blue-700","dark:text-blue-300"],[1,"pi","pi-info-circle","mr-1"],[1,"flex","gap-2"],["label","Limpiar","icon","pi pi-refresh","severity","secondary","size","small",3,"click","text"],["label","Continuar","icon","pi pi-arrow-right","severity","primary","size","small",3,"click","disabled"],[1,"block","text-xs","font-medium","text-surface-700","dark:text-surface-300","mb-2"],[1,"w-full",3,"ngModelChange","onSlideEnd","ngModel","min","max","step"],[1,"flex","justify-between","text-xs","text-surface-500","mt-1"],[1,"flex","items-center","justify-between"],[1,"text-xs","text-surface-600","dark:text-surface-400"],[1,"text-green-600","dark:text-green-400","ml-2"],["icon","pi pi-undo","severity","secondary","size","small","pTooltip","Deshacer \xFAltimo punto","tooltipPosition","bottom",3,"click","text"],[1,"pi","pi-undo"],[1,"text-sm","text-surface-600","dark:text-surface-400","mb-2"],[1,"space-y-1"],[1,"flex","items-center","justify-between","p-2","hover:bg-surface-100","dark:hover:bg-surface-700","rounded","cursor-pointer","transition-colors"],[1,"flex","items-center","justify-between","p-2","hover:bg-surface-100","dark:hover:bg-surface-700","rounded","cursor-pointer","transition-colors",3,"click"],[1,"flex","items-center","gap-2","min-w-0","flex-1"],[1,"pi","pi-map-marker","text-primary","text-sm","flex-shrink-0"],[1,"text-sm","text-surface-900","dark:text-surface-0","truncate"],[1,"pi","pi-arrow-right","text-surface-400","text-xs","flex-shrink-0"],[1,"text-center"],[1,"pi","pi-spin","pi-spinner","text-2xl","text-primary","mb-2"],[1,"text-surface-600","dark:text-surface-400"],[1,"space-y-4",3,"formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["for","geoccod",1,"block","text-sm","font-medium","text-surface-700","dark:text-surface-300","mb-1"],[1,"relative"],["maxlength","5","id","geoccod","pInputText","","formControlName","geoccod","placeholder","Ej: GEO001",1,"w-full"],[1,"absolute","inset-y-0","right-0","flex","items-center","pr-3"],[1,"pi","pi-spin","pi-spinner","text-primary-500"],[1,"pi","pi-check-circle","text-green-500"],[1,"pi","pi-times-circle","text-red-500"],[1,"mt-1","min-h-[20px]"],[1,"text-xs","text-surface-500","flex","items-center","gap-1"],[3,"class"],["for","geocnom",1,"block","text-sm","font-medium","text-surface-700","dark:text-surface-300","mb-1"],["id","geocnom","pInputText","","formControlName","geocnom","placeholder","Ej: Zona Norte",1,"w-full"],["for","geocprov",1,"block","text-sm","font-medium","text-surface-700","dark:text-surface-300","mb-1"],["inputId","geocprov","formControlName","geocprov","optionLabel","provincia","placeholder","Buscar provincia...",1,"w-full",3,"completeMethod","onSelect","onClear","suggestions","dropdown"],["for","geocciud",1,"block","text-sm","font-medium","text-surface-700","dark:text-surface-300","mb-1"],["inputId","geocciud","formControlName","geocciud","optionLabel","canton","placeholder","Buscar ciudad/cant\xF3n...",1,"w-full",3,"completeMethod","onSelect","onClear","suggestions","dropdown","disabled"],["for","geocsec",1,"block","text-sm","font-medium","text-surface-700","dark:text-surface-300","mb-1"],["inputId","geocsec","formControlName","geocsec","optionLabel","parroquia","placeholder","Buscar sector/parroquia...",1,"w-full",3,"completeMethod","suggestions","dropdown","disabled"],[1,"md:col-span-2"],["for","geocdirre",1,"block","text-sm","font-medium","text-surface-700","dark:text-surface-300","mb-1"],["id","geocdirre","pInputText","","formControlName","geocdirre","placeholder","Ej: Av. Principal y Calle 10",1,"w-full"],["for","geocpais",1,"block","text-sm","font-medium","text-surface-700","dark:text-surface-300","mb-1"],["readonly","","id","geocpais","pInputText","","formControlName","geocpais","value","ECUADOR",1,"w-full"],[1,"flex","items-center","justify-between","mb-1"],["for","geocpri",1,"text-sm","font-medium","text-surface-700","dark:text-surface-300"],[1,"px-2","py-1","text-sm","font-bold","text-primary-600","bg-primary-50","rounded"],["id","geocpri","formControlName","geocpri",1,"w-full",3,"min","max","step"],[1,"flex","items-center","gap-2","mt-6"],["formControlName","geocact","inputId","geocact"],["for","geocact",1,"text-sm","font-medium","text-surface-700","dark:text-surface-300"],["for","geocdesc",1,"block","text-sm","font-medium","text-surface-700","dark:text-surface-300","mb-1"],["id","geocdesc","pInputTextarea","","formControlName","geocdesc","placeholder","Descripci\xF3n detallada de la geocerca","rows","3",1,"w-full"],[1,"mt-4","p-3","bg-surface-50","dark:bg-surface-800","rounded","border"],[1,"text-sm","font-medium","text-surface-700","dark:text-surface-300","mb-2"],[1,"grid","grid-cols-2","gap-2","text-xs"],[1,"ml-2","font-medium"],[1,"pi","pi-spin","pi-spinner"],[1,"pi","pi-check","mr-1"],[1,"pi","pi-exclamation-triangle","mr-1"],[1,"flex","justify-end","gap-2"],["label","Cancelar","icon","pi pi-times","severity","secondary",3,"click","text"],["label","Crear Geocerca","icon","pi pi-check","severity","primary",3,"click"]],template:function(e,i){if(e&1){let n=b();r(0,"div",2)(1,"div",3)(2,"div",4)(3,"p-card",5)(4,"div",6)(5,"div",7)(6,"div",8),d(7,"i",9),a(),r(8,"div")(9,"h2",10),l(10," Creaci\xF3n de Geocercas "),a(),r(11,"p",11),l(12," Visualizaci\xF3n y gesti\xF3n de vendedores "),a()()(),r(13,"div",12)(14,"p-iconField",13)(15,"p-inputIcon"),d(16,"i",14),a(),r(17,"input",15),h("input",function(p){return u(n),g(i.onSearch(p))}),a()(),r(18,"button",16),d(19,"i",17),a()()(),r(20,"div",18),f(21,rr,3,1,"div",19),f(22,sr,4,1,"div",20),a(),M(23,lr,2,1,"ng-template",21),a()(),r(24,"div",22)(25,"p-card",5),M(26,br,26,6,"ng-template",23),r(27,"div",24),f(28,Er,5,0,"div",25),d(29,"div",26,0),a()()()()(),r(31,"p-dialog",27),O("visibleChange",function(p){return u(n),y(i.geocercaDialog,p)||(i.geocercaDialog=p),g(p)}),M(32,Rr,83,25,"ng-template",28)(33,Tr,3,1,"ng-template",21),a()}e&2&&(s(21),A(i.loading?21:-1),s(),A(i.loading?-1:22),s(6),A(i.map?-1:28),s(3),ne(T(7,Ki)),L("visible",i.geocercaDialog),v("modal",!0))},dependencies:[ce,re,Ie,K,Ye,Q,Y,Qe,Xe,W,ge,ee,pe,X,de,xe,be,Ue,fe,Se,Ee,Ce,he,ie,Ae,te,Re,We,Ke,_e,we,ci,Me,Te,Ge,at,Yt,ue,tt,ve,mi,nt,xi,st,ot],styles:[".numero-punto-custom.dragging[_ngcontent-%COMP%]{transform:scale(1.1);transition:transform .2s ease;opacity:.8;z-index:1000}.numero-punto-custom.dragging[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:#7c3aed!important;box-shadow:0 4px 12px #0006!important;border:3px solid #f59e0b!important}.numero-punto-custom[_ngcontent-%COMP%]{transition:transform .2s ease,opacity .2s ease}.numero-punto-custom[_ngcontent-%COMP%]:hover:not(.dragging) > div[_ngcontent-%COMP%]{background-color:#7c3aed;transform:scale(1.05)}"]})};var Ds=Mt(Ai());var Mr=["mapContainer"],wr=()=>({width:"90vw",maxWidth:"500px"}),Gr=()=>({"960px":"75vw"}),Ur=()=>[1,2,3,4,5],kr=()=>[1,2,3],Ti=(o,t)=>t.geoccod;function Dr(o,t){if(o&1&&(r(0,"div",58)(1,"span"),l(2),a()()),o&2){let e=m(2);s(2),x("",e.filteredUsers.length," vendedores disponibles")}}function Pr(o,t){if(o&1){let e=b();r(0,"div",9)(1,"input",53),h("input",function(n){u(e);let c=m();return g(c.onSearch(n))}),a(),r(2,"div",54),d(3,"i",55),a(),r(4,"button",56),d(5,"i",57),a()(),f(6,Dr,3,1,"div",58)}if(o&2){let e=m();s(6),A(e.filteredUsers.length>0?6:-1)}}function Vr(o,t){if(o&1){let e=b();r(0,"button",88),h("click",function(){u(e);let n=m(2);return g(n.selectUser(n.selectedUser))}),d(1,"i",89),a()}}function Br(o,t){if(o&1&&(r(0,"span",74),l(1),a()),o&2){let e=m(2);s(),x(" ",e.selectedUser.codigoVendedorSecundario," ")}}function Fr(o,t){if(o&1&&(r(0,"span",96),l(1),a()),o&2){let e=m(3);s(),x(" ",e.getLocationTimeAgo(e.selectedUser.ubicacionActual.geubfech)," ")}}function Hr(o,t){if(o&1&&(r(0,"div",106)(1,"div",107),l(2),a()()),o&2){let e=m(3);s(2),x(" ",e.formatLocationDateTime(e.selectedUser.ubicacionActual.geubfech)," ")}}function qr(o,t){if(o&1){let e=b();r(0,"div",71)(1,"div",90),d(2,"i",91),a(),r(3,"span",92),l(4),a()(),r(5,"div",78)(6,"div",93)(7,"div",71),d(8,"div",94),r(9,"span",95),l(10,"Ubicaci\xF3n activa"),a()(),f(11,Fr,2,1,"span",96),a(),r(12,"div",97)(13,"div",98)(14,"div",71),d(15,"i",99),r(16,"div",100)(17,"span",101),l(18,"Lat:"),a(),r(19,"span",102),l(20),J(21,"number"),a(),r(22,"span",103),l(23,"|"),a(),r(24,"span",101),l(25,"Lng:"),a(),r(26,"span",102),l(27),J(28,"number"),a()()(),r(29,"button",104),h("click",function(){u(e);let n=m(2);return g(n.copyCoordinates(n.selectedUser.ubicacionActual))}),d(30,"i",105),a()(),f(31,Hr,3,1,"div",106),a()()}if(o&2){let e=m(2);s(3),v("title",e.selectedUser.ubicacionActual.geublat+", "+e.selectedUser.ubicacionActual.geublon),s(),x(" ",e.getUserLocationName(e.selectedUser)," "),s(7),A(e.selectedUser.ubicacionActual.geubfech?11:-1),s(9),_(se(21,6,e.selectedUser.ubicacionActual.geublat,"1.4-4")),s(7),_(se(28,9,e.selectedUser.ubicacionActual.geublon,"1.4-4")),s(4),A(e.selectedUser.ubicacionActual.geubfech?31:-1)}}function jr(o,t){o&1&&(r(0,"div",78)(1,"div",108),d(2,"i",109),r(3,"span",110),l(4,"Sin ubicaci\xF3n registrada"),a()()())}function Zr(o,t){if(o&1){let e=b();r(0,"div",9)(1,"input",111),O("ngModelChange",function(n){u(e);let c=m(2);return y(c.filtroGeocerca,n)||(c.filtroGeocerca=n),g(n)}),h("input",function(){u(e);let n=m(2);return g(n.filtrarGeocercasList())}),a(),r(2,"div",112),d(3,"i",113),a()()}if(o&2){let e=m(2);s(),L("ngModel",e.filtroGeocerca)}}function zr(o,t){if(o&1){let e=b();r(0,"div",10)(1,"div",59)(2,"div",60)(3,"button",61),h("click",function(){u(e);let n=m();return g(n.refreshData())}),d(4,"i",62),a(),f(5,Vr,2,0,"button",63),a(),r(6,"div",64)(7,"div",65)(8,"div",66),d(9,"i",67),a(),r(10,"div",68),d(11,"div",69),a()(),r(12,"div",41)(13,"h6",70),l(14),a(),r(15,"div",71)(16,"span",72),d(17,"i",73),l(18),a(),f(19,Br,2,1,"span",74),a()()(),r(20,"div",10)(21,"div",75),d(22,"i",76),r(23,"span",77),l(24,"Informaci\xF3n de Ubicaci\xF3n"),a()(),f(25,qr,32,12)(26,jr,5,0,"div",78),a()(),r(27,"div",79)(28,"div",80)(29,"div",81),d(30,"i",82),a(),r(31,"h6",83),l(32," GEOCERCAS ASIGNADAS "),a()(),r(33,"button",84),h("click",function(){u(e);let n=m();return g(n.openAddGeocercaDialog())}),d(34,"div",85),r(35,"div",86),d(36,"i",87),l(37," AGREGAR GEOCERCA "),a()(),f(38,Zr,4,1,"div",9),a()()}if(o&2){let e=m();s(5),A(e.selectedUser.ubicacionActual.geublat&&e.selectedUser.ubicacionActual.geublon?5:-1),s(9),x(" ",e.selectedUser.nombreVendedor," "),s(4),x(" ",e.selectedUser.codigoVendedor," "),s(),A(e.selectedUser.codigoVendedorSecundario?19:-1),s(6),A(e.selectedUser.ubicacionActual?25:26),s(13),A(e.selectedUser&&e.selectedUser.totalGeocercas>0?38:-1)}}function $r(o,t){o&1&&(r(0,"div",115)(1,"div",116),d(2,"div",117),r(3,"div",118),d(4,"div",119)(5,"div",120)(6,"div",121),a()()())}function Jr(o,t){o&1&&(r(0,"div",114),w(1,$r,7,0,"div",115,D),a()),o&2&&(s(),G(T(0,Ur)))}function Qr(o,t){if(o&1&&(r(0,"span",135),l(1),a()),o&2){let e=m().$implicit;s(),x(" ",e.codigoVendedorSecundario," ")}}function Yr(o,t){if(o&1&&(r(0,"div",143),d(1,"i",144),r(2,"span"),l(3),a()()),o&2){let e=m(2).$implicit,i=m(3);s(3),_(i.formatLocationDate(e.ubicacionActual.geubfech))}}function Wr(o,t){if(o&1&&(r(0,"div",136),d(1,"div",94),r(2,"span",139),l(3,"Ubicaci\xF3n activa"),a()(),r(4,"div",140),d(5,"i",141),r(6,"span",142),l(7),J(8,"number"),J(9,"number"),a()(),f(10,Yr,4,1,"div",143)),o&2){let e=m().$implicit;s(7),B("",se(8,3,e.ubicacionActual.geublat,"1.6-6"),", ",se(9,6,e.ubicacionActual.geublon,"1.6-6")),s(3),A(e.ubicacionActual.geubfech?10:-1)}}function Kr(o,t){o&1&&(r(0,"div",136),d(1,"div",145),r(2,"span",146),l(3,"Sin ubicaci\xF3n registrada"),a()())}function Xr(o,t){if(o&1&&(r(0,"div",71)(1,"span",147),d(2,"i",148),l(3),a()()),o&2){let e=m().$implicit;s(3),B(" ",e.totalGeocercas," geocerca",e.totalGeocercas!==1?"s":""," ")}}function ea(o,t){if(o&1){let e=b();r(0,"div",126),h("click",function(){let n=u(e).$implicit,c=m(3);return g(c.selectUser(n))}),d(1,"div",127),r(2,"div",128)(3,"div",116)(4,"div",65)(5,"div",129),d(6,"i",67),a(),r(7,"div",130),d(8,"div",131),a()(),r(9,"div",41)(10,"h6",132),l(11),a(),r(12,"div",133)(13,"span",134),d(14,"i",73),l(15),a(),f(16,Qr,2,1,"span",135),a(),r(17,"div",21),f(18,Wr,11,9)(19,Kr,4,0,"div",136),f(20,Xr,4,2,"div",71),a()(),r(21,"div",137),d(22,"i",138),a()()()()}if(o&2){let e=t.$implicit;s(11),x(" ",e.nombreVendedor," "),s(4),x(" ",e.codigoVendedor," "),s(),A(e.codigoVendedorSecundario?16:-1),s(2),A(e.ubicacionActual&&e.ubicacionActual.geublat&&e.ubicacionActual.geublon?18:19),s(2),A(e.totalGeocercas&&e.totalGeocercas>0?20:-1)}}function ta(o,t){o&1&&(r(0,"div",124)(1,"div",9),d(2,"div",149),r(3,"div",150)(4,"div",151),d(5,"i",152),a(),r(6,"h6",153),l(7," No se encontraron vendedores "),a(),r(8,"p",154),l(9," Intenta ajustar los filtros de b\xFAsqueda "),a()()()())}function ia(o,t){if(o&1){let e=b();r(0,"div",125)(1,"p-paginator",155),h("onPageChange",function(n){u(e);let c=m(3);return g(c.onPageChange(n))}),a()()}if(o&2){let e=m(3);s(),v("rows",e.itemsPerPage)("totalRecords",e.filteredUsers.length)("first",e.first)}}function ra(o,t){if(o&1){let e=b();r(0,"div",122,2),h("scroll",function(n){u(e);let c=m(2);return g(c.onScroll(n))}),w(2,ea,23,5,"div",123,D),f(4,ta,10,0,"div",124),a(),f(5,ia,2,3,"div",125)}if(o&2){let e=m(2);R(e.paginatedUsers.length>5?"max-h-[70rem] overflow-y-auto":""),s(2),G(e.paginatedUsers),s(2),A(e.filteredUsers.length===0&&!e.loadingMore?4:-1),s(),A(!e.loading&&e.filteredUsers.length>0?5:-1)}}function aa(o,t){if(o&1&&(f(0,Jr,3,1,"div",114),f(1,ra,6,4)),o&2){let e=m();A(e.loading?0:-1),s(),A(e.loading?-1:1)}}function oa(o,t){o&1&&d(0,"div",165)}function na(o,t){if(o&1){let e=b();r(0,"div",158),d(1,"div",159),r(2,"div",128)(3,"div",160)(4,"div",41)(5,"div",133)(6,"span",161),d(7,"i",162),l(8),a()(),r(9,"h6",163),l(10),a()(),r(11,"div",71)(12,"div",9),d(13,"div",164),f(14,oa,1,0,"div",165),a()()(),r(15,"div",166)(16,"div",167)(17,"div",168),d(18,"i",91),a(),r(19,"span",169),l(20),a()(),r(21,"div",167)(22,"div",170),d(23,"i",171),a(),r(24,"span",169),l(25),a()()(),r(26,"div",172)(27,"span",173),d(28,"i",174),l(29),a(),r(30,"span"),d(31,"i"),l(32),a()(),r(33,"div",175)(34,"button",176),h("click",function(){let n=u(e).$implicit,c=m(3);return g(c.centrarMapaEnGeocerca(n))}),d(35,"i",177),l(36," Ver en mapa "),a(),r(37,"button",178),h("click",function(){let n=u(e).$implicit,c=m(3);return g(c.confirmarDesvincularGeocerca(n))}),d(38,"i",179),a()()()()}if(o&2){let e=t.$implicit,i=m(3);s(8),x(" ",e.geoccod," "),s(2),x(" ",e.geocnom," "),s(3),R(e.geocact?"bg-green-500":"bg-gray-400"),v("pTooltip",e.geocact?"Geocerca Activa":"Geocerca Inactiva"),s(),A(e.geocact?14:-1),s(6),B("",e.geocsec,", ",e.geocciud),s(5),_(e.geocprov),s(2),St("background-color",i.getGeocercaColor(e.geocpri)+"15")("color",i.getGeocercaColor(e.geocpri))("border-color",i.getGeocercaColor(e.geocpri)+"30"),s(2),x(" Prioridad ",e.geocpri," "),s(),R("inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold border shadow-sm "+(e.geocact?"bg-green-100/80 text-green-700 border-green-200/60 dark:bg-green-900/30 dark:text-green-300 dark:border-green-700/40":"bg-gray-100/80 text-gray-700 border-gray-200/60 dark:bg-gray-900/30 dark:text-gray-300 dark:border-gray-700/40")),s(),R("mr-1.5 "+(e.geocact?"pi pi-check-circle":"pi pi-ban")),s(),x(" ",e.geocact?"Activa":"Inactiva"," "),s(5),v("disabled",i.loading)}}function sa(o,t){if(o&1&&(r(0,"div",124)(1,"div",9),d(2,"div",180),r(3,"div",150)(4,"div",181),d(5,"i",182),a(),r(6,"h6",183),l(7," Sin resultados "),a(),r(8,"p",184),l(9),a()()()()),o&2){let e=m(3);s(9),x(' No se encontraron geocercas que coincidan con "',e.filtroGeocerca,'" ')}}function ca(o,t){if(o&1&&(r(0,"div",156),w(1,na,39,22,"div",158,Ti,!1,sa,10,1,"div",124),a()),o&2){let e=m(2);s(),G(e.geocercasFiltradas)}}function la(o,t){o&1&&(r(0,"div",157)(1,"div",9),d(2,"div",149),r(3,"div",185)(4,"div",186),d(5,"i",187),a(),r(6,"h6",188),l(7," Sin geocercas asignadas "),a(),r(8,"p",189),l(9,' Este vendedor no tiene geocercas configuradas. Utiliza el bot\xF3n "Agregar Geocerca" para asignar nuevas \xE1reas de trabajo. '),a()()()())}function da(o,t){if(o&1&&(r(0,"div",12),f(1,ca,4,1,"div",156)(2,la,10,0,"div",157),a()),o&2){let e=m();s(),A(e.selectedUser&&e.selectedUser.totalGeocercas>0?1:2)}}function ma(o,t){o&1&&(r(0,"div",190),d(1,"p-skeleton",191)(2,"p-skeleton",192)(3,"p-skeleton",193),a())}function pa(o,t){o&1&&(r(0,"div",21),w(1,ma,4,0,"div",190,D),a()),o&2&&(s(),G(T(0,kr)))}function ua(o,t){o&1&&(r(0,"div",201),d(1,"i",210),a())}function ga(o,t){if(o&1&&(r(0,"span",211),d(1,"i",212),l(2),a()),o&2){let e=m().$implicit,i=m(2);St("background-color",i.getGeocercaColor(e.geocpri)+"20")("color",i.getGeocercaColor(e.geocpri)),s(2),x(" Prioridad ",e.geocpri," ")}}function fa(o,t){if(o&1){let e=b();r(0,"div",196),h("click",function(){let n=u(e).$implicit,c=m(2);return g(c.selectAvailableGeocerca(n))}),r(1,"div",197)(2,"div",198)(3,"h6",199),l(4),a(),r(5,"p",200),l(6),a()(),f(7,ua,2,0,"div",201),a(),r(8,"div",107)(9,"div",202),d(10,"i",89),r(11,"span",203),l(12),a()(),r(13,"div",204),d(14,"i",205),r(15,"span",203),l(16),a()()(),r(17,"div",206)(18,"span",207),d(19,"i",208),l(20," Disponible "),a(),f(21,ga,3,5,"span",209),a()()}if(o&2){let e=t.$implicit,i=m(2);R((i.selectedAvailableGeocerca==null?null:i.selectedAvailableGeocerca.geoccod)===e.geoccod?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-surface-200 dark:border-surface-600 hover:border-primary-300 dark:hover:border-primary-700 bg-white dark:bg-surface-700"),s(4),x(" ",e.geocnom," "),s(2),x(" C\xF3digo: ",e.geoccod," "),s(),A((i.selectedAvailableGeocerca==null?null:i.selectedAvailableGeocerca.geoccod)===e.geoccod?7:-1),s(5),B("",e.geocsec,", ",e.geocciud),s(4),_(e.geocprov),s(5),A(e.geocpri?21:-1)}}function Aa(o,t){if(o&1&&l(0),o&2){let e=m(3);x(' No se encontraron geocercas que coincidan con "',e.searchAvailableGeocerca,'" ')}}function ha(o,t){o&1&&l(0," No hay geocercas disponibles para asignar ")}function va(o,t){if(o&1&&(r(0,"div",195),d(1,"i",213),r(2,"p",214),f(3,Aa,1,1)(4,ha,1,0),a()()),o&2){let e=m(2);s(3),A(e.searchAvailableGeocerca?3:4)}}function Ca(o,t){if(o&1&&(r(0,"div",21),w(1,fa,22,9,"div",194,Ti),f(3,va,5,1,"div",195),a()),o&2){let e=m();s(),G(e.filteredAvailableGeocercas),s(2),A(e.filteredAvailableGeocercas.length===0&&!e.availableGeocercasLoading?3:-1)}}function xa(o,t){o&1&&(r(0,"div",25)(1,"div",215),d(2,"i",216),r(3,"p",214),l(4," Selecciona una geocerca para ver la vista previa "),a()()())}function ba(o,t){if(o&1&&(r(0,"span"),l(1,"Geocerca seleccionada: "),r(2,"strong"),l(3),a()()),o&2){let e=m(2);s(3),_(e.selectedAvailableGeocerca.geocnom)}}function Ea(o,t){o&1&&(r(0,"span"),l(1,"Selecciona una geocerca para asignar al vendedor"),a())}function Sa(o,t){if(o&1){let e=b();r(0,"div",175)(1,"div",217),f(2,ba,4,1,"span")(3,Ea,2,0,"span"),a(),r(4,"div",218)(5,"button",219),h("click",function(){u(e);let n=m();return g(n.closeGeocercaDialog())}),l(6," Cancelar "),a(),r(7,"button",220),h("click",function(){u(e);let n=m();return g(n.assignGeocercaToUser())}),l(8," Asignar Geocerca "),a()()()}if(o&2){let e=m();s(2),A(e.selectedAvailableGeocerca?2:3),s(5),v("disabled",!e.selectedAvailableGeocerca)}}function _a(o,t){if(o&1&&(r(0,"div",221),d(1,"i",222),r(2,"span",223),l(3),a()(),d(4,"div",224)),o&2){let e=m();s(3),Ft(" ",e.selectedUser.nombreVendedor,": ",e.selectedUser.totalGeocercas," zona",e.selectedUser.totalGeocercas!==1?"s":""," ")}}function La(o,t){if(o&1){let e=b();r(0,"button",225),h("click",function(){u(e);let n=m();return g(n.clearUserSelection())}),d(1,"i",226),a()}}function ya(o,t){if(o&1){let e=b();r(0,"div",230),h("click",function(){let n=u(e).$implicit,c=m(2);return g(c.selectSearchResult(n))}),r(1,"div",231)(2,"div",232),d(3,"i",233),a(),r(4,"span",234),l(5),a()(),d(6,"i",235),a()}if(o&2){let e=t.$implicit;s(5),x(" ",e.display_name," ")}}function Oa(o,t){if(o&1&&(r(0,"div",48)(1,"div",75),d(2,"i",227),r(3,"span",228),l(4," Resultados de b\xFAsqueda "),a()(),r(5,"div",21),w(6,ya,7,1,"div",229,D),a()()),o&2){let e=m();s(6),G(e.searchResults.slice(0,3))}}function Na(o,t){o&1&&(r(0,"div",50)(1,"div",236)(2,"div",9),d(3,"div",180),r(4,"div",150)(5,"div",237),d(6,"i",238),a(),r(7,"h6",239),l(8," Cargando mapa "),a(),r(9,"p",240),l(10," Preparando la visualizaci\xF3n de ubicaciones... "),a()()()()())}var ut=class o{constructor(t,e,i,n,c,p){this.userService=t;this.geocercaService=e;this.authService=i;this.msgService=n;this.http=c;this.confirmationService=p}mapContainer;loadingMore=!1;hasReachedEnd=!1;allUsers=[];scrollThreshold=100;debounceTimer;userLocations=new Map;loadingLocations=new Set;geocodingQueue=[];isProcessingQueue=!1;lastRequestTime=0;MIN_REQUEST_INTERVAL=1500;MAX_RETRIES=3;failedRequests=new Map;availableGeocercas=[];filteredAvailableGeocercas=[];selectedAvailableGeocerca=null;availableGeocercasLoading=!1;searchAvailableGeocerca="";dialogMap=null;dialogPreviewPolygon=null;filtroGeocerca="";geocercasFiltradas=[];users=[];filteredUsers=[];paginatedUsers=[];selectedUser=null;loading=!0;serverPagination=null;currentPage=1;serverPageSize=100;first=0;itemsPerPage=4;searchValue="";destroy$=new j;map=null;userMarkers=new Map;geocercaLayers=new Map;markerClusterGroup=null;searchLocation="";searchingLocation=!1;searchResults=[];searchMarker=null;editMode=!1;editingGeocerca=null;editingPolygon=null;editingMarkers=[];isEditingVertices=!1;geocercaDialog=!1;enterpriseName="";ngOnInit(){this.getAllUsers(),this.initializeEnterpriseName()}ngAfterViewInit(){requestAnimationFrame(()=>{this.initializeMap()})}initializeEnterpriseName(){let t=this.authService.getEmpresa();t&&t.nomempresa?this.enterpriseName=t.nomempresa:this.msgService.add({severity:"error",summary:"Error",detail:"No se pudo obtener la informaci\xF3n de la empresa"})}initializeMap(){try{let t=this.mapContainer.nativeElement;if(!t){console.error("Contenedor del mapa no encontrado");return}delete E.Icon.Default.prototype._getIconUrl,E.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"}),this.map=E.map(t,{center:[-.2298,-78.5249],zoom:13,zoomControl:!1}),E.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:"\xA9 OpenStreetMap contributors"}).addTo(this.map),E.marker([-.2298,-78.5249]).addTo(this.map).bindPopup("<b>Quito, Ecuador</b><br>Ubicaci\xF3n principal").openPopup(),this.markerClusterGroup||(this.markerClusterGroup=E.markerClusterGroup({showCoverageOnHover:!1,maxClusterRadius:50,spiderfyOnMaxZoom:!0}),this.map.addLayer(this.markerClusterGroup)),!this.loading&&this.users.length>0&&this.addUserMarkersToMap(),setTimeout(()=>{this.map?.invalidateSize()},100),console.log("Mapa inicializado correctamente")}catch(t){console.error("Error inicializando el mapa:",t),this.showMapFallback()}}getAllUsers(){this.loading=!0,this.userService.getVendedoresConGeocercas({pageNumber:this.currentPage,pageSize:this.serverPageSize,activo:!0}).subscribe({next:t=>{this.users=t.data,this.serverPagination=t.paginacion,this.filteredUsers=[...this.users],this.updateLocalPagination(),this.loading=!1,this.map&&this.markerClusterGroup&&this.addUserMarkersToMap()},error:t=>{console.error("Error al cargar usuarios:",t),this.loading=!1,this.msgService.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los usuarios"})}})}loadUserLocations(){this.geocodingQueue=[],this.isProcessingQueue=!1;let t=this.users.filter(e=>e.ubicacionActual?.geublat&&e.ubicacionActual?.geublon&&!isNaN(parseFloat(String(e.ubicacionActual.geublat)))&&!isNaN(parseFloat(String(e.ubicacionActual.geublon))));console.log(`Iniciando geocoding para ${t.length} usuarios`),t.forEach((e,i)=>{setTimeout(()=>{this.addToGeocodingQueue(parseFloat(String(e.ubicacionActual.geublat)),parseFloat(String(e.ubicacionActual.geublon)),e.codigoVendedor)},i*100)})}getUserLocationName(t){let e=this.userLocations.get(t.codigoVendedor);return this.loadingLocations.has(t.codigoVendedor)?"Obteniendo ubicaci\xF3n...":e||(t.ubicacionActual?.geublat&&t.ubicacionActual?.geublon?(setTimeout(()=>{this.addToGeocodingQueue(parseFloat(String(t.ubicacionActual.geublat)),parseFloat(String(t.ubicacionActual.geublon)),t.codigoVendedor)},100),"Cargando ubicaci\xF3n..."):"Sin ubicaci\xF3n disponible")}onSearch(t){let e=t.target.value.toLowerCase();this.searchValue=e,this.filteredUsers=this.users.filter(i=>i.nombreVendedor.toLowerCase().includes(e)||i.codigoVendedor.toLowerCase().includes(e)||i.emailVendedor.toLowerCase().includes(e)),this.first=0,this.updateLocalPagination()}onPageChange(t){this.first=t.first,this.itemsPerPage=t.rows,this.updateLocalPagination()}updateLocalPagination(){let t=this.first,e=t+this.itemsPerPage;this.paginatedUsers=this.filteredUsers.slice(t,e)}selectUser(t){if(this.selectedUser=t,this.geocercasFiltradas=t.geocercas||[],this.filtroGeocerca="",this.map){this.showSelectedUserGeocercas(t),this.hideAllUserMarkersExcept(t.codigoVendedor),t.totalGeocercas>0?this.fitMapToUserGeocercas(t):t.ubicacionActual&&this.map.setView([t.ubicacionActual.geublat,t.ubicacionActual.geublon],15);let e=this.userMarkers.get(t.codigoVendedor);e&&e.openPopup()}}hideAllUserMarkersExcept(t){this.userMarkers.forEach((e,i)=>{i!==t&&(this.markerClusterGroup?this.markerClusterGroup.removeLayer(e):this.map?.removeLayer(e))})}restoreAllUserMarkers(){this.userMarkers.forEach(t=>{this.markerClusterGroup?this.markerClusterGroup.addLayer(t):t.addTo(this.map)})}addUserMarkersToMap(){!this.map||!this.markerClusterGroup||(this.markerClusterGroup.clearLayers(),this.userMarkers.clear(),this.users.forEach(t=>{if(t.ubicacionActual?.geublat&&t.ubicacionActual?.geublon){let e=E.divIcon({html:`
                    <div class="relative">
                        <div class="w-8 h-8 bg-blue-500 rounded-full border-2 border-white shadow-lg flex items-center justify-center">
                            <svg class="w-4 h-4 text-white" viewBox="0 0 20 20">
                              <path
                                fill="currentColor"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"
                              />
                            </svg>

                        </div>
                        <div class="absolute -top-1 -right-1 w-3 h-3 bg-green-400 border border-white rounded-full"></div>
                    </div>
                `,className:"custom-user-marker",iconSize:[32,32],iconAnchor:[16,16]}),i=E.marker([t.ubicacionActual.geublat,t.ubicacionActual.geublon],{icon:e}),n=this.createUserPopupContent(t);i.bindPopup(n,{maxWidth:240,className:"custom-popup"}),this.userMarkers.set(t.codigoVendedor,i),this.markerClusterGroup?.addLayer(i)}}))}createUserPopupContent(t){let e=new Date(t.ubicacionActual.geubfech).toLocaleString("es-EC",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"});return`
        <div class="bg-white rounded-lg shadow-sm border-0 overflow-hidden">
            <!-- Content -->
            <div class="p-2 space-y-1.5">
                <!-- C\xF3digos -->
                <div class="flex items-center space-x-1.5 text-xs">
                    <svg class="w-2.5 h-2.5 text-gray-400" viewBox="0 0 20 20">
                      <path
                        fill="currentColor"
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1z"
                      />
                    </svg>

                    <span class="text-gray-700 font-medium">${t.codigoVendedor}</span>
                    <span class="text-gray-400">\u2022</span>
                    <span class="text-gray-500">${t.codigoVendedorSecundario}</span>
                </div>

                <!-- \xDAltima ubicaci\xF3n -->
                <div class="flex items-center space-x-1.5 text-xs">
                    <svg class="w-2.5 h-2.5 text-gray-400" viewBox="0 0 20 20">
                      <path
                        fill="currentColor"
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"
                      />
                    </svg>

                    <span class="text-gray-500">\xDAltima ubicaci\xF3n: ${e}</span>
                </div>

                <!-- Geocercas -->
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-1.5">
                        <svg class="w-2.5 h-2.5 text-blue-500" viewBox="0 0 20 20">
                          <path
                            fill="currentColor"
                            fill-rule="evenodd"
                            clip-rule="evenodd"
                            d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z"
                          />
                        </svg>

                        <span class="text-xs text-gray-600">Geocercas</span>
                    </div>
                    <span class="bg-blue-100 text-blue-700 px-1.5 py-0.5 rounded-full text-xs font-medium">
                        ${t.totalGeocercas}
                    </span>
                </div>
            </div>
        </div>
    `}showMapFallback(){let t=this.mapContainer.nativeElement;t.innerHTML=`
      <div class="flex items-center justify-center h-full bg-surface-100 dark:bg-surface-800 rounded-lg">
        <div class="text-center">
          <i class="pi pi-exclamation-triangle text-4xl text-orange-500 mb-4"></i>
          <p class="text-surface-600 dark:text-surface-400 mb-2">Error al cargar el mapa</p>
          <p class="text-sm text-surface-500">Verifique que Leaflet est\xE9 instalado correctamente</p>
        </div>
      </div>
    `,this.map=null}searchLocationOnMap(){if(!this.searchLocation.trim()){this.msgService.add({severity:"warn",summary:"Advertencia",detail:"Ingrese una ubicaci\xF3n para buscar"});return}this.searchingLocation=!0,this.searchResults=[];let e=`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(this.searchLocation.trim())}&limit=5&countrycodes=ec&addressdetails=1`;this.http.get(e).subscribe({next:i=>{this.searchingLocation=!1,i&&i.length>0?(this.searchResults=i,i.length===1&&this.selectSearchResult(i[0])):this.msgService.add({severity:"info",summary:"Sin resultados",detail:"No se encontraron ubicaciones para la b\xFAsqueda"})},error:i=>{this.searchingLocation=!1,console.error("Error en b\xFAsqueda de ubicaci\xF3n:",i),this.msgService.add({severity:"error",summary:"Error",detail:"Error al buscar la ubicaci\xF3n"})}})}selectSearchResult(t){if(!this.map)return;let e=parseFloat(t.lat),i=parseFloat(t.lon);this.map.setView([e,i],15),this.searchMarker&&this.map.removeLayer(this.searchMarker),this.searchMarker=E.marker([e,i]).addTo(this.map).bindPopup(`<b>${t.display_name}</b><br><small>Resultado de b\xFAsqueda</small>`).openPopup(),this.searchResults=[],this.msgService.add({severity:"success",summary:"Ubicaci\xF3n encontrada",detail:"Ubicaci\xF3n marcada en el mapa"})}clearLocationSearch(){this.searchLocation="",this.searchResults=[],this.searchMarker&&this.map&&(this.map.removeLayer(this.searchMarker),this.searchMarker=null)}resetMapView(){this.map&&(this.selectedUser=null,this.clearAllGeocercas(),this.restoreAllUserMarkers(),this.map.setView([-.2298,-78.5249],13),this.clearLocationSearch(),this.msgService.add({severity:"info",summary:"Vista restablecida",detail:"El mapa volvi\xF3 a la vista inicial y se limpi\xF3 la selecci\xF3n"}))}showSelectedUserGeocercas(t){this.map&&(this.clearAllGeocercas(),t.geocercas.forEach(e=>{try{let i=JSON.parse(e.geoccoor);if(i&&i.length>0){let n=i.map(S=>[S.lat,S.lng]),c=E.polygon(n,{color:this.getGeocercaColor(e.geocpri),fillColor:this.getGeocercaColor(e.geocpri),fillOpacity:.3,weight:3,opacity:.8}).addTo(this.map),p=this.createGeocercaPopupContent(e,t);c.bindPopup(p,{maxWidth:260,className:"custom-geocerca-popup"});let C=`${t.codigoVendedor}-${e.geoccod}`;this.geocercaLayers.set(C,c),c.on("mouseover",()=>{c.setStyle({fillOpacity:.5,weight:4})}),c.on("mouseout",()=>{c.setStyle({fillOpacity:.3,weight:3})})}}catch(i){console.error("Error parsing geocerca coordinates:",i)}}),t.totalGeocercas>0&&this.msgService.add({severity:"info",summary:"Geocercas mostradas",detail:`Se muestran ${t.totalGeocercas} geocerca${t.totalGeocercas>1?"s":""} de ${t.nombreVendedor}`,life:3e3}))}createGeocercaPopupContent(t,e){let i=new Date(t.fechaAsignacion).toLocaleDateString("es-EC",{day:"2-digit",month:"2-digit",year:"2-digit"}),n=S=>{switch(S?.toUpperCase()){case"A":case"ACTIVO":return"bg-green-100 text-green-700";case"I":case"INACTIVO":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},c=S=>S>=1e6?`${(S/1e6).toFixed(2)} km\xB2`:S>=1e4?`${(S/1e4).toFixed(2)} hect\xE1reas`:`${S.toLocaleString("es-EC")} m\xB2`,p=S=>S>=1e3?`${(S/1e3).toFixed(2)} km`:`${Math.round(S).toLocaleString("es-EC")} m`,C=S=>{switch(S?.toUpperCase()){case"A":return"Activo";case"I":return"Inactivo";default:return S}};return`
        <div class="bg-white rounded-lg shadow-sm border-0 overflow-hidden">
            <!-- Header -->
            <div class="bg-gradient-to-r from-amber-500 to-orange-500 px-2 py-1">
                <div class="flex items-center space-x-1">
                    <div class="w-5 h-5 bg-white/20 rounded-full flex items-center justify-center">
                        <svg class="w-2.5 h-2.5 text-white" viewBox="0 0 20 20">
                          <path
                            fill="currentColor"
                            fill-rule="evenodd"
                            clip-rule="evenodd"
                            d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z"
                          />
                        </svg>
                    </div>
                    <h5 class="text-white font-medium text-xs truncate uppercase tracking-wide">${t.geocnom}</h5>
                </div>
            </div>

            <!-- Content -->
            <div class="p-2 space-y-1.5">
            <!-- \xC1rea y Per\xEDmetro - Secci\xF3n destacada -->
            <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-2 border border-blue-100">
                    <div class="flex items-center justify-between">
                        <!-- \xC1rea -->
                        <div class="flex items-center space-x-2">
                            <div class="w-7 h-7 bg-blue-100 rounded-full flex items-center justify-center">
                                <svg class="w-3.5 h-3.5 text-blue-600" viewBox="0 0 24 24">
                                  <path
                                    fill="currentColor"
                                    d="M3 3h6v6H3V3zm8 0h6v6h-6V3zm8 0h2v2h-2V3zm0 4h2v6h-2V7zM3 11h6v6H3v-6zm8 0h6v6h-6v-6zm8 4h2v6h-2v-6zM3 19h6v2H3v-2zm8 0h6v2h-6v-2z"/>
                                </svg>
                            </div>
                            <div class="flex flex-col">
                                <span class="text-xs text-blue-600 font-medium">\xC1rea</span>
                                <span class="text-sm text-blue-700 font-bold">${c(t.geocarm)}</span>
                            </div>
                        </div>

                        <!-- Separador -->
                        <div class="w-px h-8 bg-gradient-to-b from-blue-200 to-purple-200"></div>

                        <!-- Per\xEDmetro -->
                        <div class="flex items-center space-x-2">
                            <div class="w-7 h-7 bg-purple-100 rounded-full flex items-center justify-center">
                                <svg class="w-3.5 h-3.5 text-purple-600" viewBox="0 0 24 24">
                                  <path
                                    fill="currentColor"
                                    d="M12 2C6.48 2 2 6.48 2 10s4.48 8 10 8 10-3.58 10-8-4.48-8-10-8zm-1 13.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 11v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V4h2c2.76 0 5.26 1.79 6.9 4.39z" />
                                </svg>
                            </div>
                            <div class="flex flex-col">
                                <span class="text-xs text-purple-600 font-medium">Per\xEDmetro</span>
                                <span class="text-sm text-purple-700 font-bold">${p(t.geocperm)}</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- C\xF3digo y Sector -->
                <div class="grid grid-cols-2 gap-2 text-xs">
                    <div class="flex items-center space-x-1">
                       <svg class="w-2.5 h-2.5 text-gray-400" viewBox="0 0 20 20">
                          <path
                            fill="currentColor"
                            fill-rule="evenodd"
                            clip-rule="evenodd"
                            d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1z"
                          />
                        </svg>
                        <span class="text-gray-500">C\xF3digo:</span>
                        <span class="text-gray-700 font-medium">${t.geoccod}</span>
                    </div>
                    <div class="flex items-center space-x-1">
                        <svg class="w-2.5 h-2.5 text-gray-400" viewBox="0 0 20 20">
                          <path
                            fill="currentColor"
                            fill-rule="evenodd"
                            clip-rule="evenodd"
                            d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"
                          />
                        </svg>

                        <span class="text-gray-500">Sector:</span>
                        <span class="text-gray-700 font-medium">${t.geocsec}</span>
                    </div>
                </div>

                <!-- Ciudad -->
                <div class="flex items-center space-x-1.5 text-xs">
                    <svg class="w-2.5 h-2.5 text-gray-400" viewBox="0 0 20 20">
                      <path
                        fill="currentColor"
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z"
                      />
                    </svg>
                    <span class="text-gray-500">Ciudad:</span>
                    <span class="text-gray-700">${t.geocciud}, ${t.geocprov}</span>
                </div>

                <!-- Vendedor -->
                <div class="flex items-center space-x-1.5 text-xs">
                    <svg class="w-2.5 h-2.5 text-gray-400" viewBox="0 0 20 20">
                      <path
                        fill="currentColor"
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"
                      />
                    </svg>
                    <span class="text-gray-500">Vendedor:</span>
                    <span class="text-gray-700 font-medium">${e.nombreVendedor}</span>
                </div>

                <!-- Estado y Prioridad -->
                <div class="flex items-center justify-between pt-1">
                    <div class="flex items-center space-x-1.5">
                        <svg class="w-2.5 h-2.5 text-gray-400" viewBox="0 0 20 20">
                          <path
                            fill="currentColor"
                            fill-rule="evenodd"
                            clip-rule="evenodd"
                            d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
                          />
                        </svg>
                        <span class="text-xs text-gray-500">Estado:</span>
                        <span class="px-1.5 py-0.5 rounded-full text-xs font-medium ${n(t.geocest)}">
                            ${C(t.geocest)}
                        </span>
                    </div>
                    <div class="flex items-center space-x-1">
                        <svg class="w-2.5 h-2.5 text-amber-500" viewBox="0 0 20 20">
                          <path
                            fill="currentColor"
                            d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"
                          />
                        </svg>

                        <span class="text-xs text-amber-600 font-medium">P${t.geocpri}</span>
                    </div>
                </div>

            </div>
        </div>
    `}clearAllGeocercas(){this.geocercaLayers.forEach(t=>{this.map?.removeLayer(t)}),this.geocercaLayers.clear()}fitMapToUserGeocercas(t){if(!this.map||t.geocercas.length===0)return;let e=E.latLngBounds([]),i=!1;t.geocercas.forEach(n=>{try{let c=JSON.parse(n.geoccoor);c&&c.length>0&&c.forEach(p=>{e.extend([p.lat,p.lng]),i=!0})}catch(c){console.error("Error parsing geocerca coordinates for bounds:",c)}}),t.ubicacionActual&&(e.extend([t.ubicacionActual.geublat,t.ubicacionActual.geublon]),i=!0),i&&this.map.fitBounds(e,{padding:[20,20],maxZoom:15})}getGeocercaColor(t){return{1:"#EB0505",2:"#ff4444",3:"#ff4444",4:"#ECFF00",5:"#DBED09",6:"#E2F041",7:"#B0F041",8:"#AFFC23",9:"#4DFF00",10:"#22FF00"}[t]||"#888888"}clearUserSelection(){this.selectedUser=null,this.clearAllGeocercas(),this.msgService.add({severity:"info",summary:"Selecci\xF3n limpiada",detail:"Se ocultaron las geocercas del vendedor"})}refreshData(){this.loading=!0,this.selectedUser=null,this.getAllUsers(),this.resetMapView()}centrarMapaEnGeocerca(t){if(!this.map){this.msgService.add({severity:"warn",summary:"Error",detail:"El mapa no est\xE1 disponible"});return}try{let e=JSON.parse(t.geoccoor);if(e&&e.length>0){let i=e.map(c=>[c.lat,c.lng]),n=E.polygon(i);this.map.fitBounds(n.getBounds(),{padding:[30,30],maxZoom:16}),this.resaltarGeocercaTemporal(t),this.msgService.add({severity:"success",summary:"Mapa centrado",detail:`Centrando en: ${t.geocnom}`,life:2e3})}}catch(e){console.error("Error centrando mapa en geocerca:",e),this.msgService.add({severity:"error",summary:"Error",detail:"No se pudo centrar el mapa en la geocerca"})}}resaltarGeocercaTemporal(t){if(!this.selectedUser)return;let e=`${this.selectedUser.codigoVendedor}-${t.geoccod}`,i=this.geocercaLayers.get(e);if(i){let n={color:i.options.color,weight:i.options.weight,opacity:i.options.opacity,fillOpacity:i.options.fillOpacity};i.setStyle({color:"#FF6B35",weight:5,opacity:1,fillOpacity:.4}),setTimeout(()=>{i.setStyle(n)},2e3),i.getPopup()&&i.openPopup()}}limpiarMarkersEdicion(){this.editingMarkers.forEach(t=>{this.map&&this.map.removeLayer(t)}),this.editingMarkers=[],this.isEditingVertices=!1}filtrarGeocercasList(){if(!this.selectedUser?.geocercas){this.geocercasFiltradas=[];return}let t=this.filtroGeocerca.toLowerCase().trim();if(!t){this.geocercasFiltradas=[...this.selectedUser.geocercas];return}this.geocercasFiltradas=this.selectedUser.geocercas.filter(e=>e.geocnom?.toLowerCase().includes(t)||e.geoccod?.toLowerCase().includes(t)||e.geocsec?.toLowerCase().includes(t)||e.geocciud?.toLowerCase().includes(t)||e.geocprov?.toLowerCase().includes(t))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.searchMarker&&this.map&&(this.map.removeLayer(this.searchMarker),this.searchMarker=null),this.map&&(this.map.remove(),this.map=null),this.limpiarMarkersEdicion(),this.editMode=!1,this.editingGeocerca=null,this.editingPolygon=null,this.geocodingQueue=[],this.isProcessingQueue=!1,this.userLocations.clear(),this.loadingLocations.clear(),this.failedRequests.clear()}Math=Math;getAvailableGeocercas(){return P(this,null,function*(){if(this.enterpriseName){this.availableGeocercasLoading=!0;try{let t=yield this.geocercaService.getGeocercasConVendedoresByEnterpriseName(this.enterpriseName,1,100,!0,!1).toPromise();t&&t.success&&t.data&&(this.availableGeocercas=t.data.data,this.filteredAvailableGeocercas=[...this.availableGeocercas],console.log("Geocercas disponibles:",this.availableGeocercas))}catch(t){console.error("Error obteniendo geocercas disponibles:",t),this.msgService.add({severity:"error",summary:"Error",detail:"No se pudieron cargar las geocercas disponibles"})}finally{this.availableGeocercasLoading=!1}}})}openAddGeocercaDialog(){return P(this,null,function*(){this.geocercaDialog=!0,this.selectedAvailableGeocerca=null,this.searchAvailableGeocerca="",yield this.getAvailableGeocercas(),setTimeout(()=>{this.initializeDialogMap()},100)})}closeGeocercaDialog(){this.geocercaDialog=!1,this.selectedAvailableGeocerca=null,this.searchAvailableGeocerca="",this.dialogMap&&(this.dialogMap.remove(),this.dialogMap=null),this.dialogPreviewPolygon=null}filterAvailableGeocercas(){if(!this.searchAvailableGeocerca.trim()){this.filteredAvailableGeocercas=[...this.availableGeocercas];return}let t=this.searchAvailableGeocerca.toLowerCase().trim();this.filteredAvailableGeocercas=this.availableGeocercas.filter(e=>e.geocnom?.toLowerCase().includes(t)||e.geoccod?.toLowerCase().includes(t)||e.geocsec?.toLowerCase().includes(t)||e.geocciud?.toLowerCase().includes(t))}selectAvailableGeocerca(t){this.selectedAvailableGeocerca=t,this.showGeocercaPreview(t)}assignGeocercaToUser(){return P(this,null,function*(){if(!this.selectedAvailableGeocerca||!this.selectedUser){this.msgService.add({severity:"warn",summary:"Advertencia",detail:"Debe seleccionar una geocerca y tener un vendedor seleccionado"});return}if(!this.selectedUser.ubicacionActual?.geublat||!this.selectedUser.ubicacionActual?.geublon){this.msgService.add({severity:"warn",summary:"Advertencia",detail:"El vendedor debe tener una ubicaci\xF3n v\xE1lida para asignar geocercas"});return}try{let t={geugidv:this.selectedUser.codigoVendedor,geuglat:parseFloat(String(this.selectedUser.ubicacionActual.geublat)),geuglon:parseFloat(String(this.selectedUser.ubicacionActual.geublon)),geuguscre:this.authService.getUsuarioFromToken()||"SUPERVISOR",geugeqcre:this.initializeEnterpriseName()||"SUPERVISOR"};yield this.geocercaService.assignGeocercaToUser(this.selectedAvailableGeocerca.geoccod,t).toPromise(),this.msgService.add({severity:"success",summary:"\xC9xito",detail:`Geocerca "${this.selectedAvailableGeocerca.geocnom}" asignada correctamente a ${this.selectedUser.nombreVendedor}`}),this.selectedUser.geocercas||(this.selectedUser.geocercas=[]);let e=Tt(q({},this.selectedAvailableGeocerca),{fechaAsignacion:new Date().toISOString(),geuglat:t.geuglat,geuglon:t.geuglon,geuguscre:t.geuguscre,geugeqcre:t.geugeqcre});this.selectedUser.geocercas.push(e),this.selectedUser.totalGeocercas=this.selectedUser.geocercas.length,this.filtrarGeocercasList(),this.availableGeocercas=this.availableGeocercas.filter(i=>i.geoccod!==this.selectedAvailableGeocerca.geoccod),this.filteredAvailableGeocercas=this.filteredAvailableGeocercas.filter(i=>i.geoccod!==this.selectedAvailableGeocerca.geoccod),this.selectedAvailableGeocerca=null,this.closeGeocercaDialog(),this.refreshData()}catch(t){console.error("Error asignando geocerca:",t);let e="No se pudo asignar la geocerca al vendedor";t?.error?.message?e=t.error.message:t?.status===400?e="Datos inv\xE1lidos para la asignaci\xF3n":t?.status===404?e="Geocerca o vendedor no encontrado":t?.status===409&&(e="La geocerca ya est\xE1 asignada a otro vendedor"),this.msgService.add({severity:"error",summary:"Error",detail:e})}})}onScroll(t){let e=t.target,{scrollTop:i,scrollHeight:n,clientHeight:c}=e;i+c>=n-this.scrollThreshold&&!this.loadingMore&&!this.hasReachedEnd&&this.canLoadMore()&&this.loadMoreUsers()}canLoadMore(){let t=this.paginatedUsers.length,e=this.filteredUsers.length;return t<e}loadMoreUsers(){this.loadingMore||(this.loadingMore=!0,setTimeout(()=>{let t=this.currentPage*this.itemsPerPage,e=t+this.itemsPerPage,i=this.filteredUsers.slice(t,e);i.length>0?(this.paginatedUsers=[...this.paginatedUsers,...i],this.currentPage++,this.paginatedUsers.length>=this.filteredUsers.length&&(this.hasReachedEnd=!0)):this.hasReachedEnd=!0,this.loadingMore=!1},600))}loadInitialUsers(){this.paginatedUsers=this.filteredUsers.slice(0,this.itemsPerPage),this.currentPage=1,this.paginatedUsers.length>=this.filteredUsers.length&&(this.hasReachedEnd=!0)}formatLocationDate(t){if(!t)return"Sin fecha";let e=new Date(t),n=new Date().getTime()-e.getTime(),c=Math.floor(n/(1e3*60*60)),p=Math.floor(c/24);return c<1?"Hace menos de 1 hora":c<24?`Hace ${c} horas`:p===1?"Ayer":p<7?`Hace ${p} d\xEDas`:e.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})}getLocationTimeAgo(t){if(!t)return"";let e=new Date(t),n=new Date().getTime()-e.getTime(),c=Math.floor(n/(1e3*60)),p=Math.floor(c/60),C=Math.floor(p/24);return c<1?"Reci\xE9n actualizada":c<60?`Hace ${c} minutos`:p<24?`Hace ${p} horas`:`Hace ${C} d\xEDas`}formatLocationDateTime(t){return t?new Date(t).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Sin fecha"}copyCoordinates(t){if(t?.geublat&&t?.geublon){let e=`${t.geublat}, ${t.geublon}`;navigator.clipboard.writeText(e).then(()=>{this.msgService.add({severity:"success",summary:"Copia exitosa",detail:"Las coordenadas se copiaron al portapapeles",life:1e3})})}}initializeDialogMap(){try{let t=document.getElementById("dialogMapContainer");if(!t){console.error("Contenedor del mapa del di\xE1logo no encontrado");return}this.dialogMap=E.map(t,{center:[-.2298,-78.5249],zoom:13,zoomControl:!0}),E.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:"\xA9 OpenStreetMap contributors"}).addTo(this.dialogMap),setTimeout(()=>{this.dialogMap?.invalidateSize()},100)}catch(t){console.error("Error inicializando mapa del di\xE1logo:",t)}}showGeocercaPreview(t){if(this.dialogMap){this.dialogPreviewPolygon&&(this.dialogMap.removeLayer(this.dialogPreviewPolygon),this.dialogPreviewPolygon=null);try{if(t.geoccoor){this.showFullPolygonPreview(t);return}if(t.geoclat&&t.geoclon){this.showCenterPointPreview(t);return}console.warn("Geocerca sin coordenadas v\xE1lidas:",t)}catch(e){console.error("Error mostrando vista previa de geocerca:",e),this.msgService.add({severity:"error",summary:"Error",detail:"No se pudo mostrar la vista previa de la geocerca"})}}}showFullPolygonPreview(t){try{let e=typeof t.geoccoor=="string"?JSON.parse(t.geoccoor):t.geoccoor;if(!Array.isArray(e)||e.length<3){console.warn("Coordenadas insuficientes para formar pol\xEDgono, usando punto central"),this.showCenterPointPreview(t);return}let i=e.map(C=>{let S=parseFloat(C.lat),oe=parseFloat(C.lng);if(isNaN(S)||isNaN(oe))throw new Error(`Coordenada inv\xE1lida: lat=${C.lat}, lng=${C.lng}`);return[S,oe]});this.dialogPreviewPolygon=E.polygon(i,{color:this.getGeocercaColor(t.geocpri)||"#3388ff",fillColor:this.getGeocercaColor(t.geocpri)||"#3388ff",fillOpacity:.25,weight:3,opacity:.8,dashArray:t.geocact?void 0:"5, 10"}).addTo(this.dialogMap);let n=this.dialogPreviewPolygon.getBounds(),c=n.getCenter(),p=E.marker([c.lat,c.lng],{icon:E.divIcon({className:"geocerca-center-marker",html:`<div style="
                    width: 16px;
                    height: 16px;
                    background-color: ${this.getGeocercaColor(t.geocpri)||"#3388ff"};
                    border: 3px solid white;
                    border-radius: 50%;
                    box-shadow: 0 3px 6px rgba(0,0,0,0.4);
                "></div>`,iconSize:[16,16],iconAnchor:[8,8]})}).addTo(this.dialogMap);if(this.dialogMap.fitBounds(n,{padding:[20,20],maxZoom:16}),this.selectedUser){let C=this.createGeocercaPopupContent(t,this.selectedUser);p.bindPopup(C,{maxWidth:300,className:"custom-popup"}).openPopup()}console.log(`Pol\xEDgono completo mostrado para geocerca: ${t.geocnom} con ${e.length} v\xE9rtices`)}catch(e){console.error("Error parseando coordenadas del pol\xEDgono:",e),this.showCenterPointPreview(t)}}showCenterPointPreview(t){if(!t.geoclat||!t.geoclon){console.warn("Sin coordenadas de centro disponibles");return}let e=parseFloat(t.geoclat),i=parseFloat(t.geoclon);if(isNaN(e)||isNaN(i)){console.error("Coordenadas de centro inv\xE1lidas:",{lat:t.geoclat,lon:t.geoclon});return}let n=500;this.dialogPreviewPolygon=E.circle([e,i],{radius:n,color:this.getGeocercaColor(t.geocpri)||"#3388ff",fillColor:this.getGeocercaColor(t.geocpri)||"#3388ff",fillOpacity:.15,weight:2,opacity:.6,dashArray:"10, 5"}).addTo(this.dialogMap);let c=E.marker([e,i],{icon:E.divIcon({className:"geocerca-center-marker",html:`<div style="
                width: 12px;
                height: 12px;
                background-color: ${this.getGeocercaColor(t.geocpri)||"#3388ff"};
                border: 2px solid white;
                border-radius: 50%;
                box-shadow: 0 2px 4px rgba(0,0,0,0.3);
            "></div>`,iconSize:[12,12],iconAnchor:[6,6]})}).addTo(this.dialogMap);if(this.dialogMap.setView([e,i],15),this.selectedUser){let p=this.createGeocercaPopupContent(t,this.selectedUser);c.bindPopup(p,{maxWidth:300,className:"custom-popup"}).openPopup()}console.log(`Vista aproximada mostrada para geocerca: ${t.geocnom} en [${e}, ${i}]`)}addToGeocodingQueue(t,e,i){this.geocodingQueue.some(c=>c.userId===i)||this.loadingLocations.has(i)||this.userLocations.has(i)||(this.geocodingQueue.push({userId:i,lat:t,lon:e}),this.loadingLocations.add(i),this.isProcessingQueue||this.processGeocodingQueue())}buildLocationName(t){let e=t.address,i=[];return e.road&&i.push(e.road),e.quarter&&e.quarter!==e.road&&i.push(e.quarter),e.city_district&&e.city_district!==e.quarter&&i.push(e.city_district),e.city&&i.push(e.city),i.length>0?i.slice(0,3).join(", "):t.display_name.split(",").slice(0,2).join(",")}delay(t){return new Promise(e=>setTimeout(e,t))}processGeocodingQueue(){return P(this,null,function*(){if(!(this.isProcessingQueue||this.geocodingQueue.length===0)){for(this.isProcessingQueue=!0;this.geocodingQueue.length>0;){let t=this.geocodingQueue.shift();if(t){try{let i=Date.now()-this.lastRequestTime,n=Math.max(0,this.MIN_REQUEST_INTERVAL-i);n>0&&(yield this.delay(n)),yield this.performGeocodingRequest(t.lat,t.lon,t.userId),this.lastRequestTime=Date.now()}catch(e){console.warn(`Error procesando geocoding para ${t.userId}:`,e),this.handleGeocodingError(t)}yield this.delay(200)}}this.isProcessingQueue=!1}})}performGeocodingRequest(t,e,i){let n=`https://nominatim.openstreetmap.org/reverse?format=json&lat=${t}&lon=${e}&addressdetails=1`;return this.http.get(n,{headers:{"User-Agent":`${this.enterpriseName||"VendedoresApp"}/1.0`}}).pipe(Gt(1e4),Pt({count:this.MAX_RETRIES,delay:(c,p)=>{let C=Math.pow(2,p)*1e3;return console.log(`Reintentando geocoding para ${i} en ${C}ms (intento ${p})`),Ut(C)}}),kt(c=>(console.warn(`Error en geocoding para ${i} despu\xE9s de ${this.MAX_RETRIES} intentos:`,c),wt(null))),Dt(()=>{this.loadingLocations.delete(i)})).toPromise().then(c=>{if(c&&c.address){let p=this.buildLocationName(c);this.userLocations.set(i,p),this.failedRequests.delete(i)}else this.userLocations.set(i,"Ubicaci\xF3n no disponible")})}handleGeocodingError(t){let e=this.failedRequests.get(t.userId)||0;if(e<this.MAX_RETRIES){let i=Math.pow(2,e)*2e3;setTimeout(()=>{this.failedRequests.set(t.userId,e+1),this.geocodingQueue.push(t),this.isProcessingQueue||this.processGeocodingQueue()},i)}else this.loadingLocations.delete(t.userId),this.userLocations.set(t.userId,"Ubicaci\xF3n no disponible"),this.failedRequests.delete(t.userId)}confirmarDesvincularGeocerca(t){this.confirmationService.confirm({message:`\xBFEst\xE1 seguro de que desea desvincular la geocerca "${t.geocnom}" del vendedor "${this.selectedUser?.nombreVendedor}"?`,header:"Confirmar Desvinculaci\xF3n",icon:"pi pi-exclamation-triangle",acceptLabel:"S\xED, Desvincular",rejectLabel:"Cancelar",acceptButtonStyleClass:"p-button-warning p-button-sm",rejectButtonStyleClass:"p-button-text p-button-sm",accept:()=>{this.desvincularGeocercaDelVendedor(t)},reject:()=>{this.msgService.add({severity:"info",summary:"Cancelado",detail:"La desvinculaci\xF3n ha sido cancelada",life:3e3})}})}desvincularGeocercaDelVendedor(t){this.loading=!0,this.geocercaService.desvincularGeocerca(t.geoccod).subscribe({next:()=>{this.msgService.add({severity:"success",summary:"Desvinculaci\xF3n Exitosa",detail:`La geocerca "${t.geocnom}" ha sido desvinculada correctamente`,life:5e3}),this.selectedUser&&this.refreshData(),this.loading=!1},error:e=>{console.error("Error al desvincular geocerca:",e);let i="No se pudo desvincular la geocerca";e.error?.message?i=e.error.message:e.status===404?i="La geocerca no fue encontrada":e.status===403&&(i="No tiene permisos para realizar esta acci\xF3n"),this.msgService.add({severity:"error",summary:"Error de Desvinculaci\xF3n",detail:i,life:7e3}),this.loading=!1}})}static \u0275fac=function(e){return new(e||o)(I(De),I(ye),I(me),I(V),I(Ne),I(le))};static \u0275cmp=H({type:o,selectors:[["app-vendedores"]],viewQuery:function(e,i){if(e&1&&Z(Mr,7),e&2){let n;z(n=$())&&(i.mapContainer=n.first)}},decls:67,vars:25,consts:[["locationInput",""],["mapContainer",""],["scrollContainer",""],[1,"flex","flex-col","md:flex-row","gap-8"],[1,"flex","flex-1","flex-col","lg:flex-row","gap-2","sm:gap-4","overflow-hidden","min-h-0"],[1,"w-full","lg:w-1/4","flex","flex-col"],[1,"flex","flex-col","flex-1","overflow-hidden","h-full","bg-white","dark:bg-surface-900","border","border-surface-200","dark:border-surface-700","rounded-lg","shadow-sm"],[1,"relative","overflow-hidden","p-4","bg-gradient-to-br","from-white","via-surface-50/80","to-surface-100/30","dark:from-surface-900","dark:via-surface-800/90","dark:to-surface-900/60","rounded-t-lg","border-b","border-surface-200/60","dark:border-surface-700/60"],[1,"absolute","inset-0","bg-gradient-to-r","from-transparent","via-primary-50/10","to-transparent","dark:via-primary-900/5"],[1,"relative"],[1,"space-y-3"],[1,"overflow-hidden","flex-1"],[1,"p-3"],["header","Agregar Geocerca al Vendedor","styleClass","w-full max-w-7xl",3,"visibleChange","onHide","visible","modal","closable","draggable","resizable"],[1,"flex","gap-4","h-[600px]"],[1,"w-1/2","flex","flex-col"],[1,"mb-3"],[1,"text-sm","font-semibold","text-surface-700","dark:text-surface-300","mb-2"],["type","text","placeholder","Buscar geocerca disponible...",1,"w-full","px-3","py-2","pl-9","text-sm","border-2","border-surface-200","dark:border-surface-600","rounded-lg","bg-white","dark:bg-surface-800","hover:border-primary-200","dark:hover:border-primary-700","focus:ring-2","focus:ring-primary-500","focus:border-primary-500","transition-colors",3,"ngModelChange","input","ngModel"],[1,"pi","pi-search","absolute","left-3","top-1/2","transform","-translate-y-1/2","text-surface-400"],[1,"flex-1","overflow-y-auto","pr-2","custom-scrollbar"],[1,"space-y-2"],[1,"text-sm","font-semibold","text-surface-700","dark:text-surface-300"],[1,"flex-1","border-2","border-surface-200","dark:border-surface-600","rounded-lg","overflow-hidden"],["id","dialogMapContainer",1,"w-full","h-full"],[1,"w-full","h-full","flex","items-center","justify-center","bg-surface-50","dark:bg-surface-800"],["pTemplate","footer"],[1,"w-full","lg:flex-1","flex","flex-col","order-1","lg:order-2"],[1,"relative","space-y-4"],[1,"flex","flex-col","sm:flex-row","sm:justify-between","sm:items-center","gap-3","p-3","sm:p-4","bg-gradient-to-r","from-surface-50","to-white","dark:from-surface-900","dark:to-surface-800","rounded-lg","border","border-surface-200","dark:border-surface-700"],[1,"flex","items-center","gap-2","min-w-0"],[1,"w-12","h-12","flex","items-center","justify-center","rounded-xl","bg-gradient-to-br","from-primary-100","via-primary-200/60","to-primary-300/40","dark:from-primary-900/50","dark:via-primary-800/70","dark:to-primary-700/50","border","border-primary-200/60","dark:border-primary-600/40","shadow-lg"],[1,"pi","pi-users","text-primary-600","dark:text-primary-300","text-xl"],[1,"min-w-0"],[1,"text-gray-800","dark:text-white","text-xl","sm:text-2xl","font-bold","leading-snug","tracking-tight"],[1,"text-gray-500","dark:text-gray-400","text-xs","sm:text-sm","leading-snug",2,"margin-top","-15px"],[1,"flex","gap-2","flex-shrink-0","items-center"],["pTooltip","Refrescar","tooltipPosition","bottom",1,"flex","items-center","justify-center","h-9","w-9","rounded-xl","bg-white","dark:bg-surface-800","hover:bg-primary-50","dark:hover:bg-primary-900/30","shadow-sm","border","border-surface-200","dark:border-surface-700","transition-all","duration-200",3,"click"],[1,"pi","pi-refresh","text-primary-500","dark:text-primary-400"],["pTooltip","Limpiar selecci\xF3n","tooltipPosition","bottom",1,"flex","items-center","justify-center","h-9","w-9","rounded-xl","bg-white","dark:bg-surface-800","hover:bg-red-50","dark:hover:bg-red-900/30","shadow-sm","border","border-surface-200","dark:border-surface-700","transition-all","duration-200"],[1,"flex","flex-col","sm:flex-row","gap-3"],[1,"flex-1","min-w-0"],["iconPosition","left",1,"w-full"],[1,"pi","pi-map-marker"],["pInputText","","type","text","placeholder","Buscar ubicaci\xF3n (ej: Quito, Ecuador)",1,"w-full","text-sm","py-2.5","px-4","rounded-lg","border-2","border-surface-200/80","dark:border-surface-600/80","bg-gradient-to-r","from-white","to-surface-50/50","dark:from-surface-800","dark:to-surface-800/80","hover:border-primary-300/60","dark:hover:border-primary-600/60","focus:ring-2","focus:ring-primary-500/30","focus:border-primary-500/80","transition-all","duration-200",3,"ngModelChange","keyup.enter","ngModel"],[1,"flex","gap-2","flex-shrink-0"],["icon","pi pi-search","severity","primary","size","small","pTooltip","Buscar ubicaci\xF3n","tooltipPosition","bottom",1,"!rounded-lg",3,"click","loading"],["icon","pi pi-times","severity","secondary","size","small","pTooltip","Limpiar b\xFAsqueda","tooltipPosition","bottom",1,"!rounded-lg",3,"click","text"],[1,"bg-gradient-to-br","from-white","via-surface-50/60","to-surface-100/30","dark:from-surface-800","dark:via-surface-800/80","dark:to-surface-900/40","rounded-xl","border","border-surface-200/60","dark:border-surface-700/60","p-3"],[1,"flex-1","relative","overflow-hidden","min-h-0"],[1,"absolute","inset-0","flex","items-center","justify-center","bg-gradient-to-br","from-surface-100/50","via-transparent","to-surface-200/30","dark:from-surface-800/30","dark:to-surface-900/50","z-10"],[1,"w-full","h-full","rounded-b-lg",2,"min-height","600px","height","100%","width","100%"],[3,"breakpoints"],["type","text","placeholder","Buscar vendedores...",1,"w-full","py-3","pl-11","pr-12","text-sm","rounded-xl","border-2","border-surface-200/80","dark:border-surface-600/80","bg-gradient-to-r","from-white","to-surface-50/50","dark:from-surface-800","dark:to-surface-800/80","hover:border-primary-300/60","dark:hover:border-primary-600/60","focus:ring-2","focus:ring-primary-500/30","focus:border-primary-500/80","transition-all","duration-200","shadow-sm",3,"input"],[1,"absolute","left-3.5","top-1/2","transform","-translate-y-1/2"],[1,"pi","pi-search","text-primary-400","dark:text-primary-500"],["title","Limpiar b\xFAsqueda",1,"absolute","right-3","top-1/2","transform","-translate-y-1/2","w-6","h-6","flex","items-center","justify-center","text-surface-400","hover:text-primary-500","dark:hover:text-primary-400","transition-colors","rounded-full","hover:bg-surface-100/80","dark:hover:bg-surface-700/60"],[1,"pi","pi-times","text-xs"],[1,"mt-3","flex","justify-between","items-center","text-xs","text-surface-600","dark:text-surface-400"],[1,"bg-gradient-to-br","from-white","via-surface-50/60","to-surface-100/30","dark:from-surface-800","dark:via-surface-800/80","dark:to-surface-900/40","rounded-xl","border","border-surface-200/60","dark:border-surface-700/60","p-4"],[1,"flex","items-center","justify-between","mb-3"],[1,"w-8","h-8","flex","items-center","justify-center","rounded-lg","bg-surface-100/80","dark:bg-surface-700/60","hover:bg-primary-100/80","dark:hover:bg-primary-900/40","border","border-surface-200/60","dark:border-surface-600/60","hover:border-primary-300/60","dark:hover:border-primary-600/60","transition-all","duration-200","group",3,"click"],[1,"pi","pi-arrow-left","text-surface-600","dark:text-surface-400","group-hover:text-primary-600","dark:group-hover:text-primary-400","text-sm"],[1,"inline-flex","items-center","gap-2","px-3","py-1.5","rounded-lg","bg-primary-100/80","dark:bg-primary-900/40","hover:bg-primary-200/80","dark:hover:bg-primary-900/60","border","border-primary-200/60","dark:border-primary-700/60","text-primary-700","dark:text-primary-300","text-xs","font-medium","transition-all","duration-200"],[1,"flex","items-center","gap-3","mb-3"],[1,"relative","flex-shrink-0"],[1,"w-12","h-12","flex","items-center","justify-center","rounded-xl","bg-gradient-to-br","from-primary-100","via-primary-200/60","to-primary-300/40","dark:from-primary-900/50","dark:via-primary-800/70","dark:to-primary-700/50","border","border-primary-200/60","dark:border-primary-600/40","shadow-md"],[1,"pi","pi-user","text-primary-600","dark:text-primary-300","text-lg"],[1,"absolute","-top-1","-right-1","w-4","h-4","bg-green-500","border-2","border-white","dark:border-surface-800","rounded-full"],[1,"w-full","h-full","bg-green-400","rounded-full","animate-ping","opacity-75"],[1,"font-bold","text-surface-900","dark:text-surface-100","mb-1","truncate","text-base"],[1,"flex","items-center","gap-2"],[1,"inline-flex","items-center","px-2.5","py-1","rounded-lg","bg-surface-100/80","dark:bg-surface-700/60","border","border-surface-200/60","dark:border-surface-600/60","text-xs","font-mono","font-medium","text-surface-700","dark:text-surface-300"],[1,"pi","pi-id-card","mr-1.5","text-xs"],[1,"inline-flex","items-center","px-2","py-0.5","rounded","bg-surface-200/60","dark:bg-surface-600/40","text-xs","font-mono","text-surface-600","dark:text-surface-400"],[1,"flex","items-center","gap-2","mb-3"],[1,"pi","pi-map","text-surface-600","dark:text-surface-400"],[1,"font-semibold","text-surface-700","dark:text-surface-300","text-sm"],[1,"border-t","border-surface-200/60","dark:border-surface-700/60","pt-3"],[1,"space-y-4"],[1,"flex","items-center","gap-3"],[1,"w-8","h-8","flex","items-center","justify-center","rounded-xl","bg-gradient-to-br","from-red-100","to-red-200/60","dark:from-red-900/40","dark:to-red-800/60","border","border-red-200/60","dark:border-red-700/40"],[1,"pi","pi-map","text-red-600","dark:text-red-400","text-sm"],[1,"text-sm","font-bold","text-surface-800","dark:text-surface-200","uppercase","tracking-wider"],[1,"w-full","relative","overflow-hidden","bg-gradient-to-r","from-red-500","via-red-600","to-red-700","hover:from-red-600","hover:via-red-700","hover:to-red-800","text-white","font-bold","py-3","px-4","rounded-xl","transition-all","duration-300","shadow-lg","hover:shadow-xl","transform","hover:-translate-y-0.5","border","border-red-400/30",3,"click"],[1,"absolute","inset-0","bg-gradient-to-r","from-transparent","via-white/20","to-transparent","opacity-0","hover:opacity-100","transition-opacity","duration-300"],[1,"relative","flex","items-center","justify-center","gap-2","uppercase","tracking-wide","text-sm"],[1,"pi","pi-plus","text-sm"],[1,"inline-flex","items-center","gap-2","px-3","py-1.5","rounded-lg","bg-primary-100/80","dark:bg-primary-900/40","hover:bg-primary-200/80","dark:hover:bg-primary-900/60","border","border-primary-200/60","dark:border-primary-700/60","text-primary-700","dark:text-primary-300","text-xs","font-medium","transition-all","duration-200",3,"click"],[1,"pi","pi-map-marker","text-xs"],[1,"flex","items-center","justify-center","w-6","h-6","rounded-lg","bg-blue-100/80","dark:bg-blue-900/30","border","border-blue-200/60","dark:border-blue-700/40"],[1,"pi","pi-map-marker","text-blue-600","dark:text-blue-400","text-xs"],[1,"text-sm","text-surface-700","dark:text-surface-300","font-medium","truncate",3,"title"],[1,"flex","items-center","justify-between","mb-2"],[1,"w-2","h-2","bg-green-500","rounded-full","animate-pulse"],[1,"text-xs","font-medium","text-green-600","dark:text-green-400"],[1,"text-xs","text-surface-500","dark:text-surface-500"],[1,"bg-white","dark:bg-surface-700/50","rounded-lg","border","border-surface-200/60","dark:border-surface-600/60","p-2"],[1,"flex","items-center","justify-between"],[1,"pi","pi-compass","text-blue-500","text-xs"],[1,"flex","items-center","gap-3","text-xs"],[1,"text-surface-500","dark:text-surface-500"],[1,"font-mono","text-surface-700","dark:text-surface-300"],[1,"text-surface-300","dark:text-surface-600"],["title","Copiar coordenadas",1,"text-xs","text-primary-600","dark:text-primary-400","hover:text-primary-700","dark:hover:text-primary-300","p-1","rounded","hover:bg-primary-50","dark:hover:bg-primary-900/20","transition-all",3,"click"],[1,"pi","pi-copy","text-xs"],[1,"mt-2","pt-2","border-t","border-surface-200/40","dark:border-surface-600/40"],[1,"text-xs","text-surface-600","dark:text-surface-400"],[1,"flex","items-center","gap-2","text-center","bg-orange-50/80","dark:bg-orange-900/20","rounded-lg","border","border-orange-200/60","dark:border-orange-700/60","p-2"],[1,"pi","pi-exclamation-triangle","text-orange-600","dark:text-orange-400","text-sm"],[1,"text-xs","text-orange-700","dark:text-orange-300","font-medium"],["type","text","placeholder","Buscar geocerca...",1,"w-full","py-2.5","pl-10","pr-4","text-sm","rounded-lg","border","border-surface-200/80","dark:border-surface-600/80","bg-white","dark:bg-surface-800","hover:border-primary-300/60","dark:hover:border-primary-600/60","focus:ring-2","focus:ring-primary-500/30","focus:border-primary-500/80","transition-all","duration-200",3,"ngModelChange","input","ngModel"],[1,"absolute","left-3","top-1/2","transform","-translate-y-1/2"],[1,"pi","pi-search","text-surface-400","dark:text-surface-500","text-sm"],[1,"space-y-3","p-3","max-h-[400px]","overflow-y-auto","custom-scrollbar"],[1,"rounded-xl","border","border-surface-200/60","dark:border-surface-700/60","bg-gradient-to-br","from-white","via-surface-50/50","to-surface-100/20","dark:from-surface-800","dark:via-surface-800/80","dark:to-surface-900/40","p-4"],[1,"flex","items-center","gap-4"],[1,"w-12","h-12","rounded-xl","bg-gradient-to-br","from-surface-200","to-surface-300","dark:from-surface-700","dark:to-surface-600","animate-pulse"],[1,"flex-1","space-y-2"],[1,"h-5","w-32","bg-surface-200","dark:bg-surface-700","rounded","animate-pulse"],[1,"h-4","w-24","bg-surface-200","dark:bg-surface-700","rounded","animate-pulse"],[1,"h-3","w-16","bg-surface-200","dark:bg-surface-700","rounded","animate-pulse"],[1,"space-y-3","p-3","custom-scrollbar",3,"scroll"],[1,"relative","overflow-hidden","rounded-xl","border","border-surface-200/80","dark:border-surface-600/80","bg-gradient-to-br","from-white","via-surface-50/60","to-surface-100/30","dark:from-surface-700","dark:via-surface-700/90","dark:to-surface-800/60","hover:from-primary-50/30","hover:via-white","hover:to-primary-100/20","dark:hover:from-surface-600/80","dark:hover:via-surface-700/60","dark:hover:to-primary-900/20","transition-all","duration-300","group","hover:shadow-lg","hover:border-primary-200/60","dark:hover:border-primary-600/60","hover:-translate-y-0.5","cursor-pointer"],[1,"text-center","py-12"],[1,"p-3","border-t","border-surface-200/60","dark:border-surface-700/60"],[1,"relative","overflow-hidden","rounded-xl","border","border-surface-200/80","dark:border-surface-600/80","bg-gradient-to-br","from-white","via-surface-50/60","to-surface-100/30","dark:from-surface-700","dark:via-surface-700/90","dark:to-surface-800/60","hover:from-primary-50/30","hover:via-white","hover:to-primary-100/20","dark:hover:from-surface-600/80","dark:hover:via-surface-700/60","dark:hover:to-primary-900/20","transition-all","duration-300","group","hover:shadow-lg","hover:border-primary-200/60","dark:hover:border-primary-600/60","hover:-translate-y-0.5","cursor-pointer",3,"click"],[1,"absolute","inset-0","bg-gradient-to-r","from-transparent","via-primary-50/20","to-transparent","dark:via-primary-900/10","opacity-0","group-hover:opacity-100","transition-opacity","duration-300"],[1,"relative","p-4"],[1,"w-12","h-12","flex","items-center","justify-center","rounded-xl","bg-gradient-to-br","from-primary-100","via-primary-200/50","to-primary-300/30","dark:from-primary-900/40","dark:via-primary-800/60","dark:to-primary-700/40","border","border-primary-200/50","dark:border-primary-700/50","group-hover:scale-105","transition-transform","duration-200"],[1,"absolute","-top-1","-right-1","w-4","h-4","bg-green-500","border-2","border-white","dark:border-surface-800","rounded-full","flex","items-center","justify-center"],[1,"w-2","h-2","bg-white","rounded-full"],[1,"font-bold","text-surface-900","dark:text-surface-0","mb-2","group-hover:text-primary-700","dark:group-hover:text-primary-300","transition-colors","leading-tight"],[1,"flex","items-center","gap-2","mb-2"],[1,"inline-flex","items-center","px-2.5","py-1","rounded-lg","bg-surface-100/80","dark:bg-surface-600/60","border","border-surface-200/60","dark:border-surface-500/60","text-xs","font-mono","font-medium","text-surface-700","dark:text-surface-300"],[1,"inline-flex","items-center","px-2","py-1","rounded-md","bg-surface-200/60","dark:bg-surface-600/40","text-xs","font-mono","text-surface-600","dark:text-surface-400"],[1,"flex","items-center","gap-1.5"],[1,"flex","items-center","justify-center","w-6"],[1,"pi","pi-chevron-right","text-surface-300","dark:text-surface-600","text-sm","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"text-xs","text-green-600","dark:text-green-400","font-medium"],[1,"flex","items-center","gap-2","text-xs","text-surface-600","dark:text-surface-400"],[1,"pi","pi-map-marker","text-green-500","w-3"],[1,"font-mono"],[1,"flex","items-center","gap-2","text-xs","text-surface-500","dark:text-surface-500"],[1,"pi","pi-clock","text-blue-500","w-3"],[1,"w-2","h-2","bg-gray-400","rounded-full"],[1,"text-xs","text-gray-500","dark:text-gray-400"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","bg-emerald-100/80","dark:bg-emerald-900/30","border","border-emerald-200/60","dark:border-emerald-700/40","text-xs","font-medium","text-emerald-700","dark:text-emerald-300"],[1,"pi","pi-map","mr-1","text-xs"],[1,"absolute","inset-0","bg-gradient-to-br","from-surface-100/50","via-transparent","to-surface-200/30","dark:from-surface-800/30","dark:to-surface-900/50","rounded-3xl"],[1,"relative","p-8"],[1,"w-16","h-16","mx-auto","mb-4","bg-gradient-to-br","from-surface-200","to-surface-300","dark:from-surface-700","dark:to-surface-800","rounded-2xl","flex","items-center","justify-center","border","border-surface-300/60","dark:border-surface-600/60"],[1,"pi","pi-users","text-2xl","text-surface-500","dark:text-surface-400"],[1,"text-surface-700","dark:text-surface-300","font-bold","mb-2","text-sm"],[1,"text-surface-500","dark:text-surface-500","text-xs","max-w-sm","mx-auto","leading-relaxed"],[1,"text-sm",3,"onPageChange","rows","totalRecords","first"],[1,"max-h-[60rem]","overflow-y-auto","space-y-3","custom-scrollbar"],[1,"text-center","py-16"],[1,"relative","overflow-hidden","rounded-xl","border","border-surface-200/80","dark:border-surface-600/80","bg-gradient-to-br","from-white","via-surface-50/60","to-surface-100/30","dark:from-surface-700","dark:via-surface-700/90","dark:to-surface-800/60","hover:from-primary-50/30","hover:via-white","hover:to-primary-100/20","dark:hover:from-surface-600/80","dark:hover:via-surface-700/60","dark:hover:to-primary-900/20","transition-all","duration-300","group","hover:shadow-lg","hover:border-primary-200/60","dark:hover:border-primary-600/60","hover:-translate-y-0.5"],[1,"absolute","inset-0","bg-gradient-to-r","from-transparent","via-surface-100/20","to-transparent","dark:via-surface-600/10","opacity-0","group-hover:opacity-100","transition-opacity","duration-300"],[1,"flex","justify-between","items-start","mb-3"],[1,"inline-flex","items-center","px-2","py-1","rounded-md","bg-surface-100/80","dark:bg-surface-600/60","border","border-surface-200/60","dark:border-surface-500/60","text-xs","font-mono","font-medium","text-surface-700","dark:text-surface-300"],[1,"pi","pi-hashtag","mr-1","text-xs"],[1,"font-bold","text-surface-900","dark:text-surface-0","group-hover:text-primary-700","dark:group-hover:text-primary-300","transition-colors","leading-tight","uppercase","tracking-wide","mb-1"],["tooltipPosition","left",1,"w-4","h-4","rounded-full","border-2","border-white","dark:border-surface-700","shadow-sm",3,"pTooltip"],[1,"absolute","inset-0","bg-green-400","rounded-full","animate-ping","opacity-75"],[1,"space-y-2","mb-3"],[1,"flex","items-center","gap-2","text-sm","text-surface-600","dark:text-surface-400"],[1,"flex","items-center","justify-center","w-5","h-5","rounded-md","bg-blue-100/80","dark:bg-blue-900/30","border","border-blue-200/40","dark:border-blue-700/40"],[1,"font-medium"],[1,"flex","items-center","justify-center","w-5","h-5","rounded-md","bg-emerald-100/80","dark:bg-emerald-900/30","border","border-emerald-200/40","dark:border-emerald-700/40"],[1,"pi","pi-globe","text-emerald-600","dark:text-emerald-400","text-xs"],[1,"flex","items-center","gap-2","mb-4","flex-wrap"],[1,"inline-flex","items-center","px-3","py-1.5","rounded-full","text-xs","font-semibold","border","shadow-sm"],[1,"pi","pi-flag","mr-1.5"],[1,"flex","justify-between","items-center"],[1,"inline-flex","items-center","gap-2","px-3","py-2","rounded-lg","bg-primary-50/80","dark:bg-primary-900/20","border","border-primary-200/60","dark:border-primary-700/40","text-primary-700","dark:text-primary-300","hover:bg-primary-100/80","dark:hover:bg-primary-800/30","transition-all","duration-200","text-xs","font-medium",3,"click"],[1,"pi","pi-eye"],["pTooltip","Desvincular geocerca del vendedor","tooltipPosition","top",1,"w-10","h-10","flex","items-center","justify-center","rounded-xl","hover:bg-orange-100/80","dark:hover:bg-orange-900/30","border","border-transparent","hover:border-orange-200/60","dark:hover:border-orange-700/40","transition-all","duration-200","group",3,"click","disabled"],[1,"pi","pi-sign-out","text-orange-500","dark:text-orange-400","group-hover:scale-110","transition-transform","duration-200"],[1,"absolute","inset-0","bg-gradient-to-br","from-surface-100/50","via-transparent","to-surface-200/30","dark:from-surface-800/30","dark:to-surface-900/50","rounded-2xl"],[1,"w-16","h-16","mx-auto","mb-4","bg-gradient-to-br","from-surface-200","to-surface-300","dark:from-surface-700","dark:to-surface-800","rounded-full","flex","items-center","justify-center"],[1,"pi","pi-search","text-2xl","text-surface-500","dark:text-surface-400"],[1,"text-surface-700","dark:text-surface-300","font-semibold","mb-2"],[1,"text-surface-500","dark:text-surface-500","text-sm"],[1,"relative","p-12"],[1,"w-20","h-20","mx-auto","mb-6","bg-gradient-to-br","from-surface-200","to-surface-300","dark:from-surface-700","dark:to-surface-800","rounded-2xl","flex","items-center","justify-center","border","border-surface-300/60","dark:border-surface-600/60"],[1,"pi","pi-map","text-3xl","text-surface-500","dark:text-surface-400"],[1,"text-surface-700","dark:text-surface-300","font-bold","mb-3","text-base"],[1,"text-surface-500","dark:text-surface-500","text-sm","max-w-sm","mx-auto","leading-relaxed"],[1,"p-3","border","border-surface-200","dark:border-surface-600","rounded-lg"],["height","1rem",1,"mb-2"],["height","0.8rem","width","60%",1,"mb-1"],["height","0.7rem","width","40%"],[1,"p-3","border-2","rounded-lg","cursor-pointer","transition-all","duration-200","hover:shadow-md",3,"class"],[1,"text-center","py-8"],[1,"p-3","border-2","rounded-lg","cursor-pointer","transition-all","duration-200","hover:shadow-md",3,"click"],[1,"flex","justify-between","items-start","mb-2"],[1,"flex-1"],[1,"font-semibold","text-surface-900","dark:text-surface-0","text-sm","mb-1","uppercase","tracking-wide"],[1,"text-xs","text-surface-500","dark:text-surface-400","uppercase"],[1,"w-5","h-5","flex","items-center","justify-center","rounded-full","bg-primary-500","text-white"],[1,"flex","items-center","gap-1","mb-1"],[1,"uppercase"],[1,"flex","items-center","gap-1"],[1,"pi","pi-globe","text-xs"],[1,"flex","items-center","gap-2","mt-2"],[1,"inline-flex","items-center","px-2","py-1","rounded","text-xs","font-medium","bg-green-100","text-green-700","dark:bg-green-900/30","dark:text-green-300"],[1,"pi","pi-check-circle","mr-1","text-xs"],[1,"inline-flex","items-center","px-2","py-1","rounded","text-xs","font-medium",3,"background-color","color"],[1,"pi","pi-check","text-xs"],[1,"inline-flex","items-center","px-2","py-1","rounded","text-xs","font-medium"],[1,"pi","pi-flag","mr-1"],[1,"pi","pi-search","text-3xl","text-surface-400","mb-3"],[1,"text-surface-600","dark:text-surface-400","text-sm"],[1,"text-center"],[1,"pi","pi-map","text-4xl","text-surface-400","mb-3"],[1,"text-sm","text-surface-600","dark:text-surface-400"],[1,"flex","gap-2"],[1,"px-4","py-2","text-sm","border","border-surface-300","dark:border-surface-600","rounded-lg","hover:bg-surface-100","dark:hover:bg-surface-700","transition-colors",3,"click"],[1,"px-4","py-2","text-sm","bg-primary-500","hover:bg-primary-600","text-white","rounded-lg","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"hidden","sm:flex","items-center","gap-2","px-3","py-1.5","bg-gradient-to-r","from-green-50","to-emerald-50","dark:from-green-900/20","dark:to-emerald-900/20","rounded-full","border","border-green-200/60","dark:border-green-700/40"],[1,"pi","pi-user","text-green-600","dark:text-green-400","text-sm"],[1,"text-xs","text-green-700","dark:text-green-300","font-medium"],[1,"w-px","h-6","bg-surface-200","dark:bg-surface-700"],["pTooltip","Limpiar selecci\xF3n","tooltipPosition","bottom",1,"flex","items-center","justify-center","h-9","w-9","rounded-xl","bg-white","dark:bg-surface-800","hover:bg-red-50","dark:hover:bg-red-900/30","shadow-sm","border","border-surface-200","dark:border-surface-700","transition-all","duration-200",3,"click"],[1,"pi","pi-times","text-red-500","dark:text-red-400"],[1,"pi","pi-search","text-primary-600","dark:text-primary-400"],[1,"text-sm","font-medium","text-surface-700","dark:text-surface-300"],[1,"flex","items-center","justify-between","p-3","hover:bg-surface-100/80","dark:hover:bg-surface-700/60","rounded-lg","cursor-pointer","transition-all","duration-200","border","border-transparent","hover:border-primary-200/60","dark:hover:border-primary-600/60","group"],[1,"flex","items-center","justify-between","p-3","hover:bg-surface-100/80","dark:hover:bg-surface-700/60","rounded-lg","cursor-pointer","transition-all","duration-200","border","border-transparent","hover:border-primary-200/60","dark:hover:border-primary-600/60","group",3,"click"],[1,"flex","items-center","gap-2","min-w-0","flex-1"],[1,"w-6","h-6","flex","items-center","justify-center","rounded-md","bg-primary-100/80","dark:bg-primary-900/40","border","border-primary-200/60","dark:border-primary-700/40"],[1,"pi","pi-map-marker","text-primary-600","dark:text-primary-400","text-xs"],[1,"text-sm","text-surface-900","dark:text-surface-0","truncate","group-hover:text-primary-700","dark:group-hover:text-primary-300","transition-colors"],[1,"pi","pi-arrow-right","text-surface-400","dark:text-surface-500","text-xs","flex-shrink-0","ml-2","group-hover:text-primary-500","dark:group-hover:text-primary-400","group-hover:translate-x-1","transition-all","duration-200"],[1,"text-center","p-8"],[1,"w-16","h-16","mx-auto","mb-4","bg-gradient-to-br","from-primary-100","to-primary-200","dark:from-primary-900/40","dark:to-primary-800/60","rounded-2xl","flex","items-center","justify-center","border","border-primary-200/60","dark:border-primary-700/40"],[1,"pi","pi-spin","pi-spinner","text-2xl","text-primary-600","dark:text-primary-400"],[1,"text-surface-700","dark:text-surface-300","font-bold","mb-2"],[1,"text-sm","text-surface-500","dark:text-surface-500","max-w-sm","mx-auto","leading-relaxed"]],template:function(e,i){if(e&1){let n=b();r(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7),d(5,"div",8),r(6,"div",9),f(7,Pr,7,1),f(8,zr,39,6,"div",10),a()(),r(9,"div",11),f(10,aa,2,2),f(11,da,3,1,"div",12),a()()(),r(12,"p-dialog",13),O("visibleChange",function(p){return u(n),y(i.geocercaDialog,p)||(i.geocercaDialog=p),g(p)}),h("onHide",function(){return u(n),g(i.closeGeocercaDialog())}),r(13,"div",14)(14,"div",15)(15,"div",16)(16,"h6",17),l(17," Geocercas Disponibles: "),a(),r(18,"div",9)(19,"input",18),O("ngModelChange",function(p){return u(n),y(i.searchAvailableGeocerca,p)||(i.searchAvailableGeocerca=p),g(p)}),h("input",function(){return u(n),g(i.filterAvailableGeocercas())}),a(),d(20,"i",19),a()(),r(21,"div",20),f(22,pa,3,1,"div",21),f(23,Ca,4,1,"div",21),a()(),r(24,"div",15)(25,"div",16)(26,"h6",22),l(27," Vista Previa en Mapa: "),a()(),r(28,"div",23)(29,"div",24),f(30,xa,5,0,"div",25),a()()()(),M(31,Sa,9,2,"ng-template",26),a(),r(32,"div",27)(33,"div",6)(34,"div",7),d(35,"div",8),r(36,"div",28)(37,"div",29)(38,"div",30)(39,"div",31),d(40,"i",32),a(),r(41,"div",33)(42,"p",34),l(43," Vendedores y Geocercas "),a(),r(44,"p",35),l(45," Mapa de geolocalizaci\xF3n de vendedores activos "),a()()(),r(46,"div",36),f(47,_a,5,3),r(48,"button",37),h("click",function(){return u(n),g(i.refreshData())}),d(49,"i",38),a(),f(50,La,2,0,"button",39),a()(),r(51,"div",40)(52,"div",41)(53,"p-iconField",42)(54,"p-inputIcon"),d(55,"i",43),a(),r(56,"input",44,0),O("ngModelChange",function(p){return u(n),y(i.searchLocation,p)||(i.searchLocation=p),g(p)}),h("keyup.enter",function(){return u(n),g(i.searchLocationOnMap())}),a()()(),r(58,"div",45)(59,"p-button",46),h("click",function(){return u(n),g(i.searchLocationOnMap())}),a(),r(60,"p-button",47),h("click",function(){return u(n),g(i.clearLocationSearch())}),a()()(),f(61,Oa,8,0,"div",48),a()(),r(62,"div",49),f(63,Na,11,0,"div",50),d(64,"div",51,1),a()()()()(),d(66,"p-confirmDialog",52)}e&2&&(s(7),A(i.selectedUser?-1:7),s(),A(i.selectedUser?8:-1),s(2),A(i.selectedUser?-1:10),s(),A(i.selectedUser?11:-1),s(),L("visible",i.geocercaDialog),v("modal",!0)("closable",!0)("draggable",!1)("resizable",!1),s(7),L("ngModel",i.searchAvailableGeocerca),s(3),A(i.availableGeocercasLoading?22:-1),s(),A(i.availableGeocercasLoading?-1:23),s(7),A(i.selectedAvailableGeocerca?-1:30),s(17),A(i.selectedUser?47:-1),s(3),A(i.selectedUser?50:-1),s(6),L("ngModel",i.searchLocation),s(3),v("loading",i.searchingLocation),s(),v("text",!0),s(),A(i.searchResults.length>0?61:-1),s(2),A(i.map?-1:63),s(3),ne(T(23,wr)),v("breakpoints",T(24,Gr)))},dependencies:[ce,re,Ie,K,Q,Y,W,ge,ee,pe,X,de,xe,be,fe,Se,Ee,Ce,he,ie,Ae,te,Re,_e,ke,we,Me,Te,Ge,at,ue,zt],encapsulation:2})};var ae=class{static mapToDto(t,e){if(!t||!e||!e.centroGeocerca)throw new Error("Datos insuficientes para crear la geocerca");return{geoccod:t.geoccod?.trim()||"",geocnom:t.geocnom?.trim()||"",geocdirre:t.geocdirre?.trim()||"",geocsec:this.extractValue(t.geocsec,"parroquia"),geocciud:this.extractValue(t.geocciud,"canton"),geocprov:this.extractValue(t.geocprov,"provincia"),geocpais:t.geocpais||"ECUADOR",geoclat:this.roundCoordinate(e.centroGeocerca.lat),geoclon:this.roundCoordinate(e.centroGeocerca.lng),geoccoor:e.coordenadasParaCalculo,geocarm:Math.round(e.area),geocperm:Math.round(e.perimetro),geocpri:t.geocpri||5,geocact:t.geocact!==void 0?t.geocact:!0,geocdesc:t.geocdesc?.trim()||"",geocfcre:this.getCurrentTimestamp(),geocuscre:e.usuario,geoceqcre:e.empresa,geocest:"A"}}static extractValue(t,e){return t?typeof t=="string"?t.trim():typeof t=="object"&&t[e]?t[e].trim():"":""}static roundCoordinate(t){return Math.round(t*1e6)/1e6}static getCurrentTimestamp(){return new Date().toISOString()}static validate(t,e){let i=[];return t.geoccod?.trim()||i.push("C\xF3digo de geocerca es requerido"),t.geocnom?.trim()||i.push("Nombre de geocerca es requerido"),t.geocdirre?.trim()||i.push("Direcci\xF3n de referencia es requerida"),this.extractValue(t.geocprov,"provincia")||i.push("Provincia es requerida"),this.extractValue(t.geocciud,"canton")||i.push("Ciudad es requerida"),this.extractValue(t.geocsec,"parroquia")||i.push("Sector es requerido"),e.centroGeocerca||i.push("Centro de geocerca no definido"),e.coordenadasParaCalculo||i.push("Coordenadas de geocerca no definidas"),(!e.area||e.area<=0)&&i.push("\xC1rea de geocerca inv\xE1lida"),i}static formatCoordinatesForBackend(t){return t.map(e=>({lat:this.roundCoordinate(e.lat),lng:this.roundCoordinate(e.lng)}))}static calculatePerimeter(t){if(t.length<2)return 0;let e=0;for(let i=0;i<t.length;i++){let n=t[i],c=t[(i+1)%t.length];e+=this.haversineDistance(n.lat,n.lng,c.lat,c.lng)}return e}static calculateArea(t){if(t.length<3)return 0;let e=0;for(let n=0;n<t.length;n++){let c=t[n],p=t[(n+1)%t.length];e+=c.lng*p.lat-p.lng*c.lat}return Math.abs(e)/2*111e3*111e3}static haversineDistance(t,e,i,n){let p=this.toRadians(i-t),C=this.toRadians(n-e),S=Math.sin(p/2)*Math.sin(p/2)+Math.cos(this.toRadians(t))*Math.cos(this.toRadians(i))*Math.sin(C/2)*Math.sin(C/2);return 6371e3*(2*Math.atan2(Math.sqrt(S),Math.sqrt(1-S)))}static toRadians(t){return t*(Math.PI/180)}};var gt=class o{constructor(t){this.msgService=t}map=null;dibujoLayer=null;estadoDibujo={creando:!1,tipo:null,coordenadas:[],centro:null};marcadoresPuntos=[];lineasTemporales=[];formaActual=null;radioGeocerca=500;drawing$=new vt(this.estadoDibujo);geocercaDrawing$=new vt([]);geocercasCreadas=new Map;get drawingState$(){return this.drawing$.asObservable()}get geocercas$(){return this.geocercaDrawing$.asObservable()}initialize(t){this.map=t,this.dibujoLayer=E.featureGroup().addTo(this.map),console.log("GeocercaDrawingService inicializado")}iniciarCreacionGeocerca(t){if(!this.map){this.msgService.add({severity:"error",summary:"Error",detail:"Mapa no inicializado"});return}this.cancelarCreacion(),this.estadoDibujo={creando:!0,tipo:t,coordenadas:[],centro:null},this.configurarEventosMapa(t),this.drawing$.next(this.estadoDibujo),this.msgService.add({severity:"info",summary:"Modo dibujo activado",detail:`Haga clic en el mapa para crear una geocerca ${t}`})}configurarEventosMapa(t){this.map&&(this.map.off("click"),setTimeout(()=>{t==="circular"?(console.log("Configurando eventos para C\xCDRCULO"),this.map.on("click",this.onMapClickCircular.bind(this))):(console.log("Configurando eventos para POL\xCDGONO"),this.map.on("click",this.onMapClickPoligono.bind(this)))},100))}onMapClickCircular(t){if(!this.estadoDibujo.creando)return;let{lat:e,lng:i}=t.latlng;this.estadoDibujo.centro={lat:e,lng:i},this.formaActual&&this.dibujoLayer&&this.dibujoLayer.removeLayer(this.formaActual),this.formaActual=E.circle([e,i],{radius:this.radioGeocerca,color:"#3b82f6",fillColor:"#3b82f6",fillOpacity:.2}),this.dibujoLayer.addLayer(this.formaActual),this.generarCoordenadasCirculo(e,i,this.radioGeocerca),this.estadoDibujo.coordenadas=[...this.estadoDibujo.coordenadas],this.drawing$.next(this.estadoDibujo),this.msgService.add({severity:"success",summary:"Geocerca circular creada",detail:"Ajuste el radio si es necesario y proceda a guardar"})}onMapClickPoligono(t){if(!this.estadoDibujo.creando)return;let{lat:e,lng:i}=t.latlng;this.estadoDibujo.coordenadas.push({lat:e,lng:i}),this.agregarMarcadorPunto(e,i,this.estadoDibujo.coordenadas.length),this.actualizarPoligono(),this.drawing$.next(this.estadoDibujo),this.msgService.add({severity:"info",summary:`Punto ${this.estadoDibujo.coordenadas.length} agregado`,detail:this.estadoDibujo.coordenadas.length>=3?"Ya puede continuar o agregar m\xE1s puntos":`Necesita ${3-this.estadoDibujo.coordenadas.length} puntos m\xE1s`})}agregarMarcadorPunto(t,e,i){if(!this.dibujoLayer)return;let n=E.divIcon({className:"numero-punto-custom",iconSize:[30,30],html:`<div style="
            background-color: #8b5cf6;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 3px solid white;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
            font-weight: bold;
            font-size: 14px;
            box-sizing: border-box;
            cursor: move;
          ">${i}</div>`,iconAnchor:[15,15]}),c=E.marker([t,e],{icon:n,draggable:!0});c.addTo(this.dibujoLayer),this.marcadoresPuntos.push(c),c.bindTooltip(`Punto ${i}<br>Lat: ${t.toFixed(6)}<br>Lng: ${e.toFixed(6)}`,{permanent:!1,direction:"top"}),c.on("dragstart",()=>{c.closeTooltip();let p=c._icon;p&&p.classList.add("dragging")}),c.on("drag",p=>{let C=p.target.getLatLng();c.setTooltipContent(`Punto ${i}<br>Lat: ${C.lat.toFixed(6)}<br>Lng: ${C.lng.toFixed(6)}`)}),c.on("dragend",p=>{let C=p.target.getLatLng(),S=c._icon;S&&S.classList.remove("dragging");let oe=this.marcadoresPuntos.findIndex(ht=>ht===c);oe!==-1&&(this.estadoDibujo.coordenadas[oe]={lat:C.lat,lng:C.lng},this.actualizarPoligono(),this.drawing$.next(this.estadoDibujo),c.setTooltipContent(`Punto ${i}<br>Lat: ${C.lat.toFixed(6)}<br>Lng: ${C.lng.toFixed(6)}`),this.msgService.add({severity:"success",summary:`Punto ${i} movido`,detail:`Nueva posici\xF3n: ${C.lat.toFixed(6)}, ${C.lng.toFixed(6)}`}))})}crearLineasPunteadas(){if(!(this.estadoDibujo.coordenadas.length<2))for(let t=0;t<this.estadoDibujo.coordenadas.length;t++){let e=this.estadoDibujo.coordenadas[t],i=this.estadoDibujo.coordenadas[(t+1)%this.estadoDibujo.coordenadas.length];if(this.estadoDibujo.coordenadas.length>=3||t<this.estadoDibujo.coordenadas.length-1){let n=E.polyline([[e.lat,e.lng],[i.lat,i.lng]],{color:"#8b5cf6",weight:2,opacity:.8,dashArray:"8, 6"});this.lineasTemporales.push(n),this.dibujoLayer.addLayer(n)}}}actualizarPoligono(){if(!(this.estadoDibujo.coordenadas.length<2)){if(this.formaActual&&this.dibujoLayer&&this.dibujoLayer.removeLayer(this.formaActual),this.lineasTemporales.forEach(t=>{this.dibujoLayer&&this.dibujoLayer.removeLayer(t)}),this.lineasTemporales=[],this.crearLineasPunteadas(),this.estadoDibujo.coordenadas.length>=3){let t=this.estadoDibujo.coordenadas.map(i=>[i.lat,i.lng]),e=E.polygon(t,{stroke:!1,fillColor:"#8b5cf6",fillOpacity:.15});this.formaActual=e,this.dibujoLayer.addLayer(e)}this.calcularCentroPoligono()}}calcularCentroPoligono(){if(this.estadoDibujo.coordenadas.length===0)return;let t=this.estadoDibujo.coordenadas.reduce((i,n)=>i+n.lat,0),e=this.estadoDibujo.coordenadas.reduce((i,n)=>i+n.lng,0);this.estadoDibujo.centro={lat:t/this.estadoDibujo.coordenadas.length,lng:e/this.estadoDibujo.coordenadas.length}}generarCoordenadasCirculo(t,e,i){this.estadoDibujo.coordenadas=[];let n=32;for(let c=0;c<n;c++){let p=c*2*Math.PI/n,C=i/111320*Math.cos(p),S=i/(111320*Math.cos(t*Math.PI/180))*Math.sin(p);this.estadoDibujo.coordenadas.push({lat:t+C,lng:e+S})}}calcularArea(){if(this.estadoDibujo.coordenadas.length<3)return 0;let t=0,e=this.estadoDibujo.coordenadas;for(let i=0;i<e.length;i++){let n=(i+1)%e.length;t+=e[i].lng*e[n].lat,t-=e[n].lng*e[i].lat}return Math.abs(t/2)*111e3*111e3}finalizarGeocerca(){if(!this.estadoDibujo.creando||!this.estadoDibujo.centro||this.estadoDibujo.tipo==="poligono"&&this.estadoDibujo.coordenadas.length<3)return null;let t={id:this.generarId(),tipo:this.estadoDibujo.tipo,coordenadas:[...this.estadoDibujo.coordenadas],centro:q({},this.estadoDibujo.centro),area:this.calcularArea(),radio:this.estadoDibujo.tipo==="circular"?this.radioGeocerca:void 0,activa:!0,fechaCreacion:new Date};return this.geocercasCreadas.set(t.id,t),this.geocercaDrawing$.next(Array.from(this.geocercasCreadas.values())),t}cancelarCreacion(){this.map&&this.map.off("click"),this.limpiarElementosTemporales(),this.estadoDibujo={creando:!1,tipo:null,coordenadas:[],centro:null},this.drawing$.next(this.estadoDibujo)}cancelarEdicion(){this.map&&this.map.off("click"),this.limpiarElementosTemporales(),this.estadoDibujo={creando:!1,tipo:null,coordenadas:[],centro:null},this.drawing$.next(this.estadoDibujo)}limpiarElementosTemporales(){this.marcadoresPuntos.forEach(t=>{this.dibujoLayer&&this.dibujoLayer.removeLayer(t)}),this.marcadoresPuntos=[],this.lineasTemporales.forEach(t=>{this.dibujoLayer&&this.dibujoLayer.removeLayer(t)}),this.lineasTemporales=[],this.formaActual&&this.dibujoLayer&&(this.dibujoLayer.removeLayer(this.formaActual),this.formaActual=null)}cambiarRadioCirculo(t){this.estadoDibujo.tipo==="circular"&&this.estadoDibujo.centro&&(this.radioGeocerca=t,this.generarCoordenadasCirculo(this.estadoDibujo.centro.lat,this.estadoDibujo.centro.lng,t),this.formaActual&&this.dibujoLayer&&(this.dibujoLayer.removeLayer(this.formaActual),this.formaActual=E.circle([this.estadoDibujo.centro.lat,this.estadoDibujo.centro.lng],{radius:t,color:"#3b82f6",fillColor:"#3b82f6",fillOpacity:.2}),this.dibujoLayer.addLayer(this.formaActual)),this.drawing$.next(this.estadoDibujo))}generarId(){return`geocerca_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}cargarGeocercaParaEdicion(t,e,i,n){this.map&&(this.cancelarCreacion(),this.estadoDibujo={creando:!0,tipo:t,coordenadas:[...e],centro:q({},i)},this.configurarEventosMapa(t),t==="circular"&&n&&(this.radioGeocerca=n),this.dibujarGeocercaExistente(),this.drawing$.next(this.estadoDibujo))}dibujarGeocercaExistente(){!this.map||!this.estadoDibujo.coordenadas.length||(this.limpiarElementosTemporales(),this.estadoDibujo.tipo==="circular"?this.dibujarCirculoExistente():this.dibujarPoligonoExistente())}dibujarCirculoExistente(){!this.estadoDibujo.centro||!this.dibujoLayer||(this.formaActual=E.circle([this.estadoDibujo.centro.lat,this.estadoDibujo.centro.lng],{radius:this.radioGeocerca,color:"#3b82f6",fillColor:"#3b82f6",fillOpacity:.2}),this.dibujoLayer.addLayer(this.formaActual))}dibujarPoligonoExistente(){this.estadoDibujo.coordenadas.forEach((t,e)=>{this.agregarMarcadorPunto(t.lat,t.lng,e+1)}),this.actualizarPoligono()}destroy(){this.cancelarCreacion(),this.dibujoLayer&&this.map&&(this.map.removeLayer(this.dibujoLayer),this.dibujoLayer=null),this.geocercasCreadas.clear(),this.marcadoresPuntos=[],this.lineasTemporales=[],this.formaActual=null,this.estadoDibujo={creando:!1,tipo:null,coordenadas:[],centro:null},this.drawing$.complete(),this.geocercaDrawing$.complete(),this.map=null}static \u0275fac=function(e){return new(e||o)(Ze(V))};static \u0275prov=Oe({token:o,factory:o.\u0275fac,providedIn:"root"})};var Ta=["mapContainer"],Ma=()=>({width:"600px"}),wa=()=>[1,2,3,4,5];function Ga(o,t){if(o&1&&(r(0,"div",14)(1,"span"),l(2),a()()),o&2){let e=m();s(2),x("",e.filteredGeocercas.length," geocercas encontradas")}}function Ua(o,t){if(o&1&&(r(0,"span",56),l(1),a()),o&2){let e=m(2);s(),x(" ",e.geocercasSeleccionadas.size," seleccionada(s) ")}}function ka(o,t){if(o&1){let e=b();r(0,"div",16),d(1,"div",50),r(2,"div",51)(3,"div",52)(4,"div",53)(5,"input",54),h("change",function(){u(e);let n=m();return g(n.toggleSeleccionarTodas())}),a(),r(6,"label",55),l(7," Seleccionar todas "),a()(),f(8,Ua,2,1,"span",56),a(),r(9,"button",57),h("click",function(){u(e);let n=m();return g(n.confirmarEliminacion())}),d(10,"i",58),l(11," Eliminar Seleccionadas "),a()()()}if(o&2){let e=m();s(5),v("checked",e.todasSeleccionadas),s(3),A(e.tieneSelecciones?8:-1),s(),v("disabled",!e.tieneSelecciones)}}function Da(o,t){o&1&&(r(0,"div",59)(1,"div",52),d(2,"div",60),r(3,"div",61)(4,"div",62),d(5,"div",63)(6,"div",64),a(),d(7,"div",65)(8,"div",66),r(9,"div",67),d(10,"div",68)(11,"div",69),a()()()())}function Pa(o,t){o&1&&(r(0,"div",18),w(1,Da,12,0,"div",59,D),a()),o&2&&(s(),G(T(0,wa)))}function Va(o,t){if(o&1){let e=b();r(0,"div",75)(1,"input",100),h("change",function(){u(e);let n=m().$implicit,c=m(2);return g(c.toggleSeleccionGeocerca(n.geoccod))})("click",function(n){return u(e),g(n.stopPropagation())}),a()()}if(o&2){let e=m().$implicit,i=m(2);s(),v("checked",i.estaSeleccionada(e.geoccod))}}function Ba(o,t){o&1&&(r(0,"div",78),d(1,"div",101),a())}function Fa(o,t){o&1&&(r(0,"div",79),d(1,"div",102),a())}function Ha(o,t){o&1&&(r(0,"span",85),d(1,"i",103),l(2," Editando "),a())}function qa(o,t){o&1&&d(0,"i",107)}function ja(o,t){o&1&&d(0,"i",108)}function Za(o,t){if(o&1){let e=b();r(0,"div",97)(1,"button",104),h("click",function(n){u(e);let c=m().$implicit,p=m(2);return g(p.quickEditGeocerca(c,n))}),d(2,"i",105),a(),r(3,"div",106),f(4,qa,1,0,"i",107)(5,ja,1,0,"i",108),a()()}if(o&2){let e=m().$implicit,i=m(2);s(),R(i.getEditButtonClasses(e)),v("disabled",i.getEditButtonDisabled(e)),s(),R(i.getEditIconClasses(e)),s(2),A((i.selectedGeocerca==null?null:i.selectedGeocerca.geoccod)===e.geoccod?4:5)}}function za(o,t){o&1&&d(0,"i",98)}function $a(o,t){if(o&1&&d(0,"div",109),o&2){let e=m(3);R(e.editandoGeocerca?"bg-gradient-to-r from-orange-200 to-orange-400 dark:from-orange-800 dark:to-orange-600":"bg-gradient-to-r from-primary-200 to-primary-400 dark:from-primary-800 dark:to-primary-600")}}function Ja(o,t){if(o&1){let e=b();r(0,"div",72),d(1,"div",73),r(2,"div",74),h("click",function(){let n=u(e).$implicit,c=m(2);return g(c.handleItemClick(n))}),f(3,Va,2,1,"div",75),r(4,"div",76)(5,"div",77),d(6,"i"),a(),f(7,Ba,2,0,"div",78)(8,Fa,2,0,"div",79),a(),r(9,"div",36)(10,"div",80)(11,"span",81),d(12,"i",82),l(13),a(),r(14,"span",83),d(15,"div",84),l(16),a(),f(17,Ha,3,0,"span",85),a(),r(18,"h6",86),l(19),a(),r(20,"div",87)(21,"div",88)(22,"div",89),d(23,"i",90),a(),r(24,"span",91),l(25),a()(),r(26,"div",88)(27,"div",92),d(28,"i",93),a(),r(29,"span",91),l(30),a()()(),r(31,"div",52)(32,"span",94),d(33,"div",95),l(34),a(),r(35,"span",94),d(36,"div",96),l(37),a()()(),f(38,Za,6,6,"div",97)(39,za,1,0,"i",98),a(),f(40,$a,1,2,"div",99),a()}if(o&2){let e=t.$implicit,i=m(2);ze("from-primary-50",(i.selectedGeocerca==null?null:i.selectedGeocerca.geoccod)===e.geoccod&&!i.modoEliminacion)("to-primary-100-40",(i.selectedGeocerca==null?null:i.selectedGeocerca.geoccod)===e.geoccod&&!i.modoEliminacion)("border-primary-300-80",(i.selectedGeocerca==null?null:i.selectedGeocerca.geoccod)===e.geoccod&&!i.modoEliminacion)("dark:from-primary-900-30",(i.selectedGeocerca==null?null:i.selectedGeocerca.geoccod)===e.geoccod&&!i.modoEliminacion)("dark:to-primary-800-40",(i.selectedGeocerca==null?null:i.selectedGeocerca.geoccod)===e.geoccod&&!i.modoEliminacion)("dark:border-primary-600-80",(i.selectedGeocerca==null?null:i.selectedGeocerca.geoccod)===e.geoccod&&!i.modoEliminacion)("from-orange-50",i.editandoGeocerca&&(i.selectedGeocerca==null?null:i.selectedGeocerca.geoccod)===e.geoccod)("to-orange-100-40",i.editandoGeocerca&&(i.selectedGeocerca==null?null:i.selectedGeocerca.geoccod)===e.geoccod)("border-orange-300-80",i.editandoGeocerca&&(i.selectedGeocerca==null?null:i.selectedGeocerca.geoccod)===e.geoccod)("dark:from-orange-900-30",i.editandoGeocerca&&(i.selectedGeocerca==null?null:i.selectedGeocerca.geoccod)===e.geoccod)("dark:to-orange-800-40",i.editandoGeocerca&&(i.selectedGeocerca==null?null:i.selectedGeocerca.geoccod)===e.geoccod)("dark:border-orange-600-80",i.editandoGeocerca&&(i.selectedGeocerca==null?null:i.selectedGeocerca.geoccod)===e.geoccod)("from-red-50",i.modoEliminacion&&i.estaSeleccionada(e.geoccod))("to-red-100-40",i.modoEliminacion&&i.estaSeleccionada(e.geoccod))("border-red-300-80",i.modoEliminacion&&i.estaSeleccionada(e.geoccod))("dark:from-red-900-30",i.modoEliminacion&&i.estaSeleccionada(e.geoccod))("dark:to-red-800-40",i.modoEliminacion&&i.estaSeleccionada(e.geoccod))("dark:border-red-600-80",i.modoEliminacion&&i.estaSeleccionada(e.geoccod))("cursor-pointer",!i.modoEliminacion&&!i.editandoGeocerca),s(3),A(i.modoEliminacion?3:-1),s(2),R(i.getAvatarClasses(e)),s(),R(i.getAvatarIcon(e)),s(),A(e.geocact?7:8),s(6),x(" ",e.geoccod," "),s(),R(i.getGeocercaStatusClasses(e)),s(),R(e.geocact?"bg-green-500":"bg-gray-400"),s(),x(" ",i.getGeocercaStatusText(e)," "),s(),A(i.editandoGeocerca&&(i.selectedGeocerca==null?null:i.selectedGeocerca.geoccod)===e.geoccod?17:-1),s(2),x(" ",e.geocnom," "),s(6),_(e.geocsec),s(5),B("",e.geocciud,", ",e.geocprov),s(4),x(" ",i.formatArea(e.geocarm)," "),s(3),x(" ",i.formatPerimeter(e.geocperm)," "),s(),A(i.modoEliminacion?39:38),s(2),A((i.selectedGeocerca==null?null:i.selectedGeocerca.geoccod)===e.geoccod&&!i.modoEliminacion?40:-1)}}function Qa(o,t){o&1&&(r(0,"div",71)(1,"div",8),d(2,"div",110),r(3,"div",111)(4,"div",112),d(5,"i",113),a(),r(6,"h6",114),l(7," No se encontraron geocercas "),a(),r(8,"p",115),l(9," Intenta ajustar tus filtros de b\xFAsqueda o crea nuevas geocercas "),a()()()())}function Ya(o,t){if(o&1&&(r(0,"div",18),w(1,Ja,41,59,"div",70,D),f(3,Qa,10,0,"div",71),a()),o&2){let e=m();s(),G(e.paginatedGeocercas),s(2),A(e.filteredGeocercas.length===0?3:-1)}}function Wa(o,t){if(o&1){let e=b();r(0,"div",19)(1,"p-paginator",116),h("onPageChange",function(n){u(e);let c=m();return g(c.onPageChange(n))}),a()()}if(o&2){let e=m();s(),v("rows",e.itemsPerPage)("totalRecords",e.filteredGeocercas.length)("first",e.first)}}function Ka(o,t){if(o&1&&(r(0,"div",118),d(1,"i"),r(2,"span"),l(3),a()()),o&2){let e=t.$implicit;s(),R(e.icon),s(2),_(e.label)}}function Xa(o,t){if(o&1){let e=b();r(0,"div",10)(1,"label",131),l(2),a(),r(3,"p-slider",132),O("ngModelChange",function(n){u(e);let c=m(2);return y(c.radioGeocerca,n)||(c.radioGeocerca=n),g(n)}),h("onSlideEnd",function(){u(e);let n=m(2);return g(n.actualizarRadioCirculo())}),a(),r(4,"div",133)(5,"span"),l(6,"50m"),a(),r(7,"span"),l(8,"2000m"),a()()()}if(o&2){let e=m(2);s(2),x(" Radio: ",e.radioGeocerca," metros "),s(),L("ngModel",e.radioGeocerca),v("min",50)("max",2e3)("step",10)}}function eo(o,t){o&1&&(r(0,"span",136),l(1," \u2713 Listo para continuar "),a())}function to(o,t){if(o&1){let e=b();r(0,"div",10)(1,"div",134)(2,"div",135),l(3),f(4,eo,2,0,"span",136),a(),r(5,"p-button",137),h("click",function(){u(e);let n=m(2);return g(n.deshacerUltimoPunto())}),a()()()}if(o&2){let e=m(2);s(3),x(" Puntos agregados: ",e.coordenadasGeocerca.length," "),s(),A(e.coordenadasGeocerca.length>=3?4:-1),s(),v("text",!0)("disabled",e.coordenadasGeocerca.length===0)}}function io(o,t){o&1&&(r(0,"span")(1,"strong"),l(2,"C\xEDrculo:"),a(),l(3," Haga clic en el mapa para colocar el centro, luego ajuste el radio con el slider "),a())}function ro(o,t){o&1&&(r(0,"span")(1,"strong"),l(2,"Pol\xEDgono:"),a(),l(3," Haga clic en el mapa para agregar puntos numerados (m\xEDnimo 3). Use "),d(4,"i",138),l(5," para deshacer el \xFAltimo punto. "),a())}function ao(o,t){if(o&1){let e=b();r(0,"div",34)(1,"div",117)(2,"div",118),d(3,"i",119),r(4,"span",120),l(5),a()(),r(6,"p-button",121),h("click",function(){u(e);let n=m();return g(n.cancelarGestionGeocerca())}),a()(),r(7,"div",122)(8,"div",10)(9,"label",123),l(10," Tipo de Geocerca "),a(),r(11,"p-select",124),O("ngModelChange",function(n){u(e);let c=m();return y(c.tipoGeocerca,n)||(c.tipoGeocerca=n),g(n)}),h("onChange",function(){u(e);let n=m();return g(n.onTipoGeocercaChange())}),M(12,Ka,4,3,"ng-template",125),a()(),f(13,Xa,9,5,"div",10),f(14,to,6,4,"div",10),a(),r(15,"div",126)(16,"div",127),d(17,"i",128),f(18,io,4,0,"span"),f(19,ro,6,0,"span"),a()(),r(20,"div",62)(21,"p-button",129),h("click",function(){u(e);let n=m();return g(n.limpiarDibujo())}),a(),r(22,"p-button",130),h("click",function(){u(e);let n=m();return g(n.editandoGeocerca?n.abrirDialogoEdicion():n.abrirDialogoGeocerca())}),a()()()}if(o&2){let e=m();s(5),x(" ",e.editandoGeocerca?"Editando Geocerca":"Creando Geocerca"," "),s(),v("text",!0)("pTooltip",e.editandoGeocerca?"Cancelar edici\xF3n":"Cancelar creaci\xF3n"),s(5),L("ngModel",e.tipoGeocerca),v("options",e.tiposGeocerca),s(2),A(e.tipoGeocerca==="circular"?13:-1),s(),A(e.tipoGeocerca==="poligono"&&e.coordenadasGeocerca.length>0?14:-1),s(4),A(e.tipoGeocerca==="circular"?18:-1),s(),A(e.tipoGeocerca==="poligono"?19:-1),s(2),v("text",!0),s(),v("label",e.editandoGeocerca?"Guardar Cambios":"Continuar")("icon",e.editandoGeocerca?"pi pi-save":"pi pi-arrow-right")("disabled",!e.puedeFinalizarGeocerca)}}function oo(o,t){if(o&1){let e=b();r(0,"div",142),h("click",function(){let n=u(e).$implicit,c=m(2);return g(c.selectSearchResult(n))}),r(1,"div",143),d(2,"i",144),r(3,"span",145),l(4),a()(),d(5,"i",146),a()}if(o&2){let e=t.$implicit;s(4),_(e.display_name)}}function no(o,t){if(o&1&&(r(0,"div",43)(1,"div",139),l(2," Resultados de b\xFAsqueda: "),a(),r(3,"div",140),w(4,oo,6,1,"div",141,D),a()()),o&2){let e=m();s(4),G(e.searchResults.slice(0,3))}}function so(o,t){o&1&&(r(0,"div",45)(1,"div",147)(2,"div",8),d(3,"div",148),r(4,"div",149)(5,"div",150),d(6,"i",151),a(),r(7,"h6",152),l(8," Cargando mapa "),a(),r(9,"p",153),l(10," Preparando la visualizaci\xF3n de ubicaciones... "),a()()()()())}function co(o,t){o&1&&d(0,"i",159)}function lo(o,t){o&1&&d(0,"i",160)}function mo(o,t){o&1&&d(0,"i",161)}function po(o,t){o&1&&(r(0,"p",163),d(1,"i",192),l(2," Validando c\xF3digo... "),a())}function uo(o,t){o&1&&d(0,"i",193)}function go(o,t){o&1&&d(0,"i",194)}function fo(o,t){if(o&1&&(r(0,"p"),f(1,uo,1,0,"i",193),f(2,go,1,0,"i",194),l(3),a()),o&2){let e=m(2);R(e.getValidationMessageClass()),s(),A(e.codeValidationResult==="valid"?1:-1),s(),A(e.codeValidationResult==="invalid"?2:-1),s(),x(" ",e.codeValidationMessage," ")}}function Ao(o,t){if(o&1){let e=b();r(0,"form",154)(1,"div",155)(2,"div")(3,"label",156),l(4," C\xF3digo de la Geocerca * "),a(),r(5,"div",8),d(6,"input",157),r(7,"div",158),f(8,co,1,0,"i",159),f(9,lo,1,0,"i",160),f(10,mo,1,0,"i",161),a()(),r(11,"div",162),f(12,po,3,0,"p",163),f(13,fo,4,5,"p",164),a()(),r(14,"div")(15,"label",165),l(16," Nombre de la Geocerca * "),a(),d(17,"input",166),a(),r(18,"div")(19,"label",167),l(20," Provincia * "),a(),r(21,"p-autocomplete",168),h("completeMethod",function(n){u(e);let c=m();return g(c.filtrarProvincias(n))})("onSelect",function(n){u(e);let c=m();return g(c.onProvinciaSeleccionada(n))})("onClear",function(){u(e);let n=m();return g(n.onProvinciaLimpiada())}),a()(),r(22,"div")(23,"label",169),l(24," Ciudad * "),a(),r(25,"p-autocomplete",170),h("completeMethod",function(n){u(e);let c=m();return g(c.filtrarCiudades(n))})("onSelect",function(n){u(e);let c=m();return g(c.onCiudadSeleccionada(n))})("onClear",function(){u(e);let n=m();return g(n.onCiudadLimpiada())}),a()(),r(26,"div")(27,"label",171),l(28," Sector * "),a(),r(29,"p-autocomplete",172),h("completeMethod",function(n){u(e);let c=m();return g(c.filtrarSectores(n))}),a()(),r(30,"div",173)(31,"label",174),l(32," Direcci\xF3n de Referencia * "),a(),d(33,"input",175),a(),r(34,"div")(35,"label",176),l(36," Pa\xEDs * "),a(),d(37,"input",177),a(),r(38,"div")(39,"div",178)(40,"label",179),l(41," Prioridad (1-10) * "),a(),r(42,"span",180),l(43),a()(),d(44,"p-slider",181),r(45,"div",133)(46,"span"),l(47,"Baja"),a(),r(48,"span"),l(49,"Alta"),a()()(),r(50,"div",182),d(51,"p-toggleSwitch",183),r(52,"label",184),l(53," Geocerca activa "),a()(),r(54,"div",173)(55,"label",185),l(56," Descripci\xF3n * "),a(),r(57,"textarea",186),l(58,"                    "),a()()(),r(59,"div",187)(60,"h4",188),l(61,"Resumen de la Geocerca"),a(),r(62,"div",189)(63,"div")(64,"span",190),l(65,"Tipo:"),a(),r(66,"span",191),l(67),a()(),r(68,"div")(69,"span",190),l(70,"Puntos:"),a(),r(71,"span",191),l(72),a()(),r(73,"div")(74,"span",190),l(75,"Centro:"),a(),r(76,"span",191),l(77),a()(),r(78,"div")(79,"span",190),l(80,"Empresa:"),a(),r(81,"span",191),l(82),a()()()()()}if(o&2){let e,i=m();v("formGroup",i.geocercaForm),s(6),R(i.getCodeInputClass()),s(2),A(i.validatingCode?8:-1),s(),A(i.codeValidationResult==="valid"?9:-1),s(),A(i.codeValidationResult==="invalid"?10:-1),s(2),A(i.validatingCode?12:-1),s(),A(i.codeValidationMessage&&!i.validatingCode?13:-1),s(8),v("suggestions",i.provinciasFiltradas)("dropdown",!0),s(4),v("suggestions",i.ciudadesFiltradas)("dropdown",!0)("disabled",!i.provinciaSeleccionada),s(4),v("suggestions",i.sectoresFiltrados)("dropdown",!0)("disabled",!i.ciudadSeleccionada),s(14),x(" ",((e=i.geocercaForm.get("geocpri"))==null?null:e.value)||1," "),s(),v("min",1)("max",10)("step",1),s(23),_(i.tipoGeocerca==="circular"?"Circular":"Pol\xEDgono"),s(5),_(i.coordenadasGeocerca.length),s(5),B("",(i.centroGeocerca==null||i.centroGeocerca.lat==null?null:i.centroGeocerca.lat.toFixed(6))||"N/A",", ",(i.centroGeocerca==null||i.centroGeocerca.lng==null?null:i.centroGeocerca.lng.toFixed(6))||"N/A"),s(5),_(i.enterpriseName)}}function ho(o,t){if(o&1){let e=b();r(0,"div",195)(1,"p-button",196),h("click",function(){u(e);let n=m();return g(n.cerrarDialogoGeocerca())}),a(),r(2,"p-button",197),h("click",function(){u(e);let n=m();return g(n.editandoGeocerca?n.actualizarGeocerca():n.guardarGeocerca())}),a()()}if(o&2){let e=m();s(),v("text",!0),s(),v("label",e.editandoGeocerca?"Actualizar Geocerca":"Crear Geocerca")("icon",e.editandoGeocerca?"pi pi-save":"pi pi-check")("disabled",e.geocercaForm.invalid||!e.editandoGeocerca&&e.codeValidationResult!=="valid")}}var ft=class o{constructor(t,e,i,n,c,p,C,S){this.geocercaService=t;this.fb=e;this.authService=i;this.msgService=n;this.mapService=c;this.provinceService=p;this.geocercaDrawing=C;this.confirmationService=S}mapContainer;destroy$=new j;cantonesList=[];parroquiasList=[];provinciasFiltradas=[];ciudadesFiltradas=[];sectoresFiltrados=[];geocercaForm;provinciaSeleccionada=null;ciudadSeleccionada=null;sectorSeleccionado=null;codeValidationSubject=new j;validatingCode=!1;codeValidationResult=null;codeValidationMessage="";modoEliminacion=!1;geocercasSeleccionadas=new Set;todasSeleccionadas=!1;editandoGeocerca=!1;modoEdicion=!1;geocercaOriginal=null;creandoGeocerca=!1;geocercaDialog=!1;tipoGeocerca="circular";radioGeocerca=500;coordenadasGeocerca=[];centroGeocerca=null;drawingState=null;geocercasCreadas=[];tiposGeocerca=[{label:"Geocerca Circular",value:"circular",icon:"pi pi-circle"},{label:"Geocerca Poligonal",value:"poligono",icon:"pi pi-stop"}];searchLocation="";searchingLocation=!1;searchResults=[];mapInitialized=!1;geocercas=[];filteredGeocercas=[];paginatedGeocercas=[];selectedGeocerca=null;loading=!0;first=0;itemsPerPage=5;enterpriseName="";initializeMap(){return P(this,null,function*(){if(this.mapInitialized=!0,!this.mapContainer.nativeElement){console.error("Contenedor del mapa no encontrado");return}try{yield this.mapService.initializeMap(this.mapContainer,{center:[-.2298,-78.5249],zoom:13,defaultLocation:"Quito, Ecuador",zoomControl:!1}),!this.loading&&this.geocercas.length>0&&this.mapService.addGeocercaMarkers(this.geocercas)}catch(e){console.error("Error al inicializar el mapa:",e)}})}ngOnInit(){this.initializeEnterpriseName(),this.getAllGeocercas(),this.subscribeToMapService(),this.subscribeToDrawingService(),this.initializeGeocercaForm(),this.inicializarProvincias(),this.setupCodeValidation()}ngAfterViewInit(){requestAnimationFrame(()=>{this.initializeMap().then(()=>{})})}inicializarProvincias(){this.provinciasFiltradas=this.provinceService.getProvincias()}initializeGeocercaForm(){this.geocercaForm=this.fb.group({geoccod:["",[N.required,N.minLength(3)]],geocnom:["",[N.required,N.minLength(3)]],geocsec:["",[N.required]],geocdirre:["",[N.required]],geocciud:["",[N.required]],geocprov:["",[N.required]],geocpais:[{value:"ECUADOR",disabled:!1},N.required],geocpri:[5,[N.required,N.min(1),N.max(10)]],geocdesc:["",[N.required]],geocact:[!0]})}initializeEnterpriseName(){let t=this.authService.getEmpresa();t&&t.nomempresa?this.enterpriseName=t.nomempresa:this.msgService.add({severity:"error",summary:"Error",detail:"No se pudo obtener la informaci\xF3n de la empresa"})}subscribeToMapService(){this.mapService.isMapInitialized$.pipe(U(this.destroy$)).subscribe(t=>{this.mapInitialized=t,t&&this.mapService.map&&this.geocercaDrawing.initialize(this.mapService.map)}),this.mapService.isSearchingLocation$.pipe(U(this.destroy$)).subscribe(t=>{this.searchingLocation=t}),this.mapService.searchResultsList$.pipe(U(this.destroy$)).subscribe(t=>{this.searchResults=t})}subscribeToDrawingService(){this.geocercaDrawing.drawingState$.pipe(U(this.destroy$)).subscribe(t=>{this.drawingState=t,t&&(this.coordenadasGeocerca=[...t.coordenadas],this.centroGeocerca=t.centro?q({},t.centro):null,this.creandoGeocerca=t.creando,t.tipo&&(this.tipoGeocerca=t.tipo))}),this.geocercaDrawing.geocercas$.pipe(U(this.destroy$)).subscribe(t=>{this.geocercasCreadas=t})}setupCodeValidation(){this.codeValidationSubject.pipe(qe(500),je(),U(this.destroy$)).subscribe(t=>{t&&t.length>=5?this.validateGeocercaCode(t):this.resetCodeValidation()}),this.geocercaForm.get("geoccod")?.valueChanges.pipe(U(this.destroy$)).subscribe(t=>{t&&(this.codeValidationResult="pending",this.codeValidationSubject.next(t))})}validateGeocercaCode(t){this.validatingCode=!0,this.codeValidationResult="pending",this.geocercaService.validarCodigoGeocerca(t).pipe(U(this.destroy$)).subscribe({next:()=>{this.validatingCode=!1,this.codeValidationResult="valid",this.codeValidationMessage="C\xF3digo disponible"},error:e=>{e.status===400?this.codeValidationMessage="El c\xF3digo ya existe o no es v\xE1lido":this.codeValidationMessage="Error al validar el c\xF3digo. Intente nuevamente."}})}resetCodeValidation(){this.validatingCode=!1,this.codeValidationResult=null,this.codeValidationMessage=""}getCodeInputClass(){let t="w-full";return this.codeValidationResult==="valid"?`${t} border-green-300 focus:border-green-500 focus:ring-green-200`:this.codeValidationResult==="invalid"?`${t} border-red-300 focus:border-red-500 focus:ring-red-200`:t}getValidationMessageClass(){return this.codeValidationResult==="valid"?"text-xs text-green-600 flex items-center gap-1":this.codeValidationResult==="invalid"?"text-xs text-red-600 flex items-center gap-1":"text-xs text-surface-500"}filtrarProvincias(t){let e=t.query?.toLowerCase()||"";this.provinciasFiltradas=this.provinceService.filtrarProvincias(e)}filtrarCiudades(t){let e=t.query?.toLowerCase()||"";this.ciudadesFiltradas=this.provinceService.filtrarCantones(this.cantonesList,e)}filtrarSectores(t){let e=t.query?.toLowerCase()||"";this.sectoresFiltrados=this.provinceService.filtrarParroquias(this.parroquiasList,e)}onProvinciaSeleccionada(t){let e=t.value;this.provinciaSeleccionada=e,this.cantonesList=this.provinceService.getCantones(e.codigo),this.ciudadSeleccionada=null,this.parroquiasList=[],this.sectorSeleccionado=null,this.geocercaForm.patchValue({geocciud:"",geocsec:""})}onProvinciaLimpiada(){this.provinciaSeleccionada=null,this.cantonesList=[],this.ciudadSeleccionada=null,this.parroquiasList=[],this.sectorSeleccionado=null}onCiudadSeleccionada(t){let e=t.value;this.ciudadSeleccionada=e,this.provinciaSeleccionada&&(this.parroquiasList=this.provinceService.getParroquias(this.provinciaSeleccionada.codigo,e.codigo)),this.sectorSeleccionado=null,this.geocercaForm.patchValue({geocsec:""})}onCiudadLimpiada(){this.ciudadSeleccionada=null,this.parroquiasList=[],this.sectorSeleccionado=null}editarGeocerca(t){if(!this.mapInitialized){this.msgService.add({severity:"warn",summary:"Advertencia",detail:"Espere a que el mapa se inicialice completamente"});return}this.geocercaOriginal=q({},t),this.modoEdicion=!0,this.editandoGeocerca=!0,this.selectedGeocerca=t,this.cargarGeocercaParaEdicion(t),this.iniciarEdicionEnMapa(t),this.geocercaDialog=!0,this.msgService.add({severity:"info",summary:"Modo edici\xF3n activado",detail:`Editando geocerca: ${t.geocnom}`})}cargarGeocercaParaEdicion(t){let e=[];try{e=JSON.parse(t.geoccoor)}catch(i){console.error("Error parseando coordenadas:",i)}this.tipoGeocerca=this.determinarTipoGeocerca(e),this.coordenadasGeocerca=e,this.centroGeocerca={lat:t.geoclat,lng:t.geoclon},this.tipoGeocerca==="circular"&&e.length>0&&(this.radioGeocerca=this.calcularRadioDesdeArea(t.geocarm)),this.geocercaForm.patchValue({geoccod:t.geoccod,geocnom:t.geocnom,geocprov:t.geocprov,geocciud:t.geocciud,geocsec:t.geocsec,geocdirre:t.geocdirre,geocpais:t.geocpais,geocpri:t.geocpri,geocact:t.geocact,geocdesc:t.geocdesc}),this.geocercaForm.get("geoccod")?.disable(),this.codeValidationResult="valid"}determinarTipoGeocerca(t){return t.length===32&&this.verificarSiEsCircular(t)?"circular":"poligono"}verificarSiEsCircular(t){if(t.length!==32)return!1;let e=this.centroGeocerca;if(!e)return!1;let i=t.map(p=>Math.sqrt(Math.pow(p.lat-e.lat,2)+Math.pow(p.lng-e.lng,2))),n=i.reduce((p,C)=>p+C,0)/i.length,c=n*.05;return i.every(p=>Math.abs(p-n)<c)}calcularRadioDesdeArea(t){let e=Math.sqrt(t/Math.PI);return Math.max(50,Math.min(2e3,Math.round(e)))}abrirDialogoEdicion(){this.geocercaDialog=!0}actualizarGeocerca(){return P(this,null,function*(){if(!this.modoEdicion||!this.geocercaOriginal){this.msgService.add({severity:"error",summary:"Error",detail:"No hay una geocerca en modo de edici\xF3n"});return}if(this.geocercaForm.invalid||!this.centroGeocerca){this.msgService.add({severity:"error",summary:"Error de validaci\xF3n",detail:"Complete todos los campos requeridos"});return}try{let t=ae.calculateArea(this.drawingState?.coordenadas||this.coordenadasGeocerca),e=ae.calculatePerimeter(this.drawingState?.coordenadas||this.coordenadasGeocerca),i={geocnom:this.geocercaForm.get("geocnom")?.value,geocsec:this.extractFormValue("geocsec","parroquia"),geocdirre:this.geocercaForm.get("geocdirre")?.value,geocciud:this.extractFormValue("geocciud","canton"),geocprov:this.extractFormValue("geocprov","provincia"),geocpais:this.geocercaForm.get("geocpais")?.value||"ECUADOR",geoclat:this.centroGeocerca.lat,geoclon:this.centroGeocerca.lng,geoccoor:this.formatCoordinatesForUpdate(),geocarm:Math.round(t),geocperm:Math.round(e),geocest:this.geocercaOriginal.geocest,geocact:this.geocercaForm.get("geocact")?.value,geocpri:this.geocercaForm.get("geocpri")?.value,geocdesc:this.geocercaForm.get("geocdesc")?.value,geocusedi:this.authService.getUsuarioFromToken()||"SUPERVISOR",geoceqedi:this.enterpriseName},n=yield this.geocercaService.actualizarGeocerca(this.geocercaOriginal.geoccod,i).toPromise();n&&n.success&&(this.geocercaDialog=!1,this.cancelarEdicion(),this.msgService.add({severity:"success",summary:"Geocerca actualizada",detail:`La geocerca "${i.geocnom}" se ha actualizado exitosamente`}),this.refreshData())}catch(t){console.error("Error al actualizar geocerca:",t),this.msgService.add({severity:"error",summary:"Error al actualizar",detail:"No se pudo actualizar la geocerca"})}})}extractFormValue(t,e){let i=this.geocercaForm.get(t)?.value;return typeof i=="string"?i:typeof i=="object"&&i[e]?i[e]:""}formatCoordinatesForUpdate(){return(this.drawingState?.coordenadas||this.coordenadasGeocerca).map(e=>({lat:Math.round(e.lat*1e6)/1e6,lng:Math.round(e.lng*1e6)/1e6}))}cancelarEdicion(){this.modoEdicion=!1,this.editandoGeocerca=!1,this.geocercaOriginal=null,this.geocercaDrawing.cancelarCreacion(),this.geocercaForm.get("geoccod")?.enable(),this.resetCodeValidation(),this.msgService.add({severity:"info",summary:"Edici\xF3n cancelada",detail:"Se ha cancelado la edici\xF3n de la geocerca"})}get puedeFinalizarGeocerca(){return!!this.centroGeocerca&&(this.tipoGeocerca==="circular"||this.tipoGeocerca==="poligono"&&this.coordenadasGeocerca.length>=3)}iniciarEdicionEnMapa(t){this.geocercaDrawing.cancelarCreacion();let e=[];try{e=JSON.parse(t.geoccoor)}catch(i){console.error("Error parseando coordenadas:",i)}setTimeout(()=>{this.geocercaDrawing.cargarGeocercaParaEdicion(this.tipoGeocerca,e,{lat:t.geoclat,lng:t.geoclon},this.tipoGeocerca==="circular"?this.radioGeocerca:void 0)},500)}iniciarCreacionGeocerca(){if(!this.mapInitialized){this.msgService.add({severity:"warn",summary:"Advertencia",detail:"Espere a que el mapa se inicialice completamente"});return}this.selectedGeocerca=null,this.geocercaDrawing.iniciarCreacionGeocerca(this.tipoGeocerca),this.msgService.add({severity:"info",summary:"Modo creaci\xF3n activado",detail:`Haga clic en el mapa para crear una geocerca ${this.tipoGeocerca}`,life:2e3})}onTipoGeocercaChange(){this.creandoGeocerca&&(this.geocercaDrawing.cancelarCreacion(),setTimeout(()=>{this.geocercaDrawing.iniciarCreacionGeocerca(this.tipoGeocerca)},100))}actualizarRadioCirculo(){this.tipoGeocerca==="circular"&&this.creandoGeocerca&&this.geocercaDrawing.cambiarRadioCirculo(this.radioGeocerca)}deshacerUltimoPunto(){this.coordenadasGeocerca.length>0&&(this.coordenadasGeocerca.pop(),this.drawingState&&(this.drawingState.coordenadas=[...this.coordenadasGeocerca],this.geocercaDrawing.cancelarCreacion(),setTimeout(()=>{this.geocercaDrawing.iniciarCreacionGeocerca(this.tipoGeocerca)},100)))}limpiarDibujo(){this.geocercaDrawing.cancelarCreacion(),this.geocercaDrawing.cancelarEdicion(),this.coordenadasGeocerca=[],this.radioGeocerca=100,this.tipoGeocerca="circular",this.msgService.add({severity:"info",summary:"Dibujo limpiado",detail:"Se ha limpiado el dibujo actual"})}cancelarGestionGeocerca(){this.geocercaDrawing.cancelarCreacion(),this.geocercaDrawing.cancelarEdicion(),this.creandoGeocerca=!1,this.editandoGeocerca=!1,this.modoEdicion=!1,this.coordenadasGeocerca=[],this.radioGeocerca=100,this.tipoGeocerca="circular",this.geocercaOriginal=null,this.msgService.add({severity:"info",summary:"Cancelado",detail:"Operaci\xF3n cancelada"})}cancelarCreacionGeocerca(){this.cancelarGestionGeocerca()}cancelarEdicionGeocerca(){this.cancelarGestionGeocerca()}get estaGestionandoGeocerca(){return this.creandoGeocerca||this.editandoGeocerca||this.modoEdicion}get modoGeocerca(){return this.editandoGeocerca||this.modoEdicion?"Editando Geocerca":this.creandoGeocerca?"Creando Geocerca":""}abrirDialogoGeocerca(){if(!this.centroGeocerca||this.tipoGeocerca==="poligono"&&this.coordenadasGeocerca.length<3){this.msgService.add({severity:"warn",summary:"Advertencia",detail:this.tipoGeocerca==="poligono"?"Necesita al menos 3 puntos para crear un pol\xEDgono":"Debe colocar el centro de la geocerca"});return}this.resetForm(),this.resetCodeValidation(),this.geocercaDialog=!0}resetForm(){this.geocercaForm.reset({geoccod:"",geocnom:"",geocprov:"",geocciud:"",geocsec:"",geocdirre:"",geocpais:"ECUADOR",geocpri:1,geocact:!0,geocdesc:""}),this.provinciaSeleccionada=null,this.ciudadSeleccionada=null,this.provinciasFiltradas=[],this.ciudadesFiltradas=[],this.sectoresFiltrados=[]}cerrarDialogoGeocerca(){this.geocercaDialog=!1,this.resetCodeValidation()}guardarGeocerca(){return P(this,null,function*(){if(this.codeValidationResult!=="valid"){this.msgService.add({severity:"warn",summary:"C\xF3digo inv\xE1lido",detail:"Debe usar un c\xF3digo de geocerca v\xE1lido"});return}if(this.geocercaForm.invalid||!this.centroGeocerca){this.msgService.add({severity:"error",summary:"Error de validaci\xF3n",detail:"Complete todos los campos requeridos"});return}try{if(!this.drawingState?.creando||!this.drawingState.centro){this.msgService.add({severity:"error",summary:"Error",detail:"No hay una geocerca en proceso de creaci\xF3n"});return}if(this.drawingState.tipo==="poligono"&&this.drawingState.coordenadas.length<3){this.msgService.add({severity:"error",summary:"Error",detail:"Un pol\xEDgono necesita al menos 3 puntos"});return}let t=ae.calculateArea(this.drawingState.coordenadas),e=ae.calculatePerimeter(this.drawingState.coordenadas),i={centroGeocerca:this.drawingState.centro,coordenadasParaCalculo:ae.formatCoordinatesForBackend(this.drawingState.coordenadas),area:t,perimetro:e,usuario:this.authService.getUsuarioFromToken()||"SUPERVISOR",empresa:this.enterpriseName,tipoGeocerca:this.drawingState.tipo,radio:this.drawingState.tipo==="circular"?this.radioGeocerca:void 0},n=ae.validate(this.geocercaForm.value,i);if(n.length>0){this.msgService.add({severity:"warn",summary:"Datos inv\xE1lidos",detail:n.join(", ")});return}let c=ae.mapToDto(this.geocercaForm.value,i);this.msgService.add({severity:"info",summary:"Guardando",detail:"Creando geocerca..."}),this.geocercaService.createOnlyGeocerca(c).pipe(U(this.destroy$)).subscribe({next:p=>{p?(this.geocercaDrawing.finalizarGeocerca(),this.geocercaDialog=!1,this.msgService.add({severity:"success",summary:"Geocerca creada",detail:`La geocerca "${c.geocnom}" se ha creado exitosamente`}),this.refreshData()):this.msgService.add({severity:"error",summary:"Error del servidor",detail:"No se pudo crear la geocerca"})},error:p=>{console.error("Error al guardar geocerca:",p),this.msgService.add({severity:"error",summary:"Error al guardar",detail:p?.error?.message||"No se pudo crear la geocerca"})}})}catch(t){console.error("Error al guardar geocerca:",t),this.msgService.add({severity:"error",summary:"Error al guardar",detail:"No se pudo crear la geocerca"})}})}getGeocercaStatusClasses(t){let e="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold border shadow-sm";return t.geocact?`${e} bg-green-100/80 text-green-700 border-green-200/60 dark:bg-green-900/30 dark:text-green-300 dark:border-green-700/40`:`${e} bg-gray-100/80 text-gray-700 border-gray-200/60 dark:bg-gray-900/30 dark:text-gray-300 dark:border-gray-700/40`}getAllGeocercas(){if(!this.enterpriseName){this.loading=!1;return}this.loading=!0,this.geocercaService.getOnlyGeocercasByEnterpriseName(this.enterpriseName,1,50).subscribe({next:t=>{t.success&&t.data?.data?(this.geocercas=t.data.data,this.filteredGeocercas=[...this.geocercas],this.updatePagination(),this.loading=!1):(this.loading=!1,this.msgService.add({severity:"warn",summary:"Advertencia",detail:t.message||"No se encontraron geocercas"}))},error:t=>{console.error("Error al cargar geocercas:",t),this.loading=!1,this.msgService.add({severity:"error",summary:"Error",detail:"No se pudieron cargar las geocercas"})}})}onSearch(t){let e=t.target.value.toLowerCase();this.filteredGeocercas=this.geocercas.filter(i=>i.geocnom.toLowerCase().includes(e)||i.geoccod.toLowerCase().includes(e)||i.geocsec.toLowerCase().includes(e)||i.geocciud.toLowerCase().includes(e)||i.geocprov.toLowerCase().includes(e)),this.first=0,this.updatePagination()}onPageChange(t){this.first=t.first,this.itemsPerPage=t.rows,this.updatePagination()}updatePagination(){let t=this.first,e=t+this.itemsPerPage;this.paginatedGeocercas=this.filteredGeocercas.slice(t,e)}selectGeocerca(t){this.selectedGeocerca=t,this.mapService.focusOnGeocerca(t),this.mapService.addGeocercaMarkers([t])}handleItemClick(t){this.modoEliminacion?this.toggleSeleccionGeocerca(t.geoccod):this.editandoGeocerca||this.selectGeocerca(t)}quickEditGeocerca(t,e){e.stopPropagation(),this.editarGeocerca(t)}getAvatarClasses(t){return this.editandoGeocerca&&this.selectedGeocerca?.geoccod===t.geoccod?"bg-orange-100 dark:bg-orange-900/30":this.selectedGeocerca?.geoccod===t.geoccod?"bg-primary-100 dark:bg-primary-900/30":"bg-surface-100 dark:bg-surface-800"}getAvatarIcon(t){let e="pi pi-map-marker text-lg sm:text-xl";return this.editandoGeocerca&&this.selectedGeocerca?.geoccod===t.geoccod?`${e} text-orange-600 dark:text-orange-400`:this.selectedGeocerca?.geoccod===t.geoccod?`${e} text-primary-600 dark:text-primary-400`:`${e} text-surface-600 dark:text-surface-400`}getEditButtonClasses(t){let e=this.getEditButtonDisabled(t),i=this.editandoGeocerca&&this.selectedGeocerca?.geoccod===t.geoccod;return e?"bg-surface-100 dark:bg-surface-700 border-surface-200 dark:border-surface-600 cursor-not-allowed":i?"bg-orange-50 dark:bg-orange-900/30 border-orange-200 dark:border-orange-700 hover:bg-orange-100 dark:hover:bg-orange-900/50":"bg-white dark:bg-surface-800 border-surface-200 dark:border-surface-700 hover:bg-orange-50 dark:hover:bg-orange-900/30 hover:border-orange-300 dark:hover:border-orange-600"}getEditButtonDisabled(t){return!this.mapInitialized||this.creandoGeocerca||this.editandoGeocerca&&this.selectedGeocerca?.geoccod!==t.geoccod}getEditIconClasses(t){return this.getEditButtonDisabled(t)?"text-surface-300 dark:text-surface-600":this.editandoGeocerca&&this.selectedGeocerca?.geoccod===t.geoccod?"text-orange-600 dark:text-orange-400":"text-surface-600 dark:text-surface-400 hover:text-orange-600 dark:hover:text-orange-400"}searchLocationOnMap(){this.searchLocation.trim()&&this.mapService.searchLocation(this.searchLocation).subscribe({next:t=>{t.length===1?this.selectSearchResult(t[0]):t.length===0&&this.msgService.add({severity:"info",summary:"Sin resultados",detail:"No se encontraron ubicaciones para la b\xFAsqueda"})},error:t=>{console.error("Error en b\xFAsqueda:",t)}})}selectSearchResult(t){this.mapService.selectSearchResult(t)}clearLocationSearch(){this.searchLocation="",this.mapService.clearSearchMarker(),this.searchResults=[]}resetMapView(){this.mapService.resetMapView()}refreshData(){this.loading=!0,this.selectedGeocerca=null,this.geocercaDrawing.cancelarCreacion(),this.getAllGeocercas(),this.resetMapView()}getGeocercaStatusSeverity(t){return t.geocact?"success":"danger"}getGeocercaStatusText(t){return t.geocact?"Activa":"Inactiva"}formatArea(t){return t>=1e6?`${(t/1e6).toFixed(2)} km\xB2`:`${t.toLocaleString()} m\xB2`}formatPerimeter(t){return t>=1e3?`${(t/1e3).toFixed(2)} km`:`${t} m`}toggleModoEliminacion(){this.modoEliminacion=!this.modoEliminacion,this.modoEliminacion||this.limpiarSelecciones(),this.msgService.add({severity:this.modoEliminacion?"info":"success",summary:this.modoEliminacion?"Modo eliminaci\xF3n activado":"Modo eliminaci\xF3n desactivado",detail:this.modoEliminacion?"Seleccione las geocercas que desea eliminar":"Selecci\xF3n cancelada",life:2e3})}toggleSeleccionGeocerca(t){this.geocercasSeleccionadas.has(t)?this.geocercasSeleccionadas.delete(t):this.geocercasSeleccionadas.add(t),this.actualizarEstadoTodasSeleccionadas()}toggleSeleccionarTodas(){this.todasSeleccionadas?this.limpiarSelecciones():this.paginatedGeocercas.forEach(t=>{this.geocercasSeleccionadas.add(t.geoccod)}),this.actualizarEstadoTodasSeleccionadas()}actualizarEstadoTodasSeleccionadas(){let t=this.paginatedGeocercas.length,e=this.paginatedGeocercas.filter(i=>this.geocercasSeleccionadas.has(i.geoccod)).length;this.todasSeleccionadas=t>0&&e===t}estaSeleccionada(t){return this.geocercasSeleccionadas.has(t)}limpiarSelecciones(){this.geocercasSeleccionadas.clear(),this.todasSeleccionadas=!1}validarRelacionesGeocercas(){return P(this,null,function*(){let t=Array.from(this.geocercasSeleccionadas),e=[];for(let i of t)try{yield Ct(this.geocercaService.consultarGeocerca(i));let n=this.geocercas.find(c=>c.geoccod===i);e.push(n?`${n.geocnom} (${i})`:i)}catch(n){if(n.status!==404)return this.msgService.add({severity:"error",summary:"Error de validaci\xF3n",detail:`Error al validar la geocerca ${i}`}),!1}return e.length>0?new Promise(i=>{this.confirmationService.confirm({message:`<strong>\xA1ADVERTENCIA!</strong><br><br>Las siguientes geocercas tienen relaciones con vendedores:<br><br>${e.join("<br>")}<br><br>Eliminar estas geocercas tambi\xE9n <strong>eliminar\xE1 sus relaciones</strong>. \xBFDesea continuar?`,header:"Geocercas con Relaciones Detectadas",icon:"pi pi-exclamation-triangle",acceptLabel:"Eliminar de todas formas",rejectLabel:"Cancelar",acceptButtonStyleClass:"p-button-danger",accept:()=>{this.eliminarGeocercasSeleccionadas().then()},reject:()=>{i(!1)}})}):!0})}confirmarEliminacion(){return P(this,null,function*(){if(this.geocercasSeleccionadas.size===0){this.msgService.add({severity:"warn",summary:"Sin selecci\xF3n",detail:"Debe seleccionar al menos una geocerca para eliminar"});return}if(!(yield this.validarRelacionesGeocercas()))return;let e=this.geocercas.filter(i=>this.geocercasSeleccionadas.has(i.geoccod)).map(i=>`${i.geocnom} (${i.geoccod})`).join(", ");this.confirmationService.confirm({message:`\xBFEst\xE1 seguro que desea eliminar ${this.geocercasSeleccionadas.size} geocerca(s)?<br><br><strong>Geocercas seleccionadas:</strong><br>${e}`,header:"Confirmar Eliminaci\xF3n",icon:"pi pi-exclamation-triangle",acceptLabel:"Eliminar",rejectLabel:"Cancelar",acceptButtonStyleClass:"p-button-danger",accept:()=>{this.eliminarGeocercasSeleccionadas().then()}})})}eliminarGeocercasSeleccionadas(){return P(this,null,function*(){let t=Array.from(this.geocercasSeleccionadas),e=t.length;this.msgService.add({severity:"info",summary:"Eliminando geocercas",detail:`Eliminando ${e} geocerca(s)...`});let i=t.map(C=>Ct(this.geocercaService.eliminarGeocerca(C))),n=yield Promise.allSettled(i),c=n.filter(C=>C.status==="fulfilled").length,p=n.filter(C=>C.status==="rejected").length;c>0&&this.msgService.add({severity:c===e?"success":"warn",summary:`${c} geocerca(s) eliminada(s)`,detail:p>0?`${p} geocerca(s) no pudieron eliminarse`:"Eliminaci\xF3n completada exitosamente"}),p>0&&c===0&&this.msgService.add({severity:"error",summary:"Error en eliminaci\xF3n",detail:"No se pudo eliminar ninguna geocerca"}),this.limpiarSelecciones(),this.modoEliminacion=!1,this.refreshData()})}get tieneSelecciones(){return this.geocercasSeleccionadas.size>0}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.geocercaDrawing.destroy(),this.mapService.destroyMap()}static \u0275fac=function(e){return new(e||o)(I(ye),I(et),I(me),I(V),I(Pe),I(Ve),I(gt),I(le))};static \u0275cmp=H({type:o,selectors:[["app-onlygeocercas"]],viewQuery:function(e,i){if(e&1&&Z(Ta,5),e&2){let n;z(n=$())&&(i.mapContainer=n.first)}},decls:57,vars:25,consts:[["locationInput",""],["mapContainer",""],[1,"flex","flex-col","md:flex-row","gap-8"],[1,"flex","flex-1","flex-col","lg:flex-row","gap-2","sm:gap-4","overflow-hidden","min-h-0"],[1,"w-full","lg:w-1/4","flex","flex-col"],[1,"flex","flex-col","flex-1","overflow-hidden","h-full","bg-white","dark:bg-surface-900","border","border-surface-200","dark:border-surface-700","rounded-lg","shadow-sm"],[1,"relative","overflow-hidden","p-4","bg-gradient-to-br","from-white","via-surface-50/80","to-surface-100/30","dark:from-surface-900","dark:via-surface-800/90","dark:to-surface-900/60","rounded-t-lg","border-b","border-surface-200/60","dark:border-surface-700/60"],[1,"absolute","inset-0","bg-gradient-to-r","from-transparent","via-primary-50/10","to-transparent","dark:via-primary-900/5"],[1,"relative"],[1,"flex","gap-3","items-center"],[1,"flex-1"],["type","text","placeholder","Buscar geocercas...",1,"w-full","py-3","pl-11","pr-12","text-sm","rounded-xl","border-2","border-surface-200/80","dark:border-surface-600/80","bg-gradient-to-r","from-white","to-surface-50/50","dark:from-surface-800","dark:to-surface-800/80","hover:border-primary-300/60","dark:hover:border-primary-600/60","focus:ring-2","focus:ring-primary-500/30","focus:border-primary-500/80","transition-all","duration-200","shadow-sm",3,"input","disabled"],[1,"absolute","left-3.5","top-1/2","transform","-translate-y-1/2"],[1,"pi","pi-search","text-primary-400","dark:text-primary-500"],[1,"mt-3","flex","justify-between","items-center","text-xs","text-surface-600","dark:text-surface-400"],["tooltipPosition","bottom",3,"click","disabled","pTooltip"],[1,"mt-4","relative","overflow-hidden","rounded-xl","bg-gradient-to-br","from-red-50","via-red-50/80","to-red-100/40","dark:from-red-900/20","dark:via-red-900/15","dark:to-red-800/10","border","border-red-200/60","dark:border-red-700/40","p-4"],[1,"flex-1","overflow-y-auto","min-h-0"],[1,"space-y-3","p-3"],[1,"p-2","sm:p-3","md:p-4","border-t","border-surface-200/60","dark:border-surface-700/60","mt-auto","flex-shrink-0"],[1,"w-full","lg:flex-1","flex","flex-col","order-1","lg:order-2"],[1,"flex","flex-col","flex-1","overflow-hidden","h-80","sm:h-96","lg:h-full","bg-white","dark:bg-surface-900","border","border-surface-200","dark:border-surface-700","rounded-lg","shadow-sm"],[1,"flex","flex-col","gap-3","sm:gap-4","p-3","sm:p-4","bg-gradient-to-r","from-surface-50","to-white","dark:from-surface-900","dark:to-surface-800","rounded-t-lg","border-b","border-surface-200","dark:border-surface-700"],[1,"flex","flex-col","sm:flex-row","sm:justify-between","sm:items-center","gap-3","p-3","sm:p-4","bg-gradient-to-r","from-surface-50","to-white","dark:from-surface-900","dark:to-surface-800","rounded-lg","border","border-surface-200","dark:border-surface-700"],[1,"flex","items-center","gap-2","min-w-0"],[1,"w-12","h-12","flex","items-center","justify-center","rounded-xl","bg-gradient-to-br","from-primary-100","via-primary-200/60","to-primary-300/40","dark:from-primary-900/50","dark:via-primary-800/70","dark:to-primary-700/50","border","border-primary-200/60","dark:border-primary-600/40","shadow-lg"],[1,"pi","pi-map","text-primary-600","dark:text-primary-300","text-xl"],[1,"min-w-0"],[1,"text-gray-800","dark:text-white","text-xl","sm:text-2xl","font-bold","leading-snug","tracking-tight"],[1,"text-gray-500","dark:text-gray-400","text-xs","sm:text-sm","leading-snug",2,"margin-top","-15px"],[1,"flex","gap-2","flex-shrink-0","items-center"],["pTooltip","Restablecer vista","tooltipPosition","bottom",1,"flex","items-center","justify-center","h-9","w-9","rounded-full","bg-white","dark:bg-surface-800","hover:bg-primary-50","dark:hover:bg-primary-900/30","shadow-sm","border","border-surface-200","dark:border-surface-700","transition-all","duration-200",3,"click"],[1,"pi","pi-refresh","text-primary-500","dark:text-primary-400"],["label","Crear Geocerca","icon","pi pi-plus","severity","primary","size","small","pTooltip","Crear nueva geocerca en el mapa","tooltipPosition","bottom",3,"click","disabled"],[1,"p-4","rounded-lg","bg-primary-50/70","dark:bg-primary-900/20","border","border-primary-200","dark:border-primary-800","shadow-sm"],[1,"flex","flex-col","sm:flex-row","gap-2"],[1,"flex-1","min-w-0"],["iconPosition","left",1,"w-full"],[1,"pi","pi-map-marker"],["pInputText","","type","text","placeholder","Buscar ubicaci\xF3n (ej: Quito, Ecuador)",1,"w-full","text-sm",3,"ngModelChange","keyup.enter","ngModel"],[1,"flex","gap-2","flex-shrink-0"],["icon","pi pi-search","severity","primary","size","small","pTooltip","Buscar ubicaci\xF3n","tooltipPosition","bottom",3,"click","loading"],["icon","pi pi-times","severity","secondary","size","small","pTooltip","Limpiar b\xFAsqueda","tooltipPosition","bottom",3,"click","text"],[1,"bg-surface-50","dark:bg-surface-800","rounded-lg","p-3"],[1,"flex-1","relative","overflow-hidden","min-h-0"],[1,"absolute","inset-0","flex","items-center","justify-center","bg-gradient-to-br","from-surface-100/50","via-transparent","to-surface-200/30","dark:from-surface-800/30","dark:to-surface-900/50","z-10"],[1,"w-full","h-full","rounded-b-lg",2,"min-height","700px","height","100%","width","100%"],[1,"p-fluid",3,"visibleChange","visible","header","modal"],["pTemplate","content"],["pTemplate","footer"],[1,"absolute","inset-0","bg-gradient-to-r","from-transparent","via-red-100/20","to-transparent","dark:via-red-800/10"],[1,"relative","flex","items-center","justify-between"],[1,"flex","items-center","gap-4"],[1,"flex","items-center"],["type","checkbox","id","selectAll",1,"w-4","h-4","text-red-600","bg-white","dark:bg-surface-800","border-red-300","dark:border-red-600","rounded","focus:ring-red-500","focus:ring-2",3,"change","checked"],["for","selectAll",1,"ml-2.5","text-sm","font-semibold","text-red-700","dark:text-red-300"],[1,"inline-flex","items-center","px-2.5","py-1","rounded-full","bg-red-100/80","dark:bg-red-800/30","border","border-red-200/60","dark:border-red-700/40","text-xs","font-semibold","text-red-700","dark:text-red-300"],[1,"inline-flex","items-center","gap-2","px-4","py-2","rounded-xl","bg-gradient-to-r","from-red-600","to-red-700","hover:from-red-700","hover:to-red-800","text-white","font-semibold","text-sm","transition-all","duration-200","shadow-lg","hover:shadow-xl","transform","hover:-translate-y-0.5","border","border-red-500/30","disabled:opacity-50","disabled:cursor-not-allowed","disabled:transform-none",3,"click","disabled"],[1,"pi","pi-trash","text-sm"],[1,"rounded-xl","border","border-surface-200/60","dark:border-surface-700/60","bg-gradient-to-br","from-white","via-surface-50/50","to-surface-100/20","dark:from-surface-800","dark:via-surface-800/80","dark:to-surface-900/40","p-4"],[1,"w-12","h-12","rounded-xl","bg-gradient-to-br","from-surface-200","to-surface-300","dark:from-surface-700","dark:to-surface-600","animate-pulse"],[1,"flex-1","space-y-2"],[1,"flex","gap-2"],[1,"h-5","w-32","bg-surface-200","dark:bg-surface-700","rounded","animate-pulse"],[1,"h-5","w-16","bg-surface-200","dark:bg-surface-700","rounded-full","animate-pulse"],[1,"h-4","w-3/4","bg-surface-200","dark:bg-surface-700","rounded","animate-pulse"],[1,"h-3","w-1/2","bg-surface-200","dark:bg-surface-700","rounded","animate-pulse"],[1,"flex","gap-3"],[1,"h-3","w-16","bg-surface-200","dark:bg-surface-700","rounded","animate-pulse"],[1,"h-3","w-20","bg-surface-200","dark:bg-surface-700","rounded","animate-pulse"],[1,"relative","overflow-hidden","rounded-xl","border","border-surface-200/80","dark:border-surface-600/80","bg-gradient-to-br","from-white","via-surface-50/60","to-surface-100/30","dark:from-surface-700","dark:via-surface-700/90","dark:to-surface-800/60","hover:from-primary-50/30","hover:via-white","hover:to-primary-100/20","dark:hover:from-surface-600/80","dark:hover:via-surface-700/60","dark:hover:to-primary-900/20","transition-all","duration-300","group","hover:shadow-lg","hover:border-primary-200/60","dark:hover:border-primary-600/60","hover:-translate-y-0.5",3,"from-primary-50","to-primary-100-40","border-primary-300-80","dark:from-primary-900-30","dark:to-primary-800-40","dark:border-primary-600-80","from-orange-50","to-orange-100-40","border-orange-300-80","dark:from-orange-900-30","dark:to-orange-800-40","dark:border-orange-600-80","from-red-50","to-red-100-40","border-red-300-80","dark:from-red-900-30","dark:to-red-800-40","dark:border-red-600-80","cursor-pointer"],[1,"text-center","py-16"],[1,"relative","overflow-hidden","rounded-xl","border","border-surface-200/80","dark:border-surface-600/80","bg-gradient-to-br","from-white","via-surface-50/60","to-surface-100/30","dark:from-surface-700","dark:via-surface-700/90","dark:to-surface-800/60","hover:from-primary-50/30","hover:via-white","hover:to-primary-100/20","dark:hover:from-surface-600/80","dark:hover:via-surface-700/60","dark:hover:to-primary-900/20","transition-all","duration-300","group","hover:shadow-lg","hover:border-primary-200/60","dark:hover:border-primary-600/60","hover:-translate-y-0.5"],[1,"absolute","inset-0","bg-gradient-to-r","from-transparent","via-surface-100/20","to-transparent","dark:via-surface-600/10","opacity-0","group-hover:opacity-100","transition-opacity","duration-300"],[1,"relative","flex","items-center","p-4",3,"click"],[1,"flex-shrink-0","mr-4"],[1,"relative","flex-shrink-0","mr-4"],[1,"w-12","h-12","flex","items-center","justify-center","rounded-xl","bg-gradient-to-br","border","shadow-sm"],[1,"absolute","-top-1","-right-1","w-4","h-4","bg-green-500","border-2","border-white","dark:border-surface-700","rounded-full"],[1,"absolute","-top-1","-right-1","w-4","h-4","bg-red-500","border-2","border-white","dark:border-surface-700","rounded-full"],[1,"flex","items-center","gap-2","mb-2"],[1,"inline-flex","items-center","px-2.5","py-1","rounded-lg","bg-surface-100/80","dark:bg-surface-600/60","border","border-surface-200/60","dark:border-surface-500/60","text-xs","font-mono","font-medium","text-surface-700","dark:text-surface-300"],[1,"pi","pi-hashtag","mr-1","text-xs"],[1,"inline-flex","items-center","px-2.5","py-1","rounded-full","text-xs","font-semibold","border","shadow-sm"],[1,"w-2","h-2","rounded-full","mr-1.5"],[1,"inline-flex","items-center","px-2.5","py-1","rounded-full","bg-orange-100/80","text-orange-700","border","border-orange-200/60","dark:bg-orange-900/30","dark:text-orange-300","dark:border-orange-700/40","text-xs","font-semibold"],[1,"font-bold","text-surface-900","dark:text-surface-0","mb-2","text-base","leading-tight","group-hover:text-primary-700","dark:group-hover:text-primary-300","transition-colors"],[1,"space-y-1","mb-3"],[1,"flex","items-center","gap-2","text-sm","text-surface-600","dark:text-surface-400"],[1,"flex","items-center","justify-center","w-5","h-5","rounded-md","bg-blue-100/80","dark:bg-blue-900/30","border","border-blue-200/40","dark:border-blue-700/40"],[1,"pi","pi-map-marker","text-blue-600","dark:text-blue-400","text-xs"],[1,"font-medium"],[1,"flex","items-center","justify-center","w-5","h-5","rounded-md","bg-emerald-100/80","dark:bg-emerald-900/30","border","border-emerald-200/40","dark:border-emerald-700/40"],[1,"pi","pi-globe","text-emerald-600","dark:text-emerald-400","text-xs"],[1,"inline-flex","items-center","gap-2","text-xs","text-surface-500","dark:text-surface-500"],[1,"w-2","h-2","bg-primary-500","rounded-full"],[1,"w-2","h-2","border-2","border-primary-500","rounded-full"],[1,"flex","items-center","gap-3","ml-3","flex-shrink-0"],[1,"pi","pi-chevron-right","text-surface-400","flex-shrink-0","ml-3"],[1,"h-1","w-full",3,"class"],["type","checkbox",1,"w-4","h-4","text-red-600","bg-white","dark:bg-surface-800","border-red-300","dark:border-red-600","rounded","focus:ring-red-500","focus:ring-2",3,"change","click","checked"],[1,"w-full","h-full","bg-green-400","rounded-full","animate-ping","opacity-75"],[1,"w-full","h-full","bg-red-400","rounded-full","animate-ping","opacity-75"],[1,"pi","pi-pencil","mr-1.5","text-xs"],["pTooltip","Editar geocerca","tooltipPosition","left",1,"w-10","h-10","flex","items-center","justify-center","rounded-xl","transition-all","duration-200","border",3,"click","disabled"],[1,"pi","pi-pencil","text-sm"],[1,"flex","items-center","justify-center","w-6"],[1,"pi","pi-chevron-right","text-primary-500","text-sm"],[1,"pi","pi-chevron-right","text-surface-300","dark:text-surface-600","text-sm","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"h-1","w-full"],[1,"absolute","inset-0","bg-gradient-to-br","from-surface-100/50","via-transparent","to-surface-200/30","dark:from-surface-800/30","dark:to-surface-900/50","rounded-3xl"],[1,"relative","p-12"],[1,"w-20","h-20","mx-auto","mb-6","bg-gradient-to-br","from-surface-200","to-surface-300","dark:from-surface-700","dark:to-surface-800","rounded-2xl","flex","items-center","justify-center","border","border-surface-300/60","dark:border-surface-600/60"],[1,"pi","pi-map","text-3xl","text-surface-500","dark:text-surface-400"],[1,"text-surface-700","dark:text-surface-300","font-bold","mb-3","text-base"],[1,"text-surface-500","dark:text-surface-500","text-sm","max-w-sm","mx-auto","leading-relaxed"],[1,"text-xs","sm:text-sm",3,"onPageChange","rows","totalRecords","first"],[1,"flex","items-center","justify-between","mb-3"],[1,"flex","items-center","gap-2"],[1,"pi","pi-map","text-primary-600","dark:text-primary-400","text-lg"],[1,"font-medium","text-primary-700","dark:text-primary-300"],["icon","pi pi-times","severity","danger","size","small","tooltipPosition","bottom",3,"click","text","pTooltip"],[1,"flex","flex-col","md:flex-row","gap-4","mb-3"],[1,"block","text-xs","font-medium","text-surface-700","dark:text-surface-300","mb-1"],["optionLabel","label","optionValue","value",1,"w-full",3,"ngModelChange","onChange","ngModel","options"],["pTemplate","item"],[1,"mb-3","p-2","bg-blue-50","dark:bg-blue-900/20","rounded","border","border-blue-200","dark:border-blue-800"],[1,"text-xs","text-blue-700","dark:text-blue-300"],[1,"pi","pi-info-circle","mr-1"],["label","Limpiar","icon","pi pi-refresh","severity","secondary","size","small",3,"click","text"],["severity","primary","size","small",3,"click","label","icon","disabled"],[1,"block","text-xs","font-medium","text-surface-700","dark:text-surface-300","mb-2"],[1,"w-full",3,"ngModelChange","onSlideEnd","ngModel","min","max","step"],[1,"flex","justify-between","text-xs","text-surface-500","mt-1"],[1,"flex","items-center","justify-between"],[1,"text-xs","text-surface-600","dark:text-surface-400"],[1,"text-green-600","dark:text-green-400","ml-2"],["icon","pi pi-undo","severity","secondary","size","small","pTooltip","Deshacer \xFAltimo punto","tooltipPosition","bottom",3,"click","text","disabled"],[1,"pi","pi-undo"],[1,"text-xs","sm:text-sm","text-surface-600","dark:text-surface-400","mb-2"],[1,"space-y-1"],[1,"flex","items-center","justify-between","p-2","hover:bg-surface-100","dark:hover:bg-surface-700","rounded","cursor-pointer","transition-colors"],[1,"flex","items-center","justify-between","p-2","hover:bg-surface-100","dark:hover:bg-surface-700","rounded","cursor-pointer","transition-colors",3,"click"],[1,"flex","items-center","gap-2","min-w-0","flex-1"],[1,"pi","pi-map-marker","text-primary","text-sm","flex-shrink-0"],[1,"text-xs","sm:text-sm","text-surface-900","dark:text-surface-0","truncate"],[1,"pi","pi-arrow-right","text-surface-400","text-xs","flex-shrink-0","ml-2"],[1,"text-center","p-8"],[1,"absolute","inset-0","bg-gradient-to-br","from-surface-100/50","via-transparent","to-surface-200/30","dark:from-surface-800/30","dark:to-surface-900/50","rounded-2xl"],[1,"relative","p-8"],[1,"w-16","h-16","mx-auto","mb-4","bg-gradient-to-br","from-primary-100","to-primary-200","dark:from-primary-900/40","dark:to-primary-800/60","rounded-2xl","flex","items-center","justify-center","border","border-primary-200/60","dark:border-primary-700/40"],[1,"pi","pi-spin","pi-spinner","text-2xl","text-primary-600","dark:text-primary-400"],[1,"text-surface-700","dark:text-surface-300","font-bold","mb-2"],[1,"text-sm","text-surface-500","dark:text-surface-500","max-w-sm","mx-auto","leading-relaxed"],[1,"space-y-4",3,"formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["for","geoccod",1,"block","text-sm","font-medium","text-surface-700","dark:text-surface-300","mb-1"],["maxlength","5","id","geoccod","pInputText","","formControlName","geoccod","placeholder","Ej: GEO001",1,"w-full"],[1,"absolute","inset-y-0","right-0","flex","items-center","pr-3"],[1,"pi","pi-spin","pi-spinner","text-primary-500"],[1,"pi","pi-check-circle","text-green-500"],[1,"pi","pi-times-circle","text-red-500"],[1,"mt-1","min-h-[20px]"],[1,"text-xs","text-surface-500","flex","items-center","gap-1"],[3,"class"],["for","geocnom",1,"block","text-sm","font-medium","text-surface-700","dark:text-surface-300","mb-1"],["id","geocnom","pInputText","","formControlName","geocnom","placeholder","Ej: Zona Norte",1,"w-full"],["for","geocprov",1,"block","text-sm","font-medium","text-surface-700","dark:text-surface-300","mb-1"],["inputId","geocprov","formControlName","geocprov","optionLabel","provincia","placeholder","Buscar provincia...",1,"w-full",3,"completeMethod","onSelect","onClear","suggestions","dropdown"],["for","geocciud",1,"block","text-sm","font-medium","text-surface-700","dark:text-surface-300","mb-1"],["inputId","geocciud","formControlName","geocciud","optionLabel","canton","placeholder","Buscar ciudad/cant\xF3n...",1,"w-full",3,"completeMethod","onSelect","onClear","suggestions","dropdown","disabled"],["for","geocsec",1,"block","text-sm","font-medium","text-surface-700","dark:text-surface-300","mb-1"],["inputId","geocsec","formControlName","geocsec","optionLabel","parroquia","placeholder","Buscar sector/parroquia...",1,"w-full",3,"completeMethod","suggestions","dropdown","disabled"],[1,"md:col-span-2"],["for","geocdirre",1,"block","text-sm","font-medium","text-surface-700","dark:text-surface-300","mb-1"],["id","geocdirre","pInputText","","formControlName","geocdirre","placeholder","Ej: Av. Principal y Calle 10",1,"w-full"],["for","geocpais",1,"block","text-sm","font-medium","text-surface-700","dark:text-surface-300","mb-1"],["readonly","","id","geocpais","pInputText","","formControlName","geocpais","value","ECUADOR",1,"w-full"],[1,"flex","items-center","justify-between","mb-1"],["for","geocpri",1,"text-sm","font-medium","text-surface-700","dark:text-surface-300"],[1,"px-2","py-1","text-sm","font-bold","text-primary-600","bg-primary-50","rounded"],["id","geocpri","formControlName","geocpri",1,"w-full",3,"min","max","step"],[1,"flex","items-center","gap-2","mt-6"],["formControlName","geocact","inputId","geocact"],["for","geocact",1,"text-sm","font-medium","text-surface-700","dark:text-surface-300"],["for","geocdesc",1,"block","text-sm","font-medium","text-surface-700","dark:text-surface-300","mb-1"],["id","geocdesc","pInputTextarea","","formControlName","geocdesc","placeholder","Descripci\xF3n detallada de la geocerca","rows","3",1,"w-full"],[1,"mt-4","p-3","bg-surface-50","dark:bg-surface-800","rounded","border"],[1,"text-sm","font-medium","text-surface-700","dark:text-surface-300","mb-2"],[1,"grid","grid-cols-2","gap-2","text-xs"],[1,"text-surface-600","dark:text-surface-400"],[1,"ml-2","font-medium"],[1,"pi","pi-spin","pi-spinner"],[1,"pi","pi-check","mr-1"],[1,"pi","pi-exclamation-triangle","mr-1"],[1,"flex","justify-end","gap-2"],["label","Cancelar","icon","pi pi-times","severity","secondary",3,"click","text"],["severity","primary",3,"click","label","icon","disabled"]],template:function(e,i){if(e&1){let n=b();r(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6),d(5,"div",7),r(6,"div",8)(7,"div",9)(8,"div",10)(9,"div",8)(10,"input",11),h("input",function(p){return u(n),g(i.onSearch(p))}),a(),r(11,"div",12),d(12,"i",13),a()(),f(13,Ga,3,1,"div",14),a(),r(14,"button",15),h("click",function(){return u(n),g(i.toggleModoEliminacion())}),d(15,"i"),a()(),f(16,ka,12,3,"div",16),a()(),r(17,"div",17),f(18,Pa,3,1,"div",18),f(19,Ya,4,1,"div",18),a(),f(20,Wa,2,3,"div",19),a()(),r(21,"div",20)(22,"div",21)(23,"div",22)(24,"div",23)(25,"div",24)(26,"div",25),d(27,"i",26),a(),r(28,"div",27)(29,"p",28),l(30," Geocercas "),a(),r(31,"p",29),l(32," Mapa de geolocalizaci\xF3n de geocercas activas "),a()()(),r(33,"div",30)(34,"button",31),h("click",function(){return u(n),g(i.refreshData())}),d(35,"i",32),a(),r(36,"p-button",33),h("click",function(){return u(n),g(i.iniciarCreacionGeocerca())}),a()()(),f(37,ao,23,13,"div",34),r(38,"div",35)(39,"div",36)(40,"p-iconField",37)(41,"p-inputIcon"),d(42,"i",38),a(),r(43,"input",39,0),O("ngModelChange",function(p){return u(n),y(i.searchLocation,p)||(i.searchLocation=p),g(p)}),h("keyup.enter",function(){return u(n),g(i.searchLocationOnMap())}),a()()(),r(45,"div",40)(46,"p-button",41),h("click",function(){return u(n),g(i.searchLocationOnMap())}),a(),r(47,"p-button",42),h("click",function(){return u(n),g(i.clearLocationSearch())}),a()()(),f(48,no,6,0,"div",43),a(),r(49,"div",44),f(50,so,11,0,"div",45),d(51,"div",46,1),a()()()()(),r(53,"p-dialog",47),O("visibleChange",function(p){return u(n),y(i.geocercaDialog,p)||(i.geocercaDialog=p),g(p)}),M(54,Ao,83,25,"ng-template",48)(55,ho,3,4,"ng-template",49),a(),d(56,"p-confirmDialog")}e&2&&(s(10),v("disabled",i.modoEliminacion),s(3),A(i.filteredGeocercas.length>0?13:-1),s(),R("relative overflow-hidden mb-6 w-12 h-12 flex items-center justify-center rounded-xl border-2 transition-all duration-300 shadow-sm "+(i.modoEliminacion?"bg-gradient-to-br from-red-500 to-red-600 border-red-400/30 text-white hover:from-red-600 hover:to-red-700":"bg-gradient-to-br from-surface-100 to-surface-200/60 dark:from-surface-700 dark:to-surface-800/60 border-surface-200/80 dark:border-surface-600/80 text-surface-600 dark:text-surface-400 hover:border-surface-300/80 dark:hover:border-surface-500/80")),v("disabled",i.loading||i.creandoGeocerca||i.editandoGeocerca)("pTooltip",i.modoEliminacion?"Cancelar eliminaci\xF3n":"Eliminar geocercas"),s(),R("transition-transform duration-200 "+(i.modoEliminacion?"pi pi-times":"pi pi-trash")),s(),A(i.modoEliminacion?16:-1),s(2),A(i.loading?18:-1),s(),A(i.loading?-1:19),s(),A(!i.loading&&i.filteredGeocercas.length>0?20:-1),s(16),v("disabled",i.creandoGeocerca||!i.mapInitialized),s(),A(i.creandoGeocerca||i.editandoGeocerca?37:-1),s(6),L("ngModel",i.searchLocation),s(3),v("loading",i.searchingLocation),s(),v("text",!0),s(),A(i.searchResults.length>0?48:-1),s(2),A(i.mapInitialized?-1:50),s(3),ne(T(24,Ma)),L("visible",i.geocercaDialog),v("header",i.editandoGeocerca?"Editar Geocerca":"Completar datos de la Geocerca")("modal",!0))},dependencies:[ce,re,Ie,K,Ye,Q,Y,Qe,Xe,W,ge,ee,pe,X,de,xe,be,Ue,fe,Se,Ee,Ce,he,ie,Ae,te,Re,We,Ke,_e,ke,we,Me,Te,Ge,ue,ve,st,ot,nt],encapsulation:2})};var vo=["mapContainer"],Mi=()=>[1,2,3,4,5,6,7,8,9,10,11,12],Co=()=>[1,2,3,4,5,6,7,8],xo=()=>["id","vendedor","ubicacion","numeroPedido","numeroCobo","cliente"];function bo(o,t){o&1&&(r(0,"div",19)(1,"div",46),d(2,"div",47),r(3,"div",48),d(4,"div",49)(5,"div",50),a()(),r(6,"div",51),d(7,"div",52)(8,"div",52)(9,"div",53),a()())}function Eo(o,t){if(o&1&&(r(0,"div",40)(1,"div",91),d(2,"i",92),a(),r(3,"div",93)(4,"span",94),l(5),a(),r(6,"small",95),l(7),a()()()),o&2){let e=m().$implicit;s(5),_(e.label),s(2),_(e.value)}}function So(o,t){if(o&1&&f(0,Eo,8,2,"div",40),o&2){let e=t.$implicit;A(e?0:-1)}}function _o(o,t){if(o&1&&(r(0,"div",96)(1,"div",97),d(2,"i",98),a(),r(3,"div",27)(4,"div",99),l(5),a(),r(6,"div",100),l(7),a()(),r(8,"div",101),d(9,"p-badge",102),a()()),o&2){let e=t.$implicit;s(5),x(" ",e.label," "),s(2),x(" ",e.subtitle," "),s(2),v("value",e.value)}}function Lo(o,t){if(o&1&&(r(0,"div",74)(1,"div",103),d(2,"i",104),r(3,"span"),l(4),a()()()),o&2){let e=m(2);s(4),x("Vendedor seleccionado: ",e.selectedVendor)}}function yo(o,t){if(o&1&&(r(0,"div",40)(1,"div",105),d(2,"i",106),a(),r(3,"div",93)(4,"span",94),l(5),a(),r(6,"small",95),l(7),a()()()),o&2){let e=m().$implicit;s(5),_(e.label),s(2),_(e.subtitle)}}function Oo(o,t){if(o&1&&f(0,yo,8,2,"div",40),o&2){let e=t.$implicit;A(e?0:-1)}}function No(o,t){if(o&1&&(r(0,"div",96)(1,"div",107),d(2,"i",108),a(),r(3,"div",27)(4,"div",99),l(5),a(),r(6,"div",100),l(7),a()()()),o&2){let e=t.$implicit;s(5),x(" ",e.label," "),s(2),x(" ",e.subtitle," ")}}function Io(o,t){if(o&1&&(r(0,"div",77)(1,"div",109),d(2,"i",104),r(3,"span"),l(4),a()()()),o&2){let e=m(2);s(4),x("Cliente seleccionado: ",e.selectedCustomer)}}function Ro(o,t){if(o&1){let e=b();r(0,"p-accordion",20)(1,"p-accordion-panel",54)(2,"p-accordion-header")(3,"div",55)(4,"div",56),d(5,"i",57),a(),r(6,"div",27)(7,"span",58),l(8," Filtrado Especial "),a(),r(9,"span",59),l(10),a()()()(),r(11,"p-accordion-content")(12,"div",60)(13,"div")(14,"div",61)(15,"div",62),d(16,"i",63),a(),r(17,"span",64),l(18,"Per\xEDodo"),a(),d(19,"div",65),a(),r(20,"div",66)(21,"div")(22,"label",67),l(23," Desde "),a(),r(24,"p-datepicker",68),O("ngModelChange",function(n){u(e);let c=m();return y(c.filterFrom,n)||(c.filterFrom=n),g(n)}),a()(),r(25,"div")(26,"label",67),l(27," Hasta "),a(),r(28,"p-datepicker",69),O("ngModelChange",function(n){u(e);let c=m();return y(c.filterTo,n)||(c.filterTo=n),g(n)}),a()()()(),r(29,"div")(30,"div",61)(31,"div",70),d(32,"i",71),a(),r(33,"span",64),l(34,"Filtros de selecci\xF3n"),a(),d(35,"div",65),a(),r(36,"div",66)(37,"div")(38,"label",67),d(39,"i",72),l(40," Seleccionar Vendedor "),a(),r(41,"p-select",73),O("ngModelChange",function(n){u(e);let c=m();return y(c.selectedVendor,n)||(c.selectedVendor=n),g(n)}),h("onChange",function(n){u(e);let c=m();return g(c.onVendorChange(n))}),M(42,So,1,1,"ng-template",null,0,k)(44,_o,10,3,"ng-template",null,1,k),a(),f(46,Lo,5,1,"div",74),a(),r(47,"div")(48,"label",67),d(49,"i",75),l(50," Seleccionar Cliente "),a(),r(51,"p-select",76),O("ngModelChange",function(n){u(e);let c=m();return y(c.selectedCustomer,n)||(c.selectedCustomer=n),g(n)}),h("onChange",function(n){u(e);let c=m();return g(c.onCustomerChange(n))}),M(52,Oo,1,1,"ng-template",null,0,k)(54,No,8,2,"ng-template",null,1,k),a(),f(56,Io,5,1,"div",77),a()()(),r(57,"div")(58,"div",61)(59,"div",78),d(60,"i",79),a(),r(61,"span",64),l(62,"Tipo de Transacci\xF3n"),a(),d(63,"div",65),a(),r(64,"div",80)(65,"div",81)(66,"p-checkbox",82),O("ngModelChange",function(n){u(e);let c=m();return y(c.pedidosEnabled,n)||(c.pedidosEnabled=n),g(n)}),a(),r(67,"label",83),d(68,"i",84),l(69,"Pedidos "),a()(),r(70,"div",81)(71,"p-checkbox",85),O("ngModelChange",function(n){u(e);let c=m();return y(c.collectionsEnabled,n)||(c.collectionsEnabled=n),g(n)}),a(),r(72,"label",86),d(73,"i",87),l(74,"Cobros "),a()()()(),r(75,"div",88)(76,"p-button",89),h("onClick",function(){u(e);let n=m();return g(n.clearFilters())}),a(),r(77,"p-button",90),h("onClick",function(){u(e);let n=m();return g(n.applyFilters())}),a()()()()()()}if(o&2){let e=m();s(10),B(" (",e.getActiveFiltersCount()," activo",e.getActiveFiltersCount()!==1?"s":"",") "),s(14),L("ngModel",e.filterFrom),v("showTime",!0)("hourFormat","24"),s(4),L("ngModel",e.filterTo),v("showTime",!0)("hourFormat","24"),s(13),v("options",e.vendorOptions),L("ngModel",e.selectedVendor),v("filter",!0)("showClear",!0)("disabled",e.loading||e.vendorOptions.length===0),s(5),A(e.selectedVendor?46:-1),s(5),v("options",e.customerOptions),L("ngModel",e.selectedCustomer),v("filter",!0)("showClear",!0)("loading",e.loadingCustomers)("disabled",!e.selectedVendor||e.customerOptions.length===0),s(5),A(e.selectedCustomer?56:-1),s(10),L("ngModel",e.pedidosEnabled),v("binary",!0),s(5),L("ngModel",e.collectionsEnabled),v("binary",!0),s(5),v("text",!0)}}function To(o,t){if(o&1){let e=b();r(0,"div",113),h("click",function(){let n=u(e).$implicit,c=m(2);return g(c.selectSearchResult(n))}),r(1,"div",114),d(2,"i",115),r(3,"span",116),l(4),a()(),d(5,"i",117),a()}if(o&2){let e=t.$implicit;s(4),_(e.display_name)}}function Mo(o,t){if(o&1&&(r(0,"div",34)(1,"div",110),l(2," Resultados de b\xFAsqueda: "),a(),r(3,"div",111),w(4,To,6,1,"div",112,D),a()()),o&2){let e=m();s(4),G(e.searchResults.slice(0,3))}}function wo(o,t){o&1&&(r(0,"div",36)(1,"div",118)(2,"div",119),d(3,"div",120)(4,"div",121)(5,"div",122),a()()())}function Go(o,t){o&1&&(r(0,"div",123)(1,"div",119),d(2,"i",125),r(3,"p",126),l(4,"Cargando mapa..."),a()()())}function Uo(o,t){if(o&1&&(f(0,Go,5,0,"div",123),d(1,"div",124,2)),o&2){let e=m();A(e.mapInitialized?-1:0)}}function ko(o,t){o&1&&d(0,"div",131)}function Do(o,t){o&1&&d(0,"div",133)}function Po(o,t){o&1&&(r(0,"div",132),w(1,Do,1,0,"div",133,D),a()),o&2&&(s(),G(T(0,Mi)))}function Vo(o,t){o&1&&(r(0,"div",44)(1,"div",127),d(2,"div",128)(3,"div",129),a(),r(4,"div",130),w(5,ko,1,0,"div",131,D),a(),w(7,Po,3,1,"div",132,D),a()),o&2&&(s(5),G(T(0,Mi)),s(2),G(T(1,Co)))}function Bo(o,t){if(o&1){let e=b();r(0,"div",134)(1,"div",135)(2,"p-button",136),h("onClick",function(){u(e),m();let n=Be(1),c=m();return g(c.clearTableFilters(n))}),a(),r(3,"p-button",137),h("onClick",function(){u(e);let n=m(2);return g(n.exportToExcel())}),a()(),r(4,"p-iconfield",138)(5,"p-inputicon"),d(6,"i",139),a(),r(7,"input",140),h("input",function(n){u(e),m();let c=Be(1),p=m();return g(p.onGlobalFilter(c,n))}),a()()()}}function Fo(o,t){o&1&&(r(0,"tr")(1,"th",141)(2,"div",127)(3,"span",142),l(4,"ID"),a(),d(5,"p-columnFilter",143),a()(),r(6,"th",144)(7,"div",127)(8,"span",142),l(9,"FECHA"),a(),d(10,"p-columnFilter",145),a()(),r(11,"th",146)(12,"div",127)(13,"span",142),l(14,"HORA INGRESO"),a(),d(15,"p-columnFilter",147),a()(),r(16,"th",146)(17,"div",127)(18,"span",142),l(19,"HORA SALIDA"),a(),d(20,"p-columnFilter",148),a()(),r(21,"th",149)(22,"div",127)(23,"span",142),l(24,"VENDEDOR"),a(),d(25,"p-columnFilter",150),a()(),r(26,"th",151)(27,"div",127)(28,"span",142),l(29,"UBICACI\xD3N"),a(),d(30,"p-columnFilter",152),a()(),r(31,"th",146)(32,"div",127)(33,"span",142),l(34,"N\xB0 PEDIDO"),a(),d(35,"p-columnFilter",153),a()(),r(36,"th",146)(37,"div",127)(38,"span",142),l(39,"N\xB0 COBRO"),a(),d(40,"p-columnFilter",154),a()(),r(41,"th",149)(42,"div",127)(43,"span",142),l(44,"CLIENTE"),a(),d(45,"p-columnFilter",155),a()(),r(46,"th",156)(47,"span",142),l(48,"PEDIDO"),a()(),r(49,"th",156)(50,"span",142),l(51,"COBRO"),a()(),r(52,"th",157)(53,"div",127)(54,"span",142),l(55,"MONTO"),a(),d(56,"p-columnFilter",158),a()()())}function Ho(o,t){o&1&&d(0,"i",169)}function qo(o,t){o&1&&d(0,"i",170)}function jo(o,t){o&1&&d(0,"i",169)}function Zo(o,t){o&1&&d(0,"i",170)}function zo(o,t){if(o&1&&(r(0,"tr",159)(1,"td")(2,"span",160),l(3),a()(),r(4,"td")(5,"span",161),l(6),J(7,"date"),a()(),r(8,"td")(9,"span",162),l(10),a()(),r(11,"td")(12,"span",163),l(13),a()(),r(14,"td")(15,"div",40)(16,"div",91),d(17,"i",92),a(),r(18,"span",161),l(19),a()()(),r(20,"td")(21,"div",40),d(22,"i",164),r(23,"span",165),l(24),a()()(),r(25,"td")(26,"span",166),l(27),a()(),r(28,"td")(29,"span",166),l(30),a()(),r(31,"td")(32,"div",40)(33,"div",105),d(34,"i",106),a(),r(35,"span",161),l(36),a()()(),r(37,"td",167)(38,"div",168),f(39,Ho,1,0,"i",169)(40,qo,1,0,"i",170),a()(),r(41,"td",167)(42,"div",168),f(43,jo,1,0,"i",169)(44,Zo,1,0,"i",170),a()(),r(45,"td",171)(46,"span",172),l(47),J(48,"currency"),a()()()),o&2){let e=t.$implicit;s(3),_(e.id),s(3),_(se(7,16,e.fecha,"dd/MM/yyyy")),s(4),x(" ",e.horaIngreso," "),s(2),v("ngClass",e.horaSalida?"text-red-600 dark:text-red-400":"text-surface-400"),s(),x(" ",e.horaSalida||"--:--"," "),s(6),_(e.vendedor),s(5),_(e.ubicacion),s(2),v("ngClass",e.numeroPedido?"text-surface-900 dark:text-surface-100":"text-surface-400"),s(),x(" ",e.numeroPedido||"---"," "),s(2),v("ngClass",e.numeroCobo?"text-surface-900 dark:text-surface-100":"text-surface-400"),s(),x(" ",e.numeroCobo||"---"," "),s(6),_(e.cliente),s(3),A(e.tienePedido?39:40),s(4),A(e.tieneCobro?43:44),s(3),v("ngClass",e.monto>0?"text-green-600 dark:text-green-400":"text-surface-400"),s(),x(" ",Ht(48,19,e.monto,"USD","symbol","1.2-2")," ")}}function $o(o,t){o&1&&(r(0,"tr")(1,"td",173)(2,"div",174),d(3,"i",175),r(4,"div")(5,"p",176),l(6,"No se encontraron registros"),a(),r(7,"p",177),l(8,"Ajusta los filtros para ver m\xE1s resultados"),a()()()()())}function Jo(o,t){o&1&&(r(0,"tr")(1,"td",173)(2,"div",178),d(3,"i",179),r(4,"span",180),l(5,"Cargando registros de vendedores..."),a()()()())}function Qo(o,t){if(o&1&&(r(0,"p-table",45,3),M(2,Bo,8,0,"ng-template",null,4,k)(4,Fo,57,0,"ng-template",null,5,k)(6,zo,49,24,"ng-template",null,6,k)(8,$o,9,0,"ng-template",null,7,k)(10,Jo,6,0,"ng-template",null,8,k),a()),o&2){let e=m();v("value",e.tableData)("rows",10)("loading",e.loading)("rowHover",!0)("showGridlines",!0)("paginator",!0)("globalFilterFields",T(7,xo))}}var At=class o{constructor(t,e,i,n){this.userService=t;this.msgService=e;this.mapService=i;this.customerService=n}mapContainer;destroy$=new j;active=0;activeIndex=0;users=[];filteredUsers=[];paginatedUsers=[];selectedUser=null;loading=!0;first=0;itemsPerPage=5;vendorGeocercas=[];loadingGeocercas=!1;selectedVendor=null;searchLocation="";searchingLocation=!1;searchResults=[];mapInitialized=!1;loadingMap=!1;filterFrom=null;selectedTimeUnit=null;timeValue=null;selectedGeofence=[];geofenceEnabled=!0;pedidosEnabled=!1;collectionsEnabled=!1;clientesNone=!1;clientesAll=!1;clientesAssigned=!1;geofenceOptions=[];loadingFilters=!1;filterTo=null;totalRecords=0;loadingTable=!1;tableData=[];vendorOptions=[];customerOptions=[];selectedCustomer=null;loadingCustomers=!1;ngOnInit(){this.getAllUsers(),this.subscribeToMapService()}ngAfterViewInit(){requestAnimationFrame(()=>{this.initializeMap().then(()=>{})})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.mapService.destroyMap()}subscribeToMapService(){this.mapService.isMapInitialized$.pipe(U(this.destroy$)).subscribe(t=>{this.mapInitialized=t}),this.mapService.isSearchingLocation$.pipe(U(this.destroy$)).subscribe(t=>{this.searchingLocation=t}),this.mapService.searchResultsList$.pipe(U(this.destroy$)).subscribe(t=>{this.searchResults=t})}getCustomersByCodeVendor(t){this.loadingCustomers=!0,this.customerService.getCustomersByCodeVendor(t).subscribe({next:e=>{this.mapCustomersToOptions(e),this.loadingCustomers=!1,this.msgService.add({severity:"success",summary:"Clientes cargados",detail:`${e.length} clientes encontrados`,life:2e3})},error:e=>{console.error("Error al cargar clientes:",e),this.loadingCustomers=!1,this.customerOptions=[],this.msgService.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los clientes del vendedor"})}})}mapCustomersToOptions(t){this.customerOptions=t.map(e=>({label:e.dirnombre,value:e.dirclave,customer:e,subtitle:`${e.dirruc} \u2022 C\xF3digo: ${e.dirclave}`}))}onCustomerChange(t){let e=t.value;if(e){let i=this.customerOptions.find(n=>n.value===e);this.msgService.add({severity:"info",summary:"Cliente seleccionado",detail:`Cliente: ${i?.label||e}`,life:2e3})}else this.msgService.add({severity:"info",summary:"Selecci\xF3n removida",detail:"Ning\xFAn cliente seleccionado",life:2e3})}getAllUsers(){this.loading=!0,this.userService.getAllListUser().subscribe({next:t=>{this.users=t,this.filteredUsers=[...this.users],this.updatePagination(),this.loading=!1,this.mapUsersToVendorOptions(this.users),this.mapInitialized&&this.mapService.addUserMarkers(this.users)},error:t=>{console.error("Error al cargar usuarios:",t),this.loading=!1,this.msgService.add({severity:"error",summary:"Error",detail:"No se pudieron cargar los usuarios"})}})}mapUsersToVendorOptions(t){this.vendorOptions=t.map(e=>({label:e.usunombre,value:e.usucodv,user:e,subtitle:`${e.usuemail||"Sin correo electr\xF3nico"}`}))}getActiveFiltersCount(){let t=0;return this.filterFrom&&t++,this.geofenceEnabled&&this.selectedGeofence&&t++,this.pedidosEnabled&&t++,this.collectionsEnabled&&t++,this.timeValue&&this.selectedTimeUnit&&t++,(this.clientesNone||this.clientesAll||this.clientesAssigned)&&t++,t}onToggleChange(){this.geofenceEnabled?this.vendorGeocercas.length>0&&(this.selectedGeofence=this.vendorGeocercas.map(t=>t.geoccod),this.onGeofencesChange({value:this.selectedGeofence})):(this.selectedGeofence=[],this.mapService.clearGeocercas(),this.msgService.add({severity:"info",summary:"Geocercas deshabilitadas",detail:"Se ha limpiado la selecci\xF3n de geocercas",life:2e3}))}clearTableFilters(t){t.clear(),this.msgService.add({severity:"info",summary:"Filtros de tabla",detail:"Filtros de tabla limpiados"})}onGlobalFilter(t,e){t.filterGlobal(e.target.value,"contains")}onVendorChange(t){let e=t.value;if(e){let i=this.users.find(n=>n.usucodv===e);i&&(this.customerOptions=[],this.selectedCustomer=null,this.getCustomersByCodeVendor(e),this.mapService.clearUserMarkers(),this.mapService.addUserMarkers([i]),this.mapService.focusOnUser(i),this.msgService.add({severity:"success",summary:"Vendedor seleccionado",detail:`Cargando clientes de ${i.usunombre}`,life:3e3}))}else this.customerOptions=[],this.selectedCustomer=null,this.mapService.clearUserMarkers(),this.mapService.addUserMarkers(this.users),this.msgService.add({severity:"info",summary:"Selecci\xF3n removida",detail:"Mostrando todos los vendedores",life:2e3})}onGeofencesChange(t){let e=t.value,i=this.vendorGeocercas.filter(n=>e.includes(n.geoccod));i.length>0?(this.mapService.displayVendorGeocercas(i),this.msgService.add({severity:"info",summary:"Filtro aplicado",detail:`Mostrando ${i.length} de ${this.vendorGeocercas.length} geocerca${i.length===1?"":"s"}`,life:2e3})):(this.mapService.clearGeocercas(),this.msgService.add({severity:"warn",summary:"Sin filtro",detail:"No hay geocercas seleccionadas para mostrar",life:2e3}))}onVendorsChange(t){let e=t.value,i=this.users.filter(n=>e.includes(n.usucod));i.length>0?(this.mapService.clearUserMarkers(),this.mapService.addUserMarkers(i),this.msgService.add({severity:"success",summary:"Vendedores filtrados",detail:`Mostrando ${i.length} de ${this.users.length} vendedor${i.length===1?"":"es"}`,life:3e3})):(this.mapService.clearUserMarkers(),this.mapService.addUserMarkers(this.users),this.msgService.add({severity:"info",summary:"Filtro removido",detail:"Mostrando todos los vendedores",life:2e3}))}onSearch(t){let e=t.target.value.toLowerCase();this.filteredUsers=this.users.filter(i=>i.usunombre.toLowerCase().includes(e)||i.usucod.toLowerCase().includes(e)||i.usuemail.toLowerCase().includes(e)),this.first=0,this.updatePagination()}updatePagination(){let t=this.first,e=t+this.itemsPerPage;this.paginatedUsers=this.filteredUsers.slice(t,e)}selectUser(t){this.selectedUser=t,this.mapService.focusOnUser(t)}initializeMap(){return P(this,null,function*(){try{yield this.mapService.initializeMap(this.mapContainer,{center:[-.2298,-78.5249],zoom:13,defaultLocation:"Quito, Ecuador"}),!this.loading&&this.users.length>0&&this.mapService.addUserMarkers(this.users)}catch(t){console.error("Error al inicializar el mapa:",t)}})}searchLocationOnMap(){this.searchLocation.trim()&&this.mapService.searchLocation(this.searchLocation).subscribe({next:t=>{t.length===1?this.selectSearchResult(t[0]):t.length===0&&this.msgService.add({severity:"info",summary:"Sin resultados",detail:"No se encontraron ubicaciones para la b\xFAsqueda"})},error:t=>{console.error("Error en b\xFAsqueda:",t)}})}applyFilters(){}selectSearchResult(t){this.mapService.selectSearchResult(t)}clearLocationSearch(){this.searchLocation="",this.mapService.clearSearchMarker(),this.searchResults=[]}resetMapView(){this.mapService.resetMapView()}refreshData(){this.loading=!0,this.selectedUser=null,this.getAllUsers(),this.resetMapView()}clearFilters(){this.filterFrom=null,this.filterTo=null,this.selectedTimeUnit=null,this.timeValue=null,this.selectedVendor=null,this.selectedCustomer=null,this.customerOptions=[],this.geofenceEnabled=!1,this.selectedGeofence=[],this.pedidosEnabled=!1,this.collectionsEnabled=!1,this.clientesNone=!1,this.clientesAll=!1,this.clientesAssigned=!1,this.users.length>0&&(this.mapService.clearUserMarkers(),this.mapService.addUserMarkers(this.users),this.mapService.resetMapView()),this.msgService.add({severity:"info",summary:"Filtros limpiados",detail:"Todos los filtros han sido reiniciados"})}exportToExcel(){}static \u0275fac=function(e){return new(e||o)(I(De),I(V),I(Pe),I(hi))};static \u0275cmp=H({type:o,selectors:[["app-item-detail"]],viewQuery:function(e,i){if(e&1&&Z(vo,5),e&2){let n;z(n=$())&&(i.mapContainer=n.first)}},features:[$e([Pe])],decls:54,vars:10,consts:[["selectedItem",""],["item",""],["mapContainer",""],["dt1",""],["caption",""],["header",""],["body",""],["emptymessage",""],["loadingbody",""],[1,"card"],[1,"flex","flex-col","gap-8","w-full"],[1,"flex","items-center","gap-2","min-w-0"],[1,"w-12","h-12","flex","items-center","justify-center","rounded-xl","bg-gradient-to-br","from-primary-100","via-primary-200/60","to-primary-300/40","dark:from-primary-900/50","dark:via-primary-800/70","dark:to-primary-700/50","border","border-primary-200/60","dark:border-primary-600/40","shadow-lg"],[1,"pi","pi-file-o","text-primary-600","dark:text-primary-300","text-xl"],[1,"min-w-0"],[1,"text-gray-800","dark:text-white","text-xl","sm:text-2xl","font-bold","leading-snug","tracking-tight"],[1,"text-gray-500","dark:text-gray-400","text-xs","sm:text-sm","leading-snug",2,"margin-top","-15px"],[1,"bg-surface-50/50","dark:bg-surface-900/50","backdrop-blur-sm","rounded-xl","border","border-surface-200/50","dark:border-surface-700/50","p-6","space-y-8"],[1,"w-full"],[1,"bg-surface-0/80","dark:bg-surface-900/80","border","border-surface-200","dark:border-surface-700","rounded-lg","p-4"],["value","0",1,"shadow-sm"],[1,"flex","items-center","gap-2","min-w-0","mb-4"],[1,"w-10","h-10","flex","items-center","justify-center","rounded-xl","bg-gradient-to-br","from-blue-100","via-blue-200/60","to-blue-300/40","dark:from-blue-900/50","dark:via-blue-800/70","dark:to-blue-700/50","border","border-blue-200/60","dark:border-blue-600/40","shadow-lg"],[1,"pi","pi-map","text-blue-600","dark:text-blue-300","text-sm"],[1,"text-gray-800","dark:text-white","text-lg","font-bold","leading-snug","tracking-tight"],[1,"text-gray-500","dark:text-gray-400","text-xs","leading-snug",2,"margin-top","-10px"],[1,"flex","flex-col","sm:flex-row","gap-2","mb-4"],[1,"flex-1","min-w-0"],["iconPosition","left",1,"w-full"],[1,"pi","pi-map-marker"],["pInputText","","type","text","placeholder","Buscar ubicaci\xF3n (ej: Quito, Ecuador)",1,"w-full","text-sm",3,"ngModelChange","keyup.enter","ngModel"],[1,"flex","gap-2","flex-shrink-0"],["icon","pi pi-search","severity","primary","size","small","pTooltip","Buscar ubicaci\xF3n","tooltipPosition","bottom",3,"click","loading"],["icon","pi pi-times","severity","secondary","size","small","pTooltip","Limpiar b\xFAsqueda","tooltipPosition","bottom",3,"click","text"],[1,"bg-surface-50","dark:bg-surface-800","rounded-lg","p-3","mb-4"],[1,"relative","overflow-hidden"],[1,"w-full","bg-surface-100","dark:bg-surface-800","rounded-lg","animate-pulse",2,"min-height","400px"],[1,"flex","items-center","justify-between","mb-4"],[1,"w-10","h-10","flex","items-center","justify-center","rounded-xl","bg-gradient-to-br","from-emerald-100","via-emerald-200/60","to-emerald-300/40","dark:from-emerald-900/50","dark:via-emerald-800/70","dark:to-emerald-700/50","border","border-emerald-200/60","dark:border-emerald-600/40","shadow-lg"],[1,"pi","pi-table","text-emerald-600","dark:text-emerald-300","text-sm"],[1,"flex","items-center","gap-2"],[1,"w-2","h-2","rounded-full",3,"ngClass"],[1,"text-xs","font-medium","text-surface-600","dark:text-surface-300"],[1,"bg-surface-0","dark:bg-surface-900","rounded-lg","shadow-sm","border","border-surface-200","dark:border-surface-700"],[1,"p-4","space-y-4"],["dataKey","id","responsiveLayout","scroll","styleClass","p-datatable-sm",3,"value","rows","loading","rowHover","showGridlines","paginator","globalFilterFields"],[1,"flex","items-center","gap-3","mb-4"],[1,"w-8","h-8","bg-surface-200","dark:bg-surface-700","rounded-lg","animate-pulse"],[1,"flex-1"],[1,"h-4","bg-surface-200","dark:bg-surface-700","rounded","animate-pulse","mb-1"],[1,"h-3","bg-surface-100","dark:bg-surface-800","rounded","animate-pulse","w-24"],[1,"space-y-4"],[1,"h-10","bg-surface-100","dark:bg-surface-800","rounded","animate-pulse"],[1,"h-32","bg-surface-100","dark:bg-surface-800","rounded","animate-pulse"],["value","0"],[1,"flex","align-items-center","gap-2","w-full"],[1,"w-10","h-10","flex","items-center","justify-center","rounded-xl","bg-gradient-to-br","from-primary-100","via-primary-200/60","to-primary-300/40","dark:from-primary-900/50","dark:via-primary-800/70","dark:to-primary-700/50","border","border-primary-200/60","dark:border-primary-600/40","shadow-lg"],[1,"pi","pi-filter","text-primary-600","dark:text-primary-300","text-sm"],[1,"text-gray-800","dark:text-white","font-bold","text-sm"],[1,"text-xs","text-gray-500","dark:text-gray-400","ml-2"],[1,"p-0","space-y-5"],[1,"flex","align-items-center","gap-2","mb-3"],[1,"w-8","h-8","flex","items-center","justify-center","rounded-lg","bg-gradient-to-br","from-blue-100","via-blue-200/60","to-blue-300/40","dark:from-blue-900/50","dark:via-blue-800/70","dark:to-blue-700/50","border","border-blue-200/60","dark:border-blue-600/40","shadow-sm"],[1,"pi","pi-clock","text-blue-600","dark:text-blue-300","text-sm"],[1,"font-medium","text-gray-700","dark:text-gray-200","mt-1","text-sm"],[1,"flex-1","border-bottom-1","border-surface-200","dark:border-surface-700"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-3"],[1,"block","text-xs","font-medium","text-surface-600","dark:text-surface-300","mb-1"],["placeholder","Fecha y hora inicial",1,"w-full",3,"ngModelChange","ngModel","showTime","hourFormat"],["placeholder","Fecha y hora final",1,"w-full",3,"ngModelChange","ngModel","showTime","hourFormat"],[1,"w-8","h-8","flex","items-center","justify-center","rounded-lg","bg-gradient-to-br","from-green-100","via-green-200/60","to-green-300/40","dark:from-green-900/50","dark:via-green-800/70","dark:to-green-700/50","border","border-green-200/60","dark:border-green-600/40","shadow-sm"],[1,"pi","pi-filter","text-green-600","dark:text-green-300","text-sm"],[1,"pi","pi-user","text-blue-500","mr-1"],["optionLabel","label","optionValue","value","filterBy","label","placeholder","Seleccionar vendedor...",1,"w-full",3,"ngModelChange","onChange","options","ngModel","filter","showClear","disabled"],[1,"mt-2","p-2","bg-blue-50","dark:bg-blue-900/20","rounded-lg","border","border-blue-200","dark:border-blue-800"],[1,"pi","pi-building","text-emerald-500","mr-1"],["optionLabel","label","optionValue","value","filterBy","label","placeholder","Seleccionar cliente...",1,"w-full",3,"ngModelChange","onChange","options","ngModel","filter","showClear","loading","disabled"],[1,"mt-2","p-2","bg-emerald-50","dark:bg-emerald-900/20","rounded-lg","border","border-emerald-200","dark:border-emerald-800"],[1,"w-8","h-8","flex","items-center","justify-center","rounded-lg","bg-gradient-to-br","from-emerald-100","via-emerald-200/60","to-emerald-300/40","dark:from-emerald-900/50","dark:via-emerald-800/70","dark:to-emerald-700/50","border","border-emerald-200/60","dark:border-emerald-600/40","shadow-sm"],[1,"pi","pi-database","text-emerald-600","dark:text-emerald-300","text-sm"],[1,"flex","gap-4","p-3","bg-surface-50","dark:bg-surface-800","border-round"],[1,"flex","align-items-center","gap-2"],["inputId","pedidos-filter",3,"ngModelChange","ngModel","binary"],["for","pedidos-filter",1,"text-sm","text-surface-700","dark:text-surface-300","cursor-pointer"],[1,"pi","pi-shopping-cart","mr-1"],["inputId","cobros-filter",3,"ngModelChange","ngModel","binary"],["for","cobros-filter",1,"text-sm","text-surface-700","dark:text-surface-300","cursor-pointer"],[1,"pi","pi-dollar","mr-1"],[1,"flex","justify-content-end","gap-2","pt-2"],["label","Limpiar","icon","pi pi-refresh","severity","secondary","size","small",3,"onClick","text"],["label","Aplicar","icon","pi pi-check","size","small",3,"onClick"],[1,"w-6","h-6","bg-gradient-to-br","from-blue-400","to-indigo-500","rounded-full","flex","items-center","justify-center"],[1,"pi","pi-user","text-white","text-xs"],[1,"flex","flex-col"],[1,"font-medium"],[1,"text-surface-500"],[1,"flex","items-center","gap-3","py-1"],[1,"w-8","h-8","bg-gradient-to-br","from-blue-400","to-indigo-500","rounded-full","flex","items-center","justify-center","flex-shrink-0"],[1,"pi","pi-user","text-white","text-sm"],[1,"font-medium","text-surface-900","dark:text-surface-0","truncate"],[1,"text-xs","text-surface-500","dark:text-surface-400","truncate"],[1,"flex-shrink-0"],["severity","secondary",1,"text-xs",3,"value"],[1,"flex","align-items-center","gap-2","text-xs","text-blue-700","dark:text-blue-300"],[1,"pi","pi-info-circle"],[1,"w-6","h-6","bg-gradient-to-br","from-emerald-400","to-green-500","rounded-full","flex","items-center","justify-center"],[1,"pi","pi-building","text-white","text-xs"],[1,"w-8","h-8","bg-gradient-to-br","from-emerald-400","to-green-500","rounded-full","flex","items-center","justify-center","flex-shrink-0"],[1,"pi","pi-building","text-white","text-sm"],[1,"flex","align-items-center","gap-2","text-xs","text-emerald-700","dark:text-emerald-300"],[1,"text-xs","sm:text-sm","text-surface-600","dark:text-surface-400","mb-2"],[1,"space-y-1"],[1,"flex","items-center","justify-between","p-2","hover:bg-surface-100","dark:hover:bg-surface-700","rounded","cursor-pointer","transition-colors"],[1,"flex","items-center","justify-between","p-2","hover:bg-surface-100","dark:hover:bg-surface-700","rounded","cursor-pointer","transition-colors",3,"click"],[1,"flex","items-center","gap-2","min-w-0","flex-1"],[1,"pi","pi-map-marker","text-primary","text-sm","flex-shrink-0"],[1,"text-xs","sm:text-sm","text-surface-900","dark:text-surface-0","truncate"],[1,"pi","pi-arrow-right","text-surface-400","text-xs","flex-shrink-0","ml-2"],[1,"absolute","inset-0","flex","items-center","justify-center"],[1,"text-center","p-4"],[1,"w-12","h-12","bg-surface-200","dark:bg-surface-700","rounded-full","mx-auto","mb-3","animate-pulse"],[1,"h-4","bg-surface-200","dark:bg-surface-700","rounded","w-32","mx-auto","mb-2","animate-pulse"],[1,"h-3","bg-surface-100","dark:bg-surface-600","rounded","w-24","mx-auto","animate-pulse"],[1,"absolute","inset-0","flex","items-center","justify-center","bg-surface-100","dark:bg-surface-800","rounded-lg","z-10"],[1,"w-full","h-full","rounded-lg","shadow-sm","border","border-surface-200","dark:border-surface-700",2,"min-height","400px","height","100%","width","100%"],[1,"pi","pi-spin","pi-spinner","text-2xl","text-primary","mb-2"],[1,"text-sm","text-surface-600","dark:text-surface-400"],[1,"flex","justify-between","items-center"],[1,"h-8","bg-surface-200","dark:bg-surface-700","rounded","w-32","animate-pulse"],[1,"h-8","bg-surface-200","dark:bg-surface-700","rounded","w-48","animate-pulse"],[1,"grid","grid-cols-12","gap-2","p-3","border-b","border-surface-200","dark:border-surface-700"],[1,"h-4","bg-surface-200","dark:bg-surface-700","rounded","animate-pulse"],[1,"grid","grid-cols-12","gap-2","p-3","border-b","border-surface-100","dark:border-surface-800"],[1,"h-4","bg-surface-100","dark:bg-surface-800","rounded","animate-pulse"],[1,"flex","justify-between","items-center","flex-column","sm:flex-row","p-4","bg-surface-50","dark:bg-surface-800"],[1,"flex","gap-2","mb-2"],["label","Limpiar Filtros","icon","pi pi-filter-slash","size","small",1,"p-button-outlined",3,"onClick"],["label","Exportar Excel","icon","pi pi-file-excel","severity","success","size","small",3,"onClick"],["iconPosition","left",1,"ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar en todos los campos...",1,"text-sm",3,"input"],[2,"min-width","8rem"],[1,"font-semibold","text-xs"],["type","text","field","id","display","menu","placeholder","ID"],[2,"min-width","10rem"],["type","date","field","fecha","display","menu","placeholder","dd/mm/yyyy"],[2,"min-width","9rem"],["type","text","field","horaIngreso","display","menu","placeholder","HH:mm"],["type","text","field","horaSalida","display","menu","placeholder","HH:mm"],[2,"min-width","12rem"],["type","text","field","vendedor","display","menu","placeholder","Nombre"],[2,"min-width","14rem"],["type","text","field","ubicacion","display","menu","placeholder","Ubicaci\xF3n"],["type","text","field","numeroPedido","display","menu","placeholder","Pedido"],["type","text","field","numeroCobo","display","menu","placeholder","Cobro"],["type","text","field","cliente","display","menu","placeholder","Cliente"],[1,"text-center",2,"min-width","6rem"],[1,"text-right",2,"min-width","9rem"],["type","numeric","field","monto","display","menu","currency","USD"],[1,"hover:bg-surface-50","dark:hover:bg-surface-800","transition-colors"],[1,"font-mono","text-xs"],[1,"text-sm","font-medium"],[1,"text-sm","font-mono","text-blue-600","dark:text-blue-400"],[1,"text-sm","font-mono",3,"ngClass"],[1,"pi","pi-map-marker","text-red-500","text-sm"],[1,"text-sm"],[1,"text-sm","font-mono","text-center",3,"ngClass"],[1,"text-center"],[1,"flex","justify-center"],[1,"pi","pi-check","text-green-600","dark:text-green-400","text-lg","font-bold"],[1,"pi","pi-times","text-surface-300","dark:text-surface-600","text-sm"],[1,"text-right"],[1,"text-sm","font-semibold",3,"ngClass"],["colspan","12",1,"text-center","py-8"],[1,"flex","flex-col","items-center","gap-3"],[1,"pi","pi-search","text-4xl","text-surface-300","dark:text-surface-600"],[1,"text-surface-500","dark:text-surface-400","font-medium"],[1,"text-sm","text-surface-400","dark:text-surface-500"],[1,"flex","items-center","justify-center","gap-3"],[1,"pi","pi-spin","pi-spinner","text-xl","text-primary"],[1,"text-surface-600","dark:text-surface-400"]],template:function(e,i){e&1&&(r(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12),d(4,"i",13),a(),r(5,"div",14)(6,"p",15),l(7," Detalle del Registro "),a(),r(8,"p",16),l(9," An\xE1lisis geoespacial y temporal de vendedores "),a()()(),r(10,"div",17)(11,"div",18),f(12,bo,10,0,"div",19)(13,Ro,78,26,"p-accordion",20),a(),r(14,"div",18)(15,"div",21)(16,"div",22),d(17,"i",23),a(),r(18,"div",14)(19,"p",24),l(20," Mapa de Ubicaciones "),a(),r(21,"p",25),l(22," Visualizaci\xF3n geogr\xE1fica de vendedores "),a()()(),r(23,"div",26)(24,"div",27)(25,"p-iconField",28)(26,"p-inputIcon"),d(27,"i",29),a(),r(28,"input",30),O("ngModelChange",function(c){return y(i.searchLocation,c)||(i.searchLocation=c),c}),h("keyup.enter",function(){return i.searchLocationOnMap()}),a()()(),r(29,"div",31)(30,"p-button",32),h("click",function(){return i.searchLocationOnMap()}),a(),r(31,"p-button",33),h("click",function(){return i.clearLocationSearch()}),a()()(),f(32,Mo,6,0,"div",34),r(33,"div",35),f(34,wo,6,0,"div",36)(35,Uo,3,1),a()(),r(36,"div",18)(37,"div",37)(38,"div",37)(39,"div",11)(40,"div",38),d(41,"i",39),a(),r(42,"div",14)(43,"p",24),l(44," Registros de Vendedores "),a(),r(45,"p",25),l(46),a()()()(),r(47,"div",40),d(48,"div",41),r(49,"span",42),l(50),a()()(),r(51,"div",43),f(52,Vo,9,2,"div",44)(53,Qo,12,8,"p-table",45),a()()()()()),e&2&&(s(12),A(i.loadingFilters?12:13),s(16),L("ngModel",i.searchLocation),s(2),v("loading",i.searchingLocation),s(),v("text",!0),s(),A(i.searchResults.length>0?32:-1),s(2),A(i.loadingMap?34:35),s(12),x(" ",i.totalRecords," registros encontrados "),s(2),v("ngClass",i.loading?"bg-orange-500 animate-pulse":"bg-emerald-500"),s(2),x(" ",i.loading?"Actualizando":"Actualizado"," "),s(2),A(i.loadingTable?52:53))},dependencies:[fi,gi,K,Q,Y,W,Kt,qt,Wt,X,re,it,ni,te,ie,ee,pi,ui,ue,Qt,ve,Zt,Je],encapsulation:2})};var Qc=[{path:"documentation",component:si},{path:"crud",component:ct},{path:"empty",component:dt},{path:"geocercas",component:pt},{path:"vendedores",component:vi},{path:"geocercas-vendedores",component:ut},{path:"only-geocercas",component:ft},{path:"item-detail",component:At},{path:"**",redirectTo:"/notfound"}];export{Qc as default};
