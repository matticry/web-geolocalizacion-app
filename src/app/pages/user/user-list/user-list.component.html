<!-- Contenedor principal -->
<div class="flex flex-col min-h-screen p-2 sm:p-4 gap-2 sm:gap-4">
    <!-- Cuerpo principal: Panel izquierdo + derecho -->
    <div class="flex flex-1 flex-col lg:flex-row gap-2 sm:gap-4 overflow-hidden min-h-0">
        <!-- Panel Izquierdo - Lista de Usuarios -->
        <div class="w-full lg:w-1/3 flex flex-col">
            <p-card class="flex flex-col flex-1 overflow-hidden h-full">
                <!-- Header + Toolbar mejorados -->
                <div class="p-3 sm:p-4 bg-gradient-to-r from-surface-50 to-white dark:from-surface-900 dark:to-surface-800 rounded-lg">
                    <div class="flex items-center gap-3 mb-3">
                        <div class="w-10 h-10 flex items-center justify-center rounded-full bg-primary-100 dark:bg-primary-900 shadow-sm">
                            <i class="pi pi-users text-primary-600 dark:text-primary-300 text-xl"></i>
                        </div>
                        <div>
                            <h2 class="text-xl sm:text-2xl font-extrabold text-gray-800 dark:text-white tracking-tight">
                                Creación de Geocercas
                            </h2>
                            <p class="text-xs text-gray-500 dark:text-gray-400 mt-0.5">
                                Visualización y gestión de vendedores
                            </p>
                        </div>
                    </div>

                    <div class="relative mt-2">
                        <p-iconField iconPosition="left" class="w-full">
                            <p-inputIcon>
                                <i class="pi pi-search text-primary-400"></i>
                            </p-inputIcon>
                            <input
                                pInputText
                                type="text"
                                placeholder="Buscar vendedores..."
                                (input)="onSearch($event)"
                                class="w-full py-2.5 text-sm rounded-lg border-2 border-surface-200 hover:border-primary-200 focus:border-primary-500 transition-colors pl-9 shadow-sm dark:bg-surface-800 dark:border-surface-700 dark:hover:border-primary-700">
                        </p-iconField>
                        <button
                            class="absolute right-2 top-1/2 transform -translate-y-1/2 text-xs text-gray-400 hover:text-primary-500 transition-colors p-1 rounded-full hover:bg-gray-100 dark:hover:bg-surface-700"
                            title="Limpiar búsqueda">
                            <i class="pi pi-times"></i>
                        </button>
                    </div>
                </div>



                <!-- Lista de Usuarios con scroll -->
                <div class="flex-1 overflow-auto min-h-0">
                    <!-- Loading Skeleton -->
                    @if (loading) {
                        <div class="space-y-2 sm:space-y-3 px-1">
                            @for (item of [1, 2, 3, 4, 5]; track item) {
                                <div class="border rounded-lg p-3 sm:p-4">
                                    <div class="flex items-center space-x-3 sm:space-x-4">
                                        <p-skeleton
                                            shape="circle"
                                            size="2.5rem"
                                            class="sm:!w-12 sm:!h-12">
                                        </p-skeleton>
                                        <div class="flex-1 min-w-0">
                                            <p-skeleton height="1rem" class="mb-2"></p-skeleton>
                                            <p-skeleton height="0.8rem" width="70%"></p-skeleton>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    }
                    <!-- Lista Real de Usuarios -->
                    @if (!loading) {
                        <div class="space-y-1 sm:space-y-2 px-1">
                            @for (user of paginatedUsers; track user) {
                                <div
                                    class="border rounded-lg p-3 sm:p-4 hover:bg-surface-50 dark:hover:bg-surface-800 transition-colors cursor-pointer"
                                    [class.border-primary-500]="selectedUser?.usucodv === user.usucodv"
                                    [class.bg-primary-50]="selectedUser?.usucodv === user.usucodv"
                                    [class.dark:bg-primary-900]="selectedUser?.usucodv === user.usucodv"
                                    (click)="selectUser(user)">

                                    <div class="flex items-center space-x-3 sm:space-x-4">
                                        <!-- Avatar -->
                                        <div class="flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-primary-100 dark:bg-primary-900/30 flex-shrink-0">
                                            <i class="pi pi-user text-primary text-lg sm:text-xl"></i>
                                        </div>

                                        <!-- Info del Usuario -->
                                        <div class="flex-1 min-w-0">
                                            <h3 class="font-semibold text-sm sm:text-base text-surface-900 dark:text-surface-0 truncate">
                                                {{ user.usunombre }}
                                            </h3>
                                            <p class="text-xs sm:text-sm text-surface-600 dark:text-surface-400 truncate">
                                                {{ user.usucod }} • {{ user.usucodv }}
                                            </p>
                                            <div class="flex space-x-1">
                                                @if (user) {
                                                    <i class="pi pi-map-marker text-green-500 text-xs" title="Con ubicación"></i>
                                                }
                                            </div>
                                        </div>
                                        <!-- Flecha -->
                                        <i class="pi pi-chevron-right text-surface-400 flex-shrink-0"></i>
                                    </div>
                                </div>
                            }
                            <!-- Mensaje si no hay usuarios -->
                            @if (filteredUsers.length === 0) {
                                <div class="text-center py-6 sm:py-8">
                                    <i class="pi pi-users text-3xl sm:text-4xl text-surface-400 mb-3 sm:mb-4"></i>
                                    <p class="text-sm sm:text-base text-surface-600 dark:text-surface-400">
                                        No se encontraron usuarios
                                    </p>
                                </div>
                            }
                        </div>
                    }
                </div>

                <!-- Paginación -->
                <ng-template pTemplate="footer">
                    <div class="pt-3 sm:pt-4">
                        @if (!loading && filteredUsers.length > 0) {
                            <p-paginator
                                [rows]="itemsPerPage"
                                [totalRecords]="filteredUsers.length"
                                [first]="first"
                                (onPageChange)="onPageChange($event)"
                                [rowsPerPageOptions]="[5,10,20]"
                                class="text-sm relative">
                            </p-paginator>
                        }
                    </div>
                </ng-template>
            </p-card>
        </div>

        <!-- Panel Derecho - Mapa -->
        <div class="w-full lg:w-2/3 flex flex-col">
            <p-card class="flex flex-col flex-1 overflow-hidden h-full">
                <ng-template pTemplate="header">
                    <!-- Header Mejorado -->
                    <div class="flex flex-col gap-3 sm:gap-4 p-3 sm:p-4">
                        <!-- Título y botones -->
                        <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3">
                            <div class="flex items-center gap-3 min-w-0">
                                <div class="w-10 h-10 flex items-center justify-center rounded-full bg-primary-100 dark:bg-primary-900 shadow-sm">
                                    <i class="pi pi-map-marker text-primary-600 dark:text-primary-300 text-xl"></i>
                                </div>
                                <div class="min-w-0">
                                    <h2 class="text-xl sm:text-2xl font-extrabold text-gray-800 dark:text-white tracking-tight">
                                        Ubicaciones
                                    </h2>
                                    <p class="text-xs text-gray-500 dark:text-gray-400 mt-0.5">
                                        Mapa de geolocalización de usuarios
                                    </p>
                                </div>
                            </div>

                            <!-- Botones de acción -->
                            <div class="flex gap-2 flex-shrink-0 items-center">
                                <button class="flex items-center justify-center h-9 w-9 rounded-full bg-white dark:bg-surface-800 hover:bg-primary-50 dark:hover:bg-primary-900/30 shadow-sm border border-surface-200 dark:border-surface-700 transition-all duration-200"
                                        (click)="refreshData()"
                                        pTooltip="Restablecer vista"
                                        tooltipPosition="bottom">
                                    <i class="pi pi-refresh text-primary-500 dark:text-primary-400"></i>
                                </button>

                            </div>
                        </div>

                        <!-- Buscador de ubicaciones mejorado -->
                        <div class="flex flex-col sm:flex-row gap-2">
                            <div class="flex-1 min-w-0">
                                <p-iconField iconPosition="left" class="w-full">
                                    <p-inputIcon>
                                        <i class="pi pi-map-marker text-primary-400"></i>
                                    </p-inputIcon>
                                    <input
                                        pInputText
                                        type="text"
                                        placeholder="Buscar ubicación (ej: Quito, Ecuador)"
                                        [(ngModel)]="searchLocation"
                                        (keyup.enter)="searchLocationOnMap()"
                                        class="w-full py-2.5 text-sm rounded-lg border-2 border-surface-200 hover:border-primary-200 focus:border-primary-500 transition-colors pl-9 shadow-sm dark:bg-surface-800 dark:border-surface-700 dark:hover:border-primary-700"
                                        #locationInput>
                                </p-iconField>
                            </div>
                            <div class="flex gap-2 flex-shrink-0">
                                <p-button
                                    icon="pi pi-search"
                                    severity="primary"
                                    (click)="searchLocationOnMap()"
                                    [loading]="searchingLocation"
                                    pTooltip="Buscar ubicación"
                                    tooltipPosition="bottom">
                                </p-button>
                                <p-button
                                    icon="pi pi-times"
                                    severity="secondary"
                                    [text]="true"
                                    (click)="clearLocationSearch()"
                                    pTooltip="Limpiar búsqueda"
                                    tooltipPosition="bottom">
                                </p-button>
                            </div>
                        </div>

                        <!-- CONTROLES DE GEOCERCAS -->
                        @if (!creandoGeocerca) {
                            <div class="border-t pt-3">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm font-medium text-surface-700 dark:text-surface-300">Crear Geocerca</span>
                                    <p-button
                                        icon="pi pi-plus-circle"
                                        label="Nueva Geocerca"
                                        severity="success"
                                        size="small"
                                        (click)="iniciarCreacionGeocerca()"
                                        [disabled]="!selectedUser"
                                        pTooltip="Seleccione un usuario primero"
                                        tooltipPosition="bottom">
                                    </p-button>
                                </div>

                                @if (!selectedUser) {
                                    <div class="text-xs text-orange-600 dark:text-orange-400">
                                        ⚠️ Seleccione un usuario de la lista para crear una geocerca
                                    </div>
                                }
                            </div>
                        }
                        <!-- PANEL DE CREACIÓN DE GEOCERCAS MEJORADO -->
                        @if (creandoGeocerca) {
                            <div
                                class="p-4 rounded-lg bg-primary-50/70 dark:bg-primary-900/20 border border-primary-200 dark:border-primary-800 shadow-sm">
                                <div class="flex items-center justify-between mb-3">
                                    <div class="flex items-center gap-2">
                                        <i class="pi pi-map text-primary-600 dark:text-primary-400 text-lg"></i>
                                        <span class="font-medium text-primary-700 dark:text-primary-300">Creando Geocerca</span>
                                    </div>
                                    <p-button
                                        icon="pi pi-times"
                                        severity="danger"
                                        size="small"
                                        [text]="true"
                                        (click)="cancelarCreacionGeocerca()"
                                        pTooltip="Cancelar creación"
                                        tooltipPosition="bottom">
                                    </p-button>
                                </div>

                                <!-- Usuario seleccionado -->
                                <div class="mb-3 p-2 bg-surface-0 dark:bg-surface-800 rounded border">
                                    <div class="text-xs text-surface-600 dark:text-surface-400 mb-1">Usuario asignado:
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <i class="pi pi-user text-primary text-sm"></i>
                                        <span class="text-sm font-medium">{{ selectedUser?.usunombre }}</span>
                                        <span class="text-xs text-surface-500">({{ selectedUser?.usucod }})</span>
                                    </div>
                                </div>

                                <!-- Controles de geocerca en 3 columnas con Flexbox -->
                                <div class="flex flex-col md:flex-row gap-4 mb-3">
                                    <!-- Columna 1: Tipo de geocerca -->
                                    <div class="flex-1">
                                        <label
                                            class="block text-xs font-medium text-surface-700 dark:text-surface-300 mb-1">
                                            Tipo de Geocerca
                                        </label>
                                        <p-select
                                            [(ngModel)]="tipoGeocerca"
                                            [options]="tiposGeocerca"
                                            optionLabel="label"
                                            optionValue="value"
                                            (onChange)="onTipoGeocercaChange()"
                                            class="w-full">
                                            <ng-template pTemplate="item" let-option>
                                                <div class="flex items-center gap-2">
                                                    <i [class]="option.icon"></i>
                                                    <span>{{ option.label }}</span>
                                                </div>
                                            </ng-template>
                                        </p-select>
                                    </div>

                                    <!-- Columna 2: Radio para círculo -->
                                    @if (tipoGeocerca === 'circular') {
                                        <div class="flex-1">
                                            <label
                                                class="block text-xs font-medium text-surface-700 dark:text-surface-300 mb-2">
                                                Radio: {{ radioGeocerca }} metros
                                            </label>
                                            <p-slider
                                                [(ngModel)]="radioGeocerca"
                                                (onSlideEnd)="actualizarRadioCirculo()"
                                                [min]="50"
                                                [max]="2000"
                                                [step]="10"
                                                class="w-full">
                                            </p-slider>
                                            <div class="flex justify-between text-xs text-surface-500 mt-1">
                                                <span>50m</span>
                                                <span>2000m</span>
                                            </div>
                                        </div>
                                    }

                                    <!-- Columna 3: Estado del polígono -->
                                    @if (tipoGeocerca === 'poligono' && coordenadasGeocerca.length > 0) {
                                        <div class="flex-1">
                                            <div class="flex items-center justify-between">
                                                <div class="text-xs text-surface-600 dark:text-surface-400">
                                                    Puntos agregados: {{ coordenadasGeocerca.length }}
                                                    @if (coordenadasGeocerca.length >= 3) {
                                                        <span class="text-green-600 dark:text-green-400 ml-2">
                                                            ✓ Listo para continuar
                                                        </span>
                                                    }
                                                </div>
                                                <p-button
                                                    icon="pi pi-undo"
                                                    severity="secondary"
                                                    size="small"
                                                    [text]="true"
                                                    (click)="deshacerUltimoPunto()"
                                                    pTooltip="Deshacer último punto"
                                                    tooltipPosition="bottom">
                                                </p-button>
                                            </div>
                                        </div>
                                    }
                                </div>

                                <!-- Instrucciones -->
                                <div
                                    class="mb-3 p-2 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800">
                                    <div class="text-xs text-blue-700 dark:text-blue-300">
                                        <i class="pi pi-info-circle mr-1"></i>
                                        @if (tipoGeocerca === 'circular') {
                                            <span>
                                                <strong>Círculo:</strong> Haga clic en el mapa para colocar el centro, luego ajuste el radio con el slider
                                            </span>
                                        }
                                        @if (tipoGeocerca === 'poligono') {
                                            <span>
                                                <strong>Polígono:</strong> Haga clic en el mapa para agregar puntos numerados (mínimo 3).
                                                Use <i class="pi pi-undo"></i> para deshacer el último punto.
                                            </span>
                                        }
                                    </div>
                                </div>

                                <!-- Botones de acción -->
                                <div class="flex gap-2">
                                    <p-button
                                        label="Limpiar"
                                        icon="pi pi-refresh"
                                        severity="secondary"
                                        size="small"
                                        [text]="true"
                                        (click)="limpiarDibujo()">
                                    </p-button>
                                    <p-button
                                        label="Continuar"
                                        icon="pi pi-arrow-right"
                                        severity="primary"
                                        size="small"
                                        (click)="abrirDialogoGeocerca()"
                                        [disabled]="!centroGeocerca || (tipoGeocerca === 'poligono' && coordenadasGeocerca.length < 3)">
                                    </p-button>
                                </div>
                            </div>
                        }

                        <!-- Resultados de búsqueda -->
                        @if (searchResults.length > 0) {
                            <div class="bg-surface-50 dark:bg-surface-800 rounded-lg p-3">
                                <div class="text-sm text-surface-600 dark:text-surface-400 mb-2">
                                    Resultados de búsqueda:
                                </div>
                                <div class="space-y-1">
                                    @for (result of searchResults.slice(0, 3); track result.place_id) {
                                        <div
                                            class="flex items-center justify-between p-2 hover:bg-surface-100 dark:hover:bg-surface-700 rounded cursor-pointer transition-colors"
                                            (click)="selectSearchResult(result)">
                                            <div class="flex items-center gap-2 min-w-0 flex-1">
                                                <i class="pi pi-map-marker text-primary text-sm flex-shrink-0"></i>
                                                <span class="text-sm text-surface-900 dark:text-surface-0 truncate">{{ result.display_name }}</span>
                                            </div>
                                            <i class="pi pi-arrow-right text-surface-400 text-xs flex-shrink-0"></i>
                                        </div>
                                    }
                                </div>
                            </div>
                        }
                    </div>
                </ng-template>

                <!-- Contenedor del Mapa -->
                <div class="flex-1 relative overflow-hidden min-h-0">
                    <!-- Loading del mapa -->
                    @if (!map) {
                        <div class="absolute inset-0 flex items-center justify-center bg-surface-100 dark:bg-surface-800 rounded-lg z-10">
                            <div class="text-center">
                                <i class="pi pi-spin pi-spinner text-2xl text-primary mb-2"></i>
                                <p class="text-surface-600 dark:text-surface-400">Cargando mapa...</p>
                            </div>
                        </div>
                    }
                    <!-- Mapa de Leaflett -->
                    <div #mapContainer
                         class="w-full h-full rounded-lg"
                         style="min-height: 700px; height: 100%; width: 100%;">
                    </div>
                </div>
            </p-card>
        </div>
    </div>
</div>
<!-- Dialog para completar datos de Geocerca -->
<p-dialog
    [(visible)]="geocercaDialog"
    [style]="{ width: '600px' }"
    header="Completar datos de la Geocerca"
    [modal]="true"
    class="p-fluid">

    <ng-template pTemplate="content">
        <form [formGroup]="geocercaForm" class="space-y-4">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">

                <!-- Código de Geocerca -->
                <div>
                    <label for="geoccod" class="block text-sm font-medium text-surface-700 dark:text-surface-300 mb-1">
                        Código de la Geocerca *
                    </label>

                    <div class="relative">
                        <input
                            maxlength="5"
                            id="geoccod"
                            pInputText
                            formControlName="geoccod"
                            placeholder="Ej: GEO001"
                            [class]="getCodeInputClass()"
                            class="w-full" />

                        <!-- Icono de estado -->
                        <div class="absolute inset-y-0 right-0 flex items-center pr-3">
                            @if (validatingCode) {
                                <i class="pi pi-spin pi-spinner text-primary-500"></i>
                            }

                            @if (codeValidationResult === 'valid') {
                                <i class="pi pi-check-circle text-green-500"></i>
                            }

                            @if (codeValidationResult === 'invalid') {
                                <i class="pi pi-times-circle text-red-500"></i>
                            }
                        </div>
                    </div>

                    <!-- Mensaje de validación mejorado -->
                    <div class="mt-1 min-h-[20px]">
                        @if (validatingCode) {
                            <p class="text-xs text-surface-500 flex items-center gap-1">
                                <i class="pi pi-spin pi-spinner"></i>
                                Validando código...
                            </p>
                        }

                        @if (codeValidationMessage && !validatingCode) {
                            <p [class]="getValidationMessageClass()">
                                @if (codeValidationResult === 'valid') {
                                    <i class="pi pi-check mr-1"></i>
                                }
                                @if (codeValidationResult === 'invalid') {
                                    <i class="pi pi-exclamation-triangle mr-1"></i>
                                }
                                {{ codeValidationMessage }}
                            </p>
                        }
                    </div>
                </div>

                <!-- Nombre -->
                <div>
                    <label for="geocnom" class="block text-sm font-medium text-surface-700 dark:text-surface-300 mb-1">
                        Nombre de la Geocerca *
                    </label>
                    <input
                        id="geocnom"
                        pInputText
                        formControlName="geocnom"
                        placeholder="Ej: Zona Norte"
                        class="w-full">
                </div>

                <!-- Provincia -->
                <div>
                    <label for="geocprov" class="block text-sm font-medium text-surface-700 dark:text-surface-300 mb-1">
                        Provincia *
                    </label>
                    <p-autocomplete
                        inputId="geocprov"
                        formControlName="geocprov"
                        [suggestions]="provinciasFiltradas"
                        optionLabel="provincia"
                        placeholder="Buscar provincia..."
                        (completeMethod)="filtrarProvincias($event)"
                        (onSelect)="onProvinciaSeleccionada($event)"
                        (onClear)="onProvinciaLimpiada()"
                        [dropdown]="true"
                        class="w-full">
                    </p-autocomplete>
                </div>

                <!-- Ciudad -->
                <div>
                    <label for="geocciud" class="block text-sm font-medium text-surface-700 dark:text-surface-300 mb-1">
                        Ciudad *
                    </label>
                    <p-autocomplete
                        inputId="geocciud"
                        formControlName="geocciud"
                        [suggestions]="ciudadesFiltradas"
                        optionLabel="canton"
                        placeholder="Buscar ciudad/cantón..."
                        (completeMethod)="filtrarCiudades($event)"
                        (onSelect)="onCiudadSeleccionada($event)"
                        (onClear)="onCiudadLimpiada()"
                        [dropdown]="true"
                        [disabled]="!provinciaSeleccionada"
                        class="w-full">
                    </p-autocomplete>
                </div>

                <!-- Sector -->
                <div>
                    <label for="geocsec" class="block text-sm font-medium text-surface-700 dark:text-surface-300 mb-1">
                        Sector *
                    </label>
                    <p-autocomplete
                        inputId="geocsec"
                        formControlName="geocsec"
                        [suggestions]="sectoresFiltrados"
                        optionLabel="parroquia"
                        placeholder="Buscar sector/parroquia..."
                        (completeMethod)="filtrarSectores($event)"
                        [dropdown]="true"
                        [disabled]="!ciudadSeleccionada"
                        class="w-full">
                    </p-autocomplete>
                </div>
                <!-- Dirección de referencia -->
                <div class="md:col-span-2">
                    <label for="geocdirre" class="block text-sm font-medium text-surface-700 dark:text-surface-300 mb-1">
                        Dirección de Referencia *
                    </label>
                    <input
                        id="geocdirre"
                        pInputText
                        formControlName="geocdirre"
                        placeholder="Ej: Av. Principal y Calle 10"
                        class="w-full">
                </div>

                <!-- País -->
                <div>
                    <label for="geocpais" class="block text-sm font-medium text-surface-700 dark:text-surface-300 mb-1">
                        País *
                    </label>
                    <input
                        readonly
                        id="geocpais"
                        pInputText
                        formControlName="geocpais"
                        value="ECUADOR"
                        class="w-full">
                </div>

                <!-- Prioridad -->
                <div>
                    <div class="flex items-center justify-between mb-1">
                        <label for="geocpri" class="text-sm font-medium text-surface-700 dark:text-surface-300">
                            Prioridad (1-10) *
                        </label>
                        <span class="px-2 py-1 text-sm font-bold text-primary-600 bg-primary-50 rounded">
                            {{ geocercaForm.get('geocpri')?.value || 1 }}
                        </span>
                    </div>
                    <p-slider
                        id="geocpri"
                        formControlName="geocpri"
                        [min]="1"
                        [max]="10"
                        [step]="1"
                        class="w-full">
                    </p-slider>
                    <div class="flex justify-between text-xs text-surface-500 mt-1">
                        <span>Baja</span>
                        <span>Alta</span>
                    </div>
                </div>

                <!-- Estado activo -->
                <div class="flex items-center gap-2 mt-6">
                    <p-toggleSwitch
                        formControlName="geocact"
                        inputId="geocact">
                    </p-toggleSwitch>
                    <label for="geocact" class="text-sm font-medium text-surface-700 dark:text-surface-300">
                        Geocerca activa
                    </label>
                </div>

                <!-- Descripción -->
                <div class="md:col-span-2">
                    <label for="geocdesc" class="block text-sm font-medium text-surface-700 dark:text-surface-300 mb-1">
                        Descripción *
                    </label>
                    <textarea
                        id="geocdesc"
                        pInputTextarea
                        formControlName="geocdesc"
                        placeholder="Descripción detallada de la geocerca"
                        rows="3"
                        class="w-full">
                    </textarea>
                </div>
            </div>

            <!-- Resumen de la geocerca -->
            <div class="mt-4 p-3 bg-surface-50 dark:bg-surface-800 rounded border">
                <h4 class="text-sm font-medium text-surface-700 dark:text-surface-300 mb-2">Resumen de la Geocerca</h4>
                <div class="grid grid-cols-2 gap-2 text-xs">
                    <div>
                        <span class="text-surface-600 dark:text-surface-400">Tipo:</span>
                        <span class="ml-2 font-medium">{{ tipoGeocerca === 'circular' ? 'Circular' : 'Polígono' }}</span>
                    </div>
                    <div>
                        <span class="text-surface-600 dark:text-surface-400">Puntos:</span>
                        <span class="ml-2 font-medium">{{ coordenadasGeocerca.length }}</span>
                    </div>
                    <div>
                        <span class="text-surface-600 dark:text-surface-400">Centro:</span>
                        <span class="ml-2 font-medium">{{ centroGeocerca?.lat?.toFixed(6) || 'N/A' }}, {{ centroGeocerca?.lng?.toFixed(6) || 'N/A' }}</span>
                    </div>
                    <div>
                        <span class="text-surface-600 dark:text-surface-400">Usuario:</span>
                        <span class="ml-2 font-medium">{{ selectedUser?.usunombre }}</span>
                    </div>
                </div>
            </div>
        </form>
    </ng-template>

    <ng-template pTemplate="footer">
        <div class="flex justify-end gap-2">
            <p-button
                label="Cancelar"
                icon="pi pi-times"
                severity="secondary"
                [text]="true"
                (click)="cerrarDialogoGeocerca()">
            </p-button>
            <p-button
                label="Crear Geocerca"
                icon="pi pi-check"
                severity="primary"
                (click)="guardarGeocerca()">
            </p-button>
        </div>
    </ng-template>
</p-dialog>


